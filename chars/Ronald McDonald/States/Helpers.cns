;--------------------------------------------------------------------------------------
;Pal Select
[Statedef 256]
physics = N
anim = 9999
velset=0,0
sprpriority=99999
 
[State 256, PosSet]
type = PosSet
trigger1 =!time 
x = root,facing*-90
y = 20
ignorehitpause = 1

[State 256, Image]
type=Explod
trigger1=!NumExplod(256)
anim=256
sprPriority=99999
posType=p1
pos=0,0
scale=0.5, 0.5
pauseMoveTime=-1
superMoveTime=-1
ownPal=1
ontop=1
bindtime=-1
removetime=-1
id=256

[State 256, AS]
type=assertspecial
trigger1=1
flag=intro
flag2=noshadow
[State 256, Reset]
type=varset
trigger1=!time
var(29)=200
[State 256, Pal]
type=varset
trigger1=!time&&(root,var(39)||root,var(40)>=2||root,palno<=6)
var(26)=root,palno
[State 256, Pal]
type=varset
trigger1=!time&&root,var(39)=0&&root,var(40)<2&&root,palno>6
var(26)=root,palno - 6

[State 256, Countdown]
type = VarAdd
trigger1 =1 
var(29)=-1
[State 256, Countdown]
type = VarSet
trigger1=!var(10)&&var(29)>0&&var(29)<100
trigger1=root,command="holdup"||root,command="holddown"||root,command="holdback"||root,command="holdfwd"
var(29)=100

[State 256, Varadd]
type=varadd
trigger1=!var(10)
trigger1=root,command="holdup"||root,command="holddown"||root,command="holdback"||root,command="holdfwd"
var(26)=1-(root,command="holddown"||root,command="holdback"&&facing=1||root,command="holdfwd"&&facing=-1)*2

[State 256, Varset]
type=varset
trigger1=var(26)<1||var(26)>16
var(26)=1+(var(26)<1)*15

[State 256, Varadd]
type=varadd
trigger1=(root,command="holdup"||root,command="holddown"||root,command="holdback"||root,command="holdfwd")&&!var(10)||var(10)
var(10)=1

[State 256, Varset]
type=varset
trigger1=!time||var(10)>=17
var(10)=0

[State 256, PlaySnd]
type = PlaySnd
trigger1 =var(10)=2 
value = S256,0
volumescale = 75
channel = 20

[State 256, PlaySnd]
type = PlaySnd
triggerall=ishelper(256)
trigger1=root,command="a"||root,command="b"||root,command="c"||root,command="x"||root,command="y"||root,command="z"||root,command="s"||roundstate=2
trigger2=var(29)<=0
value = S256,1
volumescale = 75
channel = 20
persistent =0 

[State 256, Remove Explods]
type = RemoveExplod
triggerall=ishelper(256)
trigger1=root,command="a"||root,command="b"||root,command="c"||root,command="x"||root,command="y"||root,command="z"||root,command="s"||roundstate=2
trigger2=var(29)<=0
trigger3=root,AILevel
id = 256

[State 256, End]
type=destroyself
triggerall=ishelper(256)
trigger1=root,command="a"||root,command="b"||root,command="c"||root,command="x"||root,command="y"||root,command="z"||root,command="s"||roundstate=2
trigger2=var(29)<=0
trigger3=root,AILevel
;--------------------------------------------------------------------------------------
;Mode Select
[Statedef 257]
physics = N
anim = 9999
velset=0,0
sprpriority=99999
 
[State 257, PosSet]
type = PosSet
trigger1 =!time 
x = root,facing*-90
y = 3
ignorehitpause = 1

[State 257, Image(Normal)]
type=Explod
trigger1=parent,var(40)<1&&!Time
trigger2=!NumExplod(257)&&Time>0
anim=257
sprPriority=99999
posType=p1
pos=0,0
scale=0.5, 0.5
pauseMoveTime=-1
superMoveTime=-1
ownPal=1
ontop=1
bindtime=-1
removetime=-1
id=257
[State 257, Image(EX)]
type=Explod
trigger1=parent,var(40)>0&&!Time
trigger2=!NumExplod(258)&&Time>0
anim=258
sprPriority=99999
posType=p1
pos=0,0
scale=0.5, 0.5
pauseMoveTime=-1
superMoveTime=-1
ownPal=1
ontop=1
bindtime=-1
removetime=-1
id=258

[State 257, AS]
type=assertspecial
trigger1=1
flag=intro
flag2=noshadow
[State 257, Reset]
type=varset
trigger1=!time
var(29)=200
[State 257, Reset]
type=varset
trigger1=!time
var(11)=parent,var(40)
[State 257, Reset]
type=parentvarset
trigger1=!time
var(54)=var(11)

[State 257, Varset]
type=varset
trigger1 =var(10)=1
var(11)=Ifelse(var(11)=0,1,0)
[State 257, ChangeAnim]
type = null;ChangeAnim
trigger1 =var(10)=1
value = Ifelse(anim=257,258,257)

[State 257, Countdown]
type = VarAdd
trigger1 =1 
var(29)=-1
[State 257, Countdown]
type = VarSet
trigger1=!var(10)&&var(29)>0&&var(29)<100
trigger1=root,command="holdup"||root,command="holddown"||root,command="holdback"||root,command="holdfwd"
var(29)=100

[State 257, Varadd]
type=varadd
trigger1=(root,command="holdup"||root,command="holddown"||root,command="holdback"||root,command="holdfwd")&&!var(10)||var(10)
var(10)=1

[State 257, Varset]
type=varset
trigger1=!time||var(10)>=17
var(10)=0

[State 257, PlaySnd]
type = PlaySnd
trigger1 =var(10)=2 
value = S257,0
volumescale = 62
channel = 25

[State 257, PlaySnd]
type = PlaySnd
trigger1=root,command="a"||root,command="b"||root,command="c"||root,command="x"||root,command="y"||root,command="z"||root,command="s"||roundstate=2
trigger2=var(29)<=0
value = S257,1
volumescale = 100
channel = 25
persistent =0 
[State 257, StopSnd]
type = StopSnd
trigger1=root,command="a"||root,command="b"||root,command="c"||root,command="x"||root,command="y"||root,command="z"||root,command="s"||roundstate=2
trigger2=var(29)<=0
channel = 20
persistent =0 

[State 257, Remove Explods]
type = RemoveExplod
trigger1=root,command="a"||root,command="b"||root,command="c"||root,command="x"||root,command="y"||root,command="z"||root,command="s"||roundstate=2
trigger2=var(29)<=0
trigger3=root,AILevel
trigger4=var(11)>0
id = 257
[State 257, Remove Explods]
type = RemoveExplod
trigger1=root,command="a"||root,command="b"||root,command="c"||root,command="x"||root,command="y"||root,command="z"||root,command="s"||roundstate=2
trigger2=var(29)<=0
trigger3=root,AILevel
trigger4=var(11)<1
id = 258

[State 257, Change]
type=changestate
trigger1=root,command="a"||root,command="b"||root,command="c"||root,command="x"||root,command="y"||root,command="z"||root,command="s"||roundstate=2
trigger2=var(29)<=0
trigger3=root,AILevel
value=258
;---------------------------------------------------------------------------
;Empty
[Statedef 258]
physics = N
velset = 0,0
ctrl = 0
anim = 9999

[State 258, Reset]
type=parentvarset
trigger1=!time
var(39)=2

[State 258, Remove Explods]
type = RemoveExplod
trigger1=1
id = 257
[State 258, Remove Explods]
type = RemoveExplod
trigger1=1
id = 258

[State 258, End]
type=destroyself
trigger1=Time>0
;---------------------------------------------------------------------
;Hamburger
[Statedef 1005]
type=S
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=5

[State 1005, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1006
ignorehitpause=1
[State 1005, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1005, Strength]
type=varset
trigger1=!time&&!prevstateno
var(10)=root, var(10)

[State 1005, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1005

[State 1005, movecontactvar]
type=varset
trigger1=movecontact
var(4)=1
ignorehitpause=1

[State 1005, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1005, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
[State 1005, Varset]
type=Varset
trigger1 =!time&&!prevstateno
var(12)=Ifelse(parent,stateno=1130,3,Ifelse(parent,stateno=1100,2,Ifelse(parent,stateno=1030,1,0)))

[State 1005, Vel]
type=velset
trigger1=!var(12)&&!time
x=Ifelse(var(10)=3,6,Ifelse(var(10)=2,1.5,Ifelse(var(10)=1,5,5)))
y=Ifelse(var(10)=3,-4,Ifelse(var(10)=2,-5,Ifelse(var(10)=1,-6,-4)))
[State 1005, Vel(EX)]
type=velset
trigger1=var(12)=1&&!time
x=Ifelse(var(10)=3,7,Ifelse(var(10)=2,5.5,Ifelse(var(10)=1,4,2.5)))
y=Ifelse(var(10)=3,-4,Ifelse(var(10)=2,-4.5,Ifelse(var(10)=1,-5,-5)))
[State 1005, Vel(Air)]
type=velset
trigger1=var(12)=2&&!time
x=Ifelse(var(10)=2,4.5,Ifelse(var(10)=1,3.75,2.5))
y=Ifelse(var(10)=2,-2.5,Ifelse(var(10)=1,-2.25,-2))
[State 1005, Vel(EX Air)]
type=velset
trigger1=var(12)=3&&!time
x=Ifelse(var(10)=5,6,Ifelse(var(10)=4,4,Ifelse(var(10)=3,6,Ifelse(var(10)=2,2,Ifelse(var(10)=1,4,2)))))
y=-4
[State 1005, VelAdd]
type=veladd
trigger1=1
y=.35
[State 1005, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 1005, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=ifelse((var(12)=1||var(12)=3),75,100)
channel=2
ignorehitpause=1

[State 1005, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1005, High]
type=hitdef
trigger1=!var(12)
priority=4, Hit
attr=S, SP
damage=floor(Ifelse(root,var(20),60,Ifelse(var(10)=3,70,Ifelse(var(10)=2,20,76+6*var(10))))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12;/((root,var(20)>0)+1)
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
guardsound=-1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=Ifelse(root,var(20),-5,-10),0
ground.cornerpush.veloff=Ifelse(root,var(20),0,-5)
air.velocity=Ifelse(root,var(20),-2,-4), -4
air.fall=1
fall.recover = 1
fall.recoverTime = 22 + ifElse(root,var(20)>0, 6, 12)
getpower=Ifelse(var(10)=2,0,ifelse(p2movetype=H,72,144)*!(root,var(20))),Ifelse(var(10)=2,0,36*!(root,var(20)))
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=5
yaccel=.5
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-4,-8),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1005

[State 1005, High]
type=hitdef
trigger1=var(12)=1
priority=4, Hit
attr=S, SP
damage=floor(Ifelse(root,var(20),60,Ifelse((var(10)=[0,1]),7,Ifelse((var(10)=[0,1]),7,46)))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12;/((root,var(20)>0)+1)
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=Ifelse(root,var(20),-5,-10),0
ground.cornerpush.veloff=Ifelse(root,var(20),0,-5)
air.velocity=Ifelse(root,var(20),-2,-4), -4
air.fall=1
fall.recover = 1
fall.recoverTime = 22 + ifElse(root,var(20)>0, 6, 12)
getpower=0, 0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=5
yaccel=.5
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-4,-8),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1005

[State 1005, High]
type=hitdef
trigger1=var(12)=2
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),60,Ifelse(var(10)=3,40,Ifelse(var(10)=3,40,76+6*var(10))))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12;/((root,var(20)>0)+1)
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=Ifelse(root,var(20),-5,-10),0
ground.cornerpush.veloff=Ifelse(root,var(20),0,-5)
air.velocity=Ifelse(root,var(20),-2,-4), -4
air.fall=1
fall.recover = 1
fall.recoverTime = 22 + ifElse(root,var(20)>0, 6, 12)
getpower=Ifelse(var(10)=3,0,ifelse(p2movetype=H,72,144)*!(root,var(20))),Ifelse(var(10)=3,0,36*!(root,var(20)))
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=5
yaccel=.5
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-4,-8),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1005

[State 1005, High]
type=hitdef
trigger1=var(12)=3
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),60,Ifelse((var(10)=[2,3]),25,Ifelse((var(10)=[2,3]),25,50)))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12;/((root,var(20)>0)+1)
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=Ifelse(root,var(20),-5,-10),0
ground.cornerpush.veloff=Ifelse(root,var(20),0,-5)
air.velocity=Ifelse(root,var(20),-2,-4), -4
air.fall=1
fall.recover = 1
fall.recoverTime = 22 + ifElse(root,var(20)>0, 6, 12)
getpower=0, 0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=5
yaccel=.5
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-4,-8),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1005

[State 1005, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < -16, -16, ifElse(P2Dist x < 16, ceil(P2Dist x), 16)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1005, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < -16, -16, ifElse(P2Dist x < 16, ceil(P2Dist x), 16)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1005, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignorehitpause=1
persistent=0
[State 1005, Projhit]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(47)=1
ignorehitpause=1
persistent=0
[State 1005, Juggle Points]
type=ParentVarAdd
trigger1=MoveContact=1 && NumTarget
var(15)=1
ignorehitpause=1
persistent=0
[State 1005, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignorehitpause=1
persistent=0
[State 1005, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1000,1130]
var(18)=1
ignorehitpause=1
persistent=0

[State 1005, End]
type=changestate
trigger1=movecontact
value=1006
ignorehitpause=1
[State 1005, End]
type = changestate
trigger1 = pos y >= 0
value = 1006
ignorehitpause = 1
[State 1005, End]
type=destroyself
trigger1=FrontEdgeDist <= -60
;------------------------------------------------------------------
[Statedef 1006]
type=A
physics=N
movetype=I
anim=ifelse(!var(4),1008,1009)
velset=0, 0
ctrl=0
sprpriority=4

[State 1006, Fall Sound]
type = playsnd
trigger1 = !time && !var(4)
value = 3805,1
volumescale = ifelse((var(12)=1||var(12)=3),75,100)
ignorehitpause = 1

[State 1006, Vel]
type=velset
trigger1=!time
x=-2 + 4 * (!var(4))
y=-3
[State 1006, VelAdd]
type=veladd
trigger1=1
y=.25

[State 1006, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 1006, NotHitBy]
type=NotHitBy
trigger1 =1
value=SCA
ignorehitpause =1

[State 1006, End]
type=changestate
trigger1=!animtime
value=1007

;Wait
[StateDef 1007]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 1007, End]
type = DestroySelf
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, Time <= 1 && !(Target,HitShakeOver)
;---------------------------------------------------------------------------
;Donacide Cutter Slash FX
[Statedef 1210]
type=A
physics=N
movetype=I
anim=9999
velset=0,0
ctrl=0
sprpriority=3

[State 1210, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause=1

[State 1210, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 1210, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
pos = 0,0
ignorehitpause =  1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root, AnimElemTime(4) < 0
value = 1210
ignorehitpause = 1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root, AnimElemTime(5) < 0 && Root,AnimElemTime(4) >= 0
value = 1211
ignorehitpause = 1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root, AnimElemTime(6) < 1 && Root,AnimElemTime(5) >= 0
value = 1212
ignorehitpause = 1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root, AnimElemTime(7) < 0 && Root,AnimElemTime(6) >= 1
value = 1213
ignorehitpause = 1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root, AnimElemTime(7) < 2 && Root,AnimElemTime(7) >= 0
value = 1214
ignorehitpause = 1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root, AnimElemTime(7) < 4 && Root,AnimElemTime(7) >= 2
value = 1215
ignorehitpause = 1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root, AnimElemTime(7) < 6 && Root,AnimElemTime(7) >= 4
value = 1216
ignorehitpause = 1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root, AnimElemTime(7) < 8 && Root,AnimElemTime(7) >= 6
value = 1217
ignorehitpause = 1

[State 1210, ChangeAnim]
type = ChangeAnim
trigger1 = Root,AnimElemTime(7) >= 8
value = 9999
ignorehitpause = 1

[State 1210, End]
type=destroyself
trigger1= Root, AnimElemTime(7) >= 8
trigger2= Root, StateNo != 1200 && Root, StateNo != 1250 && Root, StateNo != 3202 && Root, StateNo != 3252 && Root, StateNo != 3602 && Root, StateNo != 3652
trigger3 = Root, MoveType = H
;---------------------------------------------------------------------
;Potato
[Statedef 1305]
type=S
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=5

[State 1305, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1306
ignorehitpause=1
[State 1305, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1305, Strength]
type=varset
trigger1=!time&&!prevstateno
var(10)=root, var(10)
[State 1305, Strength]
type=varset
trigger1=!time&&!prevstateno
var(12)=root, var(12)

[State 1305, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1305+var(12)

[State 1305, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1305, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
[State 1305, Varset]
type=Varset
trigger1 =!time
var(12)=Ifelse(parent,stateno=1130,3,Ifelse(parent,stateno=1100,2,Ifelse(parent,stateno=1030,1,0)))

[State 1305, Vel]
type=velset
trigger1=!var(12)&&!time
x=Ifelse(var(10)=3,2.5,Ifelse(var(10)=2,2,Ifelse(var(10)=1,1.5,1)))
y=Ifelse(var(10)=3,-1,Ifelse(var(10)=2,-1.5,Ifelse(var(10)=1,-1,-.5)))
[State 1305, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 1305, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=62
channel=2
ignorehitpause=1

[State 1305, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1305, High]
type=hitdef
trigger1=1
priority=4, Hit
attr=S, SP
damage=ceil(Ifelse(root,var(20),8,Ifelse(var(10)=3,15,Ifelse(var(10)=3,15,15)))*root,fvar(10)),2
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,16;/((root,var(20)>0)+1)
guard.pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
guardsound=-1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=Ifelse(root,var(20),-2.5,-5),0
ground.cornerpush.veloff=Ifelse(root,var(20),0,-3.75)
air.velocity=Ifelse(root,var(20),-2,-4), -4
air.fall=1
fall.recover = 1
fall.recoverTime = 22 + ifElse(root,var(20)>0, 6, 12)
getpower=Ifelse(var(10)=3,0,ifelse(p2movetype=H,15,30)*!(root,var(20))),Ifelse(var(10)=3,0,9*!(root,var(20)))
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=5
yaccel=.5
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-3,-6),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1305

[State 1305, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < -20, -20, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1305, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < -20, -20, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1305, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignorehitpause=1
persistent=0
[State 1305, Projhit]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(47)=1
ignorehitpause=1
persistent=0
[State 1305, Juggle Points]
type=ParentVarAdd
trigger1=MoveContact=1 && NumTarget
var(15)=1
ignorehitpause=1
persistent=0
[State 1305, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignorehitpause=1
persistent=0
[State 1305, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1300,1330]
var(18)=1
ignorehitpause=1
persistent=0

[State 1305, End]
type=changestate
trigger1=movecontact
value=1306
ignorehitpause=1
[State 1305, End]
type = changestate
trigger1 = time>=50
value = 1306
ignorehitpause = 1
[State 1305, End]
type=destroyself
trigger1=FrontEdgeDist <= -60;pos x != [ -220, 220]
;------------------------------------------------------------------
[Statedef 1306]
type=A
physics=N
movetype=I
anim=1309
velset=0, 0
ctrl=0
sprpriority=4

[State 1306, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 1306, NotHitBy]
type=NotHitBy
trigger1 =1
value=SCA
ignorehitpause =1

[State 1306, End]
type=changestate
trigger1=!animtime
value=1307

;Wait
[StateDef 1307]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 1307, End]
type = DestroySelf
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, Time <= 1 && !(Target,HitShakeOver)
;-------------------------------------------------------------------------
;Apple in Hand
[Statedef 1404]
physics = N
velset=0,0
anim=Ifelse(root,stateno=3301,3305,1404)
sprpriority=3

[State 1404, BindToRoot]
type = null;BindToRoot
trigger1 =root,animelemtime(2)<0
pos = ceil(-6*const(size.xscale)),ceil(-36*const(size.yscale))
ignorehitpause =1
[State 1404, BindToRoot]
type = BindToRoot
trigger1 =root,animelemtime(2)<0
pos = ceil(-6*.5),ceil(-36*.5)
ignorehitpause =1
[State 1404, BindToRoot]
type = BindToRoot
trigger1 =root,animelemtime(2)>=0&&root,animelemtime(3)<0
pos = ceil(-16*.5),ceil(-180*.5)
ignorehitpause =1
[State 1404, BindToRoot]
type = BindToRoot
trigger1 =root,animelemtime(3)>=0&&root,animelemtime(4)<0
pos = ceil(-6*.5),ceil(-36*.5)
ignorehitpause =1
[State 1404, BindToRoot]
type = BindToRoot
trigger1 =root,animelemtime(4)>=0
pos = ceil(154*.5),ceil(-114*.5)
ignorehitpause =1

[State 1404, SprPriority]
type = SprPriority
trigger1 = root,animelemtime(2)>=0&&root,animelemtime(3)<0
value = -1
ignorehitpause = 1
[State 1404, SprPriority]
type = SprPriority
trigger1 = root,animelemtime(3)>=0&&root,animelemtime(4)<0
value = 3
ignorehitpause = 1
[State 1404, SprPriority]
type = null;SprPriority
trigger1 = root,animelemtime(4)>=0
value = -1
ignorehitpause = 1

[State 1404, AngleDraw]
type = AngleDraw
trigger1 =root,animelemtime(2)<0
value = -15
ignorehitpause =1
[State 1404, AngleDraw]
type = AngleDraw
trigger1 =root,animelemtime(2)>=0&&root,animelemtime(3)<0
value = -30
ignorehitpause =1
[State 1404, AngleDraw]
type = AngleDraw
trigger1 =root,animelemtime(3)>=0&&root,animelemtime(4)<0
value = -15
ignorehitpause =1
[State 1404, AngleDraw]
type = AngleDraw
trigger1 =root,animelemtime(4)>=0
value = 0
ignorehitpause =1

[State 1404, DestroySelf]
type = DestroySelf
trigger1=root,Movetype=H
trigger2=root,stateno!=1400&&root,stateno!=1425&&root,stateno!=3301
trigger3=root,animelemtime(4)>0
trigger4=root,time<1
;---------------------------------------------------------------------
;Apple
[Statedef 1405]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1405, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1406
ignorehitpause=1
[State 1405, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1405, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1405
[State 1405, anglevarset]
type=varset
trigger1=!time&&!prevstateno
var(21)=-5
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1405, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1405, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1405, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1405, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1

[State 1405, Varset]
type=VarSet
trigger1 =!time
var(10)=root,var(10)
ignorehitpause=1
[State 1409, Varset]
type=Varset
trigger1 =!time&&var(10)=3
var(11)=1
[State 1405, Vel]
type=velset
trigger1=!time
x=Ifelse(var(10)=3,5,2+2*var(10))
y=-3
[State 1405, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1405, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1405, Proj]
type=hitdef
;triggerall= (root,fvar(8)<4 || root,var(20))
trigger1=!var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,90+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1405, Proj]
type=hitdef
;triggerall= (root,fvar(8)<5 || root,var(20))
trigger1=var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,90+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1405, flames]
type = helper
trigger1 = movehit && numtarget && !numhelper(7180)
trigger1 = !(target, time) && (target, movetype = H)&&(enemynear,stateno=[5000,5050])
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 1405, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1405, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1405, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1405, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1405, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1405, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1400,1475]
var(18)=1
ignoreHitPause=1

[State 1405, Change]
type=changestate
trigger1=movecontact
value=1406
ignorehitpause=1
[State 1405, change]
type=changestate
trigger1 = pos y > -vel y - 8
value=1407
[State 1405, Change]
type=changestate
trigger1 = frontedgedist<=-20||backedgedist<=-20
value=1410
;------------------------------------------------------------------
[Statedef 1406]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=5

[State 1406, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause =1

[State 1406, AngleDraw]
type = AngleDraw
trigger1 = prevstateno != 1408
value = var(21)
ignorehitpause =1

[State 1406, AngleDraw]
type = AngleDraw
trigger1 = prevstateno = 1408
trigger1 = anim != 1406 && anim != 1408
value = ifelse((var(21)=[46,180]),90,ifelse((var(21)=[136,315]),270,0))
ignorehitpause = 1

[State 1406, PlaySnd]
type = PlaySnd
trigger1 =!time&&anim!=1408
value = 1406,0
channel = 16

[State 1406, ChangeAnim]
type = ChangeAnim
trigger1 =!time&&anim!=1408
value = 1406

[State 1406, AngleDraw]
type = AngleDraw
trigger1 = anim = 1406 || anim = 1408
value = 0

[State 1406, NotHitBy]
type=NotHitBy
trigger1 =1
value=SCA
ignorehitpause =1
[State 1406, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noshadow
ignorehitpause =1
[State 1406, End]
type=changestate
trigger1=!animtime
value=1417
;---------------------------------------------------------------------
;Apple Bounce
[Statedef 1407]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1407, PosSet]
type = PosSet
trigger1 =!time
y = -8
[State 1407, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16

[State 1407, VarSet]
type = VarSet
trigger1 =!time
fvar(6)= Ifelse((random<=50),0,Ifelse((random=[0,450]),90,-90))
ignorehitpause =1

[State 1407, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1406
ignorehitpause=1
[State 1407, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1407, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1407, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1407, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1407, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1

[State 1407, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1407, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1

[State 1407, Vel]
type=velset
trigger1=time=1
x=2
y=-4
[State 1407, VelAdd]
type = VelAdd
trigger1=time>1
y =.35

[State 1407, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1407, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1407, Proj]
type=hitdef
;triggerall= (root,fvar(8)<4 || root,var(20))
trigger1=!var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,86+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1407, Proj]
type=hitdef
;triggerall= (root,fvar(8)<5 || root,var(20))
trigger1=var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,86+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1407, flames]
type = helper
trigger1 = movehit && numtarget && !numhelper(7180)
trigger1 = !(target, time) && (target, movetype = H)&&(enemynear,stateno=[5000,5050])
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 1407, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1407, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1407, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1407, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1407, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1407, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1400,1475]
var(18)=1
ignoreHitPause=1

[State 1407, End]
type=changestate
trigger1=movecontact
value=1406
ignorehitpause=1
[State 1407, End]
type=changestate
trigger1 = var(8)>=3 && pos y > -vel y -8
value=1408
[State 1407, change]
type=changestate
trigger1 = pos y > -vel y -8
value=1407
[State 1407, Change]
type=changestate
trigger1 = frontedgedist<=-20||backedgedist<=-20
value=1410
;---------------------------------------------------------------------
;Apple Bounce
[Statedef 1408]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1408, ChangeAnim]
type = ChangeAnim
trigger1 =time=25
value =1408
ignorehitpause =0
persistent =0

[State 1408, PosSet]
type = PosSet
trigger1 =!time
y = -8
[State 1408, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16

[State 1408, AngleDraw]
type = AngleDraw
trigger1 =anim!=1408
value = ifelse((var(21)=[46,180]),90,ifelse((var(21)=[136,315]),270,0))
ignorehitpause =1

[State 1408, PlaySnd]
type = PlaySnd
trigger1 =time=25
value = 1406,0
channel =16
[State 1408, AngleDraw]
type = AngleDraw
trigger1 =anim=1408
value =0
ignorehitpause =1
[State 1408, AssertSpecial]
type = AssertSpecial
trigger1 =anim=1408
flag = noshadow
ignorehitpause =1
[State 1408, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1406
ignorehitpause=1
[State 1408, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1
[State 1408, Trans]
type = Trans
trigger1 =anim=1408
trans = add
ignorehitpause =1
[State 1408, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1408, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1

[State 1408, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1408, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1408, Proj]
type=hitdef
;triggerall= (root,fvar(8)<4 || root,var(20))
trigger1=!var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,86+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1408, Proj]
type=hitdef
;triggerall= (root,fvar(8)<5 || root,var(20))
trigger1=var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,86+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1408, flames]
type = helper
trigger1 = movehit && numtarget && !numhelper(7180)
trigger1 = !(target, time) && (target, movetype = H)&&(enemynear,stateno=[5000,5050])
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 1408, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
postype = p1
pos = ifElse(P2Dist x < -45, -45, ifElse(P2Dist x < 45, ceil(P2Dist x), 45)), ifElse(P2Dist y + pos y < -51, -51, ifElse(P2Dist y + pos y < 51, ceil(P2Dist y + pos y), 51))
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1408, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < -45, -45, ifElse(P2Dist x < 45, ceil(P2Dist x), 45)), ifElse(P2Dist y + pos y < -51, -51, ifElse(P2Dist y + pos y < 51, ceil(P2Dist y + pos y), 51))
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1408, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1408, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1408, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1408, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1400,1475]
var(18)=1
ignoreHitPause=1

[State 1408, Change]
type=changestate
trigger1=movecontact
value=1406
ignorehitpause=1
[State 1408, End]
type=changestate
trigger1=!animtime
value=1417
;---------------------------------------------------------------------
;Apple
[Statedef 1409]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1409, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1406
ignorehitpause=1
[State 1409, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1409, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1405
[State 1409, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1409, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1409, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1409, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1409, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1409, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1
[State 1405, Varset]
type=VarSet
trigger1 =!time
var(10)=3
ignorehitpause=1
[State 1409, Varset]
type=Varset
trigger1 =!time
var(11)=1
[State 1409, Vel]
type=velset
trigger1=!time
x=4
y=-3
[State 1409, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1409, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1409, Proj]
type=hitdef
;triggerall= (root,fvar(8)<4 || root,var(20))
trigger1=1
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,90+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1409, flames]
type = helper
trigger1 = movehit && numtarget && !numhelper(7180)
trigger1 = !(target, time) && (target, movetype = H)&&(enemynear,stateno=[5000,5050])
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 1409, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1409, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1409, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1409, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1409, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1409, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1400,1475]
var(18)=1
ignoreHitPause=1

[State 1409, Change]
type=changestate
trigger1=movecontact
value=1406
ignorehitpause=1
[State 1409, change]
type=changestate
trigger1 = pos y > -vel y -8
value=1407
[State 1409, Change]
type=changestate
trigger1 = frontedgedist<=-20||backedgedist<=-20
value=1410
;---------------------------------------------------------------------
;Apple
[Statedef 1410]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1410, Turn]
type = Turn
trigger1 =!time
ignorehitpause =1

[State 1410, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16
[State 1410, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1406
ignorehitpause=1
[State 1410, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1410, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1405
[State 1410, anglevaradd]
type=varset
trigger1=!time
var(21)=(var(21) * -1) - 24
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1410, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1410, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1410, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1410, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1
[State 1410, Varset]
type=VarSet
trigger1 =!time
var(10)=root,var(10)
ignorehitpause=1
[State 1410, Varset]
type=Varset
trigger1 =!time&&var(10)=3
var(11)=1
[State 1410, Vel]
type=velset
trigger1=!time
x=4
y=-3
[State 1410, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1505, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1410, Proj]
type=hitdef
;triggerall= (root,fvar(8)<4 || root,var(20))
trigger1=!var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,90+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1410, Proj]
type=hitdef
;triggerall= (root,fvar(8)<5 || root,var(20))
trigger1=var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),45,Ifelse(var(10)=3,60,90+6*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1405

[State 1410, flames]
type = helper
trigger1 = movehit && numtarget && !numhelper(7180)
trigger1 = !(target, time) && (target, movetype = H)&&(enemynear,stateno=[5000,5050])
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 1410, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1410, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1410, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1410, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1410, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1410, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1400,1475]
var(18)=1
ignoreHitPause=1

[State 1410, End]
type=changestate
trigger1=movecontact
value=1406
ignorehitpause=1
[State 1410, End]
type=changestate
trigger1 = var(8)>=3 && pos y > -vel y - 8
value=1408
ignorehitpause=1
[State 1410, End]
type=changestate
trigger1 = pos y > -vel y -8
value=1407

;Wait
[StateDef 1417]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 1417, End]
type = DestroySelf
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, Time <= 1 && !(Target,HitShakeOver)
;---------------------------------------------------------------------
;Shake
[Statedef 1705]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1405, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1706
ignorehitpause=1
[State 1405, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1405, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1705+ifelse((root,stateno=1725),0,random%2)
[State 1405, anglevarset]
type=varset
trigger1=!time&&!prevstateno
var(21)=5
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=time
var(21)=12
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1405, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1405, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1405, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1405, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1

[State 1405, Varset]
type=VarSet
trigger1 =!time
var(10)=root,var(10)
ignorehitpause=1
[State 1409, Varset]
type=Varset
trigger1 =!time&&var(10)=3
var(11)=1
[State 1405, Vel]
type=velset
trigger1=!time
x=Ifelse(var(10)=3,2,1+0.5*var(10))
y=-11
[State 1405, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1405, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1405, Proj]
type=hitdef
;triggerall= (root,fvar(8)<4 || root,var(20))
trigger1=!var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),10,Ifelse(var(10)=3,10,10))*root,fvar(10)),5
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=15
ground.hittime=15
guard.hittime=13
ground.velocity=0,0
air.velocity=0,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
air.fall=0
yaccel=.35
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-1,-2),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1705

[State 1405, Proj]
type=hitdef
;triggerall= (root,fvar(8)<5 || root,var(20))
trigger1=var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),10,Ifelse(var(10)=3,10,10))*root,fvar(10)),5
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=15
ground.hittime=15
guard.hittime=13
ground.velocity=0,0
air.velocity=0,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
air.fall=0
yaccel=.35
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-1,-2),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1705

[State 1405, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1405, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1405, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1405, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1405, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1405, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1700,1775]
var(18)=1
ignoreHitPause=1

[State 1405, Change]
type=changestate
trigger1=movecontact
value=1711
ignorehitpause=1
[State 1405, change]
type=changestate
trigger1 = pos y > -vel y
value=1708
[State 1405, Change]
type=changestate
trigger1 = frontedgedist<=-20||backedgedist<=-20
value=1710
;------------------------------------------------------------------
[Statedef 1706]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=5

[State 1406, Trans]
type = Trans
trigger1 =anim=1408
trans = add
ignorehitpause =1

[State 1406, PlaySnd]
type = PlaySnd
trigger1 =!time&&anim!=1408
value = 1406,0
channel =16
[State 1406, ChangeAnim]
type = ChangeAnim
trigger1 =!time&&anim!=1408
value = 1406
persistent=0

[State 1406, AngleDraw]
type = AngleDraw
trigger1 = anim = 1406 || anim = 1408
value = 0

[State 1406, NotHitBy]
type=NotHitBy
trigger1 =1
value=SCA
ignorehitpause =1
[State 1406, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noshadow
ignorehitpause =1
[State 1406, End]
type=changestate
trigger1=!animtime
value=1717
;---------------------------------------------------------------------
;Shake Explosion
[Statedef 1708]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1408, ChangeAnim]
type = ChangeAnim
trigger1 =!time
value =1408
persistent =0

[State 1408, PosSet]
type = PosSet
trigger1 =!time
y = 0
[State 1408, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16

[State 1408, AngleDraw]
type = AngleDraw
trigger1 =anim!=1408
value = fvar(6)
ignorehitpause =1

[State 1408, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1406,0
channel =16
[State 1408, AngleDraw]
type = AngleDraw
trigger1 =anim=1408
value =0
ignorehitpause =1
[State 1408, AssertSpecial]
type = AssertSpecial
trigger1 =1
flag = noshadow
ignorehitpause =1
[State 1408, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1706
ignorehitpause=1
[State 1408, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1
[State 1408, Trans]
type = Trans
trigger1 =anim=1408
trans = add
ignorehitpause =1
[State 1408, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1408, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1

[State 1408, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1408, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1408, Proj]
type=hitdef
;triggerall= (root,fvar(8)<4 || root,var(20))
trigger1=!var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),35,Ifelse(var(10)=3,40,66+0*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1705

[State 1408, Proj]
type=hitdef
;triggerall= (root,fvar(8)<5 || root,var(20))
trigger1=var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),35,Ifelse(var(10)=3,40,66+0*var(10)))*root,fvar(10)),10
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=-4,-6
air.velocity=-4,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 45
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=1705

[State 1408, flames]
type = helper
trigger1 = movehit && numtarget && !numhelper(7180)
trigger1 = !(target, time) && (target, movetype = H)&&(enemynear,stateno=[5000,5050])
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 1408, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
postype = p1
pos = ifElse(P2Dist x < -45, -45, ifElse(P2Dist x < 45, ceil(P2Dist x), 45)), ifElse(P2Dist y + pos y < -51, -51, ifElse(P2Dist y + pos y < 51, ceil(P2Dist y + pos y), 51))
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1408, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < -45, -45, ifElse(P2Dist x < 45, ceil(P2Dist x), 45)), ifElse(P2Dist y + pos y < -51, -51, ifElse(P2Dist y + pos y < 51, ceil(P2Dist y + pos y), 51))
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1408, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1408, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1408, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1408, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1700,1775]
var(18)=1
ignoreHitPause=1

[State 1408, Change]
type=changestate
trigger1=movecontact
value=1706
ignorehitpause=1
[State 1408, End]
type=destroyself
trigger1=!animtime
;---------------------------------------------------------------------
;Shake
[Statedef 1709]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1409, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1706
ignorehitpause=1
[State 1409, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1409, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1706
[State 1409, anglevarset]
type=varset
trigger1=!time&&!prevstateno
var(21)=5
ignorehitpause=1
[State 1409, anglevaradd]
type=varadd
trigger1=time
var(21)=12
ignorehitpause=1
[State 1409, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1409, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1409, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1409, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1409, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1409, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1
[State 1405, Varset]
type=VarSet
trigger1 =!time
var(10)=3
ignorehitpause=1
[State 1409, Varset]
type=Varset
trigger1 =!time
var(11)=1
[State 1409, Vel]
type=velset
trigger1=!time
x=2
y=-9
[State 1409, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
persistent=0
ignorehitpause=1

[State 1409, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1409, Proj]
type=hitdef
;triggerall= (root,fvar(8)<5 || root,var(20))
trigger1=var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),10,Ifelse(var(10)=3,10,10))*root,fvar(10)),5
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=15
ground.hittime=15
guard.hittime=13
ground.velocity=0,0
air.velocity=0,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
air.fall=0
yaccel=.35
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-1,-2),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1705

[State 1409, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1409, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1409, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1409, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1409, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1409, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1700,1775]
var(18)=1
ignoreHitPause=1

[State 1409, Change]
type=changestate
trigger1=movecontact
value=1711
ignorehitpause=1
[State 1409, change]
type=changestate
trigger1 = pos y > -vel y
value=1708
[State 1409, Change]
type=changestate
trigger1 = frontedgedist<=-20||backedgedist<=-20
value=1710
;---------------------------------------------------------------------
;Shake Bounce
[Statedef 1710]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1410, Turn]
type = Turn
trigger1 =!time
ignorehitpause =1

[State 1410, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16
[State 1410, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1706
ignorehitpause=1
[State 1410, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1410, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1705
[State 1410, anglevarset]
type=varset
trigger1=!time
var(21)=(var(21) * -1)
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1410, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1410, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1410, Vel]
type=velset
trigger1=!time
x=2
y=-3

[State 1405, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
persistent=0
ignorehitpause=1

[State 1405, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 1405, Proj]
type=hitdef
;triggerall= (root,fvar(8)<4 || root,var(20))
trigger1=!var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),10,Ifelse(var(10)=3,10,10))*root,fvar(10)),5
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=15
ground.hittime=15
guard.hittime=13
ground.velocity=0,0
air.velocity=0,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
air.fall=0
yaccel=.35
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-1,-2),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1705

[State 1405, Proj]
type=hitdef
;triggerall= (root,fvar(8)<5 || root,var(20))
trigger1=var(11)
priority=4, Hit
attr=A, SP
damage=floor(Ifelse(root,var(20),10,Ifelse(var(10)=3,10,10))*root,fvar(10)),5
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=15
ground.hittime=15
guard.hittime=13
ground.velocity=0,0
air.velocity=0,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
air.fall=0
yaccel=.35
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-1,-2),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=1705

[State 1405, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1405, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1405, HitCount]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1405, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1405, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1405, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[1700,1775]
var(18)=1
ignoreHitPause=1

[State 1405, Change]
type=changestate
trigger1=movecontact
value=1711
ignorehitpause=1

[State 1410, End]
type=changestate
trigger1 = pos y > -vel y
value=1708
;---------------------------------------------------------------------
;Shake Hit
[Statedef 1711]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1411, ProjContact]
type=VarSet
trigger1=Time > 0 && RoundState>=3
var(18)=0
ignoreHitPause=1

[State 1410, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16
[State 1410, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=1706
ignorehitpause=1
[State 1410, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1410, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1705
[State 1410, anglevaradd]
type=varadd
trigger1=time
var(21)=12 * ifelse((prevstateno=1710), -1, 1)
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1410, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1410, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1410, Vel]
type=velset
trigger1=!time
x=0
y=-3

[State 1410, End]
type=changestate
trigger1 = pos y > -vel y
value=1708


;Wait
[StateDef 1717]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 1417, End]
type = DestroySelf
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, Time <= 1 && !(Target,HitShakeOver)
;---------------------------------------------------------------------------
;Donald Magic
[Statedef 3005]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 3005, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=3005
ignorehitpause=1
[State 3005, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 3005, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=3005

[State 3005, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 3005, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1

[State 3005, Varset]
type=Varset
trigger1 =1
var(12)=0
ignorehitpause=1
[State 3005, Varset]
type=Varset
trigger1 =enemy,movetype!=H
var(12)=1
ignorehitpause=1
[State 3005, Strength]
type=varset
trigger1=(Root,StateNo=[3000,3050])&&MoveType=A
var(12)=root, var(12)

[State 3005, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded, 130, 2), ifelse(moveguarded, 1, 6)
channel=2
abspan = Floor(Target, Pos X) * Facing
persistent=0
ignorehitpause=1
[State 3005, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3005, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 3005, hit]
type=hitdef
trigger1=var(12)
priority=4, Hit
ID=3005
attr=A, HP
damage=floor(125*root,fvar(10)),4
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=1,1
guard.pausetime=1,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
hitsound=-1
guardsound=-1
ground.type=High
ground.slidetime=2
ground.hittime=32
air.hittime=32
ground.velocity=-4,-3
guard.velocity=-5
air.velocity=-4,-0.5
airguard.velocity=-4,-1
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
air.fall=1
fall.recover=0
getpower=0,0
givepower=18,18
palFX.time=12
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
p1sprpriority=4
forcestand=1

[State 3005, hit]
type=hitdef
trigger1=!var(12)
priority=4, Hit
ID=3006
attr=A, HP
damage=floor(125*root,fvar(10)),4
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=1,1
guard.pausetime=1,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
hitsound=-1
guardsound=-1
ground.type=High
ground.slidetime=2
ground.hittime=32
air.hittime=32
ground.velocity=-4,-3
guard.velocity=-5
air.velocity=-4,-0.5
airguard.velocity=-4,-1
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
fall.recover=0
getpower=0,0
givepower=18,18
palFX.time=12
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
p1sprpriority=4
forcestand=1

[State 3005, TargetState]
type = TargetState
trigger1= movehit && numtarget(3005)
trigger1= target(3005),Movetype=H&& !(target, time)
value =3060
ID = 3005
ignorehitpause =1 
[State 3005, HitSpark]
type=Helper
trigger1= movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos= ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 609, ceil(P2Dist x), 609)), 0
ownpal = 1
facing = -1
ignorehitpause = 1
persistent=0
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535

[State 3005, Counter FX]
type=Helper
trigger1=MoveContact=1 && numtarget && var(9)
trigger1=!(Target, HitShakeOver)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 609, ceil(P2Dist x), 609)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 3005, HitCount]
type=null;ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignorehitpause = 1
persistent=0
[State 3005, Juggle Points]
type=ParentVarAdd
trigger1=MoveContact=1 && NumTarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 3005, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignorehitpause = 1
persistent=0
[State 3005, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=(Root,StateNo=[3000,3050])&&MoveType=A
var(18)=1
ignorehitpause = 1
persistent=0

[State 3005, DestroySelf]
type = DestroySelf
trigger1=!animtime
ignorehitpause =1
[State 3005, Change]
type=changestate
trigger1=movecontact
value=3006
ignorehitpause=1
[State 3005, Change]
type=changestate
trigger1=animelemtime(6)>=0
value=3006
ignorehitpause=1
;------------------------------------------------------------------
[Statedef 3006]
type=A
physics=N
movetype=I
ctrl=0
velset=0,0
sprpriority=4

[State 3006, NotHitBy]
type=NotHitBy
trigger1 =1
value=SCA
ignorehitpause =1
[State 3006, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3006, destroyself]
type = null;destroyself
trigger1=!animtime
ignorehitpause =1
[State 3006, ChangeState]
type = ChangeState
trigger1=!animtime
value=3007
ignorehitpause =1
;------------------------------------------------------------------
;Wait
[StateDef 3007]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 3007, End]
type = DestroySelf
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, Time <= 1 && !(Target,HitShakeOver)
;---------------------------------------------------------------------
;Hamburger(Super)
[Statedef 3105]
type=S
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=5

[State 3105, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=3106
ignorehitpause=1
[State 3105, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 3105, groundfall]
type=varset
triggerall=!time
trigger1=root,stateno=3100&&root,animelem=10,>=0
trigger2=root,stateno=3150&&root,animelem=16,>=0
var(1)=1
ignorehitpause=1

[State 3105, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1005

[State 3105, movecontactvar]
type=varset
trigger1=movecontact
var(4)=1
ignorehitpause=1

[State 3105, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 3105, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
[State 3105, Varset]
type=Varset
trigger1 =!time&&!prevstateno
var(12)=Ifelse(ishelper(3108),3,Ifelse(ishelper(3107),2,Ifelse(ishelper(3106),1,0)))

[State 3105, Vel]
type=velset
trigger1=!time
x=Ifelse(var(12)=3,8,Ifelse(var(12)=2,6,Ifelse(var(12)=1,4,2)))
y=10
[State 3105, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 3105, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=50
channel=2
ignorehitpause=1

[State 3105, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 3105, High]
type=hitdef
trigger1=1
priority=4, Hit
attr=A, HP
damage=floor(25*root,fvar(10)),2
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12;/((root,var(20)>0)+1)
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
guardsound=-1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=Ifelse(root,var(20),-2.5,-5),0
ground.cornerpush.veloff=Ifelse(root,var(20),0,-2.5)
air.velocity=Ifelse(root,var(20),-1.5,-3), -4
fall=var(1)
air.fall=1
fall.recover=0
getpower=0, 0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=5
yaccel=.5
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-4,-8),-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=3105

[State 3105, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < -16, -16, ifElse(P2Dist x < 16, ceil(P2Dist x), 16)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 3105, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < -16, -16, ifElse(P2Dist x < 16, ceil(P2Dist x), 16)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 3105, HitCount]
type=null;ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignorehitpause=1
persistent=0
[State 3105, Projhit]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(47)=1
ignorehitpause=1
persistent=0
[State 3105, Juggle Points]
type=ParentVarAdd
trigger1=MoveContact=1 && NumTarget
var(15)=1
ignorehitpause=1
persistent=0
[State 3105, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignorehitpause=1
persistent=0
[State 3105, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[3100,3150]
var(18)=1
ignorehitpause=1
persistent=0

[State 3105, End]
type=changestate
trigger1=movecontact
value=3106
ignorehitpause=1
[State 3105, End]
type = changestate
trigger1 = pos y >= 0
value = 3106
ignorehitpause = 1
[State 3105, End]
type=destroyself
trigger1=FrontEdgeDist <= -60
;------------------------------------------------------------------
[Statedef 3106]
type=A
physics=N
movetype=I
anim=ifelse(!var(4),1008,1009)
velset=0, 0
ctrl=0
sprpriority=4

[State 3106, Fall Sound]
type = playsnd
trigger1 = !time && !var(4)
value = 3805,1
volumescale = 50
ignorehitpause = 1

[State 3106, Vel]
type=velset
trigger1=!time
x=-2 + 4 * (!var(4))
y=-3
[State 3106, VelAdd]
type=veladd
trigger1=1
y=.25

[State 3106, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 3106, NotHitBy]
type=NotHitBy
trigger1 =1
value=SCA
ignorehitpause =1

[State 3106, End]
type=changestate
trigger1=!animtime
value=3107

;Wait
[StateDef 3107]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 3107, End]
type = DestroySelf
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, Time <= 1 && !(Target,HitShakeOver)
;---------------------------------------------------------------------
;Streak Fx
[Statedef 3206]
physics=N
anim=3206
ctrl=0
velset=-2-random%12, 0
sprpriority=-2+random%6

[State 3206, VarRandom]
type = VarRandom
trigger1 =!time
v =41
range = 0,8
ignorehitpause =1

[State 3206, Bind]
type = BindToRoot
trigger1 = !time
pos = ceil(-5-(Random % 10)*(Random % 12) * const(size.xScale)),-20-9*var(41)
ignorehitpause =1

[State 3206, AngleDraw]
type = AngleDraw
trigger1 =var(41)
scale = .5+Ifelse(var(41)>=6,.005,Ifelse((var(41)=[3,5]),.0025,Ifelse((var(41)=[1,2]),.001,.00125)))*(time),.5
ignorehitpause =1

[State 3206, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 3206, Assert]
type=trans
trigger1=1
trans=addalpha
alpha=256-16*time, 256
ignorehitpause=1

[State 3206, End]
type=destroyself
trigger1=root,Movetype=H
trigger2=time>=16
trigger3=root,stateno!=3200&&root,stateno!=3250&&root,stateno!=3701
trigger4=root,stateno=3200&&root,animelemtime(9)>=0
trigger5=root,stateno=3250&&root,animelemtime(9)>=0
trigger6=root,stateno=3701&&root,animelemtime(8)>=0
;---------------------------------------------------------------------
;Streak Fx
[Statedef 3207]
physics=N
anim=9999
ctrl=0
velset=0, 0
sprpriority=-2+random%6

[State 3207, End]
type=destroyself
trigger1=root,Movetype=H
trigger2=root,stateno!=3200&&root,stateno!=3250&&root,stateno!=3701
trigger3=root,stateno=3200&&root,animelemtime(14)>=0
trigger4=root,stateno=3250&&root,animelemtime(14)>=0
trigger5=root,stateno=3701&&root,animelemtime(13)>=0

[State 3207, VarRandom: Pos]
type = VarRandom
trigger1 = 1
v =41
range = 0,8
ignorehitpause =1

[State 3207, VarRandom: Scale]
type = VarRandom
trigger1 = 1
v =42
range = 0,10
ignorehitpause =1

[State 3207, Bind]
type = BindToRoot
trigger1 = 1
pos = ceil(-5-(Random % 10)*(Random % 12) * const(size.xScale)),-15-9*var(41)
ignorehitpause =1

[State 3207, Streak]
type = explod
trigger1 = !root,hitpausetime
anim = 3207
sprpriority = -2+random%6
postype = p1
pos = 0, 0
vel = -2-random%12, 0
scale = const(size.xScale) * (1 - (0.05 * var(42))), const(size.yScale) * (1 - (0.075 * var(42)))
pausemovetime = -1
supermovetime = -1
ownpal = 1
;---------------------------------------------------------------------
;Unhappy Meal - Under bread
[Statedef 3305]
type=A
physics=N
movetype=I
anim=3305
ctrl=0
velset=0, -10
sprpriority=-7

[State 3305, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3305, PosSet]
type = PosSet
trigger1 =time<12
x = 0

[State 3305, VelAdd]
type = VelAdd
trigger1 =pos y < -80
y = .55

[State 3305, VelSet]
type = VelSet
trigger1 =pos y >= -80
y = 0

[State 3305, PosSet]
type = PosSet
trigger1 =pos y >= -80
y = -50

[State 3305, EnvShake]
type = EnvShake
trigger1 = pos y= -50
time = 30
freq = 100
ampl = 10
persistent=0

[State 3305, Snd]
type = PlaySnd
trigger1 = pos y= -50
value = 3305,0
persistent=0

[State 3305, Dust]
type = Explod
trigger1 = pos y= -50
anim = 8105
sprPriority = -10
posType = P1
pos = 0,40
bindTime = -1
scale = 1.25,1.25
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1
persistent = 0

[State 3305, Next]
type=changestate
trigger1=root,stateno=3301&&root,animelemtime(7) = 40
value=3315

[State 3305, End]
type=destroyself
trigger1=root,stateno!=3301
;---------------------------------------------------------------------
;Unhappy Meal - Patti
[Statedef 3306]
type=A
physics=N
movetype=I
anim=3306
ctrl=0
velset=0, -10
sprpriority=-6

[State 3306, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3305, PosSet]
type = PosSet
trigger1 =time<12
x = 0

[State 3305, VelAdd]
type = VelAdd
trigger1 =pos y < -120
y = .55

[State 3306, VelSet]
type = VelSet
trigger1 =pos y >= -120
y = 0

[State 3306, PosSet]
type = PosSet
trigger1 =pos y >= -120
y = -90

[State 3306, Next]
type=changestate
trigger1=root,stateno=3301&&root,animelemtime(7) = 40
value=3316

[State 3306, End]
type=destroyself
trigger1=root,stateno!=3301
;---------------------------------------------------------------------
;Unhappy Meal - Lettuce
[Statedef 3307]
type=A
physics=N
movetype=I
anim=3307
ctrl=0
velset=0, -76
sprpriority=-3

[State 3307, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3305, PosSet]
type = PosSet
trigger1 =time<12
x = 0

[State 3307, VelAdd]
type = VelAdd
trigger1 =pos y < -165
y = .55

[State 3307, VelSet]
type = VelSet
trigger1 =pos y >= -165
y = 0

[State 3307, PosSet]
type = PosSet
trigger1 =pos y >= -165
y = -95

[State 3307, Next]
type=changestate
trigger1=root,stateno=3301&&root,animelemtime(7) = 40
value=3317

[State 3307, End]
type=destroyself
trigger1=root,stateno!=3301
;---------------------------------------------------------------------
;Unhappy Meal - Above bread
[Statedef 3308]
type=A
physics=N
movetype=I
anim=3308
ctrl=0
velset=0, -76
sprpriority=-2

[State 3308, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3305, PosSet]
type = PosSet
trigger1 =time<12
x = 0

[State 3308, VelAdd]
type = VelAdd
trigger1 =pos y < -205
y = .55

[State 3308, VelSet]
type = VelSet
trigger1 =pos y >= -205
y = 0

[State 3308, PosSet]
type = PosSet
trigger1 =pos y >= -205
y = -135

[State 3308, EnvShake]
type = EnvShake
trigger1 = pos y= -135
time = 50
freq = 100
ampl = 10
persistent=0

[State 3308, Snd]
type = PlaySnd
trigger1 = pos y= -135
value = 3305,0
persistent=0

[State 3305, Dust]
type = Explod
trigger1 = pos y= -135
anim = 8105
sprPriority = -10
posType = P1
pos = 0,125
bindTime = -1
scale = 1.25,1.25
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1
persistent = 0

[State 3308, Next]
type=changestate
trigger1=root,stateno=3301&&root,animelemtime(7) = 40
value=3318

[State 3308, End]
type=destroyself
trigger1=root,stateno!=3301
;---------------------------------------------------------------------
;Unhappy Meal - Potato
[Statedef 3309]
type=A
physics=N
movetype=I
anim=ifelse(random>500,3309,3319)
ctrl=0
velset=0, -28
sprpriority=-5

[State 3309, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3305, PosSet]
type = PosSet
trigger1 =time<12
x = -15

[State 3309, VelAdd]
type = VelAdd
trigger1 =pos y < -155
y = .55

[State 3309, VelSet]
type = VelSet
trigger1 =pos y >= -155
y = 0

[State 3309, PosSet]
type = Null;PosSet
trigger1 =pos y >= -155
y = -155

[State 3309, Snd]
type = PlaySnd
trigger1 = pos y >= -155
value = 3301,random%2
persistent = 0

[State 3309, End]
type=destroyself
trigger1=root,stateno!=3301
trigger2=root,stateno=3301&&root,animelemtime(7) = 40
;---------------------------------------------------------------------
;Unhappy Meal - Shake
[Statedef 3310]
type=A
physics=N
movetype=I
anim=ifelse(random>500,3310,3320)
ctrl=0
velset=0, -28
sprpriority=-5

[State 3310, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3305, PosSet]
type = PosSet
trigger1 =time<12
x = 15

[State 3309, VelAdd]
type = VelAdd
trigger1 =pos y < -150
y = .55

[State 3309, VelSet]
type = VelSet
trigger1 =pos y >= -150
y = 0

[State 3309, PosSet]
type = null;PosSet
trigger1 =pos y >= -150
y = -150

[State 3310, End]
type=destroyself
trigger1=root,stateno!=3301
trigger2=root,stateno=3301&&root,animelemtime(7) = 40
;---------------------------------------------------------------------
;Unhappy Meal Finish - Under bread
[Statedef 3315]
type=A
physics=N
movetype=I
anim=3305
ctrl=0
velset=14, -4
sprpriority=-7

[State 3315, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3315, VelAdd]
type = VelAdd
trigger1 =1
y = .25

[State 3315, EnvShake]
type = EnvShake
trigger1 = !time
time = 70
freq = 100
ampl = 10
persistent=0

[State 3315, Snd]
type = PlaySnd
trigger1 = !time
value = 3305,0
persistent=0

[State 3315, End]
type=destroyself
trigger1=time>=240
;---------------------------------------------------------------------
;Unhappy Meal Finish - Patti
[Statedef 3316]
type=A
physics=N
movetype=I
anim=3306
ctrl=0
velset=-12, -8
sprpriority=-6

[State 3316, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3316, VelAdd]
type = VelAdd
trigger1 =1
y = .25

[State 3316, End]
type=destroyself
trigger1=time>=240
;---------------------------------------------------------------------
;Unhappy Meal Finish - Lettuce
[Statedef 3317]
type=A
physics=N
movetype=I
anim=3307
ctrl=0
velset=5, -13
sprpriority=-3

[State 3317, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3317, VelAdd]
type = VelAdd
trigger1 =1
y = .25

[State 3317, End]
type=destroyself
trigger1=time>=240
;---------------------------------------------------------------------
;Unhappy Meal Finish - Above bread
[Statedef 3318]
type=A
physics=N
movetype=I
anim=3308
ctrl=0
velset=-10, -15
sprpriority=-2

[State 3318, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 3318, VelAdd]
type = VelAdd
trigger1 =1
y = .25

[State 3318, End]
type=destroyself
trigger1=time>=240
;---------------------------------------------------------------------
;Take This! - Big Hamburger
[Statedef 3405]
type=S
physics=N
movetype=I
anim=3405
ctrl=0
velset=0, 0
sprpriority=-4

[State 3405, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3405, Anim]
type = ChangeAnim
triggerall = Root, MoveType != H
trigger1 = Root,StateNo = 3403 && Root,AnimElem = 5
trigger2 = Root,StateNo = 3403 && Root,AnimElem = 87
value = 3406
ignorehitpause = 1

[State 3405, Anim]
type = ChangeAnim
triggerall = Root, MoveType != H
trigger1 = Root,StateNo = 3403 && Root,AnimElem = 76
trigger2 = Root,StateNo = 3403 && Root,AnimElem = 89
value = 3405
ignorehitpause = 1

[State 3405, Anim]
type = ChangeAnim
trigger1 = Anim != 3407
trigger1 = Root,PrevStateNo != 3402
trigger1 = (Root, StateNo!=[3400,3404]) || Root, MoveType = H
value = 3407
ignorehitpause = 1

[State 3405, BindToRoot]
type = BindToRoot
trigger1 = Anim != 3407
pos = -25,60
ignorehitpause = 1

[State 3405, VarAdd]
type = VarAdd
trigger1 = Anim = 3407
var(1) = 1
ignorehitpause = 1

[State 3405, Under Bread]
type = helper
trigger1 = Anim != 3407
trigger1 = Root,StateNo = 3404 | (Root,PrevStateNo = 3402 && Root,StateNo != 3403)
helpertype = normal
stateno = 3315
ID = 3415
name = "Under Bread"
postype = p1
pos = 0,0
size.xscale = 0.7
size.yscale = 0.7
ownpal = 1

[State 3405, Patti]
type = helper
trigger1 = Anim != 3407
trigger1 = Root,StateNo = 3404 | (Root,PrevStateNo = 3402 && Root,StateNo != 3403)
helpertype = normal
stateno = 3316
ID = 3416
name = "Patti"
postype = p1
pos = 0,ceil(-40*.5)
size.xscale = 0.7
size.yscale = 0.7
ownpal = 1

[State 3405, Lettuce]
type = helper
trigger1 = Anim != 3407
trigger1 = Root,StateNo = 3404 | (Root,PrevStateNo = 3402 && Root,StateNo != 3403)
helpertype = normal
stateno = 3317
ID = 3417
name = "Lettuce"
postype = p1
pos = 0,ceil(-45*.5)
size.xscale = 0.7
size.yscale = 0.7
ownpal = 1

[State 3405, Above Bread]
type = helper
trigger1 = Anim != 3407
trigger1 = Root,StateNo = 3404 | (Root,PrevStateNo = 3402 && Root,StateNo != 3403)
helpertype = normal
stateno = 3318
ID = 3418
name = "Above Bread"
postype = p1
pos = 0,ceil(-85*.5)
size.xscale = 0.7
size.yscale = 0.7
ownpal = 1

[State 3405, End]
type=destroyself
trigger1 = Anim != 3407
trigger1 = Root,StateNo = 3404 || Root,PrevStateNo = 3402 && Root,StateNo != 3403
trigger2 = Anim = 3407
trigger2 = var(1) >= 30
;---------------------------------------------------------------------
;Super Apple
[Statedef 3505]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1405, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, NA, SA, HA, NP, SP, HP;SCA, AA, AP, AT
stateno=3506
ignorehitpause=1
[State 1405, HB]
type=null;hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1405, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=3505
[State 1405, anglevarset]
type=varset
trigger1=!time&&!prevstateno
var(21)=-5
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1405, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1405, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1405, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1405, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1405, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1

[State 1405, Varset]
type=VarSet
trigger1 =!time
var(10)=root,var(10)
ignorehitpause=1
[State 1405, Vel]
type=velset
trigger1=!time
x=4+(2*ishelper(3506))
y=-3
[State 1405, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1405, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 3505, Proj]
type=hitdef
trigger1=1
priority=4, Hit
attr=A, HP
damage=40-(15*var(10)),5
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=21
ground.hittime=21
guard.hittime=17
ground.velocity=0,0
air.velocity=0,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
air.fall=0
yaccel=.35
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
airguard.ctrltime=12
airguard.velocity=-2,-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=3505

[State 1405, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1
persistent=0

[State 1405, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1405, HitCount]
type=null;ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1405, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1405, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1405, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[3500,3550]
var(18)=1
ignoreHitPause=1
[State 3505, ProjContact]
type=VarSet
trigger1=MoveContact=1
var(19)=1
ignoreHitPause=1

[State 1405, Change]
type=changestate
trigger1=movecontact
value=3511
ignorehitpause=1
[State 1405, change]
type=changestate
trigger1 = pos y > -vel y - 8
value=3507
[State 1405, Change]
type=changestate
trigger1 = frontedgedist<=-20||backedgedist<=20
value=3510
;------------------------------------------------------------------
[Statedef 3506]
type=A
physics=N
movetype=A
velset=0,0
anim=3508
ctrl=0
sprpriority=5

[State 3506, AngleDraw]
type = AngleDraw
trigger1 = time = 0 && !var(25)
scale = 1,1
value = var(21)
ignorehitpause = 1

[State 3506, AngleDraw]
type = AngleDraw
trigger1 = time = 0 && var(25)
scale = 1,1
value = ifelse((var(21)=[46,180]),90,ifelse((var(21)=[136,315]),270,0))
ignorehitpause = 1

[State 3506, PalFX]
type = palfx
trigger1 = Time = 0
time = 1
add = 255,255,255
color = 256

[State 3506, Scale]
type=AngleDraw
trigger1=time>0
scale=2,2
value=0
ignorehitpause=1

[State 3506, Assert]
type=trans
trigger1=time>0
trans=addalpha
alpha=256, 256
ignorehitpause=1

[State 3506, PlaySnd]
type = PlaySnd
trigger1 =time=1
value = 1406,0
channel =16

[State 3506, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 3506, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 3506, Proj]
type=hitdef
trigger1=!movecontact
priority=4, Hit
attr=A, HP
damage=200-(50*var(10)),30-(10*var(10))
animtype=Up
hitflag=MAF
guardflag=MA
pausetime=0,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=12
ground.hittime=12
ground.velocity=0,-10
air.velocity=0,-10
guard.velocity=0
airguard.velocity=0,-3
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.4
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
p1sprpriority=4
airguard.ctrltime=12
airguard.velocity=ifelse((root,var(20)),-6,-12),-3
forcestand=1
palFX.time = 60
palFX.mul = 128, 128, 128
palFX.sinAdd = 96, 96, 96, 4
id=3505

[State 3506, flames]
type = helper
trigger1 = movehit && numtarget && !numhelper(7180)
trigger1 = !(target, time) && (target, movetype = H)&&(enemynear,stateno=[5000,5050])
helpertype = normal
stateno = 7180
ID = 7180
name = "flames"
postype = p2
ownpal = 1
facing = -1
ignorehitpause = 1

[State 3506, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
postype = p1
pos = ifElse(P2Dist x < -85, -85, ifElse(P2Dist x < 85, ceil(P2Dist x), 85)), ifElse(P2Dist y + pos y < -85, -85, ifElse(P2Dist y + pos y < 85, ceil(P2Dist y + pos y), 85))
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 3506, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < -85, -85, ifElse(P2Dist x < 85, ceil(P2Dist x), 85)), ifElse(P2Dist y + pos y < -85, -85, ifElse(P2Dist y + pos y < 85, ceil(P2Dist y + pos y), 85))
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 3506, HitCount]
type=null;ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 3506, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 3506, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 3506, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[3500,3550]
var(18)=1
ignoreHitPause=1

[State 3506, NotHitBy]
type=NotHitBy
trigger1 =1
value=SCA
ignorehitpause =1
[State 3506, AssertSpecial]
type = AssertSpecial
trigger1 =Time>0
flag = noshadow
ignorehitpause =1
[State 3506, End]
type=changestate
trigger1=!animtime
value=3517
;---------------------------------------------------------------------
;Apple Bounce
[Statedef 3507]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1407, PosSet]
type = PosSet
trigger1 =!time
y = -8
[State 1407, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16

[State 1407, VarSet]
type = VarSet
trigger1 =!time
fvar(6)= Ifelse((random<=50),0,Ifelse((random=[0,450]),90,-90))
ignorehitpause =1

[State 1407, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, NA, SA, HA, NP, SP, HP;SCA, AA, AP, AT
stateno=3506
ignorehitpause=1
[State 1407, HB]
type=null;hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1407, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1407, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(19)=-360
ignorehitpause=1
[State 1407, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1407, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1

[State 1407, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1407, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1

[State 1407, Vel]
type=velset
trigger1=time=1
x=2
y=-4
[State 1407, VelAdd]
type = VelAdd
trigger1=time>1
y =.35

[State 1407, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1407, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 3507, Proj]
type=hitdef
trigger1=!var(19)
priority=4, Hit
attr=A, HP
damage=10,5
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=21
ground.hittime=21
guard.hittime=17
ground.velocity=0,0
air.velocity=0,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
air.fall=0
yaccel=.35
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
airguard.ctrltime=12
airguard.velocity=-2,-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=3505

[State 1407, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = (target, const(size.ground.front) -10), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1407, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1407, HitCount]
type=null;ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1407, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1407, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1407, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[3500,3550]
var(18)=1
ignoreHitPause=1
[State 3507, ProjContact]
type=VarSet
trigger1=MoveContact=1
var(19)=1
ignoreHitPause=1

[State 3507, StateTypeSet: Idle]
type=StateTypeSet
trigger1=var(19)
moveType=I
ignoreHitPause=1

[State 1407, End]
type=changestate
trigger1=movecontact
value=3511
ignorehitpause=1
[State 1407, End]
type=changestate
trigger1 = var(8)>=2 && pos y > -vel y - 8
value=3508
ignorehitpause=1
[State 1407, change]
type=changestate
trigger1 = pos y > -vel y - 8
value=3507
[State 1407, Change]
type=changestate
trigger1 = frontedgedist<=-20||backedgedist<=-20
value=3510
;---------------------------------------------------------------------
;Apple Bounce
[Statedef 3508]
type=A
physics=N
movetype=I
ctrl=0
velset=0, 0
sprpriority=4

[State 3508, ProjContact]
type=VarSet
trigger1=!time
var(18)=0
ignoreHitPause=1

[State 3508, Flag]
type=VarSet
trigger1=!time
var(25)=1
ignoreHitPause=1

[State 1408, PosSet]
type = PosSet
trigger1 =!time
y = -8
[State 1408, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16

[State 1408, AngleDraw]
type = AngleDraw
trigger1 =anim!=1408
value = ifelse((var(21)=[46,180]),90,ifelse((var(21)=[136,315]),270,0))
ignorehitpause =1

[State 1408, AssertSpecial]
type = null;AssertSpecial
trigger1 =1
flag = noshadow
ignorehitpause =1
[State 1408, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, NA, SA, HA, NP, SP, HP;SCA, AA, AP, AT
stateno=3506
ignorehitpause=1
[State 1408, HB]
type=null;hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1
[State 1408, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1
[State 3508, PalFX]
type = palfx
trigger1 = Time = 100
time = 50
add = 250,0,250
sinadd = 50,50,0,10
color = 0
invertall = 1
[State 3508, Change]
type=changestate
trigger1=time=150
value=3506
ignorehitpause=1
[State 3508, End]
type=changestate
trigger1=!animtime
value=3517
;---------------------------------------------------------------------
;Apple
[Statedef 3510]
type=A
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=4

[State 1410, Turn]
type = Turn
trigger1 =!time
ignorehitpause =1

[State 3510, ProjContact]
type=VarSet
trigger1=!time&&prevstateno=3511
var(18)=0
ignoreHitPause=1

[State 1410, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16
[State 1410, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, NA, SA, HA, NP, SP, HP;SCA, AA, AP, AT
stateno=3506
ignorehitpause=1
[State 1410, HB]
type=null;hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1410, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=3505
[State 1410, anglevarset]
type=varset
trigger1=!time
var(21)=(var(21) * -1) - 24
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(19)=-360
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1410, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1410, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1410, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1410, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1
[State 1410, Vel]
type=velset
trigger1=!time
x=4-(2*var(19))
y=-3
[State 1410, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 1405, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 3505, Proj]
type=hitdef
trigger1=!var(19)
priority=4, Hit
attr=A, HP
damage=10,5
animtype=Hard
hitflag=MAF
guardflag=MA
pausetime=2,12
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
ground.type=High
ground.slidetime=21
ground.hittime=21
guard.hittime=17
ground.velocity=0,0
air.velocity=0,-4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
air.fall=0
yaccel=.35
fall.recover=0
getpower=0,0
givepower=36, 36
envshake.time=12
envshake.ampl=5
airguard.ctrltime=12
airguard.velocity=-2,-3
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
id=3505

[State 1410, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=(enemynear, movetype=H) && !(target, time)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = (target, const(size.ground.front) -10), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1410, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 1410, HitCount]
type=null;ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignoreHitPause=1
persistent=0
[State 1410, Juggle]
type=parentvaradd
trigger1= movecontact=1 && numtarget
var(15)=1
ignorehitpause = 1
persistent=0
[State 1410, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignoreHitPause=1
[State 1410, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[3500,3550]
var(18)=1
ignoreHitPause=1
[State 3510, ProjContact]
type=VarSet
trigger1=MoveContact=1
var(19)=1
ignoreHitPause=1

[State 3510, StateTypeSet: Idle]
type=StateTypeSet
trigger1=var(19)
moveType=I
ignoreHitPause=1

[State 1410, End]
type=changestate
trigger1=movecontact
value=3511
ignorehitpause=1
[State 1410, End]
type=changestate
trigger1 = var(8)>=2 && pos y > -vel y - 8
value=3508
ignorehitpause=1
[State 1410, End]
type=changestate
trigger1 = pos y > -vel y - 8
value=3507
;---------------------------------------------------------------------
;Apple
[Statedef 3511]
type=A
physics=N
movetype=I
ctrl=0
velset=0, 0
sprpriority=4

[State 3511, ProjContact]
type=VarSet
trigger1=1
var(19)=1
ignoreHitPause=1

[State 1410, Turn]
type = Turn
trigger1 =!time
ignorehitpause =1

[State 1410, PlaySnd]
type = PlaySnd
trigger1 =!time
value = 1407,0
channel =16
[State 1410, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, NA, SA, HA, NP, SP, HP;SCA, AA, AP, AT
stateno=3506
ignorehitpause=1
[State 1410, HB]
type=null;hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 1410, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=3505
[State 1410, anglevarset]
type=varset
trigger1=!time
var(21)=(var(21) * -1) - 24
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=time
var(21)=-12
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)>=360
var(21)=-360
ignorehitpause=1
[State 1410, anglevaradd]
type=varadd
trigger1=var(21)<0
var(21)=360
ignorehitpause=1
[State 1410, AngleDraw]
type = AngleDraw
trigger1 =1
value = var(21)
ignorehitpause =1
[State 1410, VelAdd]
type = VelAdd
trigger1=1
y =.35
[State 1410, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 1410, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
ignorehitpause=1
[State 1410, Vel]
type=velset
trigger1=!time
x=4-(2*var(19))
y=-3

[State 1410, End]
type=changestate
trigger1 = var(8)>=2 && pos y > -vel y - 8
value=3508
ignorehitpause=1
[State 1410, End]
type=changestate
trigger1 = pos y > -vel y - 8
value=3507
[State 1407, Change]
type=changestate
trigger1 = frontedgedist<=-20||backedgedist<=-20
value=3510

;Wait
[StateDef 3517]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 3517, End]
type = DestroySelf
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, Time <= 1 && !(Target,HitShakeOver)
;==================<DONALD MEMORIAL FX>==================
;Aura and Dust
[StateDef 3750]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velset = 0,0

[State 8330, BindToRoot]
type = BindToRoot
trigger1 = (Root, StateNo = 3700)
pos = 0,-4

[State 8330, Charging Sound]
type = PlaySnd
trigger1 = !Time
value = 730,0
channel = 0

[State 8330, RemapPal]
type = RemapPal
trigger1 = 1
source = 8330,0
dest = 8110,0

[State 8330, Power Charge Aura]
type = Explod
trigger1 = !NumExplod(8330)
ID = 8330
anim = 8330
sprPriority = 3
posType = P1
bindTime = -1
removeTime = -1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8330, Power Charge Dust]
type = Explod
trigger1 = !(Time % 6)
anim = 8105
sprPriority = -3
posType = P1
;pos = 0, -ceil(pos y)
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1
bindtime = -1

[State 8330, Modify Aura 1]
type = ModifyExplod
trigger1 = Numexplod(8330) && (Root,var(10) < 55)
ID = 8330
scale = 0.6, 0.1 + 0.5 * (Root, var(10) / 110.0)
;remappal = 8010, ifelse(root,var(10)<55, 1, ifelse(root,var(10)<110, 2, 3))

[State 8330, Modify Aura 2]
type = ModifyExplod
trigger1 = Numexplod(8330) && (Root,var(10) >= 55 && Root,var(10) < 110)
ID = 8330
scale = 0.6, 0.1 + 0.5 * (Root, var(10) / 110.0)

[State 8330, Modify Aura 3]
type = ModifyExplod
trigger1 = NumExplod(8330) && Root, var(10) >= 110
ID = 8330
scale = 0.6, 0.6

[State 8330, StopSnd]
type = StopSnd
trigger1 = Root, StateNo != 3700
trigger2 = Root, StateNo = 3700 && Root, AnimElem = 4
trigger3 = Root, MoveType = H
channel = 0

[State 8330, RemoveExplod]
type = RemoveExplod
trigger1 = Root, StateNo != 3700
trigger2 = Root, StateNo = 3700 && Root, AnimElem = 4
trigger3 = Root, MoveType = H

[State 8330, End]
type = DestroySelf
trigger1 = Root, StateNo != 3700
trigger2 = Root, StateNo = 3700 && Root, AnimElem = 4
trigger3 = Root, MoveType = H


;Particles
[StateDef 3751]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 8331, BindToRoot]
type = BindToRoot
trigger1 = !(Time % 4)
pos = ceil(-151 + (Random / 3.125)), ceil(98 - (Random / 3.125))

[State 8331, Random Color Flag]
type = VarRandom
trigger1 = 1
v = 10
range = 0,2

[State 8331, RemapPal]
type = RemapPal
trigger1 = 1
source = 8330,0
dest = Ifelse(var(10)=2,8520,Ifelse(var(10)=1,8510,8000)),0

[State 8331, Particle]
type = Explod
trigger1 = (Time % 4) = 1
anim = 8331
sprPriority = ifElse(Random < 750, 5, -1)
posType = P1
vel = ((RootDist x + 0) / 32.0), ((RootDist y - 80) / 32.0);values to adjust
scale = ifElse(Random < 500, 0.5, -0.5), ifElse(Random < 500, 0.5, -0.5)
pauseMoveTime = -1
superMoveTime = -1
ownpal = 1

[State 8331, RemoveExplod]
type = RemoveExplod
trigger1 = Root, StateNo != 3700
trigger2 = Root, StateNo = 3700 && Root, AnimElem = 4
trigger3 = Root, MoveType = H

[State 8331, End]
type = DestroySelf
trigger1 = Root, StateNo != 3700
trigger2 = Root, StateNo = 3700 && Root, AnimElem = 4
trigger3 = Root, MoveType = H

;==================<DONALD MEMORIAL HELPER>==================
;Donald Memorial BackGround
[StateDef 3760]
type = A
velset = 0,0
anim = 9999
sprPriority = 5

[State 3760, Pos X]
type = PosSet
trigger1 = 1
x = 0

[State 3760, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 3760, Assert: NoBarDisplay, NoBG, NoFG]
type = AssertSpecial
trigger1 = Root, AnimElemTime(19) < 0
trigger2 = Root, AnimElemTime(20) >= 0 && Root, AnimElemTime(21) < 0
flag = NoBarDisplay
flag2 = NoBG
flag3 = NoFG

[State 3760, Assert: NoBarDisplay]
type = AssertSpecial
triggerall = root,var(58)=0
trigger1 = Root, AnimElemTime(19) >= 0 && Root, AnimElemTime(20) < 0
trigger2 = Root, AnimElemTime(21) >= 0
flag = NoBarDisplay

[State 3760, Image 1]
type = Explod
trigger1 = root,stateno=3702
trigger1 = root,animelem=1
anim = 3760
ID = 1
sprPriority = -16
posType = Back
removeTime = 120
superMoveTime = -1

[State 3760, Image 2]
type = Explod
trigger1 = root,stateno=3702
trigger1 = root,animelem=5
anim = 3761
ID = 2
sprPriority = -16
posType = Back
removeTime = 120
superMoveTime = -1

[State 3760, Image 3]
type = Explod
trigger1 = root,stateno=3702
trigger1 = root,animelem=9
anim = 3762
ID = 3
sprPriority = -16
posType = Back
removeTime = 120
superMoveTime = -1

[State 3760, Image 4]
type = Explod
trigger1 = root,stateno=3702
trigger1 = root,animelem=13
anim = 3763
ID = 4
sprPriority = -16
posType = Back
removeTime = 120
superMoveTime = -1

[State 3760, Image 5]
type = Explod
trigger1 = root,stateno=3702
trigger1 = root,animelem=17
anim = 3764
ID = 5
sprPriority = -16
posType = Back
removeTime = 120
superMoveTime = -1

[State 3760, Image 6]
type = Explod
trigger1 = root,stateno=3702
trigger1 = root,animelem=20
anim = 3770
ID = 6
sprPriority = -16
posType = Back
removeTime = 120
superMoveTime = -1

[State 3760, Remove Image 1]
type = RemoveExplod
trigger1 = root,stateno=3702
trigger1 = numexplod(1)&&root,animelem=5
id = 1

[State 3760, Remove Image 2]
type = RemoveExplod
trigger1 = root,stateno=3702
trigger1 = numexplod(2)&&root,animelem=9
id = 2

[State 3760, Remove Image 3]
type = RemoveExplod
trigger1 = root,stateno=3702
trigger1 = numexplod(3)&&root,animelem=13
id = 3

[State 3760, Remove Image 4]
type = RemoveExplod
trigger1 = root,stateno=3702
trigger1 = numexplod(4)&&root,animelem=17
id = 4

[State 3760, Remove Image 5]
type = RemoveExplod
trigger1 = root,stateno=3702
trigger1 = numexplod(5)&&root,animelem=19
id = 5

[State 3760, Remove Image 6]
type = RemoveExplod
trigger1 = root,stateno=3702
trigger1 = numexplod(6)&&root,animelem=21
id = 6

[State 3760, Sound]
type = PlaySnd
trigger1 = root,stateno=3702
trigger1 = root,animelem=1|root,animelem=5|root,animelem=9|root,animelem=13|root,animelem=17
value = 3701,0
abspan = 0
channel = 10
[State 3760, Sound]
type = PlaySnd
trigger1 = root,animelem=20
value = 3700,1
abspan = 0
channel = 20

[State 3760, Scale]
type = ModifyExplod
trigger1 = 1
ID = -1
posType = Back
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5
;trans = AddAlpha
;alpha = 256, 256

[State 3760, Remove Explods]
type = RemoveExplod
trigger1 = Root, StateNo != 3702
trigger2 = Root, StateNo = 3702 && Root, AnimElem = 21

[State 3760, End]
type = DestroySelf
trigger1 = Root, StateNo != 3702
;trigger2 = Root, StateNo = 3702 && Root, AnimElem = 21

;Donald Memorial Front Text
[StateDef 3765]
type = A
velset = 0,0
anim = 9999
sprPriority = 5

[State 3760, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 3760, Pos X]
type = PosSet
trigger1 = 1
x = 0

[State 3760, Sound]
type = PlaySnd
trigger1 = !time
value = 3701,1
abspan = 0
channel = 4

[State 3760, Sound]
type = PlaySnd
trigger1 = !time
value = 3701,3
abspan = 0
channel = 6

[State 3760, Text 2]
type = Explod
trigger1 = !Time
anim = 3766
ID = 21
sprPriority = -17
ontop = 1
posType = Back
removeTime = 120
superMoveTime = -1

[State 3760, Text 1]
type = Explod
trigger1 = !Time
anim = 3765
ID = 20
sprPriority = -16
ontop = 1
posType = Back
removeTime = 120
superMoveTime = -1

[State 3760, Scale Text 1a]
type = ModifyExplod
trigger1 = NumExplod(20) && Time < 16
ID = 20
posType = Back
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 1 - (0.03125 * Time), 1 - (0.03125 * Time)
trans = AddAlpha
alpha = (8 * Time), 256

[State 3760, Scale Text 2a]
type = ModifyExplod
trigger1 = NumExplod(21) && Time < 16
ID = 21
posType = Back
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 1 - (0.03125 * Time), 1 - (0.03125 * Time)
trans = AddAlpha
alpha = (8 * Time), 256 - (8 * Time)

[State 3760, Scale Text 1b]
type = ModifyExplod
trigger1 = NumExplod(20) && Time >= 16
ID = 20
posType = Back
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5
trans = AddAlpha
alpha = 256, 256

[State 3760, Scale Text 2b]
type = ModifyExplod
trigger1 = NumExplod(21) && Time >= 16
ID = 21
posType = Back
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5
trans = AddAlpha
alpha = 256, 0

[State 3760, Remove Explods]
type = RemoveExplod
trigger1 = Root, StateNo != 3702
trigger2 = Root, StateNo = 3702 && Root, AnimElem = 20

[State 3760, End]
type = DestroySelf
trigger1 = Root, StateNo != 3702
trigger2 = Root, StateNo = 3702 && Root, AnimElem = 20
;---------------------------------------------------------------------
;Fall Hamburger
[Statedef 3805]
type=S
physics=N
movetype=A
ctrl=0
velset=0, 0
sprpriority=5

[State 3805, Fall Sound]
type=playsnd
trigger1=!time&&!prevstateno
value=3805,0
persistent=0
channel = 2
ignorehitpause=1

[State 3805, HitOverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA, AA, AP, AT
stateno=3806
ignorehitpause=1
[State 3805, HB]
type=hitby
trigger1=1
time=-1
value=SCA, NP, SP, HP
ignorehitpause=1

[State 3805, Strength]
type=varset
trigger1=!time&&!prevstateno
var(10)=0

[State 3805, ChangeAnim]
type=ChangeAnim
trigger1 =!time&&!prevstateno
value=1005

[State 3805, movecontactvar]
type=varset
trigger1=movecontact
var(4)=1
ignorehitpause=1

[State 3805, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1
[State 3805, VarAdd]
type=VarAdd
trigger1 =!time
var(8)=1
[State 1005, Vel]
type=velset
trigger1=!time
x=0
y=0
[State 3805, VelAdd]
type=veladd
trigger1=1
y=.35
[State 3805, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 3805, HitSound]
type=playsnd
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
value=ifelse(moveguarded,130,2), ifelse(moveguarded,1,6)
volumescale=100
channel=2
ignorehitpause=1

[State 3805, Counter Flag]
type=varset
trigger1= numenemy
trigger1= movecontact!=1
var(9)= (enemynear,movetype=A)

[State 3805, High]
type=hitdef
trigger1=Time > 0
priority=4, Hit
attr=A, SP
damage=floor(35*root,fvar(10)),2
animtype=Hard
hitflag=MAFD
guardflag=MA
pausetime=2,2;/((root,var(20)>0)+1)
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,0
guardsound=-1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=0,0
ground.cornerpush.veloff=0
air.velocity=0, -4
air.fall=0
fall.recover=0
getpower=0, 0
givepower=18, 18
envshake.time=12
envshake.ampl=5
p1sprpriority=5
yaccel=.5
airguard.ctrltime=12
airguard.velocity=-4,-3
;forcestand=1
id=3805

[State 3805, HitSpark]
type=Helper
trigger1=movecontact=1 && numtarget
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=ifElse(MoveGuarded, 8001, 8005)
ID=8000
name="Spark"
pos = ifElse(P2Dist x < -16, -16, ifElse(P2Dist x < 16, ceil(P2Dist x), 16)), 0
facing=-1
ownPal=1
size.xScale=1
size.yScale=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 3805, Counter FX]
type=Helper
trigger1=MoveContact=1 && NumTarget && var(9)
trigger1=!(target, hitshakeover)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P1
pos=ifElse(P2Dist x < -16, -16, ifElse(P2Dist x < 16, ceil(P2Dist x), 16)), 0
ownPal=1
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 3805, HitCount]
type=null;ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(13)=1
ignorehitpause=1
persistent=0
[State 3805, Projhit]
type=ParentVarAdd
trigger1=Movehit=1 && NumTarget
var(47)=1
ignorehitpause=1
persistent=0
[State 3805, Juggle Points]
type=ParentVarAdd
trigger1=MoveContact=1 && NumTarget
var(15)=1
ignorehitpause=1
persistent=0
[State 3805, ProjContact]
type=VarSet
trigger1=MoveContact=1 && NumTarget
var(18)=1
ignorehitpause=1
persistent=0
[State 3805, ProjContact]
type=ParentVarSet
trigger1=MoveContact=1 && NumTarget
trigger1=Root, StateNo=[3800,3804]
var(18)=1
ignorehitpause=1
persistent=0

[State 1005, End]
type=changestate
trigger1=movecontact
value=3806
ignorehitpause=1
[State 1005, End]
type = changestate
trigger1 = pos y >= 0
value = 3806
ignorehitpause = 1
[State 1005, End]
type=null;destroyself
trigger1=FrontEdgeDist <= -60
;------------------------------------------------------------------
[Statedef 3806]
type=A
physics=N
movetype=I
anim=ifelse(!var(4),1008,1009)
velset=0, 0
ctrl=0
sprpriority=4

[State 3806, Fall Sound]
type = playsnd
trigger1 = !time && !var(4)
value = 3805,1
volumescale = 100
channel = 2
ignorehitpause = 1

[State 1006, Vel]
type=velset
trigger1=!time
x=-2 + 4 * (!var(4))
y=-3
[State 1006, VelAdd]
type=veladd
trigger1=1
y=.25

[State 1006, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
[State 1006, NotHitBy]
type=NotHitBy
trigger1 =1
value=SCA
ignorehitpause =1

[State 1006, End]
type=changestate
trigger1=!animtime
value=3807

;Wait
[StateDef 3807]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 1007, End]
type = DestroySelf
trigger1 = !NumTarget
trigger2 = NumTarget
trigger2 = Target, Time <= 1 && !(Target,HitShakeOver)
;---------------------------------------------------------------------------
;Alarm Clock - Fall
[Statedef 3850]
type    = A
movetype =  I
physics = N
velset = 0,0
anim = 3850
ctrl = 0
poweradd = 0
sprpriority=-50
facep2=0

[State 3850, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3850, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignoreHitPause = 1

[State 3850, PosSet]
type = PosSet
trigger1 =!Time
x = 0

[State 3850, VelAdd]
type = VelAdd
trigger1 = Time > 0
y = .55

[State 3850, Alarm Sound]
type = PlaySnd
trigger1 = !Time
value = 3850,0
channel = 7

[State 3850, Alarm Sound Pan]
type = SndPan
trigger1 = 1
channel = 7

[State 3850, PowerSet Start]
type  = VarSet
trigger1 = !Time
var(20) = Power

[State 3850, PowerSet 1]
type  = PowerSet
trigger1 = Power >= var(20)
value = var(20)

[State 3850, PowerSet 2]
type  = VarSet
trigger1 = 1
var(20) = Power

[State 3850, End]
type = ChangeState
trigger1 = pos y > -vel y - 5
value = 3851
;----------------------------------------------------------------------
;Alarm Clock - Land
[Statedef 3851]
type = C
movetype = A
physics = N
anim = 3851
ctrl = 0
velset = 0,0
sprpriority=-50

[State 3851, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3851, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignoreHitPause = 1

[State 3851, Alarm Sound Pan]
type = SndPan
trigger1 = 1
channel = 7

[State 3851, PosSet]
type = PosSet
trigger1 =!Time
y = -5
[State 3851, Landing Sound]
type = PlaySnd
trigger1 = !Time
value = 2,7
[State 3851, Landing Dust Explod]
type = Explod
trigger1 = !Time
anim = 8102
sprPriority = -53
posType = P1
scale = 4.0 * const(size.xScale),2.0 * const(size.yScale)
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 3851, EnvShake]
type = EnvShake
trigger1 = !Time
time = 30
freq = 100
ampl = 10
persistent=0

[State 3851, HitDef]
type=HitDef
trigger1 = AnimElem = 2
attr=C,HT        
hitflag=M
guardflag=L         
animtype=Hard         
priority=4,Hit   
damage = 0, 0
getpower=0,0
givepower=0,0
pausetime = 0,0
guard.pausetime = 0,0
sparkNo=-1
guard.sparkNo=-1
sparkXY=-10 + 0 * (var(35) := 0), var(36) := 0
hitsound=-1
guardsound=-1
air.animType=Back
fall.animType=Back
ground.type=Trip     
air.type=Trip
ground.slidetime=10
ground.hittime=10
guard.hittime=10
air.hittime=120
fall=1
fall.recover=0
fall.recovertime=120
yaccel=.58
ground.velocity=0, -4
guard.velocity=0
air.velocity=0, -4
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
p1sprpriority=-50
numhits=0

[State 3851, Idle]
type = StateTypeSet
trigger1 =AnimElem = 3
statetype = S
movetype = I

[State 3851, PowerSet 1]
type  = PowerSet
trigger1 = Power >= var(20)
value = var(20)

[State 3851, PowerSet 2]
type  = VarSet
trigger1 = 1
var(20) = Power

[State 3851, End]
type = ChangeState
trigger1 =!animtime
value = 3852
;----------------------------------------------------------------------
;Alarm Clock - Move
[Statedef 3852]
type = S
movetype = I
physics = N
anim = 3852
ctrl = 0
velset = 0,0
sprpriority=-50

[State 3852, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3852, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignoreHitPause = 1

[State 3852, NotHitBy]
type=NotHitBy
trigger1=1
time=1
value=SCA

[State 3852, Alarm Sound Pan]
type = SndPan
trigger1 = 1
channel = 7

[State 3852, Hamburger (Single / Turns)]
type = helper
trigger1 = RoundState=2
trigger1 = TimeMod = 30,0
helpertype = normal
stateno = 3805
ID = 3805
name = "Hamburger"
postype = p2
pos = -135 + Random % 271, -270
size.xscale = 0.5
size.yscale = 0.5
ownpal = 1
facing = Ifelse(Random<500,-1,1)

[State 3852, PowerSet 1]
type  = PowerSet
trigger1 = Power >= var(20)
value = var(20)

[State 3852, PowerSet 2]
type  = VarSet
trigger1 = 1
var(20) = Power

[State 3852, End]
type = ChangeState
trigger1 =Time >= 600
trigger2 =RoundState>=3
value = 3853
;----------------------------------------------------------------------
;Alarm Clock - Remove
[Statedef 3853]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority=-50

[State 3853, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3853, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignoreHitPause = 1

[State 3853, NotHitBy]
type=NotHitBy
trigger1=1
time=1
value=SCA

[State 3853, Alarm Sound Pan]
type = SndPan
trigger1 = 1
channel = 7

[State 3853, Trans]
type = Trans
trigger1 =1
trans = AddAlpha
alpha = 256-21*(time+1),0+21*(time+1)
ignorehitpause =1

[State 3853, Trans]
type = Trans
trigger1 =Time > 10
trans = AddAlpha
alpha = 0,256
ignorehitpause =1

[State 3853, End]
type = DestroySelf
trigger1 =Time>10
trigger1 =!NumHelper(3805)
;---------------------------------------------------------------------------
;CAMERA FOCUS
[Statedef 6001]
type = S
physics  = S
anim = 0
ctrl = 0

[state 6001,TURN]
type=turn
trigger1=ishelper(6001)
trigger1=facing!=root,facing
ignorehitpause=1

[State 6001,vel]
type = VelSet
trigger1 = parent,pos X > 0
x = ifelse(facing = 1,4,-4)
[State 6001,vel]
type = VelSet
trigger1 = parent,pos X < 0
x = ifelse(facing = 1,-4,4)
[State 6001,vel]
type = VelSet
trigger1 = parent,pos X = [-5,5]
x = 0

[State 6001, WIDTH]
type = Width
trigger1 = 1
value = 1,1

[State 6001, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6001,AS]
type = AssertSpecial
Trigger1 = 1
flag = invisible
flag2 = noshadow

[State 6001,Bound]
type = ScreenBound
trigger1 =1
value =1
movecamera = 320,0
[State 6001,push]
type = PlayerPush
trigger1 =1
value = 0

[State 6001, Destroyself]
type = destroyself
trigger1 = Time = 50
trigger1 = enemy, Life >= 1
trigger2=numhelper(6001)>=2
;---------------------------------------------------------------------
;McDonald's Characters
[Statedef 6990]
type = S
movetype = I
physics = N
anim = 9999
sprpriority = -5

[State 6990, BindToRoot]
type = BindToRoot
trigger1 = Time < 15
pos = -300 + (20 * Time), 0

[State 6990, BindToRoot]
type = BindToRoot
trigger1 = Time = 15
pos = 0, 0

[State 6990, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 6990, Birdie]
type = Explod
trigger1 = !Time
anim = 6990
ID = 6990
pos = -50,0
postype = p1
bindtime = -1
facing = 1
removetime = -1
scale = const(size.xscale), const(size.yscale)
sprpriority = -5
ownpal = 1
ignorehitpause = 1
shadow = -1

[State 6990, Hamburglar]
type = Explod
trigger1 = !Time
anim = 6991
ID = 6991
pos = 0,0
postype = p1
bindtime = -1
facing = 1
removetime = -1
scale = const(size.xscale), const(size.yscale)
sprpriority = -5
ownpal = 1
ignorehitpause = 1
shadow = -1

[State 6990, Grimace]
type = Explod
trigger1 = !Time
anim = 6992
ID = 6992
pos = 50,0
postype = p1
bindtime = -1
facing = 1
removetime = -1
scale = const(size.xscale), const(size.yscale)
sprpriority = -5
ownpal = 1
ignorehitpause = 1
shadow = -1

[State 6990, PlaySnd]
type = PlaySnd
trigger1 = !Time
value = 6990,0
channel = 0

[State 6990, SndPan]
type = SndPan
trigger1 = 1
pan = 0
channel = 0

[State 6990, StopSnd]
type = StopSnd
trigger1 = RoundState < 3
channel = 0
[State 6990, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState < 3
id = -1
[State 6990, DestroySelf]
type = DestroySelf
trigger1 = RoundState < 3
;========================<FIRE>=============================
[Statedef 7180]
physics=N
velset=0,0
anim=9999
sprpriority=4
[State 7180, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause=1
[State 7180, flames]
type=explod
trigger1= 1
anim=7182
ID=7182
sprpriority=3
postype=p2
vel=-.2,-.75
pos= (enemynear,const(size.mid.pos.x)), ifelse((enemynear,statetype=L), 0, (enemynear,const(size.mid.pos.y) + 10))
random=40,40
scale=.5,.5
ownpal=1
[State 7180, Pos]
type=posadd
trigger1= 1
x=ceil(p2dist x)
y=ceil(p2dist y)
[State 7180, remove flames]
type=removeexplod
trigger1= enemynear,stateno=3320 && enemynear,movetype=H
ID=7182
[State End]
type=destroyself
triggerall= numenemy
trigger1= enemynear,ctrl
trigger2= enemynear,movetype!=H || enemynear,stateno=5300
trigger3= enemynear,statetype=L && (enemynear,stateno!=[5080,5081])
trigger4= enemynear,stateno=3320 && enemynear,movetype=H
[State End]
type=destroyself
trigger1= !numenemy || time>=120
;========================<FIRE>=============================
[Statedef 7181]
physics=N
velset=0,0
anim=9999
sprpriority=4
[State 7181, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause=1
[State 7181, flames]
type=explod
trigger1= 1
anim=7182
ID=7182
sprpriority=3
postype=p1
vel=.2,-.75
pos= const(size.mid.pos.x),Ifelse(root,statetype=L, 0, const(size.mid.pos.y) + 10)
random=40,40
scale=.5,.5
ownpal=1
[State 7180, Pos]
type=posadd
trigger1= 1
x=random%4
y=random%4
[State End]
type=destroyself
triggerall=numenemy
trigger1= root,ctrl
trigger2= root,Movetype!=H || root,stateno=5300
trigger3= root,statetype=L
[State End]
type=destroyself
trigger1= time>=120
trigger2= numhelper(7181)>8
;========================<SPARKS>=============================
;Guard Spark (Normal)
[StateDef 8000]
type = A
physics = N
moveType = I
anim = 8000
velset = 0,0
sprPriority = 99

[State 8000, Assert: No Shadow]
type = AssertSpecial
trigger1= 1
flag = NoShadow

[State 8000, CvS Hitspark]
type = ChangeState
trigger1 = !Root,var(43)
value = 8060

[State 8000, Scale]
type = AngleDraw
trigger1 = 1
scale = 0.125 + (0.046875 * Time), 0.125 + (0.046875 * Time)

[State 8000, Transparency]
type = Trans
trigger1 = Time < 4
trans = AddAlpha
alpha = 256, 256

[State 8000, Transparency]
type = Trans
trigger1 = Time >= 4
trans = AddAlpha
alpha = 256 - 64 * (Time - 4), 256

[State 8000, End]
type = DestroySelf
trigger1 = Time >= 8


;Guard Spark (Special)
[StateDef 8001]
type = A
physics = N
moveType = I
anim = 8001
velSet = 0,0
sprPriority = 99

[State 8001, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8001, CvS Hitspark]
type = ChangeState
trigger1 = !Root,var(43)
value = 8061

[State 8001, Scale]
type = AngleDraw
trigger1 = 1
scale = 0.25 + (0.03125 * Time), 0.25 + (0.03125 * Time)

[State 8001, Transparency]
type = Trans
trigger1 = time < 4
trans = AddAlpha
alpha = 256, 256

[State 8001, Transparency]
type = Trans
trigger1 = Time >= 4
trans = AddAlpha
alpha = 256 - 64 * (Time - 4), 256

[State 8001, End]
type = DestroySelf
trigger1 = Time >= 8


;=========================================================================
;HI Res Hitspark Coding 1.0
;=========================================================================
;Hit Spark for Helpers and Throws
[StateDef 8005]
physics = N
anim = 9999
velSet = 0,0
sprPriority = 99

[State 8005, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8005, Normal]
type = ChangeState
trigger1 = Parent,StateNo = [0,999]
trigger1 = Parent,var(33) = [8010,8012]
value = Parent,var(33) + ifelse(!Root,var(43), 60, 0)

[State 8005, Special]
type = ChangeState
trigger1 = Parent,StateNo = [1000,2999]
value = 8013 + ifelse(!Root,var(43), 60, 0)

[State 8005, Super]
type = ChangeState
trigger1 = Parent,StateNo = [3000,4999]
value = 8014 + ifelse(!Root,var(43), 60, 0)

[State 8005, ChangeState]
type = ChangeState
trigger1 = 1
value = 8012 + ifelse(!Root,var(43), 60, 0)
;-------------------------------------------------------------------------
;Weak Hit Spark
[StateDef 8010]
type = A
physics = N
moveType = I
anim = 8010
velSet = 0,0
sprPriority = 99

[State 8010, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8010, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)>=2,1,0)

[State 8010, AngleSet]
type = AngleSet
trigger1 = !Time
value = 30 * (Random % 12)

[State 8010, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8010, Resize]
type = VarSet
trigger1 = !Time
fvar(1) = Ifelse(root,var(43)=1, 0.9, 1.0)
ignoreHitPause = 1

[State 8010, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = (0.3 - (Time * 0.03)) * fvar(1), (0.3 - (Time * 0.03)) * fvar(1)
ignoreHitPause = 1

[State 8010, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8010, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8010, Center Explod]
type = Explod
trigger1 = !Time
anim = 8011
ID = 1
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8010, Scale Center Explod]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = (0.15 + (0.009375 * Time)) * fvar(1), (0.15 + (0.009375 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time),256

[State 8010, Streaks Explod]
type = Explod
trigger1 = !Time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8010, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = (0.15 + (0.009375 * Time)) * fvar(1), (0.15 + (0.009375 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8010, Impact Explod]
type = Explod
trigger1 = !Time
anim = 8014
ID = 4
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1

[State 8010, Scale Impact Explod]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = (0.3 - (0.0375 * Time)), (0.3 - (0.0375 * Time))
trans = AddAlpha
alpha = 128 - (16 * Time), 256

[State 8010, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 16

[State 8010, End]
type = DestroySelf
trigger1 = Time >= 16
;-------------------------------------------------------------------------
;Medium Hit Spark
[StateDef 8011]
type = A
physics = N
moveType = I
anim = 8010
velSet = 0,0
sprPriority = 99

[State 8011, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8011, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)>=2,1,0)

[State 8011, AngleSet]
type = AngleSet
trigger1 = !Time
value = 30 * (Random % 12)

[State 8011, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8011, Resize]
type = VarSet
trigger1 = !Time
fvar(1) = Ifelse(root,var(43)=1, 0.9, 1.0)
ignoreHitPause = 1

[State 8011, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = (0.35 - (Time * 0.035)) * fvar(1), (0.35 - (Time * 0.035)) * fvar(1)
ignoreHitPause = 1

[State 8011, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8011, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8011, Center]
type = Explod
trigger1 = !Time
anim = 8011
ID = 1
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removetime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8011, Scale Center Explod]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = (0.175 + (0.0109375 * Time)) * fvar(1), (0.175 + (0.0109375 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8011, Streaks Explod]
type = Explod
trigger1 = !Time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8011, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = (0.175 + (0.0109375 * Time)) * fvar(1), (0.175 + (0.0109375 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8011, Impact Explod]
type = Explod
trigger1 = !Time
anim = 8014
ID = 4
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1

[State 8011, Scale Impact Explod]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = (0.35 - (0.04375 * Time)), (0.35 - (0.04375 * Time))
trans = AddAlpha
alpha = 128 - (16 * Time), 256

[State 8011, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 16

[State 8011, End]
type = DestroySelf
trigger1 = Time >= 16
;-------------------------------------------------------------------------
;Strong Hit Spark
[StateDef 8012]
type = A
physics = N
moveType = I
anim = 8010
velSet = 0,0
sprPriority = 99

[State 8012, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8012, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)>=2,1,0)

[State 8012, AngleSet]
type = AngleSet
trigger1 = !Time
value = 30 * (Random % 12)

[State 8012, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8012, Resize]
type = VarSet
trigger1 = !Time
fvar(1) = Ifelse(root,var(43)=1, 0.9, 1.0)
ignoreHitPause = 1

[State 8012, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = (0.4 - (Time * 0.04)) * fvar(1), (0.4 - (Time * 0.04)) * fvar(1)
ignoreHitPause = 1

[State 8012, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8012, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8012, Center Explod]
type = Explod
trigger1 = !Time
anim = 8011
ID = 1
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8012, Scale Center Explod]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = (0.2 + (0.0125 * Time)) * fvar(1), (0.2 + (0.0125 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8012, Streaks Explod]
type = Explod
trigger1 = !time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8012, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = (0.2 + (0.0125 * Time)) * fvar(1), (0.2 + (0.0125 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8012, Impact Explod]
type = Explod
trigger1 = !Time
anim = 8014
ID = 4
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1

[State 8012, Scale Impact Explod]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = (0.4 - (0.05 * Time)), (0.4 - (0.05 * Time))
trans = AddAlpha
alpha = 128 - (16 * Time), 256

[State 8012, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 16

[State 8012, End]
type = DestroySelf
trigger1 = Time >= 16
;-------------------------------------------------------------------------
;Special Move Hit Spark
[StateDef 8013]
type = A
physics = N
moveType = I
anim = 8010
velSet = 0,0
sprPriority = 99

[State 8013, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8013, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)>=2,2,0)

[State 8013, AngleSet]
type = AngleSet
trigger1 = !Time
value = 30 * (Random % 12)

[State 8013, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8013, Resize]
type = VarSet
trigger1 = !Time
fvar(1) = Ifelse(root,var(43)=1, 0.9, 1.0)
ignoreHitPause = 1

[State 8013, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = (0.45 - (Time * 0.045)) * fvar(1), (0.45 - (Time * 0.045)) * fvar(1)
ignoreHitPause = 1

[State 8012, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8013, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8013, Center Explod]
type = Explod
trigger1 = !Time
anim = 8011
ID = 1
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8013, Scale Center Explod]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = (0.225 + (0.0140625 * Time)) * fvar(1), (0.225 + (0.0140625 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8013, Streaks Explod]
type = Explod
trigger1 = !Time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8013, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = (0.225 + (0.0140625 * Time)) * fvar(1), (0.225 + (0.0140625 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8013, P2 Back Explod]
type = Explod
trigger1 = !Time
anim = 8013
ID = 3
posType = P1
facing = -1
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = -3
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1

[State 8013, Scale P2 Back Explod]
type = ModifyExplod
trigger1= NumExplod(3)
ID = 3
scale = 0.4 * fvar(1), 0.4 * fvar(1)
trans = AddAlpha
alpha = 256 - (32 * Time), 256

[State 8013, Impact Explod]
type = Explod
trigger1 = !Time
anim = 8014
ID = 4
posType = P1
facing = ifElse(random < 500, -1, 1)
vFacing = ifElse(random < 500, -1, 1)
sprPriority = 99
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1

[State 8013, Scale Impact Explod]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = (0.45 - (0.05625 * Time)), (0.45 - (0.05625 * Time))
trans = AddAlpha
alpha = 192 - (24 * Time), 256

[State 8013, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 16

[State 8013, End]
type = DestroySelf
trigger1 = Time >= 16
;-------------------------------------------------------------------------
;Super Hit Spark
[StateDef 8014]
type = A
physics = N
moveType = I
anim = 8010
velSet = 0,0
sprPriority = 99

[State 8014, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8014, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)=3,3,Ifelse(root,var(43)=2,2,0))

[State 8014, AngleSet]
type = AngleSet
trigger1 = !Time
value = 30 * (Random % 12)

[State 8014, AngleAdd]
type = AngleAdd
trigger1 = 1
value = 30

[State 8014, Resize]
type = VarSet
trigger1 = !Time
fvar(1) = Ifelse(root,var(43)=1, 0.9, 1.0)
ignoreHitPause = 1

[State 8014, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = (0.5 - (Time * 0.05)) * fvar(1), (0.5 - (Time * 0.05)) * fvar(1)
ignoreHitPause = 1

[State 8014, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8014, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8014, Center Explod]
type = Explod
trigger1 = !Time
anim = 8011
ID = 1
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
ownpal = 1

[State 8014, Scale Center Explod]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = (0.25 + (0.015625 * Time)) * fvar(1), (0.25 + (0.015625 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8014, Streaks Explod]
type = Explod
trigger1 = !Time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
ownpal = 0

[State 8014, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = (0.25 + (0.015625 * Time)) * fvar(1), (0.25 + (0.015625 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8014, P2 Back Explod]
type = Explod
trigger1 = !Time
anim = 8013
ID = 3
posType = P1
facing = -1
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = -3
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1
ownpal = 1

[State 8014, Scale P2 Back Explod]
type = ModifyExplod
trigger1 = NumExplod(3)
ID = 3
scale = 0.5 * fvar(1), 0.5 * fvar(1)
trans = AddAlpha
alpha = 256 - (32 * Time), 256

[State 8014, Impact Explod]
type = Explod
trigger1 = !Time
anim = 8014
ID = 4
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1

[State 8014, Scale Impact Explod]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = (0.5 - (0.0625 * Time)), (0.5 - (0.0625 * Time))
trans = AddAlpha
alpha = 256 - (32 * Time),256

[State 8014, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)>=2,3,0)

[State 8014, Remove Explods]
type = RemoveExplod
trigger1 = time >= 16

[State 8014, End]
type = DestroySelf
trigger1 = Time >= 16
;-------------------------------------------------------------------------
;Slash Spark for Helpers and Throws
[StateDef 8015]
physics = N
anim = 9999
velSet = 0,0
sprPriority = 99

[State 8015, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8015, Normal]
type = ChangeState
trigger1 = Parent,StateNo = [0,999]
trigger1 = Parent,var(33) = [8020,8022]
value = Parent,var(33) + ifelse(!Root,var(43), 60, 0)

[State 8015, Special]
type = ChangeState
trigger1 = Parent,StateNo = [1000,2999]
value = 8023 + ifelse(!Root,var(43), 60, 0)

[State 8015, Super]
type = ChangeState
trigger1 = Parent,StateNo = [3000,4999]
value = 8024 + ifelse(!Root,var(43), 60, 0)

[State 8015, ChangeState]
type = ChangeState
trigger1 = 1
value = 8022 + ifelse(!Root,var(43), 60, 0)
;-------------------------------------------------------------------------
;Normal Slash Spark
[StateDef 8020]
type = A
physics = N
moveType = I
anim = 8020
velSet = 0,0
sprPriority = 99

[State 8020, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8020, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)>=2,1,0)

[State 8020, AngleSet]
type = AngleSet
trigger1 = !Time
value = 15 * (Random % 24)

[State 8020, Weak]
type = VarSet
triggerall = !Time
trigger1 = !PrevStateNo | PrevStateNo = 8015
var(1) = 0
ignoreHitPause = 1

[State 8020, Resize]
type = VarSet
trigger1 = !Time
fvar(1) = Ifelse(root,var(43)=1, 0.9, 1.0) * Ifelse(var(1)=2, 0.888, Ifelse(var(1)=1, 0.777, 0.666))
ignoreHitPause = 1

[State 8020, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = ((0.5 + (Time * 0.15)) / 2) * fvar(1), ((1 - (Time * 0.1)) / 2) * fvar(1)
ignoreHitPause = 1

[State 8020, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8020, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8020, Streaks Explod]
type = Explod
trigger1 = !time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8020, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = ((0.225 + (0.0140625 * Time)) * fvar(1)), ((0.225 + (0.0140625 * Time)) * fvar(1))
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8020, Particles]
type = Explod
trigger1 = time<8
anim = 8022
ID = 17
postype = p1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
scale = 0.15,0.15
vel = Ifelse(random<500,2+random%2,-4+random%2), -5 + (random / 90.0)
accel = -1||1,-1||1
ignorehitpause = 1

[State 8020, Scale Particles]
type = ModifyExplod
trigger1 = NumExplod(17)
ID = 17
scale = (0.225 - (0.005 * Time)) * fvar(1), (0.225 - (0.005 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256
ignorehitpause = 1

[State 8020, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 16

[State 8020, End]
type = DestroySelf
trigger1 = Time >= 16
;-------------------------------------------------------------------------
;Normal Slash Spark (Medium)
[StateDef 8021]
type = A
physics = N
moveType = I
anim = 9999
velSet = 0,0
sprPriority = 99

[State 8021, Medium]
type = VarSet
trigger1 = 1
var(1) = 1
ignoreHitPause = 1

[State 8021, ChangeState]
type = ChangeState
trigger1 = 1
value = 8020
;-------------------------------------------------------------------------
;Normal Slash Spark (Strong)
[StateDef 8022]
type = A
physics = N
moveType = I
anim = 9999
velSet = 0,0
sprPriority = 99

[State 8022, Strong]
type = VarSet
trigger1 = 1
var(1) = 2
ignoreHitPause = 1

[State 8022, ChangeState]
type = ChangeState
trigger1 = 1
value = 8020
;-------------------------------------------------------------------------
;Special Move Slash Spark
[StateDef 8023]
type = A
physics = N
moveType = I
anim = 8020
velSet = 0,0
sprPriority = 99

[State 8023, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8023, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)>=2,2,0)

[State 8023, AngleSet]
type = AngleSet
trigger1 = !Time
value = 15 * (Random % 24)

[State 8023, Resize]
type = VarSet
trigger1 = !Time
fvar(1) = Ifelse(root,var(43)=1, 0.9, 1.0)
ignoreHitPause = 1

[State 8023, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = ((0.5 + (Time * 0.15)) / 2) * fvar(1), ((1 - (Time * 0.1)) / 2) * fvar(1)
ignoreHitPause = 1

[State 8023, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8023, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8023, Circle]
type = Explod
trigger1 = !Time
anim = 8021
ID = 8021
posType = p1
removeTime = 10
sprPriority = 99
pauseMoveTime = -1
superMoveTime = -1

[State 8023, Circle Scale]
type = ModifyExplod
trigger1 = NumExplod(8021)
ID = 8021
scale = (0.25 + (0.025 * Time)) * fvar(1), (0.25 + (0.025 * Time)) * fvar(1)
trans = AddAlpha
alpha = ceil(256 - 25.6 * Time), 256

[State 8023, Streaks Explod]
type = Explod
trigger1 = !Time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8023, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = (0.225 + (0.0140625 * Time)) * fvar(1), (0.225 + (0.0140625 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8023, Particles]
type = Explod
trigger1 = time<8
anim = 8022
ID = 17
postype = p1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
scale = 0.15,0.15
vel = Ifelse(random<500,2+random%2,-4+random%2), -5 + (random / 90.0)
accel = -1||1,-1||1
ignorehitpause = 1

[State 8023, Scale Particles]
type = ModifyExplod
trigger1 = NumExplod(17)
ID = 17
scale = (0.225 - (0.005 * Time)) * fvar(1), (0.225 - (0.005 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256
ignorehitpause = 1

[State 8023, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 16

[State 8023, End]
type = DestroySelf
trigger1 = Time >= 16
;-------------------------------------------------------------------------
;Super Move Slash Spark
[StateDef 8024]
type = A
physics = N
moveType = I
anim = 8020
velSet = 0,0
sprPriority = 99

[State 8024, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8024, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)=3,3,Ifelse(root,var(43)=2,2,0))

[State 8024, AngleSet]
type = AngleSet
trigger1 = !Time
value = 15 * (Random % 24)

[State 8024, Resize]
type = VarSet
trigger1 = !Time
fvar(1) = Ifelse(root,var(43)=1, 0.9, 1.0)
ignoreHitPause = 1

[State 8024, Scale]
type = AngleDraw
trigger1 = Time < 10
scale = ((0.5 + (Time * 0.15)) / 2) * fvar(1), ((1 - (Time * 0.1)) / 2) * fvar(1)
ignoreHitPause = 1

[State 8024, Scale]
type = AngleDraw
trigger1 = Time >= 10
scale = 0,0
ignoreHitPause = 1

[State 8024, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256
ignoreHitPause = 1

[State 8024, Circle]
type = Explod
trigger1 = !Time
anim = 8021
ID = 8021
posType = p1
removeTime = 10
sprPriority = 99
pauseMoveTime = -1
superMoveTime = -1
ownpal = 1

[State 8024, Circle Scale]
type = ModifyExplod
trigger1 = NumExplod(8021)
ID = 8021
scale = (0.3 + (0.03 * Time)) * fvar(1), (0.3 + (0.03 * Time)) * fvar(1)
trans = AddAlpha
alpha = ceil(256 - 25.6 * Time), 256

[State 8024, Streaks Explod]
type = Explod
trigger1 = !Time
anim = 8012
ID = 2
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
ownpal = 0

[State 8024, Scale Streaks Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = (0.25 + (0.015625 * Time)) * fvar(1), (0.25 + (0.015625 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8024, Particles]
type = Explod
trigger1 = time<10
anim = 8022
ID = 17
postype = p1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
sprPriority = 99
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1
scale = 0.15,0.15
vel = Ifelse(random<500,2+random%2,-4+random%2), -5 + (random / 90.0)
accel = -1||1,-1||1
ignorehitpause = 1
ownpal = 0

[State 8024, Scale Particles]
type = ModifyExplod
trigger1 = NumExplod(17)
ID = 17
scale = (0.25 - (0.005 * Time)) * fvar(1), (0.25 - (0.005 * Time)) * fvar(1)
trans = AddAlpha
alpha = 256 - (16 * Time), 256
ignorehitpause = 1

[State 8024, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,Ifelse(root,var(43)>=2,3,0)

[State 8024, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 16

[State 8024, End]
type = DestroySelf
trigger1 = Time >= 16
;------------------------------------------------------------
;Reversal Spark
[Statedef 8030]
type = A
physics = N
movetype = I
anim = 8030
velset = 0, 0
sprpriority = 99

[State 8030, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8030, Scale]
type = angledraw
trigger1 = 1
scale = 0.25 + (0.09375 * time), 0.25 + (0.09375 * time)
[State 8030, Trans]
type = trans
trigger1 = time < 4
trans = addalpha
alpha = 256, 256
[State 8030, Trans]
type = trans
trigger1 = time >= 4
trans = addalpha
alpha = 256 - 64 * (time -4), 256

[State 8030, End]
type = destroyself
trigger1 = time >= 8

;========================< BLOOD >=============================
;--- Small ---
[Statedef 8050]
type = A
anim = 9999
velset = 0, 0

[State 8050, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -3 + (random / 166.7), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1
[State 8050, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -3 + (random / 166.7), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1
[State 8050, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -3 + (random / 166.7), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1

[State 8050, End]
type = destroyself
trigger1 = 1


;--- Medium ---
[Statedef 8051]
type = A
anim = 9999
velset = 0, 0

[State 8051, Medium]
type = explod
trigger1 = !time
anim = 8051
ID = 8050
postype = p1
vel = -10 + (random / 50.0), -5 -(random / 200.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1

[State 8051, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -4 + (random / 125.0), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1
[State 8051, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -4 + (random / 125.0), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1
[State 8051, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -4 + (random / 125.0), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1

[State 8051, End]
type = destroyself
trigger1 = 1


;--- Large ---
[Statedef 8052]
type = A
anim = 9999
velset = 0, 0

[State 8052, Large]
type = explod
trigger1 = !time
anim = 8052
ID = 8050
postype = p1
vel = -(random / 333.3), -2.5 -(random / 400.0)
accel = 0, 0.25
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1

[State 8052, Medium]
type = explod
trigger1 = !time
anim = 8051
ID = 8050
postype = p1
vel = -10 + (random / 50.0), -5 -(random / 200.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1
[State 8052, Medium]
type = explod
trigger1 = !time
anim = 8051
ID = 8050
postype = p1
vel = -10 + (random / 50.0), -5 -(random / 200.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1

[State 8052, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -5 + (random / 100.0), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1
[State 8052, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -5 + (random / 100.0), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1
[State 8052, Small]
type = explod
trigger1 = !time
anim = 8050
ID = 8050
postype = p1
vel = -5 + (random / 100.0), -7.5 -(random / 400.0)
accel = 0, 0.5
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
trans = addalpha
alpha = 256, 128
sprpriority = 5
scale = 0.5, 0.5
ownpal = 1

[State 8052, End]
type = destroyself
trigger1 = 1

;=========================================================================
;CvS Style Hitsparks
;=========================================================================

;--- Guard Normal ---
[Statedef 8060]
type = A
velset = 0, 0
anim = 9999
sprpriority = 99

[State 8060, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8060, Center]
type = explod
trigger1 = !time
anim = 8060
ID = 8060
postype = p1
facing = 1
vfacing = 1
scale = 0.5, 0.5
sprpriority = 99
removetime = 12
pausemovetime = -1
supermovetime = -1

[State 8060, Center Scale 1]
type = modifyexplod
trigger1 = numexplod(8060) && time < 4
ID = 8060
trans = addalpha
scale = (0.25 + (0.046875 * Time)) * const(size.xscale), (0.25 + (0.046875 * Time)) * const(size.yscale)
alpha = 256, 256

[State 8060, Center Scale 2]
type = modifyexplod
trigger1 = numexplod(8060) && time >= 4
ID = 8060
trans = addalpha
scale = (0.25 + (0.046875 * Time)) * const(size.xscale), (0.25 + (0.046875 * Time)) * const(size.yscale)
alpha = 256 -ceil(32.0 * (time - 4)), 256

[State 8060, End]
type = removeexplod
trigger1 = time >= 12
[State 8060, End]
type = destroyself
trigger1 = time >= 12


;--- Guard Special ---
[Statedef 8061]
type = A
velset = 0, 0
anim = 8061
sprpriority = 99

[State 8061, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8061, Angle]
type = angledraw
trigger1 = 1
scale = 0.75 * (0.325 + (0.03125 * Time)), 1.25 * (0.325 + (0.03125 * Time))

[State 8061, Trans]
type = trans
trigger1 = time < 4
trans = addalpha
alpha = 256, 256
[State 8061, Trans]
type = trans
trigger1 = time >= 4
trans = addalpha
alpha = 256 -ceil(32.0 * (time - 4)), 256

[State 8061, Center]
type = explod
trigger1 = !time
anim = 8060
ID = 8060
postype = p1
facing = 1
vfacing = 1
scale = 0.5, 0.5
sprpriority = 99
removetime = 12
pausemovetime = -1
supermovetime = -1

[State 8061, Center Scale 1]
type = modifyexplod
trigger1 = numexplod(8060) && time < 4
ID = 8060
trans = addalpha
scale = (0.25 + (0.046875 * Time)) * const(size.xscale), (0.25 + (0.046875 * Time)) * const(size.yscale)
alpha = 256, 256

[State 8061, Center Scale 2]
type = modifyexplod
trigger1 = numexplod(8060) && time >= 4
ID = 8060
trans = addalpha
scale = (0.25 + (0.046875 * Time)) * const(size.xscale), (0.25 + (0.046875 * Time)) * const(size.yscale)
alpha = 256 -ceil(32.0 * (time - 4)), 256

[State 8061, End]
type = removeexplod
trigger1 = time >= 12
[State 8061, End]
type = destroyself
trigger1 = time >= 12


;--- Normal ---
[Statedef 8070]
type = A
anim = 8070
velset = 0, 0
sprpriority = 99

[State 8070, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8070, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,1

[State 8070, Angle]
type = angleset
trigger1 = !time
value = 15 * (random % 24)

[State 8070, Weak]
type = VarSet
triggerall = !Time
trigger1 = !PrevStateNo | PrevStateNo = 8005
var(1) = 0
ignoreHitPause = 1

[State 8070, Scale]
type = angledraw
trigger1 = time < 10
scale = .5 * (1 + (time * 0.3)), .5 * (1 -(time * 0.1))
[State 8070, Scale]
type = angledraw
trigger1 = time >= 10
scale = 0, 0

[State 8070, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8070, Center]
type = explod
trigger1 = !time
anim = 8071
ID = 8071
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
scale = 0.5 * const(size.xscale), 0.5 * const(size.yscale)
sprpriority = 99
pausemovetime = -1
supermovetime = -1

[State 8070, VarSet]
type = VarSet
trigger1 = 1
fvar(17) = 0.25 + (random / 5000.0)

[State 8070, Particles]
type = explod
trigger1 = time <= 4
trigger1 = random < (1000.0 / numhelper(8000))
anim = 8022
ID = 8022
postype = p1
vel = -10 + (random / 50.0), -10 + (random / 50.0)
scale = fvar(17) * const(size.xscale), fvar(17) * const(size.yscale)
sprpriority = 99
removeTime = 16
pausemovetime = -1
supermovetime = -1
[State 8070, Particles Scale]
type = modifyexplod
trigger1 = numexplod(8022)
ID = 8022
trans = addalpha
alpha = 256 -16 * time, 256

[State 8070, End]
type = removeexplod
trigger1 = time >= 16
[State 8070, End]
type = destroyself
trigger1 = time >= 16


;--- Normal (Medium) ---
[StateDef 8071]
type = A
physics = N
moveType = I
anim = 9999
velSet = 0,0
sprPriority = 99

[State 8071, Medium]
type = VarSet
trigger1 = 1
var(1) = 1
ignoreHitPause = 1

[State 8071, ChangeState]
type = ChangeState
trigger1 = 1
value = 8070


;--- Normal (Strong) ---
[StateDef 8072]
type = A
physics = N
moveType = I
anim = 9999
velSet = 0,0
sprPriority = 99

[State 8072, Strong]
type = VarSet
trigger1 = 1
var(1) = 2
ignoreHitPause = 1

[State 8072, ChangeState]
type = ChangeState
trigger1 = 1
value = 8070


;--- Special ---
[Statedef 8073]
type = A
anim = 8070
velset = 0, 0
sprpriority = 99

[State 8073, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8073, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,2

[State 8073, Angle]
type = angleset
trigger1 = !time
value = 15 * (random % 24)

[State 8073, Scale]
type = angledraw
trigger1 = time < 10
scale = .565 * (1 + (time * 0.3)), .565 * (1 -(time * 0.1))
[State 8073, Scale]
type = angledraw
trigger1 = time >= 10
scale = 0, 0

[State 8073, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8073, Center]
type = explod
trigger1 = !time
anim = 8071
ID = 8071
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
scale = 0.565 * const(size.xscale), 0.565 * const(size.yscale)
sprpriority = 99
pausemovetime = -1
supermovetime = -1

[State 8073, Circle]
type = explod
trigger1 = !time
anim = 8021
ID = 8021
postype = p1
removetime = 10
sprpriority = 99
pausemovetime = -1
supermovetime = -1
[State 8073, Circle Scale]
type = modifyexplod
trigger1 = numexplod(8021)
ID = 8021
scale = (0.25 + (0.025 * time)) * const(size.xscale), (0.25 + (0.025 * time)) * const(size.yscale)
trans = addalpha
alpha = ceil(256 -25.6 * time), 256

[State 8073, VarSet]
type = VarSet
trigger1 = 1
fvar(17) = 0.25 + (random / 5000.0)

[State 8073, Particles]
type = explod
trigger1 = time <= 4
trigger1 = random < (1000.0 / numhelper(8000))
anim = 8022
ID = 8022
postype = p1
vel = -10 + (random / 50.0), -10 + (random / 50.0)
scale = fvar(17) * const(size.xscale), fvar(17) * const(size.yscale)
sprpriority = 99
removeTime = 16
pausemovetime = -1
supermovetime = -1
[State 8073, Particles Scale]
type = modifyexplod
trigger1 = numexplod(8022)
ID = 8022
trans = addalpha
alpha = 256 -16 * time, 256

[State 8073, End]
type = removeexplod
trigger1 = time >= 16
[State 8073, End]
type = destroyself
trigger1 = time >= 16


;--- Super ---
[Statedef 8074]
type = A
anim = 8070
velset = 0, 0
sprpriority = 99

[State 8074, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8074, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,2

[State 8074, Angle]
type = angleset
trigger1 = !time
value = 15 * (random % 24)

[State 8074, Scale]
type = angledraw
trigger1 = time < 10
scale = .625 * (1 + (time * 0.3)), .625 * (1 -(time * 0.1))
[State 8074, Scale]
type = angledraw
trigger1 = time >= 10
scale = 0, 0

[State 8074, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8074, Center]
type = explod
trigger1 = !time
anim = 8071
ID = 8071
postype = p1
facing = ifelse(random < 500, -1, 1)
vfacing = ifelse(random < 500, -1, 1)
scale = 0.625 * const(size.xscale), 0.625 * const(size.yscale)
sprpriority = 99
pausemovetime = -1
supermovetime = -1

[State 8074, Circle]
type = explod
trigger1 = !time
anim = 8021
ID = 8021
postype = p1
removetime = 10
sprpriority = 99
pausemovetime = -1
supermovetime = -1
ownpal = 1
[State 8074, Circle Scale]
type = modifyexplod
trigger1 = numexplod(8021)
ID = 8021
scale = (0.3 + (0.03 * time)) * const(size.xscale), (0.3 + (0.03 * time)) * const(size.yscale)
trans = addalpha
alpha = ceil(256 -25.6 * time), 256

[State 8074, VarSet]
type = VarSet
trigger1 = 1
fvar(17) = 0.25 + (random / 5000.0)

[State 8074, Particles]
type = explod
trigger1 = time <= 4
trigger1 = random < (1000.0 / numhelper(8000))
anim = 8022
ID = 8022
postype = p1
vel = -10 + (random / 50.0), -10 + (random / 50.0)
scale = fvar(17) * const(size.xscale), fvar(17) * const(size.yscale)
sprpriority = 99
removeTime = 16
pausemovetime = -1
supermovetime = -1
ownpal = 0
[State 8074, Particles Scale]
type = modifyexplod
trigger1 = numexplod(8022)
ID = 8022
trans = addalpha
alpha = 256 -16 * time, 256

[State 8074, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,3

[State 8074, End]
type = removeexplod
trigger1 = time >= 16
[State 8074, End]
type = destroyself
trigger1 = time >= 16


;--- Normal Cut ---
[Statedef 8080]
type = A
anim = 8020
velset = 0, 0
sprpriority = 99

[State 8080, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8080, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,1

[State 8080, Angle]
type = angleset
trigger1 = !time
value = 15 * (random % 24)

[State 8080, Weak]
type = VarSet
triggerall = !Time
trigger1 = !PrevStateNo | PrevStateNo = 8015
var(1) = 0
ignoreHitPause = 1

[State 8080, Scale]
type = angledraw
trigger1 = time < 10
scale = .4375 * (0.5 + (time * 0.15)), .4375 * (1 -(time * 0.1))
[State 8080, Scale]
type = angledraw
trigger1 = time >= 10
scale = 0, 0

[State 8080, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8080, VarSet]
type = VarSet
trigger1 = 1
fvar(17) = 0.25 + (random / 5000.0)

[State 8080, Particles]
type = explod
trigger1 = time <= 4
trigger1 = random < (1000.0 / numhelper(8000))
anim = 8022
ID = 8022
postype = p1
vel = -10 + (random / 50.0), -10 + (random / 50.0)
scale = fvar(17) * const(size.xscale), fvar(17) * const(size.yscale)
sprpriority = 99
removeTime = 16
pausemovetime = -1
supermovetime = -1
[State 8080, Particles Scale]
type = modifyexplod
trigger1 = numexplod(8022)
ID = 8022
trans = addalpha
alpha = 256 -16 * time, 256

[State 8080, End]
type = removeexplod
trigger1 = time >= 16
[State 8080, End]
type = destroyself
trigger1 = time >= 16


;--- Normal Cut (Medium) ---
[StateDef 8081]
type = A
physics = N
moveType = I
anim = 9999
velSet = 0,0
sprPriority = 99

[State 8081, Medium]
type = VarSet
trigger1 = 1
var(1) = 1
ignoreHitPause = 1

[State 8081, ChangeState]
type = ChangeState
trigger1 = 1
value = 8080


;--- Normal Cut (Strong) ---
[StateDef 8082]
type = A
physics = N
moveType = I
anim = 9999
velSet = 0,0
sprPriority = 99

[State 8082, Strong]
type = VarSet
trigger1 = 1
var(1) = 2
ignoreHitPause = 1

[State 8082, ChangeState]
type = ChangeState
trigger1 = 1
value = 8080


;--- Special Cut ---
[Statedef 8083]
type = A
anim = 8020
velset = 0, 0
sprpriority = 99

[State 8083, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8083, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,2
ignorehitpause=1

[State 8083, Angle]
type = angleset
trigger1 = !time
value = 15 * (random % 24)

[State 8083, Scale]
type = angledraw
trigger1 = time < 10
scale = .5 * (0.5 + (time * 0.15)), .5 * (1 -(time * 0.1))
[State 8083, Scale]
type = angledraw
trigger1 = time >= 10
scale = 0, 0

[State 8083, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8083, Circle]
type = explod
trigger1 = !time
anim = 8021
ID = 8021
postype = p1
removetime = 10
sprpriority = 99
pausemovetime = -1
supermovetime = -1
[State 8083, Circle Scale]
type = modifyexplod
trigger1 = numexplod(8021)
ID = 8021
scale = (0.25 + (0.025 * time)) * const(size.xscale), (0.25 + (0.025 * time)) * const(size.yscale)
trans = addalpha
alpha = ceil(256 -25.6 * time), 256

[State 8083, VarSet]
type = VarSet
trigger1 = 1
fvar(17) = 0.25 + (random / 5000.0)

[State 8083, Particles]
type = explod
trigger1 = time <= 4
trigger1 = random < (1000.0 / numhelper(8000))
anim = 8022
ID = 8022
postype = p1
vel = -10 + (random / 50.0), -10 + (random / 50.0)
scale = fvar(17) * const(size.xscale), fvar(17) * const(size.yscale)
sprpriority = 99
removeTime = 16
pausemovetime = -1
supermovetime = -1
[State 8083, Particles Scale]
type = modifyexplod
trigger1 = numexplod(8022)
ID = 8022
trans = addalpha
alpha = 256 -16 * time, 256

[State 8083, End]
type = removeexplod
trigger1 = time >= 16
[State 8083, End]
type = destroyself
trigger1 = time >= 16


;--- Super Cut ---
[Statedef 8084]
type = A
anim = 8020
velset = 0, 0
sprpriority = 99

[State 8084, Assert]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 8084, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,2
ignorehitpause=1

[State 8084, Angle]
type = angleset
trigger1 = !time
value = 15 * (random % 24)

[State 8084, Scale]
type = angledraw
trigger1 = time < 10
scale = .5 * (0.5 + (time * 0.15)), .5 * (1 -(time * 0.1))
[State 8084, Scale]
type = angledraw
trigger1 = time >= 10
scale = 0, 0

[State 8084, Trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State 8084, Circle]
type = explod
trigger1 = !time
anim = 8021
ID = 8021
postype = p1
removetime = 10
sprpriority = 99
pausemovetime = -1
supermovetime = -1
ownpal = 1
[State 8084, Circle Scale]
type = modifyexplod
trigger1 = numexplod(8021)
ID = 8021
scale = (0.3 + (0.03 * time)) * const(size.xscale), (0.3 + (0.03 * time)) * const(size.yscale)
trans = addalpha
alpha = ceil(256 -25.6 * time), 256

[State 8084, VarSet]
type = VarSet
trigger1 = 1
fvar(17) = 0.25 + (random / 5000.0)

[State 8084, Particles]
type = explod
trigger1 = time <= 4
trigger1 = random < (1000.0 / numhelper(8000))
anim = 8022
ID = 8022
postype = p1
vel = -10 + (random / 50.0), -10 + (random / 50.0)
scale = fvar(17) * const(size.xscale), fvar(17) * const(size.yscale)
sprpriority = 99
removeTime = 16
pausemovetime = -1
supermovetime = -1
ownpal = 0
[State 8084, Particles Scale]
type = modifyexplod
trigger1 = numexplod(8022)
ID = 8022
trans = addalpha
alpha = 256 -16 * time, 256

[State 8084, RemapPal]
type = RemapPal
trigger1 =!time
source = 8010,0
dest = 8010,3
ignorehitpause=1

[State 8084, End]
type = removeexplod
trigger1 = time >= 16
[State 8084, End]
type = destroyself
trigger1 = time >= 16


;======================<JUMP DUST>===========================
;Jump Dust 
[StateDef 8100]
type = S
anim = 9999
velSet = 0,0

[State 8100, Bind]
type = BindToRoot
trigger1 = Time

[State 8100, Floor Dust]
type = Explod
trigger1 = !Time
anim = 8100
sprPriority = 3
posType = P1
pos = 0, ceil(pos y)
scale = Ifelse(root,prevstateno=123,0.75,0.5),Ifelse(root,prevstateno=123,0.75,0.5)
pauseMoveTime = -1
superMoveTime = -1
ownpal = 1

[State 8100, Player Dust]
type = Explod
trigger1 = !Time || Time = 2 || Time = 6
anim = 8101
sprPriority = 3
posType = P1
scale = Ifelse(root,prevstateno=123,0.75,0.5),Ifelse(root,prevstateno=123,0.75,0.5)
pauseMoveTime = -1
superMoveTime = -1
ownpal = 1

[State 8100, End]
type = DestroySelf
trigger1 = Time >= 7

;======================<DASH DUST>===========================
;Dash Dust
[StateDef 8103]
type = A
anim = 9999
velSet = 0,0
sprPriority = 5

[State 8103, posSet]
type = PosSet
trigger1 = !Time = 0
y = 0

[State 8103, Dash Dust]
type = Explod
trigger1 = Time = 0 || Time = 3 || Time = 6
anim = 8103
ID = ifElse((Time = 6), 3, ifElse((Time = 3), 2, 1))
posType = P1
pos = 0,-4
random = 8,8
vel = -3 - (Random / 1000.0), -2 - (Random / 2000.0)
facing = ifElse(Random < 500,-1,1)
vFacing = ifElse(Random < 500,-1,1)
removeTime = 16
sprPriority = 3
pauseMoveTime = -1
superMoveTime = -1

[State 8103, Scale Explod 1]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = 0.1 + (0.025 * Time), 0.1 + (0.025 * Time)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8103, Scale Explod 2]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = 0.1 + (0.025 * (Time - 3)), 0.1 + (0.025 * (Time - 3))
trans = AddAlpha
alpha = 256 - (16 * (Time - 3)), 256

[State 8103, Scale Explod 3]
type = ModifyExplod
trigger1 = NumExplod(3)
ID = 3
scale = 0.1 + (0.025 * (Time - 6)), 0.1 + (0.025 * (Time - 6))
trans = AddAlpha
alpha = 256 - (16 * (Time - 6)), 256

[State 8103, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 22

[State 8103, End]
type = DestroySelf
trigger1 = !NumExplod

;======================<LIGHT IMPACT DUST>===========================
;Light Impact Dust 
[StateDef 8108]
type = A
anim = 9999
velSet = 0,0
sprPriority = 5

[State 8108, Snd]
type = PlaySnd
trigger1 = !Time && IsHelper(8108)
value = 5000,11

[State 8108, Impact Dust Explod]
type = Explod
trigger1 = !Time
anim = 8108
ID = ifElse(Time = 8, 3, ifElse(Time = 4, 2, 1))
posType = P1
removeTime = -1
sprPriority = -10
pauseMoveTime = -1
superMoveTime = -1

[State 8108, Scale]
type = ModifyExplod
trigger1 = 1
scale = 0.25 + (0.03125 * Time), 0.25 + (0.03125 * Time)
trans = AddAlpha
alpha = ifElse(Time < 4, 256, 256 - (64 * (Time - 4))), 256

[State 8108, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 8

[State 8108, End]
type = DestroySelf
trigger1 = !NumExplod

;======================<LIGHT WALL IMPACT DUST>===========================
;Light Wall Impact Dust 
[StateDef 8109]
type = A
anim = 9999
velSet = 0,0
sprPriority = 5

[State 8109, PosAdd]
type = PosAdd
trigger1 = !Time && IsHelper(8109)
x = 5

[State 8109, Snd]
type = PlaySnd
trigger1 = !Time && IsHelper(8109)
value = 5000,11

[State 8109, Impact Dust Explod]
type = Explod
trigger1 = !Time
anim = 8109
ID = ifElse(Time = 8, 3, ifElse(Time = 4, 2, 1))
posType = P1
removeTime = -1
sprPriority = -10
pauseMoveTime = -1
superMoveTime = -1

[State 8109, Scale]
type = ModifyExplod
trigger1 = 1
scale = 0.25 + (0.03125 * Time), 0.25 + (0.03125 * Time)
trans = AddAlpha
alpha = ifElse(Time < 4, 256, 256 - (64 * (Time - 4))), 256

[State 8109, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 8

[State 8109, End]
type = DestroySelf
trigger1 = !NumExplod

;======================<IMPACT DUST>===========================
;Impact Dust 
[StateDef 8110]
type = A
anim = 9999
velSet = 0,0
sprPriority = 5

[State 8110, Snd]
type = PlaySnd
trigger1 = !Time && IsHelper(8110)
value = 669,0

[State 8110, Impact Dust Explod 1]
type = Explod
trigger1 = !Time
anim = 8110
ID = ifElse(Time = 8, 3, ifElse(Time = 4, 2, 1))
posType = P1
removeTime = -1
sprPriority = -10
pauseMoveTime = -1
superMoveTime = -1

[State 8110, Impact Dust Explod 2]
type = Explod
trigger1 = !Time
anim = 8120
ID = 2
posType = P1
removeTime = -1
sprPriority = -10
pauseMoveTime = -1
superMoveTime = -1

[State 8110, Scale]
type = ModifyExplod
trigger1 = 1
scale = 0.25 + (0.03125 * Time), 0.25 + (0.03125 * Time)
trans = AddAlpha
alpha = ifElse(Time < 4, 256, 256 - (64 * (Time - 4))), 256

[State 8110, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 8

[State 8110, End]
type = DestroySelf
trigger1 = !NumExplod

;======================<WALL IMPACT DUST>===========================
;Wall Impact Dust
[StateDef 8111]
type = A
anim = 9999
velSet = 0,0
sprPriority = 5

[State 8111, PosAdd]
type = PosAdd
trigger1 = !Time && IsHelper(8111)
x = 5

[State 8111, Snd]
type = PlaySnd
trigger1 = !Time && IsHelper(8111)
value = 669,0

[State 8111, Impact Dust Explod 1]
type = Explod
trigger1 = !Time
anim = 8111
ID = ifElse(Time = 8, 3, ifElse(Time = 4, 2, 1))
posType = P1
removeTime = -1
sprPriority = -10
pauseMoveTime = -1
superMoveTime = -1

[State 8111, Impact Dust Explod 2]
type = Explod
trigger1 = !Time
anim = 8121
ID = 2
posType = P1
removeTime = -1
sprPriority = -10
pauseMoveTime = -1
superMoveTime = -1

[State 8111, Scale]
type = ModifyExplod
trigger1 = 1
scale = 0.25 + (0.03125 * Time), 0.25 + (0.03125 * Time)
trans = AddAlpha
alpha = ifElse(Time < 4, 256, 256 - (64 * (Time - 4))), 256

[State 8111, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 8

[State 8111, End]
type = DestroySelf
trigger1 = !NumExplod

;========================<RECOVER FX>=============================
;Recover FX
[StateDef 8200]
type = A
velSet = 0,0
anim = 8200
sprPriority = 5

[State 8200, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8200, Scale]
type = AngleDraw
trigger1 = 1
scale = 0.25 + (0.017 * Time), 0.25 + (0.017 * Time)

[State 8200, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = ceil(256 - 17.1 * Time), 256

[State 8200, End]
type = DestroySelf
trigger1 = Time >= 15

;========================<COUNTER TEXT FX>=============================
;Counter Text FX
[StateDef 8290]
type = A
physics = N
velSet = 0,0
anim = 9999

[State 8290, Circle FX Version]
type = ChangeState
trigger1 = Root,var(43) = 0
value = 8295

[State 8290, "Counter!" Text Explod]
type = Explod
trigger1 = !NumExplod(8290)
anim = 8290
ID = 8290
sprPriority = 64
posType = P1
facing = Facing
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8290, Scale]
type = ModifyExplod
trigger1 = Time < 8
ID = 8290
scale = 0.5, .5
trans = AddAlpha
alpha = 256,0

[State 8290, Scale]
type = ModifyExplod
trigger1 = Time >= 8
ID = 8290
scale = 0.5 + 0.0625 * (Time - 8), 0.5 + 0.0625 * (Time - 8)
trans = AddAlpha
alpha = 256 - 32 * (Time - 8), 32 * (Time - 8)

[State 8290, Safety]
type = RemoveExplod
trigger1 = Time >= 16

[State 8290, End]
type = DestroySelf
trigger1 = Time >= 16

;========================<POWER UP TEXT FX>=============================
;Power Up Text FX
[StateDef 8291]
type = A
physics = N
velSet = 0,0
anim = 9999

[State 8291, "Power Up!" Text Explod]
type = Explod
trigger1 = !NumExplod(8291)
anim = 8291
ID = 8291
sprPriority = 64
posType = P1
facing = Facing
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8291, Scale]
type = ModifyExplod
trigger1 = Time < 8
ID = 8291
scale = 0.5, .5
trans = AddAlpha
alpha = 256,0

[State 8291, Scale]
type = ModifyExplod
trigger1 = Time >= 8
ID = 8291
scale = 0.5 + 0.0625 * (Time - 8), 0.5 + 0.0625 * (Time - 8)
trans = AddAlpha
alpha = 256 - 32 * (Time - 8), 32 * (Time - 8)

[State 8291, Safety]
type = RemoveExplod
trigger1 = Time >= 16

[State 8291, End]
type = DestroySelf
trigger1 = Time >= 16

;========================<SUPPORT OK TEXT FX>=============================
;Support OK Text FX
[StateDef 8292]
type = A
physics = N
velSet = 0,0
anim = 9999

[State 8292, "Support OK!" Text Explod]
type = Explod
trigger1 = !NumExplod(8292)
anim = 8292
ID = 8292
sprPriority = 64
posType = P1
facing = Facing
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8292, Scale]
type = ModifyExplod
trigger1 = Time < 8
ID = 8292
scale = 0.5, .5
trans = AddAlpha
alpha = 256,0

[State 8292, Scale]
type = ModifyExplod
trigger1 = Time >= 8
ID = 8292
scale = 0.5 + 0.0625 * (Time - 8), 0.5 + 0.0625 * (Time - 8)
trans = AddAlpha
alpha = 256 - 32 * (Time - 8), 32 * (Time - 8)

[State 8292, Safety]
type = RemoveExplod
trigger1 = Time >= 16

[State 8292, End]
type = DestroySelf
trigger1 = Time >= 16

;========================<COUNTER CIRCLE FX>=============================
;Counter Circle FX
[Statedef 8295]
type = A
physics = N
velset = 0,0
anim = 9999

[State 8295, Circle]
type = explod
trigger1 = !numexplod(8295)
anim = 8295
ID = 8295
sprpriority = 5
postype = p1
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 8295, Scale]
type = modifyexplod
trigger1 = numexplod(8295)
ID = 8295
scale = 0.2 + (0.05 * time), 0.2 + (0.05 * time)
trans = addalpha
alpha = ceil(256 -(16 * time)), 256

[State 8295, Safety]
type = removeexplod
trigger1 = time >= 16

[State 8295, End]
type = destroyself
trigger1 = !numexplod

;==================<POWER CHARGE FX>==================
;Aura and Dust
[StateDef 8330]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velset = 0,0

[State 8330, BindToRoot]
type = BindToRoot
trigger1 = (Root, StateNo = 730)
pos = 0,0

[State 8330, Charging Sound]
type = PlaySnd
trigger1 = !Time
value = 730,0
channel = 0

[State 8330, Loop Sound]
type = PlaySnd
trigger1 = Time = 60
value = 730,1
channel = 1
loop = 1

[State 8330, SndPan]
type = SndPan
trigger1 = 1
channel = 0
pan = 0

[State 8330, SndPan]
type = SndPan
trigger1 = 1
channel = 1
pan = 0

[State 8330, RemapPal]
type = RemapPal
trigger1 = 1
source = 8330,0
dest = 8014,0

[State 8330, Power Charge Aura Level 0]
type = Explod
trigger1 = !NumExplod(8330)
ID = 8330
anim = 8330
sprPriority = 3
posType = P1
bindTime = -1
removeTime = -1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8330, RemapPal]
type = RemapPal
trigger1 = 1
source = 8330,0
dest = 8000,0

[State 8330, Power Charge Aura Level 1]
type = Explod
trigger1 = !NumExplod(8331)
ID = 8331
anim = 8330
sprPriority = 3
posType = P1
bindTime = -1
removeTime = -1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8330, RemapPal]
type = RemapPal
trigger1 = 1
source = 8330,0
dest = 8510,0

[State 8330, Power Charge Aura Level 2]
type = Explod
trigger1 = !NumExplod(8332)
ID = 8332
anim = 8330
sprPriority = 3
posType = P1
bindTime = -1
removeTime = -1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8330, RemapPal]
type = RemapPal
trigger1 = 1
source = 8330,0
dest = 8330,0

[State 8330, Power Charge Aura Level 3]
type = Explod
trigger1 = !NumExplod(8333)
ID = 8333
anim = 8330
sprPriority = 3
posType = P1
bindTime = -1
removeTime = -1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8330, Power Charge Dust]
type = Explod
trigger1 = !(Time % 6)
anim = 8105
sprPriority = -3
posType = P1
pos = 0, -ceil(pos y)
bindTime = -1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[State 8330, Modify Aura Level 0]
type = ModifyExplod
trigger1 = Numexplod(8330)
ID = 8330
scale = 0.5, Ifelse(Root, Power < 3000, 0.1 + 0.4 * (Root, Power / 3000.0), 0.5)
trans = addalpha
alpha = Ifelse(Root, Power >= 1000, 0, 256 - ceil(256  * (Root, Power / 1000.0))), 256

[State 8330, Modify Aura Level 1]
type = ModifyExplod
trigger1 = Numexplod(8331)
ID = 8331
scale = 0.5, Ifelse(Root, Power < 3000, 0.1 + 0.4 * (Root, Power / 3000.0), 0.5)
trans = addalpha
alpha = Ifelse(Root, Power >= 2000, 0, Ifelse(Root, Power >= 1000, 256 - ceil(256 * ((Root, Power - 1000) / 1000.0)), 0 + ceil(256 * (Root, Power / 1000.0)))), 256

[State 8330, Modify Aura Level 2]
type = ModifyExplod
trigger1 = Numexplod(8332)
ID = 8332
scale = 0.5, Ifelse(Root, Power < 3000, 0.1 + 0.4 * (Root, Power / 3000.0), 0.5)
trans = addalpha
alpha = Ifelse(Root, Power < 1000 || Root, Power >= 3000, 0, Ifelse(Root, Power >= 2000, 256 - ceil(256 * ((Root, Power - 2000) / 1000.0)), 0 + ceil(256 * ((Root, Power - 1000) / 1000.0)))), 256

[State 8330, Modify Aura Level 3]
type = ModifyExplod
trigger1 = Numexplod(8333)
ID = 8333
scale = 0.5, Ifelse(Root, Power < 3000, 0.1 + 0.4 * (Root, Power / 3000.0), 0.5)
trans = addalpha
alpha = Ifelse(Root, Power < 2000, 0, Ifelse(Root, Power >= 3000, 256, 0 + ceil(256 * ((Root, Power - 2000) / 1000.0)))), 256

[State 8330, StopSnd]
type = StopSnd
trigger1 = Root, StateNo != 730
trigger2 = Root, MoveType = H
channel = 0

[State 8330, StopSnd]
type = StopSnd
trigger1 = Root, StateNo != 730
trigger2 = Root, MoveType = H
channel = 1

[State 8330, RemoveExplod]
type = RemoveExplod
trigger1 = Root, StateNo != 730
trigger2 = Root, MoveType = H

[State 8330, End]
type = DestroySelf
trigger1 = Root, StateNo != 730
trigger2 = Root, MoveType = H


;Particles
[StateDef 8331]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 8331, BindToRoot]
type = BindToRoot
trigger1 = !(Time % 8)
pos = ceil(-151 + (Random / 3.125)), ceil(98 - (Random / 3.125))

[State 8331, RemapPal]
type = RemapPal
trigger1 = 1
source = 8330,0
dest = Ifelse(Power>=2500, 8330, Ifelse(Power>=1500, 8510, Ifelse(Power>=500, 8000, 8014))), 0

[State 8331, Particle]
type = Explod
trigger1 = (Time % 8) = 1
anim = 8331
sprPriority = ifElse(Random < 750, 5, -1)
posType = P1
vel = ((RootDist x + 0) / 32.0), ((RootDist y - 80) / 32.0);values to adjust
scale = ifElse(Random < 500, 0.5, -0.5), ifElse(Random < 500, 0.5, -0.5)
pauseMoveTime = -1
superMoveTime = -1
ownpal = 1

[State 8331, RemoveExplod]
type = RemoveExplod
trigger1 = Root, StateNo != 730
trigger2 = Root, MoveType = H

[State 8331, End]
type = DestroySelf
trigger1 = Root, StateNo != 730
trigger2 = Root, MoveType = H

;==================<ZERO COUNTER FX>==================
;Zero Counter FX
[StateDef 8350]
type = A
physics = N
moveType = I
anim = 9999
ctrl = 0
velSet = 0,0

[State 8350, bgPalFX]
type = bgPalFX
trigger1 = 1
time = 1
color = 16 * Time
mul = 16 * Time, 16 * Time, 16 * Time

[State 8350, Circle Explod]
type = Explod
trigger1 = !Time
anim = 8350
ID = 1
sprPriority = 3
posType = P1
removeTime = 16
superMoveTime = -1
ownPal = 1

[State 8350, Scale]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = (0.0625 * Time), (0.0625 * Time)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8350, Lightning Explod]
type = Explod
trigger1 = !Time
anim = 8351
ID = 2
sprPriority = -2
posType = P1
pos = 0, -ceil(pos y)
superMoveTime = -1
ownPal = 1

[State 8350, End]
type = DestroySelf
trigger1 = Time >= 16

;========================<CUSTOM COMBO>=============================
;Custom Combo 
[StateDef 8400]
type = A
physics = N
moveType = I
anim = 8400
ctrl = 0
velSet = 0,0
sprPriority = 5

[State 8400, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
ignoreHitPause = 1

[State 8400, BGpalFX]
type = BGpalFX
trigger1 = Time < 17
time = 1
mul = 128,128,128

[State 8400, BGpalFX]
type = BGpalFX
trigger1 = Time >= 17 && Time < 25
time = 1
mul = ceil(128 + 16 * (Time - 17)), ceil(128 + 16 * (Time - 17)), ceil(128 + 16 * (Time - 17))

[State 8400, Rotate]
type = AngleSet
trigger1 = !Time
value = 6 * (Random % 60)

[State 8400, Rotate]
type = AngleAdd
trigger1 = 1
value = -6

[State 8400, Scale]
type = AngleDraw
trigger1 = Time < 8
scale = (0.0625 * Time), (0.0625 * Time)
ignoreHitPause = 1

[State 8400, Scale]
type = AngleDraw
trigger1 = Time >= 8
scale = 0.5, 0.5
ignoreHitPause = 1

[State 8400, Transparency]
type = Trans
trigger1 = Time < 16
trans = AddAlpha
alpha = 256, 256
ignoreHitPause = 1

[State 8400, Transparency]
type = Trans
trigger1 = Time >= 16
trans = AddAlpha
alpha = ceil(256 - 25.6 * (Time - 16)), 256
ignoreHitPause = 1

[State 8400, Lines Explod]
type = Explod
trigger1 = !Time
anim = 8401
ID = 1
sprPriority = 5
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
removeTime = 16
superMoveTime = -1

[State 8400, Scale Lines Explod]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = 2 - (0.125 * Time), 2 - (0.125 * Time)
trans = AddAlpha
alpha = ifElse(Time < 4, 64 * Time, 256), 256

[State 8400, Circle Explod]
type = Explod
trigger1 = Time = 16
anim = 8402
ID = 2
sprPriority = 5
posType = P1
removeTime = 32
superMoveTime = -1

[State 8400, Scale Circle Explod]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = (0.1 * (Time - 16)), (0.1 * (Time - 16))
trans = AddAlpha
alpha = ceil(256 - 25.6 * (Time - 16)), 256

[State 8400, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 26

[State 8400, End]
type = DestroySelf
trigger1 = Time >= 26

;========================<SUPER PAUSE FX>=============================
;Level 1 Super FX
[StateDef 8500]
type = A
velSet = 0,0
anim = 8500
sprPriority = 5

[State 8500, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8500, Bind]
type = Null
trigger1 = !Time
trigger1 = 1 || fvar(24) := -ParentDist X
trigger1 = 1 || fvar(25) := -ParentDist Y

[State 8500, Bind]
type = BindToParent
trigger1 = 1
pos = fvar(24), fvar(25)

[State 8500, End Time Set]
type = VarSet
triggerall = !Time
trigger1 = 1
var(1) = 50

[State 8500, End Time >= 50]
type = VarSet
triggerall = !Time
trigger1 = var(1) >= 50
var(2) = 1

[State 8500, BGpalFX]
type = BGpalFX
trigger1 = !var(2)
trigger1 = Time < 39
trigger2 = var(2)
trigger2 = Time < (var(1) - 11)
time = 1
color = 0
mul = 0,0,256

[State 8500, BGpalFX]
type = BGpalFX
trigger1 = var(2)
trigger1 = Time >= (var(1) - 11) && Time < (var(1) - 1)
time = 1
color = ceil(25.6 * (Time - (var(1) - 11)))
mul = ceil(25.6 * (Time - (var(1) - 11))), ceil(25.6 * (Time - (var(1) - 11))), 256

[State 8500, Rotate]
type = AngleSet
trigger1 = !Time
value = 6 * (Random % 60)

[State 8500, Rotate]
type = AngleAdd
trigger1 = 1
value = -6

[State 8500, Scale]
type = AngleDraw
trigger1 = Time < 16
scale = (0.03125 * Time), (0.03125 * Time)

[State 8500, Scale]
type = AngleDraw
trigger1 = Time >= 16
scale = 0.5,0.5

[State 8500, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256

[State 8500, Lines Explod]
type = Explod
trigger1 = Time = 0 || Time = 8 || Time = 16 || Time = 24
anim = 8501
ID = ifElse(Time = 24, 4, ifElse(Time = 16, 3, ifElse(Time = 8, 2, 1)))
sprPriority = 5
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
removeTime = 16
superMoveTime = -1
bindtime = -1

[State 8500, Scale Lines Explod 1]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = 1 - (0.0625 * Time), 1 - (0.0625 * Time)
trans = AddAlpha
alpha = ifElse(Time < 4, 64 * Time, 256), 256

[State 8500, Scale Lines Explod 2]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = 1 - (0.0625 * (Time - 8)), 1 - (0.0625 * (Time - 8))
trans = AddAlpha
alpha = ifElse((Time - 8) < 4, 64 * (Time - 8), 256), 256

[State 8500, Scale Lines Explod 3]
type = ModifyExplod
trigger1 = NumExplod(3)
ID = 3
scale = 1 - (0.0625 * (Time - 16)), 1 - (0.0625 * (Time - 16))
trans = AddAlpha
alpha = ifElse((Time - 16) < 4, 64 * (Time - 16), 256), 256

[State 8500, Scale Lines Explod 3]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = 1 - (0.0625 * (Time - 24)), 1 - (0.0625 * (Time - 24))
trans = AddAlpha
alpha = ifElse((Time - 24) < 4, 64 * (Time - 24), 256), 256

[State 8500, Circle Explod]
type = Explod
trigger1 = Time = 24
anim = 8502
ID = 10
sprPriority = 5
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
removeTime = 32
superMoveTime = -1
bindtime = -1

[State 8500, Scale Circle Explod]
type = ModifyExplod
trigger1 = NumExplod(10)
ID = 10
scale = 2 - (0.125 * (Time - 24)), 2 - (0.125 * (Time - 24))
trans = AddAlpha
alpha = ifElse((Time - 24) < 4, 64 * (Time - 24), 256), 256

[State 8500, Afterimages]
type = Helper
trigger1 = Time = 0 && (Parent,ID = Root,ID)
helpertype = normal
name = "Afterimages"
ID = 8590
stateno = 8590
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = root,const(size.xscale)
size.yscale = root,const(size.yscale)
supermovetime = 999999
pausemovetime = 999999

[State 8500, Afterimages]
type = Helper
trigger1 = Time = 0 && (Parent,ID = Root,ID)
helpertype = normal
name = "Afterimages"
ID = 8591
stateno = 8590
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = root,const(size.xscale)
size.yscale = root,const(size.yscale)
supermovetime = 999999
pausemovetime = 999999

[State 8500, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 40

[State 8500, Assert: Invisible]
type = AssertSpecial
trigger1 = Time >= 40
flag = Invisible

[State 8500, End]
type = DestroySelf
trigger1 = !var(2)
trigger1 = Time >= 40
trigger2 = var(2)
trigger2 = Time >= var(1)


;Level 2 Super FX
[StateDef 8510]
type = A
velSet = 0,0
anim = 8510
sprPriority = 5

[State 8510, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8510, Bind]
type = Null
trigger1 = !Time
trigger1 = 1 || fvar(24) := -ParentDist X
trigger1 = 1 || fvar(25) := -ParentDist Y

[State 8510, Bind]
type = BindToParent
trigger1 = 1
pos = fvar(24), fvar(25)

[State 8510, End Time Set]
type = VarSet
triggerall = !Time
trigger1 = 1
var(1) = 50

[State 8510, End Time >= 50]
type = VarSet
triggerall = !Time
trigger1 = var(1) >= 50
var(2) = 1

[State 8510, BGpalFX]
type = BGpalFX
trigger1 = !var(2)
trigger1 = Time < 39
trigger2 = var(2)
trigger2 = Time < (var(1) - 11)
time = 1
color = 0
mul = 192,0,256

[State 8510, BGpalFX]
type = BGpalFX
trigger1 = var(2)
trigger1 = Time >= (var(1) - 11) && Time < (var(1) - 1)
time = 1
color = ceil(25.6 * (Time - (var(1) - 11)))
mul = ceil(192 + 6.4 * (Time - (var(1) - 11))), ceil(25.6 * (Time - (var(1) - 11))), 256

[State 8510, Rotate]
type = AngleSet
trigger1 = !Time
value = 6 * (Random % 60)

[State 8510, Rotate]
type = AngleAdd
trigger1 = 1
value = -6

[State 8510, Scale]
type = AngleDraw
trigger1 = Time < 16
scale = (0.03125 * Time), (0.03125 * Time)

[State 8510, Scale]
type = AngleDraw
trigger1 = Time >= 16
scale = 0.5, 0.5

[State 8510, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256

[State 8510, Lines Explod]
type = Explod
trigger1 = Time = 0 || Time = 8 || Time = 16 || Time = 24
anim = 8511
ID = ifElse(Time = 24, 4, ifElse(Time = 16, 3, ifElse(Time = 8, 2, 1)))
sprPriority = 5
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
removeTime = 16
superMoveTime = -1
bindtime = -1

[State 8510, Scale Lines Explod 1]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = 1 - (0.0625 * Time), 1 - (0.0625 * Time)
trans = AddAlpha
alpha = ifElse(Time < 4, 64 * Time, 256), 256

[State 8510, Scale Lines Explod 2]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = 1 - (0.0625 * (Time - 8)), 1 - (0.0625 * (Time - 8))
trans = AddAlpha
alpha = ifElse((Time - 8) < 4, 64 * (Time - 8), 256), 256

[State 8510, Scale Lines Explod 3]
type = ModifyExplod
trigger1 = NumExplod(3)
ID = 3
scale = 1 - (0.0625 * (Time - 16)), 1 - (0.0625 * (Time - 16))
trans = AddAlpha
alpha = ifElse((Time - 16) < 4, 64 * (Time - 16), 256), 256

[State 8510, Scale Lines Explod 4]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = 1 -(0.0625 * (Time - 24)), 1 - (0.0625 * (Time - 24))
trans = AddAlpha
alpha = ifElse((Time - 24) < 4, 64 * (Time - 24), 256), 256

[State 8510, Circle Explod]
type = Explod
trigger1 = Time = 24
anim = 8512
ID = 10
sprPriority = 5
posType = P1
facing = ifElse(Random < 500,-1,1)
vFacing = ifElse(Random < 500,-1,1)
removeTime = 32
superMoveTime = -1
bindtime = -1

[State 8510, Scale Circle Explod]
type = ModifyExplod
trigger1 = NumExplod(10)
ID = 10
scale = 2 - (0.125 * (Time - 24)), 2 - (0.125 * (Time - 24))
trans = AddAlpha
alpha = ifElse((Time - 24)<4, 64 * (Time - 24), 256), 256

[State 8510, Afterimages]
type = Helper
trigger1 = Time = 0 && (Parent,ID = Root,ID)
helpertype = normal
name = "Afterimages"
ID = 8590
stateno = 8590
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = root,const(size.xscale)
size.yscale = root,const(size.yscale)
supermovetime = 999999
pausemovetime = 999999

[State 8510, Afterimages]
type = Helper
trigger1 = Time = 0 && (Parent,ID = Root,ID)
helpertype = normal
name = "Afterimages"
ID = 8591
stateno = 8590
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = root,const(size.xscale)
size.yscale = root,const(size.yscale)
supermovetime = 999999
pausemovetime = 999999

[State 8510, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 40

[State 8510, Assert: Invisible]
type = AssertSpecial
trigger1 = Time >= 40
flag = Invisible

[State 8510, End]
type = DestroySelf
trigger1 = !var(2)
trigger1 = Time >= 40
trigger2 = var(2)
trigger2 = Time >= var(1)


;Level 3 Super FX
[StateDef 8520]
type = A
velset = 0,0
anim = 8520
sprPriority = 5

[State 8520, Assert: NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 8520, Bind]
type = Null
trigger1 = !Time
trigger1 = 1 || fvar(24) := -ParentDist X
trigger1 = 1 || fvar(25) := -ParentDist Y

[State 8520, Bind]
type = BindToParent
trigger1 = 1
pos = fvar(24), fvar(25)

[State 8520, End Time Set]
type = VarSet
triggerall = !Time
trigger1 = 1
var(1) = 50

[State 8520, End Time Set: Donald Memorial]
type = VarSet
triggerall = !Time
trigger1 = Parent,StateNo = 3700
var(1) = 140

[State 8520, End Time >= 50]
type = VarSet
triggerall = !Time
trigger1 = var(1) >= 50
var(2) = 1

[State 8520, Assert: NoBG, NoFG]
type = AssertSpecial
trigger1 = !var(2)
trigger1 = Time < 40
trigger2 = var(2)
trigger2 = Time < (var(1) - 10)
flag = NoBG
flag2 = NoFG

[State 8520, Assert: NoBarDisplay]
type = AssertSpecial
triggerall = root,var(58)=0
trigger1 = !var(2)
trigger1 = Time < 40
trigger2 = var(2)
trigger2 = Time < (var(1) - 10)
flag = NoBarDisplay

[State 8520, BGpalFX]
type = BGpalFX
trigger1 = var(2)
trigger1 = Time >= (var(1) - 11) && Time < (var(1) - 1)
time = 1
color = 256
mul = ceil(25.6 * (Time - (var(1) - 11))), ceil(25.6 * (Time - (var(1) - 11))), ceil(25.6 * (Time - (var(1) - 11)))

[State 8520, Rotate]
type = AngleSet
trigger1 = !Time
value = 6 * (Random % 60)

[State 8520, Rotate]
type = AngleAdd
trigger1 = 1
value = -6

[State 8520, Scale]
type = AngleDraw
trigger1 = Time < 16
scale = (0.03125 * Time), (0.03125 * Time)
ignoreHitPause = 1

[State 8520, Scale]
type = AngleDraw
trigger1 = Time >= 16
scale = 0.5, 0.5
ignoreHitPause = 1

[State 8520, Transparency]
type = Trans
trigger1 = 1
trans = AddAlpha
alpha = 256,256

[State 8520, Portrait 1]
type = Explod
trigger1 = !Time
anim = 8525
ID = 20
sprPriority = -16
posType = Back
removeTime = 40
superMoveTime = -1

[State 8520, Portrait 2]
type = Explod
trigger1 = !Time
anim = 8525
ID = 21
sprPriority = -16
posType = Back
removeTime = 40
superMoveTime = -1

[State 8520, Scale Portrait 1a]
type = ModifyExplod
trigger1 = NumExplod(20) && Time < 16
ID = 20
posType = Back
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 1 - (0.03125 * Time), 1 - (0.03125 * Time)
trans = AddAlpha
alpha = (8 * Time), 256

[State 8520, Scale Portrait 2a]
type = ModifyExplod
trigger1 = NumExplod(21) && Time < 16
ID = 21
posType = Back
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 2 - (0.09375 * Time), 2 - (0.09375 * Time)
trans = AddAlpha
alpha = (8 * Time), 256

[State 8520, Scale Portrait 1b]
type = ModifyExplod
trigger1 = NumExplod(20) && (Time = [16,32])
ID = 20
posType = Back
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5
trans = AddAlpha
alpha = 256, 256

[State 8520, Scale Portrait 2b]
type = ModifyExplod
trigger1 = NumExplod(21) && (Time = [16,32])
ID = 21
scale = 0,0

[State 8520, Scale Portrait 1c]
type = ModifyExplod
trigger1 = NumExplod(20) && Time >= 32
ID = 20
posType = Back
pos = 160 + (8 * (Time - 32)), floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5
trans = AddAlpha
alpha = 128 - 16 * (Time - 32), 256

[State 8520, Scale Portrait 2c]
type = ModifyExplod
trigger1 = NumExplod(21) && Time >= 32
ID = 21
posType = Back
pos = 160 - (8 * (Time - 32)), floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5
trans = AddAlpha
alpha = 128 - 16 * (Time - 32), 256

[State 8520, Lines Explod]
type = explod
trigger1 = Time = 0 || Time = 8 || Time = 16 || Time = 24
anim = 8521
ID = ifElse(Time = 24, 4, ifElse(Time = 16, 3, ifElse(Time = 8, 2, 1)))
sprPriority = 5
posType = P1
facing = ifElse(Random < 500, -1, 1)
vFacing = ifElse(Random < 500, -1, 1)
removeTime = 16
superMoveTime = -1
bindtime = -1

[State 8520, Scale Lines Explod 1]
type = ModifyExplod
trigger1 = NumExplod(1)
ID = 1
scale = 1 - (0.0625 * Time), 1 - (0.0625 * Time)
trans = AddAlpha
alpha = ifElse(Time < 4, 64 * Time, 256), 256

[State 8520, Scale Lines Explod 2]
type = ModifyExplod
trigger1 = NumExplod(2)
ID = 2
scale = 1-(0.0625 * (Time - 8)), 1 - (0.0625 * (Time - 8))
trans = AddAlpha
alpha = ifElse((Time - 8) < 4, 64 * (Time - 8), 256), 256

[State 8520, Scale Lines Explod 3]
type = ModifyExplod
trigger1 = NumExplod(3)
ID = 3
scale = 1 - (0.0625 * (Time - 16)), 1 - (0.0625 * (Time - 16))
trans = AddAlpha
alpha = ifElse((Time - 16) < 4, 64 * (Time - 16), 256), 256

[State 8520, Scale Lines Explod 4]
type = ModifyExplod
trigger1 = NumExplod(4)
ID = 4
scale = 1 - (0.0625 * (Time - 24)), 1 - (0.0625 * (Time - 24))
trans = AddAlpha
alpha = ifElse((Time - 24) < 4, 64 * (Time - 24), 256), 256

[State 8520, Circle Explod]
type = Explod
trigger1 = Time = 24
anim = 8522
ID = 10
sprPriority = 5
posType = P1
facing = ifElse(Random < 500, -1 ,1)
vFacing = ifElse(Random < 500, -1, 1)
removeTime = 32
superMoveTime = -1
bindtime = -1

[State 8520, Scale Circle Explod]
type = ModifyExplod
trigger1 = NumExplod(10)
ID = 10
scale = 2 - (0.125 * (Time - 24)), 2 - (0.125 * (Time - 24))
trans = AddAlpha
alpha = ifElse((Time - 24) < 4, 64 * (Time - 24), 256), 256

[State 8520, Afterimages]
type = Helper
trigger1 = Time = 0 && (Parent,ID = Root,ID)
helpertype = normal
name = "Afterimages"
ID = 8590
stateno = 8590
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = root,const(size.xscale)
size.yscale = root,const(size.yscale)
supermovetime = 999999
pausemovetime = 999999

[State 8520, Afterimages]
type = Helper
trigger1 = Time = 0 && (Parent,ID = Root,ID)
helpertype = normal
name = "Afterimages"
ID = 8591
stateno = 8590
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = root,const(size.xscale)
size.yscale = root,const(size.yscale)
supermovetime = 999999
pausemovetime = 999999

[State 8520, Remove Explods]
type = RemoveExplod
trigger1 = Time >= 40

[State 8520, Assert: Invisible]
type = AssertSpecial
trigger1 = Time >= 40
flag = Invisible

[State 8520, End]
type = DestroySelf
trigger1 = !var(2)
trigger1 = Time >= 40
trigger2 = var(2)
trigger2 = Time >= var(1)

;--------------------------------------------------
;Afterimages
[Statedef 8590]
physics=N
anim = 9999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time > 0
value = root,anim
elem = root,animelemno(0)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 2
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerAll = Time = 0
trigger1 = Root,StateType = A && Root,StateNo != 3700
var(1) = 1

[State 0, VarAdd]
type = Null
triggerall = Time > 0
trigger1 = IsHelper(8590)
trigger1 = 1 || fvar(1):=fvar(1)+.45
trigger1 = 1 || fvar(2):=fvar(2)+ifelse(!var(1),0,-.45)
trigger2 = IsHelper(8591)
trigger2 = 1 || fvar(1):=fvar(1)-.45
trigger2 = 1 || fvar(2):=fvar(2)+ifelse(!var(1),0,.45)

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
pos = fvar(1),fvar(2)

[State 0, Trans]
type = Trans
trigger1 = 1
trans=addalpha
alpha=200-5*(time),56+5*(time)

[State 0, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time >= 40
trigger2 = Root,MoveType = H

;=========================< SPECIAL FINISH >=================
;Special Finish FX
[Statedef 8600]
ctrl = 0
anim = 9999
sprpriority = -10

[State 8600, NoMusic]
type = AssertSpecial
trigger1 = Root,Var(56) >= 2
flag = NoMusic
ignorehitpause=1

[State 8600, NoBarDisplay]
type = AssertSpecial
trigger1 = Root,Var(56) >= 3
flag = NoBarDisplay
ignorehitpause=1

[State 8600, NoFG]
type = AssertSpecial
trigger1 = Root,Var(56) >= 4
flag = NoFG
ignorehitpause=1

[State 8600, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S8600,0
abspan = 0
channel = 0
persistent=0

[State 8600, Explod]
type = Explod
trigger1 = time = 0
anim =8550
ID = 8600
pos = 0,0
postype = back
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime =30
supermovetime = 9999
pausemovetime = 9999
scale = 1.2,1.2
sprpriority = -990
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 1
;persistent =

[State 8600, ModifyExplod]
type = ModifyExplod
trigger1 = time>=1
ID = 8600
trans = addalpha
alpha=256-((time)*10),256

[State 8600, End]
type=removeexplod
trigger1= time>=120
trigger2= roundstate<3
[State 8600, End]
type=destroyself
trigger1= roundstate!=3
;========================<SUPER FINISH>=============================
;Super Finish FX 
[StateDef 8605]
type = A
velSet = 0,0
anim = 9999

[State 8605, Super Finish Sound]
type = PlaySnd
trigger1 = !Time
value = 8600,0
abspan = 0
channel = 0
[State 8605, Super Finish Sound]
type = PlaySnd
trigger1 = !Time
value = 8600,1
abspan = 0
channel = 1

[State 8605, BG PalFX]
type = BGpalFX
trigger1 = Time < 16
time = 1
mul = 0, 0, 0

[State 8605, BG PalFX]
type = BGpalFX
trigger1 = Time = [16,24]
time = 1
mul = 32 * (Time - 16), 32 * (Time - 16), 32 * (Time - 16)

[State 8605, Move Name: Custom Combo]
type = VarSet
trigger1= !Time && Root, var(23) = 900
var(0) = 1

[State 8605, Move Name: Super1]
type = VarSet
trigger1 = !Time && (Root, var(23) = [3000,3099])
var(0) = 2 + 20 * Root, var(45)

[State 8605, Move Name: Super2]
type = VarSet
trigger1 = !Time && (Root, var(23) = [3100,3199])
var(0) = 3

[State 8605, Move Name: Super3]
type = VarSet
trigger1 = !Time && (Root, var(23) = [3200,3299])
var(0) = 4

[State 8605, Move Name: Super4]
type = VarSet
trigger1= !Time && (Root, var(23) = [3300,3399])
var(0) = 5

[State 8605, Move Name: Super5]
type = VarSet
trigger1= !Time && (Root, var(23) = [3400,3499])
var(0) = 6

[State 8605, Move Name: Super6]
type = VarSet
trigger1= !Time && (Root, var(23) = [3500,3599])
var(0) = 7

[State 8605, Move Name: Super7]
type = VarSet
trigger1= !Time && (Root, var(23) = [3600,3699])
var(0) = 8

[State 8605, Move Name: Super8]
type = VarSet
trigger1= !Time && (Root, var(23) = [3700,3799])
var(0) = 9 + 20 * Root, var(45)

[State 8605, Move Name: Super9]
type = VarSet
trigger1= !Time && (Root, var(23) = [3800,3899])
var(0) = 10

[State 8605, Super Finish Explod]
type = Explod
trigger1 = !Time
anim = 8600
ID = 8600
ontop = 1
postype = Left
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5 * (1.3333333 * GameHeight / GameWidth)
bindTime = -1
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1

[State 8605, Super Finish Explod Fade]
type = ModifyExplod
trigger1 = NumExplod(8600)
ID = 8600
trans = AddAlpha
alpha = ifElse(Time < 16, 256, 256 - 32 * (Time - 16)), 256

[State 8605, Text 1]
type = Explod
trigger1 = !Time && var(0)
anim = 8610 + var(0)
ID = 10
onTop = 1
posType = Left
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5 * (1.3333333 * GameHeight / GameWidth)
bindTime = -1
removeTime = 32
pauseMoveTime = -1
superMoveTime = -1

[State 8605, Text 2]
type = Explod
trigger1 = !Time && var(0)
anim = 8610 + var(0)
ID = 11
onTop = 1
posType = left
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
scale = 0.5, 0.5 * (1.3333333 * GameHeight / GameWidth)
bindTime = -1
removeTime = 8
pauseMoveTime = -1
superMoveTime = -1

[State 8605, Text 1 Fade]
type = ModifyExplod
trigger1 = NumExplod(10)
ID = 10
trans = AddAlpha
alpha = ifElse(Time < 16, 256, 256 - 32 * (Time - 16)), ifElse(Time < 16, 0, 32 * (Time - 16))

[State 8605, Text 2 Fade]
type = ModifyExplod
trigger1 = NumExplod(11)
ID = 11
scale = 0.5 + (0.0625 * Time), 0.5 + (0.0625 * Time)
trans = AddAlpha
alpha = 256 - (32 * Time), 32 * Time

[State 8605, Circle Explod]
type = Explod
trigger1 = !Time
anim = 8601
ID = 8601
posType = Left
pos = 160, floor((1.3333333 * GameHeight / GameWidth) * 121)
bindTime = -1
removeTime = 16
pauseMoveTime = -1
superMoveTime = -1

[State 8605, Circle Fade]
type = ModifyExplod
trigger1 = NumExplod(8601)
ID = 8601
scale = (0.25 * time) * (1.3333333 * GameHeight / GameWidth), (0.25 * time) * (1.3333333 * GameHeight / GameWidth)
trans = AddAlpha
alpha = 256 - (16 * Time), 256

[State 8605, Assert: NoFG]
type = AssertSpecial
trigger1 = Time < 16
flag = NoFG

[State 8605, Assert: NoBarDisplay]
type = AssertSpecial
trigger1 = Time < 24
flag = NoBarDisplay

[State 8605, Assert: NoMusic]
type = AssertSpecial
trigger1 = Time < 24 && Root,Var(57) >= 2
flag = NoMusic

[State 8605, End]
type=removeexplod
trigger1= time>=24
trigger2= roundstate<3
[State 8605, End]
type=destroyself
trigger1= roundstate!=3

;===========================<STAND AURA>===============================
;STAND AURA
[Statedef 8800]
type = S
movetype = I
physics = N
sprpriority = -5
velset = 0,0
ctrl = 0
;
[state 8800, noshadow]; aura has no shadow
type = assertspecial
trigger1 = 1
flag = noshadow
;
[state 8800, playerpush]; the aura can go right through you
type = playerpush
trigger1 = 1
ignorehitpause = 1
persistent = 1
value = 0
;
[state 8800, canthit]; not able to hit the aura and vice versa
type = nothitby
trigger1 = 1
time = -1
persistent = 1
value = SCA
;
[State 8800, ChangeAnim]; makes the aura do what you do
type = ChangeAnim
trigger1 = selfanimexist(parent,anim)
elem = parent,animelemno(0)
value = parent, anim
;
[State 8800, bindtoroot]; binds the auras position to the player using it
type = bindtoroot
trigger1 = 1
facing = 1
pos = 0, 0
time = -1
ignorehitpause = 1
persistent = 1
;
[State 8800, color]; change to whatever color you want the aura to be
type = palfx
trigger1 = 1
add = 100, 0, 0
mul = 256, 0, 0
sinadd = 256, 10, 10, 50
invertall = 0
color = 256
time = -1
ignorehitpause = 1
persistent = 1
;
[State 8800, trans]; makes the aura see through
type = trans
trigger1 = 1
trans = addalpha
alpha = 256 - (10*time), (10*time)
ignorehitpause = 1
persistent = 1
;
[State 8800, angledraw]; how big the aura radiates over time
type = angledraw
trigger1 = 1
value = 0
scale = 1 + (.0065*time), 1 + (.0065*time)
ignorehitpause = 1
persistent = 1
;
[State 8800, destroyself]; time to restart the hazing animations of the aura
type = Destroyself
trigger1 = time >= 30
trigger2 = Parent,MoveType = H && (Parent,StateNo != [120,159]) && (Parent,StateNo != [5000,5999])
trigger3 = !alive


;========================<CAMERA CONTROL>=============================
;Camera Control
[StateDef 8999]
type = S
velSet = 0,0
anim = 9999

[State 8999, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
moveCamera = 1,1

[State 8999, End]
type = DestroySelf
trigger1 = RoundState = 2

;==========================
; Mode_Select_Screen [helper] ; 
;==========================
[statedef 180030]
type=s
movetype=i
physics=n
anim=909601 ;; empty
velset=0,0
ctrl=0
;---
[state 0] ;[.02] ;init
	type=null
	trigger1=!time
	trigger1=1|| var(3):=parent,var(3)/2+floor(const240p(ifelse(teamside=1,-120,120))) || var(4):=parent,var(4)/2+floor(const240p(72))
	trigger1=1|| var(22):=parent,var(22) || var(25):=15 || var(26):=10 || var(27):=ifelse(teamside=1,1,-1) || fvar(19):=0.5
	persistent=0
;---
[state 0] ;[.31]
	type=parentvarset
	trigger1=1
	var(22)=1
;---
[state 0] ;[.62]
	type=explod
	trigger1=1|| fvar(14):=(var(24)*24+90)*0.0174
	anim=f100012
	space=screen
	postype=left
	facing=1
	ownpal=1
	bindtime=-1
	removetime=1
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1
	pos=var(3) +floor((sin(fvar(14))*var(25)))*var(27), var(4) +floor((fvar(15):=cos(fvar(14))*var(26)))
	scale=(fvar(16):=sin(fvar(14))*fvar(19)+1.5 ) , fvar(16)
	sprpriority=165+floor(fvar(16)*10)
;---
[state 0] ;[.80]
	type=destroyself
	trigger1=(roundno=1)&&(root,numhelper(185905)=0)
	trigger2=(roundstate>=2)

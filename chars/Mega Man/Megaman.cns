
; Constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
life = 1000			;Amount of life to start with
power = 3000		;Amount of maximum power
attack = 100		;attack power (more is stronger)
defence = 100		;defensive power (more is stronger)
fall.defence_up = 50	;Percentage to increase defense everytime player is knocked down
liedown.time = 60		;Time which player lies down for, before getting up
airjuggle = 15		;Number of points for juggling
sparkno = s8010			;Default hit spark number for HitDefs
guard.sparkno = s8000	;Default guard spark number
KO.echo = 0			;1 to enable echo on KO
volume = 100			;Volume offset (negative for softer)
IntPersistIndex = 60	;Variables with this index and above will not have their values
FloatPersistIndex = 40  ;reset to 0 between rounds or matches. There are 60 int variables,
  				;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
  				;If omitted, then it defaults to 60 and 40 for integer and float
  				;variables repectively, meaning that none are persistent, i.e. all
  				;are reset. If you want your variables to persist between matches,
  				;you need to override state 5900 from common1.cns.


[Size]
xscale = .933			;Horizontal scaling factor.
yscale = 1.1			;Vertical scaling factor.
ground.back = 19		;Player width (back, ground)
ground.front = 19		;Player width (front, ground)
air.back = 12		;Player width (back, air)
air.front = 12		;Player width (front, air)
height = 60			;Height of player (for opponent to jump over)
attack.dist = 160		;Default attack distance
proj.attack.dist = 90	;Default attack distance for projectiles
proj.doscale = 0		;Set to 1 to scale projectiles too   
head.pos = 4, -93	;Approximate position of head
mid.pos = 4, -55		;Approximate position of midsection
shadowoffset = 0		;Number of pixels to vertically offset the shadow
draw.offset = 0,0		;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd = 3.33
walk.back = -2.78
run.fwd = 6, 0
run.back = -6, -3.5
jump.neu = 0, -9.5
jump.back = -4
jump.fwd = 4
runjump.back = -6, -9
runjump.fwd = 6, -9
airjump.neu = 0, -8.1
airjump.back = -2.55
airjump.fwd = 2.5
air.gethit.groundrecover = -0.15, -3.5
air.gethit.airrecover.mul = 0.5, 0.2
air.gethit.airrecover.add = 0, -4.5
air.gethit.airrecover.back = -1
air.gethit.airrecover.fwd = 0
air.gethit.airrecover.up = -2
air.gethit.airrecover.down = 1.5

[Movement]
airjump.num = 0
airjump.height = 0
yaccel = 0.5
stand.friction = 0.85
crouch.friction = 0.85
stand.friction.threshold = 1.0
crouch.friction.threshold = 1.0
air.gethit.groundlevel = 25
air.gethit.groundrecover.ground.threshold = -20
air.gethit.groundrecover.groundlevel = 10
air.gethit.airrecover.threshold = -1
air.gethit.airrecover.yaccel = 0.35
air.gethit.trip.groundlevel = 15
down.bounce.offset = 0, 20
down.bounce.yaccel = 0.4
down.bounce.groundlevel = 12
down.friction.threshold = 0.5

[Quotes]
victory1 = "I must defeat the next bosses."
victory2 = "Let's go Rush! We need to stop Dr. Willy!"
victory3 = "Now I have your power."
victory4 = "Dr. Light, mission accomplished!"

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0 && matchover = 0
value = 181+random%3

[State 180, 1]
type = ChangeState
trigger1 = Time = 0 && matchover = 1
value = 184

;---------------------------------------------------------------------------
;-----------------------------------------;
;Win A - Ya Tah!
[Statedef 181]
type = S
anim = 180
velset = 0,0
ctrl = 0

[State 181,CAMERA]
type = helper
trigger1 = pos X != 0
trigger1 = Time = 0
name = "helper1"
id = 6001
pos = 0,0
postype = p1
stateno = 6001
helpertype = normal
ownpal = 1
keyctrl = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S60,2
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S60,3
volume = 255
channel = 6
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 182, Voice]
type = playsnd
trigger1 = time = 0 && MatchOver
value = 182,0
channel = 8

[State 187, Assert]
type = assertspecial
trigger1 = 1 && MatchOver
flag = roundnotover
flag2 = nomusic
ignorehitpause =1


[State 181, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 0
channel = 0

[State 181, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;-----------------------------------------;
;Win B - Bug! (X-Ray)
[Statedef 182]
type = S
anim = 181
velset = 0,0
ctrl = 0

[State 181,CAMERA]
type = helper
trigger1 = pos X != 0
trigger1 = Time = 0
name = "helper1"
id = 6001
pos = 0,0
postype = p1
stateno = 6001
helpertype = normal
ownpal = 1
keyctrl = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S60,2
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S60,4
volume = 255
channel = 6
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

;[State 182, 1]
;type = PlaySnd
;trigger1 = Time = 1
;value = 0, 0
;volume = 255

[State 182, Voice]
type = playsnd
trigger1 = time = 0 && MatchOver
value = 182,0
channel = 8

[State 187, Assert]
type = assertspecial
trigger1 = 1 && MatchOver
flag = roundnotover
flag2 = nomusic
ignorehitpause =1

[State 182, 2]
type = PalFX
trigger1 = Time = 47
add = 120,120,255
time = 1

[State 182, 3]
type = PalFX
trigger1 = Time = 48
add = 80,80,256
time = 1

[State 182, 4]
type = PalFX
trigger1 = Time = 49
trigger2 = Time = 57
add = 50,50,155
time = 1

[State 182, 5]
type = PalFX
trigger1 = Time = 50
add = 20,20,95
time = 1

[State 182, 6]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;-----------------------------------------;
;Win C - Jo Ken Po
[Statedef 183]
type = S
;anim = 182
velset = 0,0
ctrl = 0

[State 182, Voice]
type = playsnd
trigger1 = time = 0 && MatchOver
value = 182,0
channel = 8

[State 187, Assert]
type = assertspecial
trigger1 = 1 && MatchOver
flag = roundnotover
flag2 = nomusic
ignorehitpause =1

[State 181,CAMERA]
type = helper
trigger1 = pos X != 0
trigger1 = Time = 0
name = "helper1"
id = 6001
pos = 0,0
postype = p1
stateno = 6001
helpertype = normal
ownpal = 1
keyctrl = 1

[State 183, 1] 
type = VarRandom
trigger1 = 1
v = 0
range = 2

[State 183, 2] ;suki, puu or pa
type = ChangeAnim
trigger1 = Time = 0 
value = 182 + var(0) 

[State 183, 3]
type = PlaySnd
trigger1 = Time = 1
value = 1, 6  
channel = 0

[State 183, 3] ;suki
type = PlaySnd
trigger1 = Anim = 182
trigger1 = Time = 79
value = 1, 3  
channel = 0

[State 183, 3] ;puu
type = PlaySnd
trigger1 = Anim = 183
trigger1 = Time = 90
value = 1, 4  
channel = 0

[State 183, 3] ;pa
type = PlaySnd
trigger1 = Anim = 184
trigger1 = Time = 75
value = 1, 5  
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S60,3
volume = 255
channel = 6
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 183, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;-----------------------------------------;
;Win D - No Helmet or S.A. Win
[Statedef 184]
type = S
anim = 185
velset = 0,0
ctrl = 0

[State 182, Voice]
type = playsnd
trigger1 = time = 0 && MatchOver
value = 182,0
channel = 8

[State 187, Assert]
type = assertspecial
trigger1 = 1 && MatchOver
flag = roundnotover
flag2 = nomusic
ignorehitpause =1

[State 181,CAMERA]
type = helper
trigger1 = pos X != 0
trigger1 = Time = 0
name = "helper1"
id = 6001
pos = 0,0
postype = p1
stateno = 6001
helpertype = normal
ownpal = 1
keyctrl = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,0
volume = 255
channel = 4
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S60,4
volume = 255
channel = 6
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,7
volume = 255
channel = 9
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 184, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,200]
flag = roundnotover
;flag2 = invisible
;flag3 = roundnotover
;ignorehitpause =
;persistent =
;-----------------------
;flag = nobardisplay
;flag = noBG
;flag = noFG
;flag = nostandguard
;flag = nocrouchguard
;flag = noairguard
;flag = noautoturn
;flag = nojugglecheck
;flag = nokosnd
;flag = nokoslow
;flag = noshadow
;flag = globalnoshadow
;flag = nomusic
;flag = nowalk
;flag = timerfreeze
;flag = unguardable


;[State 184, 3]
;type = AssertSpecial
;trigger1 = Anim = 184
;trigger1 = AnimTime = 0
;flag = roundnotover

;-----------------------------------------;
;Win E - Rush Hug
[Statedef 185]
type = S
;anim = 186
velset = 0,0
ctrl = 0

[State 182, Voice]
type = playsnd
trigger1 = time = 0 && MatchOver
value = 182,0
channel = 8

[State 187, Assert]
type = assertspecial
trigger1 = 1 && MatchOver
flag = roundnotover
flag2 = nomusic
ignorehitpause =1

[State 181,CAMERA]
type = helper
trigger1 = pos X != 0
trigger1 = Time = 0
name = "helper1"
id = 6001
pos = 0,0
postype = p1
stateno = 6001
helpertype = normal
ownpal = 1
keyctrl = 1

[State 185, 2]
type = ChangeAnim
;trigger1 = NumHelper > 0
;trigger1 = Helper, ParentDist X <= 20*ifelse(Facing,1,-1) ;Anim = 7181
triggerall = var(8) = 1
trigger1 = var(5) = 1 ;Time = 14
value = 186

[State 185, 2]
type = ChangeAnim
triggerall = var(8) = 2
trigger1 = var(5) = 2
value = 5

[State 185, 2]
type = ChangeAnim
;triggerall = var(8) = 2
trigger1 = Anim = 5
trigger1 = AnimTime = 0
value = 186

[State 185, 3]
type = Turn
triggerall = Var(8) = 2
trigger1 = Anim = 5
trigger1 = AnimElem = 1, = 0
;trigger1 = !Time

[State 185, 1]
type = PlaySnd
trigger1 = Anim = 186
trigger1 = AnimElem = 14
value = 0, 1
channel = 0
persistent = 0

[State 185, 2]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;-----------------------------------------;
;Win F - FlipTop Cake
[Statedef 186]
type = S
;anim = 180
velset = 0,0
sprpriority = 4

[State 186, 1]
type = ChangeAnim
triggerall = Anim != 180
trigger1 = NumHelper(192) > 0
trigger1 = Helper(192), Anim = 187
value = 180

[State 186, 1] ;Fliptop
type = Helper
triggerall = NumHelper(192) < 1
trigger1 = !Time
helpertype = normal
name = "FlipTop"
ID = 192 
pos = 340, 0 ;260, 0
postype = p1
;facing = 1
stateno = 192 
ownpal = 1
ignorehitpause = 1

[State 186, 2]
type = PlaySnd
trigger1 = Anim = 180
trigger1 = AnimElem = 1, = 2
value = 0, 0
channel = 0
persistent = 0

[State 186, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; FlipTop: Helper 
[Statedef 192]
type = A
movetype = I
ctrl = 0
anim = 1104
velset = -3, 0
sprpriority = 3

[State 192, 1]
type = ChangeAnim
triggerall = Anim != 187
trigger1 = ParentDist X >= -48;-45
value = 187

[State 192, 2]
type = VelSet
trigger1 = ParentDist X >= -48
x = 0

;[State 192, 3]
;type = DestroySelf
;trigger1 = RoundState != 4

;-----------------------------------------;
;Win G - Roll Flowers
[Statedef 187]
type = S
;anim = 188
velset = 0,0
sprpriority = 4

[State 187, 0]
type = ChangeAnim
triggerall = Anim != 188
trigger1 = NumHelper(193) > 0
trigger1 = Helper(193), Anim = 193
value = 188

[State 187, 1] ;Roll
type = Helper
triggerall = NumHelper(193) < 1
trigger1 = !Time
helpertype = normal
name = "Roll"
ID = 193 
pos = 340, 0 ;260, 0
postype = p1
;facing = 1
stateno = 193 
ownpal = 1
ignorehitpause = 1

[State 187, 2]
type = PlaySnd
trigger1 = Anim = 188
trigger1 = AnimElem = 6, = 2;4
value = 0, 0
channel = 0
persistent = 0

[State 187, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;---------------------------------------------------------------------------
; Roll: Helper 
[Statedef 193]
type = A
movetype = I
ctrl = 0
anim = 189
velset = -4.7, 0
sprpriority = 3

[State 193, 1]
triggerall = Anim != 193
type = ChangeAnim
trigger1 = ParentDist X >= -50
value = 193

[State 193, 2]
type = VelSet
trigger1 = ParentDist X >= -50
x = 0

[State 193, 3]
type = PlaySnd
trigger1 = Vel X = 0
value = 0, 8
;channel = 0
persistent = 0

[State 193, 4]
type = DestroySelf
trigger1 = RoundState != 4

;-----------------------------------------;
;Win Auto Fix
[Statedef 188]
type = S
anim = 18601
velset = 0,0
sprpriority = 4

[State 188, turn]
type = Turn
trigger1 = NumHelper(7000) > 0
trigger1 = Helper(7000), Pos X >= Pos X
trigger1 = facing = -1
trigger2 = NumHelper(7000) > 0
trigger2 = Helper(7000), Pos X < Pos X
trigger2 = facing = 1

[State 188, 0]
type = ChangeAnim
trigger1 = Anim = 18601 ;!= 18602
trigger1 = NumHelper(18600) > 0
trigger1 = Helper(18600), Anim = 18700;193
trigger1 = Helper(18600), AnimElem = 9
value = 18602

[State 188, 0]
type = ChangeAnim
trigger1 = Anim = 18602
trigger1 = AnimTime = 0 
value = 18603

[State 188, 1] ;Auto
type = Helper
triggerall = NumHelper(18600) < 1
trigger1 = !Time
helpertype = normal
name = "Auto"
ID = 18600;193 
pos = -340, 0
postype = p1
;facing = 1
stateno = 18600;193 
ownpal = 1
ignorehitpause = 1

[State 188, 2]
type = PlaySnd
trigger1 = Anim = 18602
trigger1 = AnimElem = 3, = 2;4
value = 0, 0
channel = 0
persistent = 0

[State 188, 2]
type = PlaySnd
trigger1 = !Time
value = 0, 1 ;3, 5
channel = 0
persistent = 0

[State 188, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 188, 4]
type = AssertSpecial
trigger1 = Anim = 18601 
trigger2 = Anim = 18602 
;trigger2 = AnimElem = [1, 10] 
flag = roundnotover
;---------------------------------------------------------------------------
; Auto: Helper 
[Statedef 18600]
type = A
movetype = I
ctrl = 0
anim = 18600 ;189
velset = 1.4, 0 ;.98, 0
sprpriority = 5

[State 18600, turn]
type = turn
trigger1 = !time && numhelper(7000)
trigger1 = (helper(7000),pos x - pos x) * facing < 0

[State 18600, 0.1]
type = posset
trigger1 = !time
x = -340 * facing

[State 18600, 2]
type = VelSet
trigger1 = Anim = 18600
x = 1.4

[State 18600, 1]
;triggerall = Anim != 18700 ;193
type = ChangeAnim
;trigger1 = NumHelper(7000) > 0
;trigger1 = (Helper(7000), Pos X) <= Pos X ;ParentDist X <= (Helper(7000), ParentDist X) ;ParentDist X >= 0) ;50
;trigger1 = facing = 1
;;trigger1 = ParentDist X <= -50
;trigger2 = NumHelper(7000) > 0
;trigger2 = (Helper(7000), Pos X) > Pos X 
;trigger2 = facing = -1
trigger1 = Anim != 18700
trigger1 = time && numhelper(7000)
trigger1 = (helper(7000),pos x - pos x) * facing < 0
value = 18700 ;193

[State 18600, 3]
type = PlaySnd
triggerall = Anim = 18600
trigger1 = AnimElem = 2, = 0
trigger2 = AnimElem = 6, = 0
value = 0, 14 
persistent = 1

[State 18600, 2]
type = VelSet
;trigger1 = NumHelper(7000) > 0
;trigger1 = (Helper(7000), Pos X) <= Pos X ;ParentDist X <= (Helper(7000), ParentDist X) ;(Helper(7000), Pos X) 
;trigger1 = facing = 1
;;trigger1 = ParentDist X <= -50
;trigger2 = NumHelper(7000) > 0
;trigger2 = (Helper(7000), Pos X) > Pos X 
;trigger2 = facing = -1
trigger1 = Anim = 18700
x = 0

[State 18600, 3]
type = PlaySnd
trigger1 = Anim = 18700 ;Vel X = 0
value = 18, 11 ;0, 8
channel = 0
persistent = 0

[State 18600, 4]
type = DestroySelf
trigger1 = RoundState != 4

[State 18600, 5]
type = AssertSpecial
trigger1 = Vel X != 0
trigger2 = Anim = 18700 
trigger2 = AnimElem != 9
flag = roundnotover
;---------------------------------------------------------------------------
; Introduction Decider
; CNS difficulty: basic
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 0
value = 191
ctrl = 0
;anim =
;ignorehitpause =
;persistent =


[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 191]
type = S
anim = 190
velset = 0,0

[State 191, 1]
type = AssertSpecial
trigger1 = 1
flag = Intro

;[State 191, 2]
;type = AssertSpecial
;trigger1 = Time = [0, 73]
;flag = noshadow

[State 191, 2]
type = trans
trigger1 = Time = [0, 73]
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 191, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, 4]
type = PalFX
trigger1 = Time = [41, 72]
;trigger1 = Time = 41
;trigger2 = Time = 43
;trigger3 = Time = 45
;trigger4 = Time = 47
;trigger5 = Time = 49
;trigger6 = Time = 52
;trigger7 = Time = 54
;trigger8 = Time = [56, 57]
;trigger9 = Time = 59
;trigger10 = Time = 61
;trigger11 = Time = 64
;trigger12 = Time = 66
;trigger13 = Time = [68, 69]
;trigger14 = Time = [71, 72]
add = 256,256,256
time = 1

[State 191, 5]
type = PalFX
trigger1 = Time = [73, 76]
add = 120,120,255
time = 1

[State 191, 6]
type = PalFX
trigger1 = Time = [77, 79]
add = 80,80,256
time = 1

[State 191, 7]
type = PalFX
trigger1 = Time = [80, 83]
add = 50,50,155
time = 1

[State 191, 8]
type = PalFX
trigger1 = Time = [84, 86]
add = 20,20,95
time = 1

[State 191, 9]
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 7190
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -2
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 191, 9]
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 190111;7190
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -2
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 22
value = S65,1
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 70
value = s64,0+random%2
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 191, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 0

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 192]
type = S
ctrl = 0
anim = 191
velset = 0,0


[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 191

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction
; CNS difficulty: basic
[Statedef 193]
type = S
ctrl = 0
anim = 191
velset = 0,0


[State 190, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 191

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S63,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animtime = 0
value = 250
;ignorehitpause =
;persistent =


[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 3				;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 200				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 200, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 21, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 6, 6			;Time attacker pauses, time opponent shakes
sparkno = -1 + 0 * (var(53) := 8010)				;Spark anim no (Def: set above)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -55		;X-offset for the "hit spark" rel. to p2,					
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 0			
guardsound = s6, 0			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 10		;Time opponent is in hit state
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 10			;Time before opponent regains control in air

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 200, Idle]
type= statetypeset
trigger1= animelemtime(3)>=0
movetype= I


[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Light Punch
; CNS difficulty: easy
[Statedef 205]
type    = S				;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A				;Move-type: A-attack, I-idle, H-gethit
physics = S				;Physics: S-stand, C-crouch, A-air
juggle  = 3				;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0			;Set velocity (x,y) (Def: no change)
ctrl = 0				;Set ctrl (Def: no change)
anim = 205				;Change animation (Def: no change)
poweradd = 20			;Power to add (Def: 0)
sprpriority = 2			;Set layering priority to 2 (in front)

[State 200, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA			;Attribute: Standing, Normal Attack
damage = 21, 0			;Damage that move inflicts, guard damage
animtype = Light			;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA			;Flags on how move is to be guarded against
hitflag = MAF			;Flags of conditions that move can hit
priority = 3, Hit			;Attack priority: 0 (least) to 7 (most), 4 default
					;Hit/Miss/Dodge type (Def: Hit)
pausetime = 6, 6			;Time attacker pauses, time opponent shakes
sparkno = -1 + 0 * (var(53) := 8010)				;Spark anim no (Def: set above)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -91		;X-offset for the "hit spark" rel. to p2,				;Y-offset for the spark rel. to p1
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 0			;Sound to play on hit
guardsound = s6, 0			;Sound to play on guard
ground.type = High		;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5		;Time that the opponent slides back
ground.hittime  = 10		;Time opponent is in hit state
ground.velocity = -4		;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8	;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High			;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3		;X-velocity at which opponent is pushed,
					;Y-velocity at which opponent is pushed
air.hittime = 10			;Time before opponent regains control in air

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 200, Idle]
type= statetypeset
trigger1= animelemtime(3)>=0
movetype= I


[State 200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------
;Fwd+MP
[StateDef 201]
type = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 201
poweradd = 30
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=3
value = S50,1
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 212, Vel]
type=velset
trigger1= animelemtime(4)>=0 && animelemtime(6)<=0
x=6

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 8
x = 0
;ignorehitpause =
;persistent =


[State 200, Idle]
type= statetypeset
trigger1= animelemtime(8)>=0
movetype= I


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,1
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 201, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
damage = 39
animtype = med
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -71
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 1
guardsound = s6, 0
ground.type = low
ground.slidetime = 8
ground.hittime  = 14
ground.velocity = -7
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.4,-3
air.hittime = 14

[State 201, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = 68
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -71
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = s6, 0
ground.type = low
ground.slidetime = 8
ground.hittime  = 14
ground.velocity = -7
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.4,-3
air.hittime = 14

[State 201, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch
; CNS difficulty: easy
[StateDef 210]
type = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 215
poweradd = 40
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 5
;ignorehitpause =
;persistent =


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,2
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 220, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 78
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -56
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = s6, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -6.4,-3
air.hittime = 18

[State 210, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Punch
; CNS difficulty: easy
[StateDef 211]
type = S
movetype= A
physics = S
juggle  = 5
velset = 0,0
ctrl = 0
anim = 215
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(5)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,2
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 220, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 84
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -76
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = s6, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -6.4,-3
air.hittime = 18

[State 210, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Overhead
[StateDef 215]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 211
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,2
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 212, Vel]
type=velset
trigger1= animelemtime(3)>=0 && animelemtime(5)<=0
x=1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S0,2
volume = 0
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 200, Idle]
type= statetypeset
trigger1= animelemtime(6)>=0
movetype= I

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 15,0
;value = 0,0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 213
ID = 213
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
;ignorehitpause =
;persistent =

[State 220, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 25
animtype = heavy
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -76
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 1
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -6.4,-3
air.hittime = 18

[State 220, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
damage = 45
animtype = med
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -36
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 1
guardsound = s6, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -7
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -6.4,-3
air.hittime = 18

[State 217, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Stand Strong Punch
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 220
poweradd = 90
sprpriority = 2

[State 220, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && Time = 7
persistent = 0
anim = 222
postype = p1
pos = 24, -46
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 220, 4]
type = Helper
trigger1 = var(20) < 76 && AnimElem = 4
helpertype = normal
name = "Fireball"
ID = 223
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 225, 2] ;Fireball Shoot
type = Explod
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 4
persistent = 0
ID = 225
anim = 303;225
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 225, 3] ;Fireball efect
type = Explod
;trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = 7
persistent = 0
anim = 226
postype = p1
pos = 24, -46
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 225, 4]
type = Helper
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 4
helpertype = normal
name = "Hold Fireball"
ID = 227
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 227
ownpal = 1

[State 225, 4.2]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) > 75 && var(20) < 350 && AnimElem = 4
helpertype = normal
name = "Hand Burst"
ID = 1700
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 1700
ownpal = 1

[State 225, 4.3]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) >= 350 && AnimElem = 4
helpertype = normal
name = "Hand Strong Burst"
ID = 1702
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 1702
ownpal = 1

[State 225, 2]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [5, 7] ;3
add = 255,120,0
time = 1

[State 225, 3]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [8, 10] ;3
add = 190,120,0 ;120,190,0
time = 1

[State 225, 4]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [11, 14] ;4
add = 190,80,0
time = 1

[State 225, 5]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [15, 17] ;3
add = 90,50,0
time = 1

[State 225, 2] ;Burst Hand - no pal
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(22) > 75 && Time = [5, 17]
time = 1

[state 225, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 100
x = 4

[state 220, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 100
x = 4

[state 220, 3]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 105
x = -4

[State 220, 4]
type = Explod
trigger1 = Time = 0
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 9041
postype = p1
pos = -20, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 220, 9]
type = PlaySnd
trigger1 = var(20) < 76 && AnimElem = 4
value = 18, 5

[State 220, 10]
type = PlaySnd
trigger1 = var(20) > 75 && AnimElem = 4
value = 18, 4

[State 220, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(225) > 0 ;AnimElem = 5 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 4
trigger1 = NumExplod(223) > 0
var(20) = 0

;[State 220, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 1

[State 220, 7]
type = Width
trigger1 = Time = [9, 15]
player = 5, 0

[State 220, 2]
type = PlaySnd
trigger1 = var(20) < 76 && Time = 6
value = 2, 1
channel = 0

[State 220, 2]
type = PlaySnd
trigger1 = var(20) > 75 && Time = 6
value = 2, 4
channel = 0

;[State 220, 8]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 220, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand Strong Punch
[Statedef 222]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 220
poweradd = 90
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 220
elem = 4
;ignorehitpause =
;persistent =

[State 220, 3] ;Fireball efect
type = Explod
trigger1 = Time = 7
persistent = 0
anim = 222
postype = p1
pos = 24, -46
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 220, 4]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal
name = "Fireball"
ID = 223
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 220, 2]
type = PalFX
trigger1 = Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = Time = [15, 17] ;3
add = 20,20,95
time = 1

[state 225, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 100
x = 4

[state 220, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 100
x = 4

[state 220, 3]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 105
x = -4

[State 220, 4]
type = Explod
trigger1 = Time = 0
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 9041
postype = p1
pos = -20, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 220, 9]
type = PlaySnd
trigger1 = AnimElem = 4
value = 18, 5

[State 220, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(225) > 0 ;AnimElem = 5 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 4
var(20) = 0

;[State 220, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 1

[State 220, 7]
type = Width
trigger1 = Time = [12, 18]
player = 5, 0

[State 220, 2]
type = PlaySnd
trigger1 =Time = 6
value = 2, 1
channel = 0

;[State 220, 8]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 220, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------
; Stand Strong Punch
[Statedef 221]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 220
poweradd = 90
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 220
elem = 4
;ignorehitpause =
;persistent =

[State 220, 3] ;Fireball efect
type = Explod
trigger1 =Time = 7
persistent = 0
anim = 222
postype = p1
pos = 24, -46
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 220, 4]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal
name = "Fireball"
ID = 223
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 220, 2]
type = PalFX
trigger1 = Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = Time = [15, 17] ;3
add = 20,20,95
time = 1

[state 225, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 100
x = 4

[state 220, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 100
x = 4

[state 220, 3]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 105
x = -4

[State 220, 4]
type = Explod
trigger1 = Time = 0
trigger1 = PrevStateno = 100 || PrevStateno = 105
persistent = 0
anim = 9041
postype = p1
pos = -20, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3

[State 220, 9]
type = PlaySnd
trigger1 = AnimElem = 4
value = 18, 5

[State 220, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(225) > 0 ;AnimElem = 5 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 4
var(20) = 0

;[State 220, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 1

[State 220, 7]
type = Width
trigger1 = Time = [12, 18]
player = 5, 0

[State 220, 2]
type = PlaySnd
trigger1 = Time = 6
value = 2, 1
channel = 0

;[State 220, 8]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 220, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 223]
type    = A
movetype= A
anim = 311;223
sprpriority = 3

[State 223, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, NP
damage = 15, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8010) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S18, 9
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 15
fall = 0
;air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, NP
damage = 15, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -36
hitsound = S18, 9
guardsound = S6, 0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -4
airguard.velocity = -5
air.type = Low
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))
air.hittime = 25
fall = 0
;air.fall = 1
;p2stateno = 225
;fall = 1
;air.fall = 1
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8000, 8010)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105
value = 224
ignorehitpause = 1

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2233]
type    = A
movetype= A
anim = 311;223
sprpriority = 3

[State 223, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8010) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S18, 9
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP
damage = 9, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8010) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S18, 9
guardsound = S6, 0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -4
airguard.velocity = -5
air.type = Low
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3
;p2stateno = 225
;fall = 1
;air.fall = 1
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8000, 8010)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = TargetState
trigger1 = MoveHit;NumTarget > 0
;trigger1 = !target, IsHelper
value = 225
ignorehitpause = 1

[State 223, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105
value = 224
ignorehitpause = 1

;---------------------------------------------------------------------------
; Fireball: Helper (end)
[Statedef 224]
type = A
movetype = A ;I
ctrl = 0
anim = 312;224
velset = 0, 0
sprpriority = 3
movehitpersist = 1

[State 224, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 224, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 224, 10]
type = PlaySnd
trigger1 = NumTarget > 0
trigger1 = target, StateNo = 300;225
trigger1 = target, Anim = 5040;5120
trigger1 = target, AnimElem = 1, = 0
value = 17, 0
ignorehitpause = 1
supermovetime = -1

[State 224, 2]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Hold Fireball: Helper
[Statedef 227]
type    = A
movetype= A
anim = 301;227
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=1
value = S56,3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 227, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 227, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 227, 0] ;Projectile Dust
type = Helper
triggerall = parent, Pos Y = 0
triggerall = parent, Time > 5
trigger1 = Time = 0
helpertype = normal
name = "Projectile Dust"
postype = p1
pos = 0, ifelse(parent, StateType = C, 39, 51)
stateno = 9021
sprpriority = 4
ownpal = 1
persistent = 0

[state 227, 1]
type = VelSet
trigger1 = Time = 0
x = 6

[state 227, 1]
type = VelSet
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
trigger1 = MoveContact
trigger1 = HitCount <= 10
x = 1.5

[state 227, 1]
type = VelSet
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
trigger1 = MoveContact
trigger1 = HitCount > 10
x = .5

[State 227, 2]
type = HitDef
trigger1 = Time % 4 = 0 && P2BodyDist X > 80
attr = A, SP
damage = ifelse(MoveContact < 1, floor(80/(1+(root,Var(19)/5.0))), ifelse(HitCount <= 10, floor(5/(1+(root,Var(19)/5.0))), floor(2/(1+(root,Var(19)/5.0))))), 7
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 2, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 5
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -1
air.type = Low
air.velocity = -4, -2
air.hittime = 20
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 227, 3]
type = HitDef
trigger1 = Time % 4 = 0 && P2BodyDist X <= 80
attr = A, SP
;damage = ifelse(MoveContact > 0, floor(7/(1+(root,Var(19)/5.0))), floor(80/(1+(root,Var(19)/5.0)))), 8
damage = ifelse(MoveContact < 1, floor(80/(1+(root,Var(19)/5.0))), ifelse(HitCount <= 10, floor(7/(1+(root,Var(19)/5.0))), floor(2/(1+(root,Var(19)/5.0))))), 8
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 2, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 5
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -6
airguard.velocity = -5
air.type = Low
air.velocity = -5, -4
air.hittime = 20
;fall = 1
;air.fall = 1
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8000, 8010)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 227, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 227, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 228
time = -1

[State 227]
type = ParentVarSet
trigger1 = !Time
var(21) = 0

[State 227]
type = ParentVarSet
trigger1 = NumTarget > 0
trigger1 = target, IsHelper
var(21) = -80
persistent = 0

[State 227]
type = ParentVarAdd
;trigger1 = MoveContact
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
var(21) = 1

;[State 227]
;type = ParentVarAdd
;trigger1 = var(21) < 0
;var(21) = 1

[State 227, 7]
type = TargetState
trigger1 = MoveHit;NumTarget > 0 ;MoveContact
trigger1 = (parent, var(21)) = 3 + ((parent, var(22))/26)
;trigger1 = !target, IsHelper
value = 226
ignorehitpause = 1

[State 227, 8]
type = ChangeState
trigger1 = NumTarget < 1 ;!MoveContact
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105
trigger2 = NumTarget > 0 ;MoveContact
trigger2 = (parent, var(21)) = 3 + ((parent, var(22))/26)
trigger3 = var(21) < 0
value = 228
ignorehitpause = 1

;---------------------------------------------------------------------------
; Hold Fireball: Helper
[Statedef 2277]
type    = A
movetype= A
anim = 301;227
sprpriority = 3

[State 227, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 227, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 227, 0] ;Projectile Dust
type = Helper
triggerall = parent, Pos Y = 0
triggerall = parent, Time > 5
trigger1 = Time = 0
helpertype = normal
name = "Projectile Dust"
postype = p1
pos = 0, ifelse(parent, StateType = C, 39, 51)
stateno = 9021
sprpriority = 4
ownpal = 1
persistent = 0

[state 227, 1]
type = VelSet
trigger1 = Time = 0
x = 6

[state 227, 1]
type = VelSet
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
trigger1 = MoveContact
trigger1 = HitCount <= 10
x = 1.5

[state 227, 1]
type = VelSet
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
trigger1 = MoveContact
trigger1 = HitCount > 10
x = .5

[State 227, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP
damage = 25
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 2, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 5
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -1
air.type = Low
air.velocity = -4, -2
air.hittime = 20
getpower = 0
envshake.time = 10
envshake.ampl = -4
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 227, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP
;damage = ifelse(MoveContact > 0, floor(7/(1+(root,Var(19)/5.0))), floor(80/(1+(root,Var(19)/5.0)))), 8
damage = 25
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 2, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 5
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -6
airguard.velocity = -5
air.type = Low
air.velocity = -5, -4
air.hittime = 20
getpower = 0
envshake.time = 10
envshake.ampl = -4
;fall = 1
;air.fall = 1
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8000, 8010)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 227, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 227, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 228
time = -1

[State 227]
type = ParentVarSet
trigger1 = !Time
var(21) = 0

[State 227]
type = ParentVarSet
trigger1 = NumTarget > 0
trigger1 = target, IsHelper
var(21) = -80
persistent = 0

[State 227]
type = ParentVarAdd
;trigger1 = MoveContact
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
var(21) = 1

;[State 227]
;type = ParentVarAdd
;trigger1 = var(21) < 0
;var(21) = 1

[State 227, 7]
type = TargetState
trigger1 = MoveHit;NumTarget > 0 ;MoveContact
trigger1 = (parent, var(21)) = 3 + ((parent, var(22))/26)
;trigger1 = !target, IsHelper
value = 226
ignorehitpause = 1

[State 227, 8]
type = ChangeState
trigger1 = NumTarget < 1 ;!MoveContact
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105
trigger2 = NumTarget > 0 ;MoveContact
trigger2 = (parent, var(21)) = 3 + ((parent, var(22))/26)
trigger3 = var(21) < 0
value = 228
ignorehitpause = 1

;---------------------------------------------------------------------------
; Hold Fireball: Helper (end)
[Statedef 228]
type = A
movetype = A;I
ctrl = 0
anim = 302;228
velset = 0, 0
sprpriority = 3
movehitpersist = 1

[State 228, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 228, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 228]
type = ParentVarSet
trigger1 = !Time
var(21) = 0

[State 228] ;hold calculate - reset
type = ParentVarSet
trigger1 = !Time
var(22) = 0

[State 228, 8] ;Hit Floor Spark (front)
type = Explod
;trigger1 = Time = 3
trigger1 = NumTarget > 0
trigger1 = target, PrevStateNo = 226
trigger1 = target, StateNo = 5110
trigger1 = target, Anim = 5170 ;5120
trigger1 = target, AnimElem = 1, = 2
persistent = 0
ID = 9400
anim = 9400
postype = p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
ownpal = 1

[State 228, 9] ;Hit Floor Spark (back)
type = Explod
;trigger1 = Time = 1
trigger1 = NumTarget > 0
trigger1 = target, PrevStateNo = 226
trigger1 = target, StateNo = 5110
trigger1 = target, Anim = 5170 ;5120
trigger1 = target, AnimElem = 1, = 0
persistent = 0
ID = 9401
anim = 9401
postype = p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
ownpal = 1

;[State 228, 10]
;type = PlaySnd
;trigger1 = NumTarget > 0
;trigger1 = target, PrevStateNo = 226
trigger1 = target, StateNo = 5110
;trigger1 = target, Anim = 5170 ;5120
;trigger1 = target, AnimElem = 1, = 0
;value = 40, 2
;ignorehitpause = 1
;supermovetime = -1

[State 228, 2]
type = DestroySelf
triggerall = Time > 10 ;AnimTime = 0
trigger1 = P2MoveType != H ;NumTarget = 0


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Fireball efect: Helper
[Statedef 229]
type = A
movetype = I
ctrl = 0
anim = 229
velset = 0, 0
sprpriority = 6

[State 229, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 229, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 229, 1]
type = BindToRoot
trigger1 = parent, StateType = S
trigger2 = parent, StateNo = [5100, 5101] ;hit bounce
pos = 5, -40
time = -1
ignorehitpause = 1

[State 229, 1]
type = BindToRoot
trigger1 = parent, StateType = C
pos = 5, -20
time = -1
ignorehitpause = 1

[State 229, 1]
type = BindToRoot
trigger1 = parent, StateType = A
pos = 7, -55
time = -1
ignorehitpause = 1

[State 229, 1] ;medium punch - S
type = BindToRoot
triggerall = parent, StateNo = 210
trigger1 = parent, AnimElemNo(0) = 4 ;, >= 0
trigger2 = parent, AnimElemNo(0) = 5
trigger3 = parent, AnimElemNo(0) = 6
trigger4 = parent, AnimElemNo(0) = 7
pos = 5, -60
time = -1
ignorehitpause = 1
persistent = 1

[State 229, 1] ;medium punch - C
type = BindToRoot
triggerall = parent, StateNo = 410
trigger1 = parent, AnimElemNo(0) = 4
trigger2 = parent, AnimElemNo(0) = 5
trigger3 = parent, AnimElemNo(0) = 6
pos = 5, -60
time = -1
ignorehitpause = 1
persistent = 1

[State 229, 1] ;medium punch - A
type = BindToRoot
trigger1 = parent, StateNo = 610
pos = 15, -60
time = -1
ignorehitpause = 1
persistent = 1

[State 229, 1] ;strong kick - S
type = BindToRoot
trigger1 = parent, StateNo = 250
pos = 5, -20
time = -1
ignorehitpause = 1

[State 229, 1]
type = BindToRoot
trigger1 = parent, StateNo = [5050, 5200]
trigger1 = parent, StateNo != [5100, 5101] ;5040
trigger1 = parent, StateNo != [5070, 5071]
pos = 1, -15
time = -1
ignorehitpause = 1

[State 229, 1]
type = BindToRoot
trigger1 = parent, StateNo = [5030, 5035]
pos = -2, -40
time = -1
ignorehitpause = 1

[State 229, 1] ;custom states
type = BindToRoot
trigger1 = parent, MoveType = H
trigger1 = parent, StateNo != [5000, 5999] ;gethit
trigger1 = parent, StateNo != [120, 155] ;guard
pos = 0, 0
time = -1
ignorehitpause = 1

[State 229, 1] ;jet rush mode
type = BindToRoot
trigger1 = parent, StateNo = 2001
pos = 5, -38
time = -1
ignorehitpause = 1

;[State 229, 1]
;type = PosSet
;trigger1 = parent, StateType = S
;x = 5
;y = -40

;[State 229, 2]
;type = PosSet
;trigger1 = parent, StateType = C
;x = 5
;y = -20

;[State 229, 3]
;type = PosSet
;trigger1 = parent, StateType = A
;x = 5
;y = -60

;[State 229, 4]
;type = PlaySnd
;trigger1 = parent, var(20) = 46;76 ;Time = 0 ;5
;value = 20, 1
;channel = 1
;ignorehitpause = 1

[State 229, 5]
type = DestroySelf
trigger1 = parent, var(20) = 0 ;command != "hold_z" ;var(21) = 0;!= 1 && parent, var(21) != 2

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Fall and Recover (a custom gethit state)
[Statedef 225]
type    = U
movetype= H
physics = N
;anim = 5011

[State 225, 1]
type = Turn
trigger1 = P2Dist X < -5
ignorehitpause = 1

[State 225, 1]
type = SelfState
trigger1 = StateType = S
;trigger1 = !Time
value = 5000
ignorehitpause = 1

[State 225, 1]
type = SelfState
trigger1 = StateType = C
;trigger1 = !Time
value = 5010
ignorehitpause = 1

[State 225, 1]
type = ChangeAnim
;trigger1 = StateType = A
trigger1 = !Time
value = 5011
ignorehitpause = 1

[State 225, 0]
type = VelSet
trigger1 = Anim = 5011
trigger1 = !Time
x = 0
y = 0

[State 225, 1]
type = ChangeAnim
trigger1 = Anim = 5011
trigger1 = Time = 1;4;8
value = 5050

[State 225, 1]
type = HitFallSet
;trigger1 = Anim = 5050
trigger1 = Time = 1
value = 1

[State 225, 1] ;test
type = VelSet
;trigger1 = Anim = 5050
trigger1 = Time = 0 ;1
x = -3
y = -3;10

[State 225, 2] ;test
type = VelAdd
trigger1 = Anim != 5040
trigger1 = Time >= 0 ;1
y = const(movement.yaccel)*1.7 ;GetHitVar(yaccel)*2

[State 225, 1]
type = ChangeState;ChangeAnim
trigger1 = Anim != 5040;5120
trigger1 = HitFall
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 10  ;.
value = 300 ;5040;5120

[State 225, 1] ;if dead
type = SelfState
trigger1 = !Alive
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;5150

;---------------------------------------------------------------------------
; Fall and Recover - ANIM 5040 (a custom gethit state)
[Statedef 300]
type    = U
movetype= H
physics = N
anim = 5040

[State 300, 6]
type = NotHitBy
trigger1 = 1
value = SCA

[State 300, 1]
type = VelSet
trigger1 = Time = 1
x = 0
y = 0

[State 300, 1]
type = PosSet
trigger1 = AnimElem = 1, = 0
y = 0

[State 300, 1]
type = VelSet
trigger1 = Time = 2
x = -5
y = -3

[State 300, 1]
type = VelAdd;Gravity
trigger1 = Time > 4
y = const(movement.yaccel) ;GetHitVar(yaccel)

[State 300, 1]
type = SelfState ;ChangeAnim
triggerall = Vel Y > 0
triggerall = Pos Y >= 0
trigger1 = Time > 4
ctrl = 1
value = 52

[State 300, 1] ;if dead
type = SelfState
trigger1 = !Alive
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;5150

;---------------------------------------------------------------------------
; Fall and Recover - Hold Burst (a custom gethit state)
[Statedef 226]
type    = U
movetype= H
physics = N
;anim = 5011

[State 226, 1]
type = Turn
trigger1 = P2Dist X < -5
ignorehitpause = 1

[State 226, 1]
type = SelfState
trigger1 = StateType = S
;trigger1 = !Time
value = 5000
ignorehitpause = 1

[State 226, 1]
type = SelfState
trigger1 = StateType = C
;trigger1 = !Time
value = 5010
ignorehitpause = 1

[State 226, 1]
type = ChangeAnim
;trigger1 = StateType = A
trigger1 = !Time
value = 5011
ignorehitpause = 1

[State 226, 0]
type = VelSet
trigger1 = Anim = 5011
trigger1 = !Time
x = 0
y = 0

[State 226, 1]
type = ChangeAnim
trigger1 = Anim = 5011
trigger1 = Time = 4
value = 5050

[State 226, 1]
type = HitFallSet
;trigger1 = Anim = 5050
trigger1 = Time = 4
value = 1

;[State 226, 1]
;type = VelSet
;;trigger1 = Anim = 5050
;trigger1 = Time = 4
;x = -6
;y = -3

[State 226, 1] ;test
type = VelSet
;trigger1 = Anim = 5050
trigger1 = Time = 4;8
x = -6
y = -8;10

[State 226, 2] ;test
type = VelAdd
trigger1 = Time >= 4;8 ;1
y = const(movement.yaccel)*2 ;GetHitVar(yaccel)*2

;[State 225, 1]
;type = VelAdd;Gravity
;triggerall = Anim = 5040;5120
;trigger1 = NumEnemy > 0
;trigger1 = enemy(0), var(13) > 4 ;AnimTime > 1
;trigger2 = NumEnemy > 1
;trigger2 = enemy(1), var(13) > 4
;y = const(movement.yaccel) ;GetHitVar(yaccel)

[State 226, 1]
type = SelfState;Anim
;trigger1 = Anim != 5040;5120
trigger1 = HitFall
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 0  ;.
value = 5110 ;5120

;[State 226, 1]
;type = VelSet
;triggerall = Anim = 5170 ;5120
;trigger1 = NumEnemy > 0
;trigger1 = enemy(0), var(13) = 1 ;AnimTime = 1
;trigger2 = NumEnemy > 1
;trigger2 = enemy(1), var(13) = 1
;x = 0
;y = 0

;[State 226, 1]
;type = PosSet
;trigger1 = Anim = 5170 ;5120
;trigger1 = AnimElem = 1, = 0
;;trigger1 = NumEnemy > 0
;;trigger1 = enemy, var(13) = 1 ;AnimTime = 1
;y = 0

[State 226, 1] ;if dead
type = SelfState
trigger1 = !Alive
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5110 ;5150


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Projectile Dust (Fireball)
[Statedef 9021]
type = S
movetype = I
ctrl = 0
anim = 9022
velset = 0, 0
sprpriority = 7

[State 9021, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 9021, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 9021, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 9021, 2]
type = ChangeState
;triggerall = time >= 1
;trigger1 = root, var(1) = 1
trigger1 = parent, MoveContact || Parent, StateNo = 224
trigger2 = parent, MoveContact || Parent, StateNo = 228
value = 9023

;---------------------------------------------------------------------------
; Projectile Dust (end)
[Statedef 9023]
type = S
movetype = I
ctrl = 0
anim = 9023
velset = 0, 0
sprpriority = 7

[State 9023, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 9023, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 9023, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Standing Light Kick
; CNS difficulty: easy
[StateDef 230]
type = S
movetype= A
physics = S
juggle  = 3
velset = 0,0
ctrl = 0
anim = 230
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 230, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NA
damage = 27
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 7, 7
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -51
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 1
guardsound = s6, 0
ground.type = high
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 10

[State 230, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------
; Standing Light Kick
; CNS difficulty: easy
[StateDef 235]
type = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
ctrl = 0
anim = 235
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,1
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 230, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NA
damage = 22
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 7, 7
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -46
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 0
guardsound = s6, 0
ground.type = low
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 10

[State 230, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 45
ctrl = 0
velset = 0,0
anim = 240

[State 240, 2]
type = VelSet
trigger1 = Time = 3
x = 5

[State 240, 2]
type = VelSet
trigger1 = Time = 8
x = 0

[state 240, 2]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 100
x = 4

[state 240, 3]
type = VelSet
trigger1 = Time = 0
trigger1 = PrevStateno = 105
x = -4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 0
trigger1 = p2bodydist x <= 7
value = 245
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(6)>=0
movetype= I


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S51,6
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 15,0
;value = 0,0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,4
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.1
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 250, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = 84
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -56
hitsound = s5, 3
guardsound = s6, 0
ground.type = high
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.4,-3
air.hittime = 18

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing Medium Kick
; CNS difficulty: easy
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 45
ctrl = 0
velset = 0,0
anim = 250

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(7)>=0
movetype= I

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 15,0
;value = 0,0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,4
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.1
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 250, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
damage = 70
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -76
hitsound = s5, 3
guardsound = s6, 0
ground.type = high
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.4,-3
air.hittime = 18

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------
;Kyaku
[StateDef 241]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 241
poweradd = 0
sprpriority = 2

[State 241, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 242
ctrl = 0

;-----------------------
;KyakuLift
[StateDef 242]
type = A
movetype= A
physics = N
juggle  = 1
velset = 4,-5
ctrl = 0
anim = 242
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,4
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,4
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 242, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, NA
damage = 52
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -76
hitsound = s5, 3
guardsound = s6, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 18

[State 1000, Land]
type= changestate
trigger1= vel y > 0
trigger1= pos y > -vel y
value= 243

;-------------------
;Kyakuland
[StateDef 243]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 243
poweradd = 0
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S40,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 243, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Punch
; CNS difficulty: easy
; Description: Simple crouching attack. The HitDef's guardflag parameter
;     is set to "L", meaning that the move can only be guarded low
;     (crouching), and not by standing or jumping opponents.
;     Like for all light attacks, it's a good idea to keep the slidetime
;     and hittime parameters at a smaller number, so the opponent isn't
;     stunned for too long. For all crouching attacks you have to
;     remember to set the attr parameter to indicate that it is crouching
;     attack. In this case, "C, NA" stands for "crouching, normal attack".
;     The HitDef's priority is set at 3, instead of the default of 4,
;     so this attack has a lower priority than most others, meaning the
;     player will get hit instead of trading hits with the opponent if
;     their attack collision boxes (Clsn1) intersect each other's Clsn2
;     boxes at the same time.
[StateDef 400]
type = C
movetype= A
physics = C
juggle  = 3
velset = 0,0
ctrl = 0
anim = 400
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(3)>=0
movetype= I


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 400, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = C, NA
damage = 14
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 7, 7
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -46
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 0
guardsound = s6, 0
ground.type = low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 400, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Punch
[StateDef 410]
type = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
ctrl = 0
anim = 410
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 200, Idle]
type= statetypeset
trigger1= animelemtime(6)>=0
movetype= I

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 15,0
;value = 0,0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S0,2
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 410, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage = 84
animtype = up
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -76
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -1,-8.5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1,-8
air.hittime = 18
fall = 1
fall.recovertime = 60

[state 410, 2]
type = VelSet
trigger1 = Time = 7
x = 3.2

[state 410, 2]
type = VelSet
trigger1 = Time = 14
x = 2.7

[state 410, 2]
type = VelAdd
trigger1 = Time = 18
y = .4

[state 410, 2]
type = VelSet
trigger1 = Time = 21
x = 0

[state 410, 2]
type = VelSet
trigger1 = Time = 24
y = 0

[state 410, 2]
type = PosSet
trigger1 = Time = 24
y = 0

[State 410, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Punch
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 6
velset = 0,0
ctrl = 0
anim = ifelse(var(33) = 1, ifelse(var(20) > 75, 6140, 6108), 420)
poweradd = 85
sprpriority = 2

[State 420, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && Time = 7
persistent = 0
anim = 222
postype = p1
pos = 24, -34
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 420, 4]
type = Helper
trigger1 = var(20) < 76 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 223
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 420, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 420, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 420, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 420, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 425, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 2 ;AnimElem = 3
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1

[State 425, 2] ;Fireball Shoot
type = Explod
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
persistent = 0
ID = 422
anim = 422
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 425, 3] ;Fireball efect
type = Explod
;trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = 7
persistent = 0
anim = 226
postype = p1
pos = 24, -34
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 425, 4]
type = Helper
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
helpertype = normal
name = "Hold Fireball"
ID = 227
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 227
ownpal = 1

[State 425, 4.2]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) > 75 && var(20) < 350 && AnimElem = 3
helpertype = normal
name = "Hand Burst"
ID = 1700
pos = 24, -34;-46
postype = p1
;bindtime = -1
;facing = 1
stateno = 1700
ownpal = 1

[State 425, 4.3]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) >= 350 && AnimElem = 3
helpertype = normal
name = "Hand Strong Burst"
ID = 1702
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 1702
ownpal = 1

[State 425, 2]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [5, 7] ;3
add = 255,120,0
time = 1

[State 425, 3]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [8, 10] ;3
add = 190,120,0
time = 1

[State 425, 4]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [11, 14] ;4
add = 190,80,0
time = 1

[State 425, 5]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [15, 17] ;3
add = 90,50,0
time = 1

[State 425, 2] ;Burst Hand - no pal
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(22) > 75 && Time = [5, 17]
time = 1

[State 420, 9]
type = PlaySnd
trigger1 = var(20) < 76 && AnimElem = 3
value = 18, 5

[State 420, 10]
type = PlaySnd
trigger1 = var(20) > 75 && AnimElem = 3
value = 18, 4

[State 420, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(422) > 0 ;AnimElem = 4 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 3
var(20) = 0

;[State 420, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 2

[State 420, 2]
type = PlaySnd
trigger1 = var(20) < 76 && Time = 4
value = 2, 1
channel = 0

[State 420, 2]
type = PlaySnd
trigger1 = var(20) > 75 && Time = 4
value = 2, 4
channel = 0

;[State 420, 6]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 420, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Punch
[Statedef 421]
type    = C
movetype= A
physics = C
juggle  = 6
velset = 0,0
ctrl = 0
anim = ifelse(var(33) = 1, ifelse(var(20) > 75, 6140, 6108), 420)
poweradd = 85
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 420
elem = 3
;ignorehitpause =
;persistent =


[State 420, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && Time = 7
persistent = 0
anim = 222
postype = p1
pos = 24, -34
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 420, 4]
type = Helper
trigger1 = var(20) < 76 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 223
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 420, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 420, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 420, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 420, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 425, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 2 ;AnimElem = 3
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1

[State 425, 2] ;Fireball Shoot
type = Explod
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
persistent = 0
ID = 422
anim = 422
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 425, 3] ;Fireball efect
type = Explod
;trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = 7
persistent = 0
anim = 226
postype = p1
pos = 24, -34
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 425, 4]
type = Helper
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
helpertype = normal
name = "Hold Fireball"
ID = 227
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 227
ownpal = 1

[State 425, 4.2]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) > 75 && var(20) < 350 && AnimElem = 3
helpertype = normal
name = "Hand Burst"
ID = 1700
pos = 24, -34;-46
postype = p1
;bindtime = -1
;facing = 1
stateno = 1700
ownpal = 1

[State 425, 4.3]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) >= 350 && AnimElem = 3
helpertype = normal
name = "Hand Strong Burst"
ID = 1702
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 1702
ownpal = 1

[State 425, 2]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [5, 7] ;3
add = 255,120,0
time = 1

[State 425, 3]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [8, 10] ;3
add = 190,120,0
time = 1

[State 425, 4]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [11, 14] ;4
add = 190,80,0
time = 1

[State 425, 5]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [15, 17] ;3
add = 90,50,0
time = 1

[State 425, 2] ;Burst Hand - no pal
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(22) > 75 && Time = [5, 17]
time = 1

[State 420, 9]
type = PlaySnd
trigger1 = var(20) < 76 && AnimElem = 3
value = 18, 5

[State 420, 10]
type = PlaySnd
trigger1 = var(20) > 75 && AnimElem = 3
value = 18, 4

[State 420, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(422) > 0 ;AnimElem = 4 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 3
var(20) = 0

;[State 420, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 2

[State 420, 2]
type = PlaySnd
trigger1 = var(20) < 76 && Time = 4
value = 2, 1
channel = 0

[State 420, 2]
type = PlaySnd
trigger1 = var(20) > 75 && Time = 4
value = 2, 4
channel = 0

;[State 420, 6]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 420, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Punch
[Statedef 422]
type    = C
movetype= A
physics = C
juggle  = 6
velset = 0,0
ctrl = 0
anim = ifelse(var(33) = 1, ifelse(var(20) > 75, 6140, 6108), 420)
poweradd = 85
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 420
elem = 3
;ignorehitpause =
;persistent =


[State 420, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && Time = 7
persistent = 0
anim = 222
postype = p1
pos = 24, -34
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 420, 4]
type = Helper
trigger1 = var(20) < 76 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 223
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 420, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 420, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 420, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 420, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 425, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 2 ;AnimElem = 3
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1

[State 425, 2] ;Fireball Shoot
type = Explod
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
persistent = 0
ID = 422
anim = 422
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 425, 3] ;Fireball efect
type = Explod
;trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = 7
persistent = 0
anim = 226
postype = p1
pos = 24, -34
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 425, 4]
type = Helper
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
helpertype = normal
name = "Hold Fireball"
ID = 227
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 227
ownpal = 1

[State 425, 4.2]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) > 75 && var(20) < 350 && AnimElem = 3
helpertype = normal
name = "Hand Burst"
ID = 1700
pos = 24, -34;-46
postype = p1
;bindtime = -1
;facing = 1
stateno = 1700
ownpal = 1

[State 425, 4.3]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) >= 350 && AnimElem = 3
helpertype = normal
name = "Hand Strong Burst"
ID = 1702
pos = 24, -34
postype = p1
;bindtime = -1
;facing = 1
stateno = 1702
ownpal = 1

[State 425, 2]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [5, 7] ;3
add = 255,120,0
time = 1

[State 425, 3]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [8, 10] ;3
add = 190,120,0
time = 1

[State 425, 4]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [11, 14] ;4
add = 190,80,0
time = 1

[State 425, 5]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [15, 17] ;3
add = 90,50,0
time = 1

[State 425, 2] ;Burst Hand - no pal
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(22) > 75 && Time = [5, 17]
time = 1

[State 420, 9]
type = PlaySnd
trigger1 = var(20) < 76 && AnimElem = 3
value = 18, 5

[State 420, 10]
type = PlaySnd
trigger1 = var(20) > 75 && AnimElem = 3
value = 18, 4

[State 420, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(422) > 0 ;AnimElem = 4 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 3
var(20) = 0

;[State 420, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 2

[State 420, 2]
type = PlaySnd
trigger1 = var(20) < 76 && Time = 4
value = 2, 1
channel = 0

[State 420, 2]
type = PlaySnd
trigger1 = var(20) > 75 && Time = 4
value = 2, 4
channel = 0

;[State 420, 6]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 420, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Light Kick
; CNS difficulty: easy
[StateDef 430]
type = C
movetype= A
physics = C
juggle  = 3
velset = 0,0
ctrl = 0
anim = 430
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.1
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 430, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = C, NA
damage = 14
animtype = Light
guardflag = LA
hitflag = MAF
priority = 3, Hit
pausetime = 7, 7
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -6
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 0
guardsound = s6, 0
ground.type = low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 430, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouching Medium Kick
; CNS difficulty: easy
[StateDef 440]
type = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
ctrl = 0
anim = 440
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(5)>=0
movetype= I

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 15,0
;value = 0,0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,4
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 440, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = C, NA
damage = 91
animtype = heavy
guardflag = LA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -16
guard.sparkno = -1 + 0 * (var(54) := 8000)
hitsound = s5, 3
guardsound = s6, 0
ground.type = trip
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -3,-3
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -4.4,-3
air.hittime = 18

[State 440, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Jump Light Punch
; CNS difficulty: easy
[StateDef 600]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 600
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(6)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 600, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 42
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
fall.recovertime = 15
pausetime = 7, 7
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -56
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 1
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 10

;---------------------------------------------------------------------------
; Jump Medium Punch
; CNS difficulty: easy
[StateDef 610]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 610
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(5)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 610, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 91
animtype = heavy
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
fall.recovertime = 65
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -56
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = s6, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -7
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2.4,-3
air.hittime = 18

;---------------------------------------------------------------------------
; Jump Strong Punch
[Statedef 620]
type    = A
movetype= A
;physics = ifelse(var(20) > 50, N, A)
juggle  = 4
ctrl = 0
anim = ifelse(var(33) = 1, ifelse(var(20) > 75, 6141, 6114), 620)
poweradd = 95
sprpriority = 2

[State 620, 1]
type = StateTypeSet
trigger1 = var(20) < 76 && Time = 0
statetype = A
movetype = A
physics = A

[State 620, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && Time = 8
persistent = 0
anim = 222
postype = p1
pos = 29, -68
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 620, 4]
type = Helper
trigger1 = var(20) < 76 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 223
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 620, 2]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [7, 9] ;3
add = 120,120,255
time = 1

[State 620, 3]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [10, 12] ;3
add = 80,80,256
time = 1

[State 620, 4]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [13, 16] ;4
add = 50,50,155
time = 1

[State 620, 5]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [17, 19] ;3
add = 20,20,95
time = 1


[State 625, 1]
type = StateTypeSet
trigger1 = var(20) > 75 && Time = 0
statetype = A
movetype = A
physics = N

[State 625, 2] ;Fireball Shoot
type = Explod
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
persistent = 0
ID = 622
anim = 622
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 625, 3] ;Fireball efect
type = Explod
;trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = 8
persistent = 0
anim = 226
postype = p1
pos = 29, -68
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 625, 4]
type = Helper
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 227
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 227
ownpal = 1

[State 625, 4.2]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) > 75 && var(20) < 350 && AnimElem = 3
helpertype = normal
name = "Hand Burst"
ID = 1700
pos = 29, -68 ;24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 1700
ownpal = 1

[State 625, 4.3]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) >= 350 && AnimElem = 3
helpertype = normal
name = "Hand Strong Burst"
ID = 1702
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 1702
ownpal = 1

[State 625, 1]
type = VelSet
trigger1 = var(20) > 75 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = var(20) > 75 && Time = 0
x = .1
y = .1

[State 625, 2]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [7, 9] ;3
add = 255,120,0
time = 1

[State 625, 3]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [10, 12] ;3
add = 190,120,0
time = 1

[State 625, 4]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [13, 16] ;4
add = 190,80,0
time = 1

[State 625, 5]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [17, 19] ;3
add = 90,50,0
time = 1

[State 625, 2] ;Burst Hand - no pal
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(22) > 75 && Time = [7, 19]
time = 1

[State 620, 9]
type = PlaySnd
trigger1 = var(20) < 76 && AnimElem = 3
value = 18, 5

[State 620, 10]
type = PlaySnd
trigger1 = var(20) > 75 && AnimElem = 3
value = 18, 4

[State 620, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(622) > 0 ;AnimElem = 4 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 3
var(20) = 0

;[State 620, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 3

[State 620, 2]
type = PlaySnd
trigger1 = !(Vel Y > 0 && Pos Y > -48)
trigger1 = var(20) < 76 && Time = 4
value = 2, 0
channel = 0

[State 620, 2]
type = PlaySnd
trigger1 = var(20) > 75 && Time = 4
value = 2, 4
channel = 0

;[State 620, 6]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 620, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1

;---------------------------------------------------------------------------
; Jump Strong Punch
[Statedef 621]
type    = A
movetype= A
;physics = ifelse(var(20) > 50, N, A)
juggle  = 4
ctrl = 0
anim = ifelse(var(33) = 1, ifelse(var(20) > 75, 6141, 6114), 620)
poweradd = 95
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 620
elem = 3
;ignorehitpause =
;persistent =


[State 620, 1]
type = StateTypeSet
trigger1 = var(20) < 76 && Time = 0
statetype = A
movetype = A
physics = A

[State 620, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && Time = 12
persistent = 0
anim = 222
postype = p1
pos = 29, -68
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 620, 4]
type = Helper
trigger1 = var(20) < 76 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 223
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 620, 2]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [7, 9] ;3
add = 120,120,255
time = 1

[State 620, 3]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [10, 12] ;3
add = 80,80,256
time = 1

[State 620, 4]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [13, 16] ;4
add = 50,50,155
time = 1

[State 620, 5]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [17, 19] ;3
add = 20,20,95
time = 1


[State 625, 1]
type = StateTypeSet
trigger1 = var(20) > 75 && Time = 0
statetype = A
movetype = A
physics = N

[State 625, 2] ;Fireball Shoot
type = Explod
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
persistent = 0
ID = 622
anim = 622
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 625, 3] ;Fireball efect
type = Explod
;trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = 12
persistent = 0
anim = 226
postype = p1
pos = 29, -68
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 625, 4]
type = Helper
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 227
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 227
ownpal = 1

[State 625, 4.2]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) > 75 && var(20) < 350 && AnimElem = 3
helpertype = normal
name = "Hand Burst"
ID = 1700
pos = 29, -68 ;24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 1700
ownpal = 1

[State 625, 4.3]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) >= 350 && AnimElem = 3
helpertype = normal
name = "Hand Strong Burst"
ID = 1702
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 1702
ownpal = 1

[State 625, 1]
type = VelSet
trigger1 = var(20) > 75 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = var(20) > 75 && Time = 0
x = .1
y = .1

[State 625, 2]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [7, 9] ;3
add = 255,120,0
time = 1

[State 625, 3]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [10, 12] ;3
add = 190,120,0
time = 1

[State 625, 4]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [13, 16] ;4
add = 190,80,0
time = 1

[State 625, 5]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [17, 19] ;3
add = 90,50,0
time = 1

[State 625, 2] ;Burst Hand - no pal
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(22) > 75 && Time = [7, 19]
time = 1

[State 620, 9]
type = PlaySnd
trigger1 = var(20) < 76 && AnimElem = 3
value = 18, 5

[State 620, 10]
type = PlaySnd
trigger1 = var(20) > 75 && AnimElem = 3
value = 18, 4

[State 620, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(622) > 0 ;AnimElem = 4 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 3
var(20) = 0

;[State 620, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 3

[State 620, 2]
type = PlaySnd
trigger1 = !(Vel Y > 0 && Pos Y > -48)
trigger1 = var(20) < 76 && Time = 4
value = 2, 0
channel = 0

[State 620, 2]
type = PlaySnd
trigger1 = var(20) > 75 && Time = 4
value = 2, 4
channel = 0

;[State 620, 6]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 620, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1

;---------------------------------------------------------------------------
; Jump Strong Punch
[Statedef 622]
type    = A
movetype= A
;physics = ifelse(var(20) > 50, N, A)
juggle  = 4
ctrl = 0
anim = ifelse(var(33) = 1, ifelse(var(20) > 75, 6141, 6114), 620)
poweradd = 95
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 620
elem = 3
;ignorehitpause =
;persistent =


[State 620, 1]
type = StateTypeSet
trigger1 = var(20) < 76 && Time = 0
statetype = A
movetype = A
physics = A

[State 620, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && Time = 12
persistent = 0
anim = 222
postype = p1
pos = 29, -68
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 620, 4]
type = Helper
trigger1 = var(20) < 76 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 223
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 223
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 620, 2]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [7, 9] ;3
add = 120,120,255
time = 1

[State 620, 3]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [10, 12] ;3
add = 80,80,256
time = 1

[State 620, 4]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [13, 16] ;4
add = 50,50,155
time = 1

[State 620, 5]
type = PalFX
trigger1 = NumHelper(223) > 0
trigger1 = var(22) < 76 && Time = [17, 19] ;3
add = 20,20,95
time = 1


[State 625, 1]
type = StateTypeSet
trigger1 = var(20) > 75 && Time = 0
statetype = A
movetype = A
physics = N

[State 625, 2] ;Fireball Shoot
type = Explod
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
persistent = 0
ID = 622
anim = 622
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 625, 3] ;Fireball efect
type = Explod
;trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = 12
persistent = 0
anim = 226
postype = p1
pos = 29, -68
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 625, 4]
type = Helper
trigger1 = var(33) != 1
trigger1 = var(20) > 75 && AnimElem = 3
helpertype = normal
name = "Fireball"
ID = 227
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 227
ownpal = 1

[State 625, 4.2]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) > 75 && var(20) < 350 && AnimElem = 3
helpertype = normal
name = "Hand Burst"
ID = 1700
pos = 29, -68 ;24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 1700
ownpal = 1

[State 625, 4.3]
type = Helper
trigger1 = var(33) = 1
trigger1 = var(20) >= 350 && AnimElem = 3
helpertype = normal
name = "Hand Strong Burst"
ID = 1702
pos = 29, -68
postype = p1
;bindtime = -1
;facing = 1
stateno = 1702
ownpal = 1

[State 625, 1]
type = VelSet
trigger1 = var(20) > 75 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = var(20) > 75 && Time = 0
x = .1
y = .1

[State 625, 2]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [7, 9] ;3
add = 255,120,0
time = 1

[State 625, 3]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [10, 12] ;3
add = 190,120,0
time = 1

[State 625, 4]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [13, 16] ;4
add = 190,80,0
time = 1

[State 625, 5]
type = PalFX
trigger1 = var(33) != 1
trigger1 = var(22) > 75 && Time = [17, 19] ;3
add = 90,50,0
time = 1

[State 625, 2] ;Burst Hand - no pal
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(22) > 75 && Time = [7, 19]
time = 1

[State 620, 9]
type = PlaySnd
trigger1 = var(20) < 76 && AnimElem = 3
value = 18, 5

[State 620, 10]
type = PlaySnd
trigger1 = var(20) > 75 && AnimElem = 3
value = 18, 4

[State 620, 5] ;Fireball (reset hold var)
type = VarSet
trigger1 = NumExplod(622) > 0 ;AnimElem = 4 ;Time = 0
trigger2 = var(33) = 1
trigger2 = var(20) > 75 && AnimElem = 3
var(20) = 0

;[State 620, 3] ;burst hand - start pos y select
;Type = VarSet
;trigger1 = !Time
;var(27) = 3

[State 620, 2]
type = PlaySnd
trigger1 = !(Vel Y > 0 && Pos Y > -48)
trigger1 = var(20) < 76 && Time = 4
value = 2, 0
channel = 0

[State 620, 2]
type = PlaySnd
trigger1 = var(20) > 75 && Time = 4
value = 2, 4
channel = 0

;[State 620, 6]
;type = PlaySnd
;trigger1 = Time = 1
;value = 10, 2

[State 620, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 53
ctrl = 1

;---------------------------------------------------------------------------
; Jump Medium Punch
; CNS difficulty: easy
[StateDef 611]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 611
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S0,1
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 610, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = 90
animtype = heavy
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
fall.recovertime = 65
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -56
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = s6, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -7
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2.4,-4
air.hittime = 18

;---------------------------------------------------------------------------
; Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 630
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(7)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.1
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 600, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 35
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 7, 7
fall.recovertime = 15
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -46
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 1
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 15

;---------------------------------------------------------------------------
; Jump Medium Kick
; CNS difficulty: easy
[StateDef 640]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 650
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S50,6+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,3
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.1
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 640, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 84
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
fall.recovertime = 25
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -56
guard.sparkno = -1 + 0 * (var(54) := 8000)
hitsound = s5, 3
guardsound = s6, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -3.4,8
air.hittime = 45

;---------------------------------------------------------------------------
; Jump Medium Kick
; CNS difficulty: easy
[StateDef 641]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 641
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2 && random<200 && var(1)!=2
value = S50,9+random%3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 200, Idle]
type= statetypeset
trigger1= animelemtime(4)>=0
movetype= I

[State 640, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage = 43
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
fall.recovertime = 25
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -76
guard.sparkno = -1 + 0 * (var(54) := 8000)
hitsound = s5, 3
guardsound = s6, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -3.4,0
air.hittime = 45


[Statedef 700]
type = S
physics = S
movetype = I
anim = 700
ctrl = 0
velset = 0, 0
sprpriority = -2

[State 700, Snd]
type = playsnd
trigger1 = !time
value = 50,1
channel = 0

[State 700, Snd]
type = playsnd
trigger1 = animelem = 1
value = 0, 0
channel = 1

[State 700, Push]
type = playerpush
trigger1 = 1
value = 0
ignoreHitPause = 1

[State 700, HB]
type = hitby
trigger1 = 1
value = SCA, AT
time = 1

[State 700, Attack]
type = changestate
trigger1 = !AIlevel && (time = [15, 25])
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
value = ifelse((command = "x" || command = "y" || command = "z"), 210, 240)

[State 700, Attack]
type = changestate
trigger1 = AIlevel && (time = [15, 25]) && numenemy
trigger1 = (enemynear, movetype != A) && (p2bodydist x = [ -60, 60]) && (p2dist y >= -60)
value = ifelse(random < 666, 210, 240)

[State 700, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;====================< ROLL >====================
;--- Forward ---
[Statedef 710]
type = S
physics = N
movetype = I
anim = 710
ctrl = 0
velset = 0, 0
sprpriority = 1

[State 710, Push]
type = playerpush
trigger1 = 1
value = 0
ignoreHitPause = 1

[State 710, HB]
type = hitby
trigger1 = animelemtime(9) < 0
value = SCA, AT
time = 1

[State 700, Snd]
type = playsnd
trigger1 = !time
value = 50,1
channel = 0

[State 700, Snd]
type = playsnd
trigger1 = animelem = 1
value = 0, 0
channel = 1

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 4.5

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 710, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;--- Backward ---
[Statedef 715]
type = S
physics = N
movetype = I
anim = 715
ctrl = 0
velset = 0, 0
sprpriority = 1

[State 715, Push]
type = playerpush
trigger1 = 1
value = 0
ignoreHitPause = 1

[State 715, HB]
type = hitby
trigger1 = animelemtime(9) < 0
value = SCA, AT
time = 1

[State 700, Snd]
type = playsnd
trigger1 = !time
value = 50,1
channel = 0

[State 700, Snd]
type = playsnd
trigger1 = animelem = 1
value = 0, 0
channel = 1

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = -4.5

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 715, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;==========< POWER CHARGE >==========
[Statedef 730]
type = S
physics = S
movetype = I
anim = 730
velset = 0, 0
ctrl = 0

[State 730, Power]
type = poweradd
triggerall = power < const(data.power) && power < powermax
trigger1 = !AIlevel && (command = "holdb" && command = "holdz")
trigger2 = AIlevel
value = 2 + ifelse(time < 60, 0, (time -60) / 12)

[State 730, Snd]
type = playsnd
trigger1 = !time
value = 50,2
channel = 0

[State 730, Flash]
type = palfx
trigger1 = 1
time = 1
add = 75 + ceil(sin(time / 6.0 * pi) * 75), 25 + ceil(sin(time / 6.0 * pi) * 25), 0

[State 730, FX]
type = helper
trigger1 = !numhelper(8330)
helpertype = normal
stateno = 8330
ID = 8330
name = "Power Charge"
postype = p1
pos = 0,0
pausemovetime = 65535
supermovetime = 65535
ownpal = 1

[State 730, FX]
type = helper
trigger1 = !numhelper(8331)
helpertype = normal
stateno = 8331
ID = 8331
name = "Particles"
postype = p1
pausemovetime = 65535
supermovetime = 65535
ownpal = 1

[State 730, End]
type = changestate
trigger1 = power >= const(data.power) || power >= powermax || roundstate != 2
trigger2 = !AIlevel && (command != "holdb" || command != "holdz")
trigger3 = AIlevel && (inguarddist || p2bodydist x <= 120)
value = 731
ctrl = 1


;--- END ---
[Statedef 731]
type = S
physics = S
movetype = I
anim = 731
velset = 0, 0
ctrl = 1

[State 731, Stop Snd]
type = stopsnd
trigger1 = !time
channel = 0

[State 730, Snd]
type = playsnd
trigger1 = !time && power >= const(data.power)
value = 62,3
channel = 0
persistent = 0

[State 730, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;====================< ZERO COUNTER >====================
[Statedef 750]
type = S
physics = S
movetype = I
anim = 750
velset = 0, 0
ctrl = 0
sprpriority = 2
poweradd = -1000
facep2 = 1

[State 750, Button]
type = varset
trigger1 = !time && !AIlevel
var(10) = (command = "412k")
ignorehitpause = 1

[State 750, Button AI]
type = varset
trigger1 = !time && AIlevel
var(10) = ifelse((p2statetype = A), 0, ifelse((p2statetype = C), 1, ifelse(random < 500, 0, 1)))
ignorehitpause = 1

[State 750, NHB]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 750, Stop]
type = posfreeze
trigger1 = 1
value = 1

[State 750, Snd]
type = playsnd
trigger1 = !time
value = 4,0
channel = 0

[State 750, SuperPause FX]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8350
ID = 8350
name = "Zero Counter"
postype = p1
pos = 35, -55
supermovetime = 255
ownpal = 1

[State 750, Super Pause]
type = superpause
trigger1 = !time
time = 15
movetime = 15
p2defmul = 1
anim = -1
sound = s750,0
darken = 0

[State 750, End]
type = changestate
trigger1 = time >= 15
value = ifelse(var(10) = 1, 2910, 2900)



;====================< PARRY >====================
;--- STANDING ---
[Statedef 760]
type = S
physics = S
movetype = I
anim = 760
velset = 0, 0
ctrl = 0
sprpriority = 2
poweradd = 78
facep2 = 1

[State 760, HB]
type = hitby
trigger1 = 1
value = SCA, AT
time = 1

[State 760, Pause]
type = pause
trigger1 = !time
time = 15
movetime = 15
endcmdbuftime = 15
pausebg = 0

[State 760, Stop]
type = posfreeze
trigger1 = 1
value = 1

[State 760, No walking]
type = varset
trigger1 = 1
var(26) = 7

[State 760, Snd]
type = playsnd
trigger1 = !time
value = 50,6
channel = 0

[State 760, Snd]
type = playsnd
trigger1 = !time
value = 760,0
channel = 7

[State 760, Flash]
type = palfx
trigger1 = !time
add = 0, 64, 255
sinadd = 0, -64, -255, 60
time = 15

[State 760, FX]
type = explod
trigger1 = !time
anim = 8360
sprpriority = 5
postype = p1
pos = 35, -55
pausemovetime = -1
supermovetime = -1
scale = 0.5, 0.5
ownpal = 1

[State 760, Shake]
type = envshake
trigger1 = !time
time = 0
ampl = 0

[State 760, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;--- CROUCHING ---
[Statedef 761]
type = C
physics = C
movetype = I
anim = 761
velset = 0, 0
ctrl = 0
sprpriority = 2
poweradd = 78
facep2 = 1

[State 761, HB]
type = hitby
trigger1 = 1
value = SCA, AT
time = 1

[State 761, Pause]
type = pause
trigger1 = !time
time = 15
movetime = 15
endcmdbuftime = 15
pausebg = 0

[State 761, Stop]
type = posfreeze
trigger1 = 1
value = 1

[State 761, No walking]
type = varset
trigger1 = 1
var(26) = 7

[State 761, Snd]
type = playsnd
trigger1 = !time
value = 50,6
channel = 0

[State 761, Snd]
type = playsnd
trigger1 = !time
value = 760,0
channel = 7

[State 761, Flash]
type = palfx
trigger1 = !time
add = 0, 64, 255
sinadd = 0, -64, -255, 60
time = 15

[State 761, FX]
type = explod
trigger1 = !time
anim = 8360
sprpriority = 5
postype = p1
pos = 16,-57
pausemovetime = -1
supermovetime = -1
scale = 0.5, 0.5
ownpal = 1

[State 761, Shake]
type = envshake
trigger1 = !time
time = 0
ampl = 0

[State 761, End]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1


;--- JUMPING ---
[Statedef 762]
type = A
physics = N
movetype = I
anim = 762
ctrl = 0
sprpriority = 2
poweradd = 78
facep2 = 1

[State 762, HB]
type = hitby
trigger1 = 1
value = SCA, AT
time = 1

[State 762, Pause]
type = pause
trigger1 = !time
time = 15
movetime = 15
endcmdbuftime = 15
pausebg = 0

[State 762, Stop]
type = posfreeze
trigger1 = 1
value = 1

[State 762, Snd]
type = playsnd
trigger1 = !time
value = 50,6
channel = 0

[State 762, Snd]
type = playsnd
trigger1 = !time
value = 760,0
channel = 7

[State 762, Flash]
type = palfx
trigger1 = !time
add = 0, 64, 255
sinadd = 0, -64, -255, 60
time = 15

[State 762, FX]
type = explod
trigger1 = !time
anim = 8360
sprpriority = 5
postype = p1
pos = 11,-93
pausemovetime = -1
supermovetime = -1
scale = 0.5, 0.5
ownpal = 1

[State 762, Shake]
type = envshake
trigger1 = !time
time = 0
ampl = 0

[State 762, End]
type = changestate
trigger1 = !animtime
value = 763
ctrl = 1


[Statedef 763]
type = A
physics = N
movetype = I
anim = 763
ctrl = 1

[State 763, Vel]
type = velset
trigger1 = !time
x = ifelse(vel x > 2, 2, ifelse(vel x < -2, -2, vel x))
y = ifelse(vel y < -2, vel y, -2)

[State 763, Accel]
type = gravity
trigger1 = 1

[State 763, Land]
type = changestate
trigger1 = pos y > -vel y
value = 52


;--- HELPER ---
[Statedef 765]
type = A
physics = N
movetype = I
anim = ifelse(root, statetype = C, 766, ifelse(root, statetype = A, 767, 765))
velset = 0, 0
ctrl = 0

[State 765, NHB]
type = nothitby
trigger1 = 1
value = SCA

[State 765, Bind]
type = bindtoroot
trigger1 = 1
time = -1

[State 765, Anim]
type = changeanim
triggerall = !time
trigger1 = !(root, AIlevel) && root, command = "down"
trigger2 = root, AIlevel && (root, statetype != A) && p2statetype = C
value = 766

[State 765, Anim]
type = changeanim
triggerall = !time
trigger1 = !(root, AIlevel) && root, command = "fwd"
trigger2 = root, AIlevel && anim != 766
value = ifelse((root, statetype = A), 767, 765)

[State 765, Anim]
type = changeanim
trigger1 = anim = 765 || anim = 767
value = ifelse((root, statetype = A), 767, 765)

[State 765, Disable]
type = varset
trigger1 = time >= ifelse((root, statetype = A), 7, 8)
trigger2 = facing != (root, facing)
trigger3 = !(root, ctrl)
trigger3 = (root, stateno != [760, 762]) && (root, stateno != 5120)
var(0) = 1

[State 765, Disable]
type = varset
triggerall = !(root, AIlevel)
trigger1 = (root, command = "holdback")
trigger2 = time < 4 && (root, command = "holdfwd" + root, command = "holddown") > 1
trigger3 = time >= 4 && (root, command = "holdfwd" || root, command = "holddown")
trigger4 = time >= 1 && (((anim = 765 || anim = 767) && root, command = "fwd") || (anim = 766 && root, command = "down"))
var(0) = 1

[State 765, Disable]
type = changeanim
trigger1 = var(0) = 1
value = 9741

[State 765, Standing /air]
type = reversaldef
trigger1 = !var(0) && (anim = 765 || anim = 767)
trigger1 = (root, stateno != 5120) || !(root, animtime)
reversal.attr = SCA, AA
p1stateno = 766
pausetime = 0, 0
sparkno = -1
numhits = 0

[State 765, Crouching]
type = reversaldef
trigger1 = !var(0) && anim = 766
reversal.attr = SC, AA
p1stateno = 766
pausetime = 0, 0
sparkno = -1
numhits = 0

[State 765, Disable]
type = reversaldef
trigger1 = var(0) = 1
reversal.attr =
pausetime = 0, 0
sparkno = -1
numhits = 0

[State 765, End]
type = destroyself
trigger1 = time >= 18
trigger2 = (root, movetype != I)
trigger3 = !(root, ctrl) && (root, stateno != [760, 762]) && (root, stateno != 5120)
trigger4 = (root, stateno = [760, 762]) && (root, time <= 1)


;--- Success ---
[Statedef 766]
movetype = I
ctrl = 0

[State 766, Disable]
type = varset
trigger1 = 1
var(0) = 1

[State 766, End]
type = destroyself
trigger1 = root, stateno = [760, 762]
trigger2 = time >= 2


;===============<MAX Mode>===============
[Statedef 770]
type = S
movetype = I
physics = S
anim = 770
ctrl = 0
velset = 0,0

;[State 770, Voice]
;type = PlaySnd
;trigger1 = AnimElem = 1
;value = 0, 0
;channel = 0

[State 770, MAX Snd]
type = PlaySnd
trigger1 = !Time
value = 770, 0

[State 770, Power Up! Text]
type = Helper
trigger1 = !Time
helperType = Normal
stateNo = 8291
ID = 8291
name = "Power Up FX"
posType = P1
pos = ceil(6 * const(size.xScale)), ceil(-72 * const(size.yScale))
facing = -1
ownPal = 1
pauseMoveTime = 255
superMoveTime = 255
ignoreHitPause = 1

[State 770, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 2
value = -1000

[State 770, PowerSet Var]
type = Varset
trigger1 = Animelem = 2
var(24) = Power

[State 770, MAX Mode Timer]
type = VarSet
trigger1 = AnimElem = 2
var(20) = 1000

[State 770, Max Meter V2]
type = Helper
helpertype = Normal
trigger1 = Animelem = 2 && !NumHelper(780)
id = 780
pos = 0,0
postype = left
name = "Max Meter"
stateno = 780
ignorehitpause = 1
pauseMoveTime = 255
superMoveTime = 255
ownpal = 1

[State 770, End]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Throw - Attempt
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
hitflag = M-
priority = 1 + var(43), Miss
;sparkno = S8250
sparkxy = 0, -600
hitsound = S8, 0
sprpriority = 1
p1facing = ifelse (command = "holdfwd", 1, -1)
p2facing = -1
p1stateno = 810
p2stateno = 820
guard.dist = 0
fall = 1
fall.recover = 0
ignorehitpause = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw - Throwing the opponent
[Statedef 810]
type    = S
movetype= A
physics = N
anim = ifelse(var(33) = 1, 6181, 810) ;810
poweradd = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S0,4
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 810, Throw Sound]
type = PlaySnd
trigger1 = AnimElem = 6
value = s9, 5

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = -30, -5

[State 810, Width 2-11]
type = Width
trigger1 = AnimElem = 1
edge = 2,0

;[State 810, holdfwd - Pos 6] ;If was holding fwd before, move a little
;type = PosAdd
;trigger1 = var(2)
;trigger1 = AnimElem = 6
;x = -37

[State 810, Bind 2-4]
type = TargetBind
trigger1 = AnimElem = 2
pos = -17, -16

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElem = 3
pos = -15, -18

[State 810, Bind 6]
type = TargetBind
trigger1 = AnimElem = 4
pos = -24, -12

[State 810, Bind 8]
type = TargetBind
trigger1 = AnimElem = 5
pos = -18, -15

[State 810, Bind 9]
type = TargetBind
trigger1 = AnimElem = 6
pos = 43, 5

;[State 810, Bind 10]
;type = TargetBind
;trigger1 = AnimElem = 7
;pos = 55, 5

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 7
value = -78

[State 810, Throw 11]
type = TargetState
trigger1 = AnimElem = 7
value = 888888821

[State 810, 3]
type = PosAdd
trigger1 = AnimElem = 11
x = 35

[State 810, 2] ;P2 Hit Ground Spark (front)
type = Explod
trigger1 = enemy, StateNo = 821;5100 ;Time = 43 ;33
persistent = 0
ID = 9400
anim = f60
postype = p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 0
ignorehitpause = 1

[State 810, 4]
type = EnvShake
trigger1 = enemy, StateNo = 821;5100 ;Time = 40 ;30
time = 10
ignorehitpause = 1

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Thrown (a custom gethit state)
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;---------------------------------------------------------------------------
; Thrown - thrown into the air (a custom gethit state)
[Statedef 888888821]
type    = A
movetype= H
physics = N
velset = 7, 5
poweradd = 40

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = 5.4

[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 821, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
; Throw - HIT_BOUNCE (hit ground)
[Statedef 821]
type    = L
movetype= H
physics = N

;[State 821, 1]
;type = VelSet
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
;trigger1 = vel x > 1
;x = 1

[State 821, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

;[State 821, Var] ;Save fall velocity
;type = VarSet
;trigger1 = Time = 0
;;trigger1 = GetHitVar(fall.yvel) = 0
;sysvar(1) = floor(vel y)

[State 821, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = var(33) = 0
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 821, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = var(33) = 0
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 821, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 821, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 821, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

;[State 821, 7]
;type = ChangeState
;trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
;value = 5110 ;HIT_LIEDOWN

[State 821, 10]
type = HitFallDamage
trigger1 = Time = 3

[State 821, 12]
type = PosFreeze
trigger1 = 1

[State 821, 13]
type = SelfState
trigger1 = AnimTime = 0
value = 5110

[State 821, 14]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; Mega Upper - X
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 7
velset = 0,0
ctrl = 0
anim = 1000
poweradd = 75
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s50,12
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1000, 1] ;Back Dust
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1001, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
damage = 90, 4
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -75
hitsound = S45, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 12
ground.velocity = -4.5,-5
airguard.velocity = -1.9,5
air.type = High
air.velocity = -5.5,-5
air.hittime = 12
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0

[State 1000, 3] ;Power
type = Explod
triggerall = NumExplod(1010) < 1
trigger1 = Time = 10
persistent = 0
anim = 11010
ID = 1010
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
removeongethit = 1
supermovetime = -1
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State 1000, 4] ;Remove Energy (1)
type = RemoveExplod
trigger1 = AnimElem = 7
ID = 1010

[State 1000, 24]
type = StateTypeSet
trigger1 = Time = 10
statetype = A
movetype = A
physics = A

[State 1000, 25]
type = HitBy
trigger1 = 1
value = SCA, SA,HA,NP,SP,HP

[State 1000, 2]
type = VelSet
trigger1 = Time = 0
x = 7;5

[State 1000, 2]
type = VelSet
trigger1 = AnimElem = 5
x = 0

;[State 1000, 26]
;type = VelSet
;trigger1 = Time = 10
;x = 5.4
;y = -10.1

;[State 1000, 27]
;type = VelSet
;trigger1 = Time = 12
;x = 5.1
;y = -10.1

;[State 1000, 28]
;type = VelSet
;trigger1 = Time = 15
;x = 2.4
;y = -11.1

;[State 1000, 29]
;type = VelSet
;trigger1 = Time = 18
;x = 1.3
;y = -4.1

;[State 1000, 30]
;type = VelSet
;trigger1 = Time = 19
;x = 0
;y = -1.1

[State 1100, Vel]
type = velset
trigger1 = time = [10,13]
x = ifelse(var(33) = 1, 7, 6)
y = -6.5

[State 1100, Vel]
type = velmul
trigger1 = 1
x = 0.88

[State 1100, Vel]
type = velmul
trigger1 = vel y > .5
x = 0

[State 1100, 2]
type = VelAdd
trigger1 = time >= 10
y = .1

[State 1100, 2]
type = VelAdd
trigger1 = time >= 20
y = .1

[State 1000, 31]
type = PlaySnd
trigger1 = Time = 5;10
value = 3, 3
channel = 0

[State 1000, 35]
type = PlaySnd
trigger1 = AnimElem = 6
value = s9, 1
persistent = 0

[State 1000, 33]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; Mega Upper - Y
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = ifelse(var(33) = 1, 6122, 1001)
poweradd = 75
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s50,12
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 1001, 1] ;Back Dust
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1001, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SA
damage = 110, 6
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -75
hitsound = S45, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 12
ground.velocity = -4.5,-7
airguard.velocity = -1.9,5
air.type = High
air.velocity = -5.5,-6
air.hittime = 12
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0

[State 1001, 3] ;Power
type = Explod
triggerall = var(33) = 0
triggerall = NumExplod(1010) < 1
trigger1 = Time = 8
persistent = 0
anim = 11010
ID = 1010
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
removeongethit = 1
supermovetime = -1
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State 1001, 4] ;Remove Energy (1)
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 1010

[State 1001, 0] ;back fire 1
type = Explod
triggerall = var(33) = 1
trigger1 = NumExplod(66142) < 1
trigger1 = AnimElem = 5
ID = 66142
anim = 6143
postype = p1
pos = -14, -60
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1001, 0.1] ;back fire 1
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 66142

[State 1001, 0.2] ;back fire 2
type = Explod
triggerall = var(33) = 1
trigger1 = NumExplod(66143) < 1
trigger1 = AnimElem = 5
ID = 66143
anim = 6144
postype = p1
pos = 22, -67
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1001, 0.3] ;back fire 2
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 66143

[State 1001, 24]
type = StateTypeSet
trigger1 = Time = 8
statetype = A
movetype = A
physics = A

[State 1001, 25]
type = HitBy
trigger1 = 1
value = SCA, SA,HA,NP,SP,HP

[State 1001, 2]
type = VelSet
trigger1 = Time = 0
x = 7;5

[State 1001, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 0

;[State 1001, 26]
;type = VelSet
;trigger1 = Time = 8
;x = 7.8
;y = -13.1

;[State 1001, 27]
;type = VelSet
;trigger1 = Time = 10
;x = 7.1
;y = -13.1

;[State 1001, 28]
;type = VelSet
;trigger1 = Time = 13
;x = 4.4
;y = -14.1

;[State 1001, 29]
;type = VelSet
;trigger1 = Time = 15
;x = 2.95
;y = -12.1

;[State 1001, 30]
;type = VelSet
;trigger1 = Time = 18
;x = .9
;y = -7.1

;[State 1001, 31]
;type = VelSet
;trigger1 = Time = 21
;x = .1
;y = -2.2

;[State 1001, 32]
;type = VelSet
;trigger1 = Time = 25
;x = 0
;y = -1.5

[State 1101, Vel]
type = velset
trigger1 = time = [8,13]
x = ifelse(var(33) = 1, 8, 7)
y = -8.5

[State 1101, Vel]
type = velmul
trigger1 = 1
x = 0.88

[State 1101, Vel]
type = velmul
trigger1 = vel y > .5
x = 0

[State 1101, 2]
type = VelAdd
trigger1 = time >= 8
y = .1

[State 1101, 2]
type = VelAdd
trigger1 = time >= 18
y = .1

[State 1001, 33]
type = PlaySnd
trigger1 = Time = 5;10
value = 3, 3
channel = 0

[State 1000, 35]
type = PlaySnd
trigger1 = AnimElem = 5
value = s9, 1
persistent = 0

[State 1001, 35]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; Mega Upper - Z
[Statedef 1002]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 1002
poweradd = 75
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s50,12
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 1001, 1] ;Back Dust
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1001, 2]
type = HitDef
trigger1 = animelem = 4 || animelem = 5
attr = S, SA
damage = 60, 6
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -75
hitsound = S45, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 12
ground.velocity = -4.5,-7
airguard.velocity = -1.9,5
air.type = High
air.velocity = -5.5,-6
air.hittime = 12
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0

[State 1001, 3] ;Power
type = Explod
triggerall = var(33) = 0
triggerall = NumExplod(1010) < 1
trigger1 = Time = 8
persistent = 0
anim = 11010
ID = 1010
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
removeongethit = 1
supermovetime = -1
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State 1001, 4] ;Remove Energy (1)
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 1010

[State 1001, 0] ;back fire 1
type = Explod
triggerall = var(33) = 1
trigger1 = NumExplod(66142) < 1
trigger1 = AnimElem = 5
ID = 66142
anim = 6143
postype = p1
pos = -14, -60
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1001, 0.1] ;back fire 1
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 66142

[State 1001, 0.2] ;back fire 2
type = Explod
triggerall = var(33) = 1
trigger1 = NumExplod(66143) < 1
trigger1 = AnimElem = 5
ID = 66143
anim = 6144
postype = p1
pos = 22, -67
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1001, 0.3] ;back fire 2
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 66143

[State 1001, 24]
type = StateTypeSet
trigger1 = Time = 8
statetype = A
movetype = A
physics = A

[State 1001, 25]
type = HitBy
trigger1 = 1
value = SCA, SA,HA,NP,SP,HP

[State 1001, 2]
type = VelSet
trigger1 = Time = 0
x = 7;5

[State 1001, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 0

;[State 1001, 26]
;type = VelSet
;trigger1 = Time = 8
;x = 7.8
;y = -13.1

;[State 1001, 27]
;type = VelSet
;trigger1 = Time = 10
;x = 7.1
;y = -13.1

;[State 1001, 28]
;type = VelSet
;trigger1 = Time = 13
;x = 4.4
;y = -14.1

;[State 1001, 29]
;type = VelSet
;trigger1 = Time = 15
;x = 2.95
;y = -12.1

;[State 1001, 30]
;type = VelSet
;trigger1 = Time = 18
;x = .9
;y = -7.1

;[State 1001, 31]
;type = VelSet
;trigger1 = Time = 21
;x = .1
;y = -2.2

;[State 1001, 32]
;type = VelSet
;trigger1 = Time = 25
;x = 0
;y = -1.5

[State 1101, Vel]
type = velset
trigger1 = time = [8,13]
x = ifelse(var(33) = 1, 8, 7)
y = -8.5

[State 1101, Vel]
type = velmul
trigger1 = 1
x = 0.88

[State 1101, Vel]
type = velmul
trigger1 = vel y > .5
x = 0

[State 1101, 2]
type = VelAdd
trigger1 = time >= 8
y = .1

[State 1101, 2]
type = VelAdd
trigger1 = time >= 18
y = .1

[State 1001, 33]
type = PlaySnd
trigger1 = Time = 5;10
value = 3, 3
channel = 0

[State 1000, 35]
type = PlaySnd
trigger1 = AnimElem = 5
value = s9, 1
persistent = 0

[State 1001, 35]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; Mega Upper - EX
[Statedef 1003]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 1003
poweradd = -500
sprpriority = 2

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -2
;ignorehitpause =
;persistent =

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 5
mul = 256, 224, 0
add = 128, 128, 128
color = 0
ignorehitpause = 0
;persistent = 1

[State 0, ExFX]
type = explod
trigger1 = !time
anim = 8210
sprpriority = 3
postype = p1
pos = 0, -45
scale = 0.5, 0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S98,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s50,12
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 1001, 1] ;Back Dust
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1001, 2]
type = HitDef
trigger1 = animelem = 3 || animelem = 4 || animelem = 5
attr = S, SA
damage = 50, 6
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 20, 20
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -55
hitsound = S45, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 12
ground.velocity = -4.5,-10
airguard.velocity = -1.9,5
air.type = High
air.velocity = -5.5,-6
air.hittime = 12
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0

[State 1001, 3] ;Power
type = Explod
triggerall = var(33) = 0
triggerall = NumExplod(1010) < 1
trigger1 = Time = 8
persistent = 0
anim = 11010
ID = 1010
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
removeongethit = 1
supermovetime = -1
bindtime = -1
ownpal = 1
ignorehitpause = 1

[State 1001, 4] ;Remove Energy (1)
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 1010

[State 1001, 0] ;back fire 1
type = Explod
triggerall = var(33) = 1
trigger1 = NumExplod(66142) < 1
trigger1 = AnimElem = 5
ID = 66142
anim = 6143
postype = p1
pos = -14, -60
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1001, 0.1] ;back fire 1
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 66142

[State 1001, 0.2] ;back fire 2
type = Explod
triggerall = var(33) = 1
trigger1 = NumExplod(66143) < 1
trigger1 = AnimElem = 5
ID = 66143
anim = 6144
postype = p1
pos = 22, -67
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1001, 0.3] ;back fire 2
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 66143

[State 1001, 24]
type = StateTypeSet
trigger1 = Time = 8
statetype = A
movetype = A
physics = A

[State 1001, 25]
type = HitBy
trigger1 = 1
value = SCA, SA,HA,NP,SP,HP

[State 1001, 2]
type = VelSet
trigger1 = Time = 0
x = 7;5

[State 1001, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 0

;[State 1001, 26]
;type = VelSet
;trigger1 = Time = 8
;x = 7.8
;y = -13.1

;[State 1001, 27]
;type = VelSet
;trigger1 = Time = 10
;x = 7.1
;y = -13.1

;[State 1001, 28]
;type = VelSet
;trigger1 = Time = 13
;x = 4.4
;y = -14.1

;[State 1001, 29]
;type = VelSet
;trigger1 = Time = 15
;x = 2.95
;y = -12.1

;[State 1001, 30]
;type = VelSet
;trigger1 = Time = 18
;x = .9
;y = -7.1

;[State 1001, 31]
;type = VelSet
;trigger1 = Time = 21
;x = .1
;y = -2.2

;[State 1001, 32]
;type = VelSet
;trigger1 = Time = 25
;x = 0
;y = -1.5

[State 1101, Vel]
type = velset
trigger1 = time = [8,13]
x = ifelse(var(33) = 1, 8, 7)
y = -8.5

[State 1101, Vel]
type = velmul
trigger1 = 1
x = 0.88

[State 1101, Vel]
type = velmul
trigger1 = vel y > .5
x = 0

[State 1101, 2]
type = VelAdd
trigger1 = time >= 8
y = .1

[State 1101, 2]
type = VelAdd
trigger1 = time >= 18
y = .1

[State 1001, 33]
type = PlaySnd
trigger1 = Time = 5;10
value = 3, 3
channel = 0

[State 1000, 35]
type = PlaySnd
trigger1 = AnimElem = 5
value = s9, 1
persistent = 0

[State 1001, 35]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
;---------------------------------------------------------------------------
; EX Crouch Strong Kick
[Statedef 1102]
type    = C
movetype= A
physics = C
juggle  = 8
velset = 0,0
ctrl = 0
anim = 450
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s53,1
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -2
;ignorehitpause =
;persistent =

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 5
mul = 256, 224, 0
add = 128, 128, 128
color = 0
ignorehitpause = 0
;persistent = 1

[State 0, ExFX]
type = explod
trigger1 = !time
anim = 8210
sprpriority = 3
postype = p1
pos = 0, -45
scale = 0.5, 0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S98,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = time = 9
anim = 453
ID = 453
pos = -9,25
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 12
supermove
pausemove
scale = 1,.75
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 0
;persistent =

[State 0, Explod]
type = Explod
trigger1 = time = 9
anim = 453
ID = 453
pos = -19,13
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 12
supermove
pausemove
scale = .70,.5
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 0
;persistent =

[State 450, 1]
type = HitDef
trigger1 = var(33) = 0
trigger1 = Time = [9,19]
attr = C, SA
damage = 20, 2
;getpower = 60
animtype = Heavy
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8010) ;S8230
sparkxy = -11 + 0 * (var(55) := 55), var(56) := -10
hitsound = S5, 3
guardsound = S6, 0
ground.type = low
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Trip
air.velocity = -1,-2.5
air.hittime = 18
envshake.time = 10
envshake.ampl = 3
fall.recover = 0
persistent = 4
getpower = 0

[State 450, 1]
type = HitDef
trigger1 = var(33) = 0
trigger1 = Time = [20,22]
attr = C, SA
damage = 85, 4
;getpower = 60
animtype = Heavy
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8010) ;S8230
sparkxy = -11 + 0 * (var(55) := 55), var(56) := -10
hitsound = S5, 3
guardsound = S6, 0
ground.type = Trip
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -5, -5
airguard.velocity = -1.9,-.8
air.type = Trip
air.velocity = -5,-4.5
air.hittime = 18
envshake.time = 10
envshake.ampl = 3
fall.recover = 0
persistent = 4
getpower = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
movetype = I        ;I,A,H
;ignorehitpause =
;persistent =


[State 450, 2]
type = Explod
trigger1 = var(33) = 0
trigger1 = AnimElem = 3
persistent = 1
ID = 451
anim = 451
postype = p1
pos = -14, 5
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 450, 2.2] ;s.adapt mode
type = Explod
trigger1 = var(33) = 1
trigger1 = AnimElem = 3
persistent = 0
ID = 9041
anim = 9041
postype = p1
pos = -14, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 450, 2.2] ;s.adapt mode
type = Explod
trigger1 = var(33) = 1
trigger1 = Time = 12
persistent = 0
ID = 9040
anim = 9040
postype = p1
pos = 64, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

;[State 450, 11]
;type = PlayerPush
;trigger1 = NumTarget > 0
;value = 0

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [8, 21]
x = 8 ;7

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [22, 28]
x = 4

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [29, 34]
x = 2

[State 450, 1]
type = VelMul
trigger1 = var(33) = 0
trigger1 = Time = 35
x = .01

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = 38
x = 0

[State 450, 2] ;s.adapt mode
type = VelSet
trigger1 = var(33) = 1
trigger1 = Time = [8, 16]
x = 1.2

[State 450, 1] ;s.adapt mode
type = VelMul
trigger1 = var(33) = 1
trigger1 = Time = 17
x = .01

[State 450, 2] ;s.adapt mode
type = VelSet
trigger1 = var(33) = 1
trigger1 = Time = 20
x = 0


[State 450, 2]
type = Width
trigger1 = Time = [9, 19]
player = 8, 0

[State 450, 3]
type = PlaySnd
trigger1 = Time = 9 ;8;1
value = s7, 0

[State 450, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
[Statedef 1100]
type    = C
movetype= A
physics = C
juggle  = 7
velset = 0,0
ctrl = 0
anim = 450
poweradd = 55
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s53,0
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 450, 1]
type = HitDef
trigger1 = var(33) = 0
trigger1 = Time = 0
attr = C, SA
damage = 85, 4
;getpower = 60
animtype = Heavy
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8010) ;S8230
sparkxy = -11 + 0 * (var(55) := 55), var(56) := -10
hitsound = S5, 3
guardsound = S6, 0
ground.type = Trip
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = 0, -6.5
airguard.velocity = -1.9,-.8
air.type = Trip
air.velocity = -1,-4.5
air.hittime = 18
envshake.time = 10
envshake.ampl = 3
fall.recover = 0

[State 450, 2]
type = Explod
trigger1 = var(33) = 0
trigger1 = AnimElem = 3
persistent = 1
ID = 451
anim = 451
postype = p1
pos = -14, 5
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 450, 2.2] ;s.adapt mode
type = Explod
trigger1 = var(33) = 1
trigger1 = AnimElem = 3
persistent = 0
ID = 9041
anim = 9041
postype = p1
pos = -14, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 450, 2.2] ;s.adapt mode
type = Explod
trigger1 = var(33) = 1
trigger1 = Time = 12
persistent = 0
ID = 9040
anim = 9040
postype = p1
pos = 64, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

;[State 450, 11]
;type = PlayerPush
;trigger1 = NumTarget > 0
;value = 0

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [8, 21]
x = 8 ;7

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [22, 28]
x = 4

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [29, 34]
x = 2

[State 450, 1]
type = VelMul
trigger1 = var(33) = 0
trigger1 = Time = 35
x = .01

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = 38
x = 0

[State 450, 2] ;s.adapt mode
type = VelSet
trigger1 = var(33) = 1
trigger1 = Time = [8, 16]
x = 1.2

[State 450, 1] ;s.adapt mode
type = VelMul
trigger1 = var(33) = 1
trigger1 = Time = 17
x = .01

[State 450, 2] ;s.adapt mode
type = VelSet
trigger1 = var(33) = 1
trigger1 = Time = 20
x = 0


[State 450, 2]
type = Width
trigger1 = Time = [9, 19]
player = 8, 0

[State 450, 3]
type = PlaySnd
trigger1 = Time = 9 ;8;1
value = s7, 0

[State 450, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Crouch Strong Kick
[Statedef 1101]
type    = C
movetype= A
physics = C
juggle  = 7
velset = 0,0
ctrl = 0
anim = 452
poweradd = 45
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s53,0
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 450, 1]
type = HitDef
trigger1 = var(33) = 0
trigger1 = Time = 0
attr = C, SA
damage = 85, 4
;getpower = 60
animtype = Heavy
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8010) ;S8230
sparkxy = -11 + 0 * (var(55) := 55), var(56) := -10
hitsound = S5, 3
guardsound = S6, 0
ground.type = Trip
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = 0, -6.5
airguard.velocity = -1.9,-.8
air.type = Trip
air.velocity = -1,-4.5
air.hittime = 18
envshake.time = 10
envshake.ampl = 3
fall.recover = 0

[State 450, 2]
type = Explod
trigger1 = var(33) = 0
trigger1 = AnimElem = 3
persistent = 1
ID = 451
anim = 451
postype = p1
pos = -14, 5
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 450, 2.2] ;s.adapt mode
type = Explod
trigger1 = var(33) = 1
trigger1 = AnimElem = 3
persistent = 0
ID = 9041
anim = 9041
postype = p1
pos = -14, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 450, 2.2] ;s.adapt mode
type = Explod
trigger1 = var(33) = 1
trigger1 = Time = 12
persistent = 0
ID = 9040
anim = 9040
postype = p1
pos = 64, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
bindtime = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

;[State 450, 11]
;type = PlayerPush
;trigger1 = NumTarget > 0
;value = 0

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [8, 21]
x = 5 ;7

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [22, 28]
x = 3

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = [29, 34]
x = 1

[State 450, 1]
type = VelMul
trigger1 = var(33) = 0
trigger1 = Time = 35
x = .01

[State 450, 2]
type = VelSet
trigger1 = var(33) = 0
trigger1 = Time = 38
x = 0

[State 450, 2] ;s.adapt mode
type = VelSet
trigger1 = var(33) = 1
trigger1 = Time = [8, 16]
x = 1.2

[State 450, 1] ;s.adapt mode
type = VelMul
trigger1 = var(33) = 1
trigger1 = Time = 17
x = .01

[State 450, 2] ;s.adapt mode
type = VelSet
trigger1 = var(33) = 1
trigger1 = Time = 20
x = 0


[State 450, 2]
type = Width
trigger1 = Time = [7, 17]
player = 8, 0

[State 450, 3]
type = PlaySnd
trigger1 = Time = 9 ;8;1
value = s7, 0

[State 450, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-----------------------------------
;Metal Blade
[StateDef 1300]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,6
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -1
;ignorehitpause =
;persistent =


[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "MB"
ID = 1310
stateno = 1310
pos = 35,-36
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "MB"
ID = 1310
stateno = 1310
pos = 35,-54
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1


[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;-----------------------------------
;Rolling Cutter
[StateDef 1301]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = 50
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,4
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -2
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "RC"
ID = 1311
stateno = 1311
pos = 35,-47
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "RC"
ID = 1311
stateno = 1311
pos = 35,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1


[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;-----------------------------------
;Magnet Missile
[StateDef 1302]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,7
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -4
;ignorehitpause =
;persistent =

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 5
mul = 256, 224, 0
add = 128, 128, 128
color = 0
ignorehitpause = 0
;persistent = 1

[State 0, ExFX]
type = explod
trigger1 = !time
anim = 8210
sprpriority = 3
postype = p1
pos = 0, -45
scale = 0.5, 0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S98,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "MM"
ID = 1312
stateno = 1312
pos = 35,-47
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "MM"
ID = 1312
stateno = 1312
pos = 35,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1


[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;---------------------------------------------------------------------------
; Leaf Shield - X
[Statedef 1303]
type    = S
movetype= I
physics = S
juggle  = 4
ctrl = 0
anim = 1300
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,8
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -2
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1

[State 0, ChangeState]
type = ChangeState
triggerall = numhelper(1145) != 0
trigger1 = time = 0
value = 1143
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

[State 1140, 2]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "Leaf Shield"
ID = 1145
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1145
ownpal = 1

;[State 1140, 3]
;type = PlaySnd
;trigger1 = AnimElem = 4
;value = 18, 0

[State 1140, 4]
type = Width
trigger1 = Time = [12, 18]
player = 5, 0

[State 1140, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Leaf Shield - Attack
[Statedef 1143]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 1300
poweradd = 90
sprpriority = 2

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1

[State 1143, 4]
type = Width
trigger1 = Time = [12, 18]
player = 5, 0

[State 1143, 5]
type = PlaySnd
trigger1 = animelem = 3
value = s18, 0
channel = -1

[State 1143, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Leaf Shield: Helper Mother
[Statedef 1145]
type    = A
movetype= I
anim = 1144;9830
sprpriority = 3
persistent = 0

[State 1145, 1]
type = BindToRoot
;trigger1 = root, StateNo != 1143 && root, Anim != 220 && root, AnimElem != 4
trigger1 = 1;Time >= 0
;trigger1 = parent, StateType = S
pos = 0, 0;-25
time = -1
ignorehitpause = 1

;[State 1145, 2]
;type = BindToParent
;;triggerall = !parent, StateNo = 1143
;;triggerall = !parent, Anim = 220
;;triggerall = !parent, AnimElem = 4
;trigger1 = parent, StateType = C
;pos = 0, -25
;time = -1
;ignorehitpause = 1

;[State 1145, 3]
;type = BindToParent
;;triggerall = !parent, StateNo = 1143
;;triggerall = !parent, Anim = 220
;;triggerall = !parent, AnimElem = 4
;trigger1 = parent, StateType = A
;pos = -2, -30
;time = -1
;ignorehitpause = 1

[State 1145, 2]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "Leaf Shield 1"
ID = 1146
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1150
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;8
helpertype = normal
name = "Leaf Shield 2"
ID = 1146
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1151
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;16
helpertype = normal
name = "Leaf Shield 3"
ID = 1146
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1152
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;24
helpertype = normal
name = "Leaf Shield 4"
ID = 1146
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1153
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;32
helpertype = normal
name = "Leaf Shield 5"
ID = 1146
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1154
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;40
helpertype = normal
name = "Leaf Shield 6"
ID = 1146
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1155
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;48
helpertype = normal
name = "Leaf Shield 7"
ID = 1146
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1156
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;56
helpertype = normal
name = "Leaf Shield 8"
ID = 1146
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1157
ownpal = 0
persistent = 0

[State 1145, 5] ;shield active
type = ParentVarSet
trigger1 = !Time
v = 16
value = 1
persistent = 0

[State 1146, 5] ;shield desactive
type = ParentVarSet
trigger1 = NumHelper(1146) < 1
v = 16
value = 0
persistent = 0

[State 1145, 3] ;attack
type = ChangeState
;trigger1 = root, command = "use_weapon_X"
;trigger2 = root, command = "use_weapon_Y"
;trigger3 = root, command = "use_weapon_Z"
trigger1 = root, StateNo = 1143
trigger1 = root, Anim = 1300
trigger1 = root, AnimElem = 3
trigger2 = root, StateNo = 1143
trigger2 = root, Anim = 1301
trigger2 = root, AnimElem = 3
value = 1146

[State 1145, 6]
type = HitBy
trigger1 = root, StateNo != [120, 155]
trigger1 = Time >= 0 ;1
value = SCA, AA,AP,AT
time = -1

[State 1145, 6]
type = NotHitBy
trigger1 = root, StateNo = [120, 155]
trigger1 = Time >= 0 ;1
value = SCA, AA,AP,AT
time = -1

[State 1145, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1148
time = -1

[State 1145, 4] ;time over
type = ChangeState
trigger1 = Time > 355
value = 1147

[State 1145, 4] ;gethit
type = ChangeState
;trigger1 = NumHelper(1146) > 7
;trigger1 = Helper(1146), StateNo = 1158 ;MoveContact
trigger1 = MoveContact
value = 1148

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 1
[Statedef 1150]
type    = A
movetype= I
anim = 1142
sprpriority = 3

[State 1150, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
;pos = sin(time*-.10)*-36.1, cos(time*-.10)*-36.1
pos = cos(time/28.0*pi)*32, -27+sin(time/28.0*pi)*32 ;by Phantom.of.the.Server
time = -1
ignorehitpause = 1

[State 1150, 1]
type = HitDef
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 10, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1150, 6]
type = NotHitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1145
value = SCA, AA,AP,AT
time = -1

[State 1150, 6]
type = HitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
value = SCA, AA,AP,AT
time = -1

[State 1150, 7]
type = StateTypeSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
statetype = A
movetype = A

[State 1150, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1158
time = -1

[State 1150, 4]
type = ChangeState
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1158

[State 1150, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 2
[Statedef 1151]
type    = A
movetype= I
anim = 1142
sprpriority = 3

[State 1151, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+7)/28.0*pi)*32, -27+sin((time+7)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1151, 1]
type = HitDef
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 10, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1151, 6]
type = NotHitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1145
value = SCA, AA,AP,AT
time = -1

[State 1151, 6]
type = HitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
value = SCA, AA,AP,AT
time = -1

[State 1151, 7]
type = StateTypeSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
statetype = A
movetype = A

[State 1151, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1158
time = -1

[State 1151, 4]
type = ChangeState
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1158

[State 1151, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 3
[Statedef 1152]
type    = A
movetype= I
anim = 1142
sprpriority = 3

[State 1152, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+14)/28.0*pi)*32, -27+sin((time+14)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1152, 1]
type = HitDef
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 10, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1152, 6]
type = NotHitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1145
value = SCA, AA,AP,AT
time = -1

[State 1152, 6]
type = HitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
value = SCA, AA,AP,AT
time = -1

[State 1152, 7]
type = StateTypeSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
statetype = A
movetype = A

[State 1152, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1158
time = -1

[State 1152, 4]
type = ChangeState
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1158

[State 1152, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 4
[Statedef 1153]
type    = A
movetype= I
anim = 1142
sprpriority = 3

[State 1153, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+21)/28.0*pi)*32, -27+sin((time+21)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1153, 1]
type = HitDef
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 10, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1153, 6]
type = NotHitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1145
value = SCA, AA,AP,AT
time = -1

[State 1153, 6]
type = HitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
value = SCA, AA,AP,AT
time = -1

[State 1153, 7]
type = StateTypeSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
statetype = A
movetype = A

[State 1153, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1158
time = -1

[State 1153, 4]
type = ChangeState
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1158

[State 1153, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 5
[Statedef 1154]
type    = A
movetype= I
anim = 1142
sprpriority = 3

[State 1154, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+28)/28.0*pi)*32, -27+sin((time+28)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1154, 1]
type = HitDef
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 10, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1154, 6]
type = NotHitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1145
value = SCA, AA,AP,AT
time = -1

[State 1154, 6]
type = HitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
value = SCA, AA,AP,AT
time = -1

[State 1154, 7]
type = StateTypeSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
statetype = A
movetype = A

[State 1154, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1158
time = -1

[State 1154, 4]
type = ChangeState
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1158

[State 1154, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 6
[Statedef 1155]
type    = A
movetype= I
anim = 1142
sprpriority = 3

[State 1155, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+35)/28.0*pi)*32, -27+sin((time+35)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1155, 1]
type = HitDef
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 10, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1155, 6]
type = NotHitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1145
value = SCA, AA,AP,AT
time = -1

[State 1155, 6]
type = HitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
value = SCA, AA,AP,AT
time = -1

[State 1155, 7]
type = StateTypeSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
statetype = A
movetype = A

[State 1155, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1158
time = -1

[State 1155, 4]
type = ChangeState
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1158

[State 1155, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 7
[Statedef 1156]
type    = A
movetype= I
anim = 1142
sprpriority = 3

[State 1156, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+42)/28.0*pi)*32, -27+sin((time+42)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1156, 1]
type = HitDef
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 10, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1156, 6]
type = NotHitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1145
value = SCA, AA,AP,AT
time = -1

[State 1156, 6]
type = HitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
value = SCA, AA,AP,AT
time = -1

[State 1156, 7]
type = StateTypeSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
statetype = A
movetype = A

[State 1156, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1158
time = -1

[State 1156, 4]
type = ChangeState
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1158

[State 1156, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 8
[Statedef 1157]
type    = A
movetype= I
anim = 1142
sprpriority = 3

[State 1157, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+49)/28.0*pi)*32, -27+sin((time+49)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1157, 1]
type = HitDef
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 10, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1157, 6]
type = NotHitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1145
value = SCA, AA,AP,AT
time = -1

[State 1157, 6]
type = HitBy
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
value = SCA, AA,AP,AT
time = -1

[State 1157, 7]
type = StateTypeSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
statetype = A
movetype = A

[State 1157, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1158
time = -1

[State 1157, 4]
type = ChangeState
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1158

[State 1157, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shields: 8 Helpers (end)
[Statedef 1158]
type    = A
movetype= I
anim = 1143
velset = 0,0
sprpriority = 3

[State 1158, 1]
type = BindToParent
trigger1 = !Time
pos = 0, 0
time = 0
ignorehitpause = 1

[State 1158, 2]
type = VelSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1146
trigger1 = Time >= 0
x = -2*(root,facing)*facing ;by P.O.T.S.
y = 1.5

[State 1158, 3]
type = VelSet
trigger1 = NumHelper(1145) > 0
trigger1 = Helper(1145), StateNo = 1148
trigger1 = Time >= 0
y = 1

[State 1158, 4]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Leaf Shield: Helper Mother - Attack and DestroySelf
[Statedef 1146]
type    = A
movetype= A
anim = 1144;9830;1142
sprpriority = 3

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = 1
v = 35    ;fv =
value = 1
;ignorehitpause =
;persistent =


[State 1146, 1]
type = BindToRoot
trigger1 = !Time
pos = 0, 0
time = 0
ignorehitpause = 1

;[State 1146, 1]
;type = VelSet
;trigger1 = time >= 0
;x = sin(time*.2)*5.1 ;by Chon Wang
;y = cos(time*.2)*5.1

[State 1146, 2]
type = VelSet
trigger1 = Time = 0
x = 4*(root,facing)*facing ;by P.O.T.S.
y = 0

[State 1146, 4]
type = NotHitBy
trigger1 = 1
value = SCA, AA,AP,AT
time = -1

[State 1146, 5] ;shield desactive
type = ParentVarSet
trigger1 = !Time
v = 16
value = 0

[State 1146, 8]
type = DestroySelf
trigger1 = NumHelper(1146) < 1
;trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper Time Over (end)
[Statedef 1147]
type    = A
movetype= I
anim = 1144;9830;1143
sprpriority = 3

[State 1147, 1] ;shield desactive
type = ParentVarSet
trigger1 = !Time
v = 16
value = 0

[State 1147, 2]
type = DestroySelf
trigger1 = NumHelper(1146) < 1

;---------------------------------------------------------------------------
; Leaf Shield: Helper GetHit (end)
[Statedef 1148]
type    = A
movetype= I
anim = 1144;9830;1143
sprpriority = 3

[State 1148, 2] ;shield desactive
type = ParentVarSet
;;trigger1 = NumEnemy > 0
;trigger1 = P2MoveType != A ;AnimTime = 0
trigger1 = !Time ;> 15
v = 16
value = 0

[State 1148, 3]
type = PalFX
trigger1 = Time = [0, 15]
add = 80,80,256
time = 1

[State 1148, 5]
type = DestroySelf
trigger1 = NumHelper(1146) < 1
trigger1 = P2MoveType != A
;trigger1 = var(16) = 0

;--------------------
;Skull Barrier
[Statedef 1305]
type    = S
movetype= I
physics = S
juggle  = 4
ctrl = 0
anim = 1300
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,2
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -4
;ignorehitpause =
;persistent =

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 5
mul = 256, 224, 0
add = 128, 128, 128
color = 0
ignorehitpause = 0
;persistent = 1

[State 0, ExFX]
type = explod
trigger1 = !time
anim = 8210
sprpriority = 3
postype = p1
pos = 0, -45
scale = 0.5, 0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S98,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1

[State 1140, 2]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal
name = "Leaf Shield"
ID = 1645
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1645
ownpal = 1

;[State 1140, 3]
;type = PlaySnd
;trigger1 = AnimElem = 4
;value = 18, 0

[State 1140, 4]
type = Width
trigger1 = Time = [12, 18]
player = 5, 0

[State 1140, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Leaf Shield - Attack
[Statedef 1643]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 1300
poweradd = 0
sprpriority = 2

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -2
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1

[State 1143, 4]
type = Width
trigger1 = Time = [12, 18]
player = 5, 0

[State 1143, 5]
type = PlaySnd
trigger1 = animelem = 3
value = s18, 0
channel = -1

[State 1143, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Leaf Shield: Helper Mother
[Statedef 1645]
type    = A
movetype= I
anim = 1144;9830
sprpriority = 3
persistent = 0

[State 1145, 1]
type = BindToRoot
;trigger1 = root, StateNo != 1143 && root, Anim != 220 && root, AnimElem != 4
trigger1 = 1;Time >= 0
;trigger1 = parent, StateType = S
pos = 0, 0;-25
time = -1
ignorehitpause = 1

;[State 1145, 2]
;type = BindToParent
;;triggerall = !parent, StateNo = 1143
;;triggerall = !parent, Anim = 220
;;triggerall = !parent, AnimElem = 4
;trigger1 = parent, StateType = C
;pos = 0, -25
;time = -1
;ignorehitpause = 1

;[State 1145, 3]
;type = BindToParent
;;triggerall = !parent, StateNo = 1143
;;triggerall = !parent, Anim = 220
;;triggerall = !parent, AnimElem = 4
;trigger1 = parent, StateType = A
;pos = -2, -30
;time = -1
;ignorehitpause = 1

[State 1145, 2]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "Leaf Shield 1"
ID = 1646
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1650
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;8
helpertype = normal
name = "Leaf Shield 2"
ID = 1646
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1651
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;16
helpertype = normal
name = "Leaf Shield 3"
ID = 1646
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1652
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;24
helpertype = normal
name = "Leaf Shield 4"
ID = 1646
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1653
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;32
helpertype = normal
name = "Leaf Shield 5"
ID = 1646
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1654
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;40
helpertype = normal
name = "Leaf Shield 6"
ID = 1646
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1655
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;48
helpertype = normal
name = "Leaf Shield 7"
ID = 1646
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1656
ownpal = 0
persistent = 0

[State 1145, 2]
type = Helper
trigger1 = Time = 0;56
helpertype = normal
name = "Leaf Shield 8"
ID = 1646
pos = 0, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 1657
ownpal = 0
persistent = 0

[State 1145, 5] ;shield active
type = ParentVarSet
trigger1 = !Time
v = 16
value = 1
persistent = 0

[State 1146, 5] ;shield desactive
type = ParentVarSet
trigger1 = NumHelper(1646) < 1
v = 16
value = 0
persistent = 0

[State 1145, 3] ;attack
type = ChangeState
;trigger1 = root, command = "use_weapon_X"
;trigger2 = root, command = "use_weapon_Y"
;trigger3 = root, command = "use_weapon_Z"
trigger1 = root, StateNo = 1643
trigger1 = root, Anim = 1300
trigger1 = root, AnimElem = 3
trigger2 = root, StateNo = 1643
trigger2 = root, Anim = 1301
trigger2 = root, AnimElem = 3
value = 1646

[State 1145, 6]
type = HitBy
trigger1 = root, StateNo != [120, 155]
trigger1 = Time >= 0 ;1
value = SCA, AA,AP,AT
time = -1

[State 1145, 6]
type = NotHitBy
trigger1 = root, StateNo = [120, 155]
trigger1 = Time >= 0 ;1
value = SCA, AA,AP,AT
time = -1

[State 1145, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1648
time = -1

[State 1145, 4] ;time over
type = ChangeState
trigger1 = Time > 355
value = 1647

[State 1145, 4] ;gethit
type = ChangeState
;trigger1 = NumHelper(1146) > 7
;trigger1 = Helper(1146), StateNo = 1158 ;MoveContact
trigger1 = MoveContact
value = 1648

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 1
[Statedef 1650]
type    = A
movetype= I
anim = 1145
sprpriority = 3

[State 1150, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
;pos = sin(time*-.10)*-36.1, cos(time*-.10)*-36.1
pos = cos(time/28.0*pi)*32, -27+sin(time/28.0*pi)*32 ;by Phantom.of.the.Server
time = -1
ignorehitpause = 1

[State 1150, 1]
type = HitDef
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 15, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1150, 6]
type = NotHitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1645
value = SCA, AA,AP,AT
time = -1

[State 1150, 6]
type = HitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
value = SCA, AA,AP,AT
time = -1

[State 1150, 7]
type = StateTypeSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
statetype = A
movetype = A

[State 1150, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1658
time = -1

[State 1150, 4]
type = ChangeState
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1658

[State 1150, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 2
[Statedef 1651]
type    = A
movetype= I
anim = 1145
sprpriority = 3

[State 1151, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+7)/28.0*pi)*32, -27+sin((time+7)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1151, 1]
type = HitDef
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 15, 3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1151, 6]
type = NotHitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1645
value = SCA, AA,AP,AT
time = -1

[State 1151, 6]
type = HitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
value = SCA, AA,AP,AT
time = -1

[State 1151, 7]
type = StateTypeSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
statetype = A
movetype = A

[State 1151, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1658
time = -1

[State 1151, 4]
type = ChangeState
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1658

[State 1151, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 3
[Statedef 1652]
type    = A
movetype= I
anim = 1145
sprpriority = 3

[State 1152, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+14)/28.0*pi)*32, -27+sin((time+14)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1152, 1]
type = HitDef
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 15, 5
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1152, 6]
type = NotHitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1645
value = SCA, AA,AP,AT
time = -1

[State 1152, 6]
type = HitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
value = SCA, AA,AP,AT
time = -1

[State 1152, 7]
type = StateTypeSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
statetype = A
movetype = A

[State 1152, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1658
time = -1

[State 1152, 4]
type = ChangeState
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1658

[State 1152, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 4
[Statedef 1653]
type    = A
movetype= I
anim = 1145
sprpriority = 3

[State 1153, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+21)/28.0*pi)*32, -27+sin((time+21)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1153, 1]
type = HitDef
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 15, 5
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1153, 6]
type = NotHitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1645
value = SCA, AA,AP,AT
time = -1

[State 1153, 6]
type = HitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
value = SCA, AA,AP,AT
time = -1

[State 1153, 7]
type = StateTypeSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
statetype = A
movetype = A

[State 1153, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1658
time = -1

[State 1153, 4]
type = ChangeState
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1658

[State 1153, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 5
[Statedef 1654]
type    = A
movetype= I
anim = 1145
sprpriority = 3

[State 1154, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+28)/28.0*pi)*32, -27+sin((time+28)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1154, 1]
type = HitDef
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 15, 5
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1154, 6]
type = NotHitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1645
value = SCA, AA,AP,AT
time = -1

[State 1154, 6]
type = HitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
value = SCA, AA,AP,AT
time = -1

[State 1154, 7]
type = StateTypeSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
statetype = A
movetype = A

[State 1154, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1658
time = -1

[State 1154, 4]
type = ChangeState
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1658

[State 1154, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 6
[Statedef 1655]
type    = A
movetype= I
anim = 1145
sprpriority = 3

[State 1155, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+35)/28.0*pi)*32, -27+sin((time+35)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1155, 1]
type = HitDef
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 15, 5
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1155, 6]
type = NotHitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1645
value = SCA, AA,AP,AT
time = -1

[State 1155, 6]
type = HitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
value = SCA, AA,AP,AT
time = -1

[State 1155, 7]
type = StateTypeSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
statetype = A
movetype = A

[State 1155, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1658
time = -1

[State 1155, 4]
type = ChangeState
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1658

[State 1155, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 7
[Statedef 1656]
type    = A
movetype= I
anim = 1145
sprpriority = 3

[State 1156, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+42)/28.0*pi)*32, -27+sin((time+42)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1156, 1]
type = HitDef
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 15, 5
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1156, 6]
type = NotHitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1645
value = SCA, AA,AP,AT
time = -1

[State 1156, 6]
type = HitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
value = SCA, AA,AP,AT
time = -1

[State 1156, 7]
type = StateTypeSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
statetype = A
movetype = A

[State 1156, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1658
time = -1

[State 1156, 4]
type = ChangeState
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1658

[State 1156, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper - Shield 8
[Statedef 1657]
type    = A
movetype= I
anim = 1145
sprpriority = 3

[State 1157, 1]
type = BindToParent
;trigger1 = parent, StateType = S
trigger1 = 1
pos = cos((time+49)/28.0*pi)*32, -27+sin((time+49)/28.0*pi)*32
time = -1
ignorehitpause = 1

[State 1157, 1]
type = HitDef
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0 && HitCount < 1
attr = A, SP
damage = 15, 5
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 1
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = 10 + 0 * (var(55) := 55), var(56) := -27
guard.sparkno = -1 + 0 * (var(54) := 8000)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = Low
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -1.9,-.8
air.type = Low
air.velocity = -1.4,-3
air.hittime = 12
getpower = 0
envshake.time = 10
envshake.ampl = 2

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1157, 6]
type = NotHitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1645
value = SCA, AA,AP,AT
time = -1

[State 1157, 6]
type = HitBy
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
value = SCA, AA,AP,AT
time = -1

[State 1157, 7]
type = StateTypeSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
statetype = A
movetype = A

[State 1157, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1658
time = -1

[State 1157, 4]
type = ChangeState
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger2 = parent, Time > 355
trigger3 = MoveContact
value = 1658

[State 1157, 5]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shields: 8 Helpers (end)
[Statedef 1658]
type    = A
movetype= I
anim = 1146
velset = 0,0
sprpriority = 3

[State 1158, 1]
type = BindToParent
trigger1 = !Time
pos = 0, 0
time = 0
ignorehitpause = 1

[State 1158, 2]
type = VelSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1646
trigger1 = Time >= 0
x = -2*(root,facing)*facing ;by P.O.T.S.
y = 1.5

[State 1158, 3]
type = VelSet
trigger1 = NumHelper(1645) > 0
trigger1 = Helper(1645), StateNo = 1648
trigger1 = Time >= 0
y = 1

[State 1158, 4]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Leaf Shield: Helper Mother - Attack and DestroySelf
[Statedef 1646]
type    = A
movetype= A
anim = 1144;9830;1142
sprpriority = 3

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = 1
v = 36    ;fv =
value = 1
;ignorehitpause =
;persistent =


[State 1146, 1]
type = BindToRoot
trigger1 = !Time
pos = 0, 0
time = 0
ignorehitpause = 1

;[State 1146, 1]
;type = VelSet
;trigger1 = time >= 0
;x = sin(time*.2)*5.1 ;by Chon Wang
;y = cos(time*.2)*5.1

[State 1146, 2]
type = VelSet
trigger1 = Time = 0
x = 7*(root,facing)*facing ;by P.O.T.S.
y = 0

[State 1146, 4]
type = NotHitBy
trigger1 = 1
value = SCA, AA,AP,AT
time = -1

[State 1146, 5] ;shield desactive
type = ParentVarSet
trigger1 = !Time
v = 16
value = 0

[State 1146, 8]
type = DestroySelf
trigger1 = NumHelper(1646) < 1
;trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Leaf Shield: Helper Time Over (end)
[Statedef 1647]
type    = A
movetype= I
anim = 1144;9830;1143
sprpriority = 3

[State 1147, 1] ;shield desactive
type = ParentVarSet
trigger1 = !Time
v = 16
value = 0

[State 1147, 2]
type = DestroySelf
trigger1 = NumHelper(1646) < 1

;---------------------------------------------------------------------------
; Leaf Shield: Helper GetHit (end)
[Statedef 1648]
type    = A
movetype= I
anim = 1144;9830;1143
sprpriority = 3

[State 1148, 2] ;shield desactive
type = ParentVarSet
;;trigger1 = NumEnemy > 0
;trigger1 = P2MoveType != A ;AnimTime = 0
trigger1 = !Time ;> 15
v = 16
value = 0

[State 1148, 3]
type = PalFX
trigger1 = Time = [0, 15]
add = 80,80,256
time = 1

[State 1148, 5]
type = DestroySelf
trigger1 = NumHelper(1646) < 1
trigger1 = P2MoveType != A
;trigger1 = var(16) = 0

;-----------------------------------
;Napalm Bomb
[StateDef 1304]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = 50
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,5
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -2
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "NB"
ID = 1314
stateno = 1314
pos = 35,-47
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "NB"
ID = 1314
stateno = 1314
pos = 35,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1


[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;----------------------------
;Metal Blade Helper
[StateDef 1310]
type = A
movetype= A
physics = N
juggle  = 6
velset = 8,0
ctrl = 0
anim = 1310
poweradd = 0
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 0
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1390
time = 1
forceair = 0
ignorehitpause = 0
;persistent =


[State 1311, 1]
type = HitDef
trigger1 = animelem = 1
attr = S, SP
damage = 70,7
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -10
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s4, 1
guardsound = s6, 0
ground.type = high
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -6.4,-3
air.hittime = 18
air.fall = 1
fall.recovertime = 45
envshake.time = 10
envshake.ampl = 3

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1311, end]
type = destroyself
trigger1 = movehit
trigger2 = time = 60

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 1390
ctrl = 0
;anim =
;ignorehitpause =
;persistent =


;---------------------------
;Metal Blade Deflect
[StateDef 1390]
type = A
movetype= I
physics = N
velset = -2,-5
ctrl = 0
anim = 1390
poweradd = 0
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 0
;persistent =


[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = ,NP,SP,HP
slot = 0
stateno = 1375
time = 1
forceair = 0
ignorehitpause = 0
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =


[State 1390, end]
type = destroyself
trigger1 = time = 45
trigger2 = pos y >= 0

;---------------------------
;Cutter Destroyed Deflect
[StateDef 1391]
type = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 1311
poweradd = 0
sprpriority = 2


[State 1390, end]
type = destroyself
trigger1 = time = 0

;----------------------------
;Rolling Cutter Helper
[StateDef 1311]
type = A
movetype= A
physics = N
juggle  = 6
velset = 12,0
ctrl = 0
anim = 1311
poweradd = 0
sprpriority = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = parent,movetype = H
movetype = I        ;I,A,H
;ignorehitpause =
;persistent =


[State 0: VelAdd]
type = VelAdd
triggerall = vel x < -5
trigger1 = (parent, Pos Y > Pos Y) && (Vel Y < 6)
y = .7

[State 0: VelAdd]
type = VelAdd
triggerall = vel x < -5
trigger1 = (parent, Pos Y <= Pos Y) && (Vel Y > -6)
y = -.7

[State 0, PosSet]
type = PosSet
trigger1 = pos y > -47
y = -47
;ignorehitpause =
;persistent =

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 34    ;fv = 10
value = 0
;ignorehitpause =
;persistent =


[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = -.3
;ignorehitpause =
;persistent =

[State 0, VarAdd]
type = VarAdd
trigger1 = movecontact = 1
v = 34     ;fv =
value = 1
;ignorehitpause =
;persistent =


[State 1311, 1]
type = HitDef
triggerall = var(34) = 0
triggerall = vel x > 0
trigger1 = 1
attr = S, SP
damage = 45,3
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s4, 0
guardsound = s6, 0
ground.type = high
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 18
envshake.time = 10
envshake.ampl = 3

[State 1311, 1]
type = HitDef
triggerall = var(34) = 0
triggerall = vel x < 0
trigger1 = 1
attr = S, SP
damage = 45,3
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s4, 0
guardsound = s6, 0
ground.type = low
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = 5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 18
envshake.time = 10
envshake.ampl = 3

[State 1311, 1]
type = HitDef
triggerall = var(34) > 0
triggerall = vel x < 0
trigger1 = 1
attr = S, SP
damage = 45,3
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s4, 0
guardsound = s6, 0
ground.type = low
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = 5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 18
envshake.time = 10
envshake.ampl = 3

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1391
time = 1
forceair = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = var(34) >= 2
trigger2 = vel x < 0 && movecontact = 1
movetype = I        ;I,A,H
;ignorehitpause =
;persistent =

[State 1311, end]
type = destroyself
triggerall = time > 10
trigger1 = parentdist x >= -20

;-----------------------------
;Magnet Missile Helper
[StateDef 1312]
type = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 1312
poweradd = 0
sprpriority = 2

[State 1202: NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1202: VelSet]
type = VelSet
trigger1 = (!Time)
x = 7
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 1312
triggerall = p2bodydist x <= 0
trigger1 = p2dist y < 0
x = 0
y = -7
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = anim = 1312
triggerall = p2bodydist x <= 0
trigger1 = p2dist y >= 0
x = 0
y = 7
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 1312
trigger1 = vel y < 0
value = 1313
elem = 1
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 1312
trigger1 = vel y > 0
value = 1313
elem = 2

[State 1202, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 90,7
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -5
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -4.4,-3
air.hittime = 18
envshake.time = 10
envshake.ampl = 3
getpower = 0
air.fall = 1
fall.recover = 0

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State ****: changestate]
type = changestate
trigger1 = (MoveContact) || (Time > 60)
trigger2 = pos y >= 0
value = 1392
ignorehitpause = 1

;------------------------
;Magnet Explode
[StateDef 1392]
type = A
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 9292
poweradd = 0
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
;ignorehitpause =
;persistent =
;-----------------------
;flag = nobardisplay
;flag = noBG
;flag = noFG
;flag = nostandguard
;flag = nocrouchguard
;flag = noairguard
;flag = noautoturn
;flag = nojugglecheck
;flag = nokosnd
;flag = nokoslow
;flag = noshadow
;flag = globalnoshadow
;flag = nomusic
;flag = nowalk
;flag = timerfreeze
;flag = unguardable


[State 1392, end]
type = destroyself
trigger1 = AnimTime = 0

;------------------------
;Napalm Explode
[StateDef 1394]
type = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 1392
poweradd = 0
sprpriority = 2

[State 1314, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 90,7
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -4,-5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -4.4,-3
air.hittime = 18
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 4

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;flag2 = invisible
;flag3 = roundnotover
;ignorehitpause =
;persistent =
;-----------------------
;flag = nobardisplay
;flag = noBG
;flag = noFG
;flag = nostandguard
;flag = nocrouchguard
;flag = noairguard
;flag = noautoturn
;flag = nojugglecheck
;flag = nokosnd
;flag = nokoslow
;flag = noshadow
;flag = globalnoshadow
;flag = nomusic
;flag = nowalk
;flag = timerfreeze
;flag = unguardable


[State 1392, end]
type = destroyself
trigger1 = AnimTime = 0

;----------------------------------
;Napalm Bomb
[StateDef 1314]
type = A
movetype= A
physics = N
juggle  = 1
velset = 5,0
ctrl = 0
anim = 1314
poweradd = 0
sprpriority = 2


[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .5
;ignorehitpause =
;persistent =

[State 0, PosSet]
type = PosSet
triggerall = time = [0,60]
trigger1 = pos y >= -8
y = -5
;ignorehitpause =
;persistent =



[State 0, VelAdd]
type = VelAdd
triggerall = time = [0,20]
trigger1 = pos y >= -8
x = 0
y = -6
;ignorehitpause =
;persistent =

[State 0, VelAdd]
type = VelAdd
triggerall = time = [20,40]
trigger1 = pos y >= -8
x = 0
y = -5
;ignorehitpause =
;persistent =

[State 0, VelAdd]
type = VelAdd
triggerall = time = [40,60]
trigger1 = pos y >= -8
x = 0
y = -3
;ignorehitpause =
;persistent =

[State 0, VelMul]
type = VelMul
triggerall = vel x > 0
trigger1 = 1
x = .99
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = time > 60
trigger1 = pos y >= -8
value = 1314
elem = 1
;ignorehitpause =
;persistent =



[State 1314, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 90,7
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -4,-5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -4.4,-3
air.hittime = 18
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = 4

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, VelSet]
type = VelSet
triggerall = time > 60
trigger1 = pos y >= -8
x = 0
y = 0
;ignorehitpause =
;persistent =

[State 0, PosSet]
type = PosSet
triggerall = time > 60
trigger1 = pos y >= -8
y = -5
;ignorehitpause =
;persistent =

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP       ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1392
time = 1
forceair = 0
;ignorehitpause =
;persistent =


[State ****: changestate]
type = changestate
trigger1 = MoveContact = 1
value = 1392
ignorehitpause = 1

[State ****: changestate]
type = changestate
trigger1 = Time > 90
value = 1394
ignorehitpause = 1

;-----------------------------------
;Silver Tomahawk
[StateDef 1350]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "ST"
ID = 1360
stateno = 1360
pos = 35,-47
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .8
size.yscale = .4

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "ST"
ID = 1360
stateno = 1360
pos = 35,-65
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .8
size.yscale = .4

[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;----------------------------
;Tomahawk Helper
[StateDef 1360]
type = A
movetype= A
physics = N
juggle  = 7
velset = 7,0
ctrl = 0
anim = 1360
poweradd = 0
sprpriority = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0 && vel x > 0
x = -.1
;ignorehitpause =
;persistent =


[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = -.2
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1395
time = 1
forceair = 0
;ignorehitpause =
;persistent =


[State 1311, 1]
type = HitDef
trigger1 = animelem = 1
attr = S, SP
damage = 75,7
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -10
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s4, 1
guardsound = s6, 0
ground.type = high
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -6.4,-3
air.hittime = 18
air.fall = 1
fall.recovertime = 45
envshake.time = 10
envshake.ampl = 3

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8015)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1311, end]
type = destroyself
trigger1 = movehit
trigger2 = time = 60

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 1395
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

;---------------------------------------------------------------------------
; Tornado Hold - Y
[StateDef 1351]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,0
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -3
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal
name = "Tornado Hold"
ID = 1130
pos = 31, -42
postype = p1
;bindtime = -1
;facing = 1
stateno = 1136
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "Tornado Hold"
ID = 1130
stateno = 1136
pos = 31,-54
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;---------------------------------------------------------------------------
; Tornado Hold: Helper - Y
[Statedef 1136]
type    = A
movetype= I
anim = 1132
sprpriority = 3

[state 1136, 1]
type = VelSet
trigger1 = Time = 0
x = 9.5
;y = -6

[state 1136, 2]
type = VelAdd
trigger1 = Time >= 0
y = 0.48

[state 1136, 3]
type = VelSet
trigger1 = FrontEdgeDist < 6;-1
x = 0

[State 1136, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1138

;---------------------------------------------------------------------------
; Tornado Hold: Helper (start tornado)
[Statedef 1138]
type    = A
movetype= A
anim = 1139
velset = 0,0
sprpriority = 3
juggle = 7

[state 1138, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1138, 3]
type = HitDef
triggerall = Time > 5
trigger1 = Time % 4 = 0 && HitCount < 3
attr = A, SP
damage = 30, 7
animtype = Up
guardflag = MA
hitflag = MAFD
priority = 4, Hit
sprpriority = 3
pausetime = 2, 2
fall = 1
fall.recovertime = 40
;guard.sparkno = -1;S8200
sparkno = -1 + 0 * (var(53) := 8010);S8270
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -50
guard.sparkno = -1 + 0 * (var(54) := 8001)					
hitsound = s5, 2
guardsound = S6, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = 0, -10
airguard.velocity = -5
air.type = High
air.velocity = 2, -8
air.hittime = 25

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), target, const(size.mid.pos.y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1138, 1] ;bottom power
type = Explod
trigger1 = Time = 0
persistent = 0
ID = 1133
anim = 1133
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
bindtime = -1
removetime = -2
sprpriority = 3
ownpal = 1
ignorehitpause = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1138, 1] ;bottom tornado
type = Explod
trigger1 = Time = 0
persistent = 0
ID = 1138
anim = 11138
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
bindtime = -1
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1138, 1] ;tornado 1
type = Explod
trigger1 = Time = 0;5
persistent = 0
ID = 1134
anim = 11134
postype = p1
pos = 0, -8
velocity = 0, 0
accel = 0, 0
bindtime = 26
removetime = -2
sprpriority = 4
ownpal = 1
ignorehitpause = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1138, 1] ;tornado 2
type = Explod
trigger1 = Time = 0;9
persistent = 0
ID = 1135
anim = 11135
postype = p1
pos = 0, -72
velocity = 0, 0
accel = 0, 0
bindtime = 26
removetime = -2
sprpriority = 5
ownpal = 1
ignorehitpause = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1138, 1] ;tornado 3
type = Explod
trigger1 = Time = 0;12
persistent = 0
ID = 1136
anim = 11136
postype = p1
pos = 0, -136
velocity = 0, 0
accel = 0, 0
bindtime = 26
removetime = -2
sprpriority = 6
ownpal = 1
ignorehitpause = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1138, 3]
type = PlaySnd
trigger1 = !Time
value = 18, 6

[State 1138, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 1138, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 1139
time = -1

;[State 1138, 1]
;type = ChangeState
;;trigger1 = Vel Y > 0
;;trigger1 = Pos Y >= 0
;;trigger1 = Time = 26
;trigger1 = NumExplod(1138) < 1
;value = 1139
;ignorehitpause = 1

[State 1138, 3]
type = DestroySelf
trigger1 = NumExplod(1138) < 1

;---------------------------------------------------------------------------
; Tornado Hold: Helper (end)
[Statedef 1139]
type    = A
movetype= I
anim = 9830 ;1137
sprpriority = 3

[State 1139, 1] ;tornado 1
type = Explod
trigger1 = Time = 0
ID = 1137
anim = 11137
postype = p1
pos = 0, -8
velocity = 0, 0
accel = 0, 0
;bindtime = -1
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1139, 1] ;tornado 2
type = Explod
trigger1 = Time = 0
ID = 1137
anim = 11137
postype = p1
pos = 0, -72
velocity = 0, 0
accel = 0, 0
;bindtime = -1
removetime = -2
sprpriority = 5
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1139, 2] ;tornado 3
type = Explod
trigger1 = Time = 0
ID = 1137
anim = 11137
postype = p1
pos = 0, -136
velocity = 0, 0
accel = 0, 0
;bindtime = -1
removetime = -2
sprpriority = 6
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1139, 3]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------
;Danger Wrap
[StateDef 1352]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,9
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -3
;ignorehitpause =
;persistent =

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 5
mul = 256, 224, 0
add = 128, 128, 128
color = 0
ignorehitpause = 0
;persistent = 1

[State 0, ExFX]
type = explod
trigger1 = !time
anim = 8210
sprpriority = 3
postype = p1
pos = 0, -45
scale = 0.5, 0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S98,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "DW"
ID = 1362
stateno = 1362
pos = 35,-36
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "DW"
ID = 1362
stateno = 1362
pos = 35,-54
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1


[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;-----------------------------
;Danger Wrap helper
[Statedef 1362]
type = A
movetype= A
physics = N
juggle = 14
velset = 6,0
ctrl = 0
anim = 1362

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0 && vel x > 0
x = -.1
;ignorehitpause =
;persistent =


[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = -.2
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1391
time = 1
forceair = 0
;ignorehitpause =
;persistent =


[State 1362, 1]
type = HitDef
Trigger1 = Time = 0
attr = A, ST
hitflag = MA
priority = 1, Miss
sparkno = -1
sprpriority = 1
p2facing = 1
p1stateno = 1372
p2stateno = 1382
fall = 1
fall.recover = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 1392
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1367
ID = 1366
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 80
supermove
pausemove
scale = 1,1
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
;ignorehitpause =
;persistent =

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 80
;ignorehitpause =
;persistent =


;----------------------------------------------------------------------
[Statedef 1372]
type = S
movetype= A
physics = N
anim = 1368
poweradd = 0
velset = .5,-1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
;ignorehitpause =
;persistent =


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 1366
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1367
ID = 1367
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 40
supermove
pausemove
scale = 1,1
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 20
;ignorehitpause =
;persistent =


[State 1372, Bind 1]
type = TargetBind
trigger1 = time = [0,40]
pos = 0, 0

[State 1372, Bind 2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 0, 30

[State 1372, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 2
value = -100

[State 1372, Throw]
type = TargetState
trigger1 = AnimElem = 2
value = 1383

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S45,8
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 2
time = 25
freq = 70
ampl = -4
phase = 90
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 9292
ID = 9292
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
;ignorehitpause =
;persistent =


;----------------------------------------------------------------------
[Statedef 1382]
type = A
movetype = H
physics = N
velset = 0,0

[State 1382, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1369

;----------------------------------------------------------------------
[Statedef 1383]
type = A
movetype = H
physics = N
velset = -5,-5
poweradd = 40

[State 1383, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = .4

[State 1383, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 1383, 3] ; Recover in mid air (use SelfState)
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 1383, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;---------------------------
;Chill Spike
[StateDef 1353]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = 50
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,10
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -3
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "CS"
ID = 1363
stateno = 1363
pos = 60,-49
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "CS"
ID = 1363
stateno = 1363
pos = 60,-60
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1


[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;------------------------
;Chill Spike Helper
[StateDef 1363]
type = A
movetype= A
physics = N
juggle  = 6
velset = 6,0
ctrl = 0
anim = 1363
poweradd = 20
sprpriority = 2

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 1390
time = 1
forceair = 0
ignorehitpause = 1
;persistent =


[State 1363, 1]
type = HitDef
triggerall = p2name != "Mr. X"
trigger1 = AnimElem = 1
attr = S, SP
damage = 10,2
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 18
p2stateno = 13579

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 1375
ID = 1375
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -4+random%2,-2+random%4
accel = 0,0
random = 0,0
removetime = 8
supermove
pausemove
scale = .4,.4
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 1375
ID = 1375
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -4+random%2,-2+random%4
accel = 0,0
random = 0,0
removetime = 8
supermove
pausemove
scale = .4,.4
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 1375
ID = 1375
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -4+random%2,-2+random%4
accel = 0,0
random = 0,0
removetime = 8
supermove
pausemove
scale = .35,.35
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 1375
ID = 1375
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -4+random%2,-2+random%4
accel = 0,0
random = 0,0
removetime = 8
supermove
pausemove
scale = .45,.45
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = movecontact = 1
anim = 1375
ID = 1375
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -4+random%2,-2+random%4
accel = 0,0
random = 0,0
removetime = 8
supermove
pausemove
scale = .3,.3
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 1311, end]
type = destroyself
trigger1 = movehit
trigger2 = time = 60

[State 0, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 1390
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >= 0
value = 1374
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

;---------------------------
;Chill Spike Ground Helper
[StateDef 1374]
type = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1374
poweradd = 0
sprpriority = 3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1
;persistent =


[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
slot = 0
stateno = 1375
time = 1
forceair = 0
ignorehitpause = 1
;persistent =


[State 1374, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 85,4
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -10
hitsound = s4, 1
guardsound = s6, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -7
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -3.4,-4
air.hittime = 18
air.fall = 1
fall.recovertime = 35
envshake.time = 10
envshake.ampl = 3
ground.cornerpush.veloff = 0

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1374, end]
type = ChangeState
trigger1 = time = 120
trigger2 = movecontact
trigger3 = time > 20 && parent, stateno = 1353
value = 1375
ctrl = 0

;------------------------------
;Chill Spike Destroyed
[StateDef 1375]
type = S
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 1375
poweradd = 0
sprpriority = 3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 1375, end]
type = destroyself
trigger1 = AnimTime = 0

;------------------------
;IceState
[StateDef 13579]
type = S
movetype= H
physics = S
ctrl = 0
poweradd = 0
sprpriority = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = pos y >= 0
trigger1 = time = 0 && alive = 1
value = 13571
elem = 1
;ignorehitpause =
;persistent =

[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = pos y < 0
trigger1 = time = 0 && alive = 1
value = 13572
elem = 1
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1 && alive = 0
value = 13578
elem = 1
;ignorehitpause =
;persistent =

;Generated by Fighter Factory PalFX Editor
[State 0, PalFXWiz]
type = PalFX
triggerall = alive = 0
trigger1 = time = 1
time = 50
add = 120,120,240
mul = 120,224,250
sinadd = 85,55,110,10
invertall = 0
color = 0
;ignorehitpause = 0
;persistent = 1

;Generated by Fighter Factory PalFX Editor
[State 0, PalFXWiz]
type = PalFX
triggerall = alive = 1
trigger1 = time = [1,100]
time = 1
add = 120,120,240
mul = 120,224,250
;sinadd = 85,55,110,10
invertall = 0
color = 0
;ignorehitpause = 0
;persistent = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = -3
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = 0
;ignorehitpause =
;persistent =


[State 13579, end]
type = SelfState
trigger1 = AnimTime = 0 && alive = 0
value = 5150
ctrl = 0

[State 13579, end]
type = SelfState
trigger1 = time = 100 && alive = 1
value = 0
ctrl = 1

;------------------------
;IceStateAir
[StateDef 135799]
type = A
movetype= H
physics = N
ctrl = 0
poweradd = 0
sprpriority = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -25
kill = 0
absolute = 0
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0 && alive = 1
value = 13579
elem = 2
;ignorehitpause =
;persistent =

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1 && alive = 0
value = 13578
elem = 1
;ignorehitpause =
;persistent =

;Generated by Fighter Factory PalFX Editor
[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 50
add = 120,150,240
mul = 120,224,250
sinadd = 85,55,110,10
invertall = 0
color = 0
;ignorehitpause = 0
;persistent = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -1
;ignorehitpause =
;persistent =

[State 0, VelAdd]
type = VelAdd
trigger1 = time = [1,30]
x = .03
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = time > 30
;ignorehitpause =
;persistent =


[State 1000, Land]
type= Selfstate
trigger1= vel y > 0
trigger1= pos y > -vel y
value= 52

;---------------------------
;Thunder Claw
[StateDef 1354]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1302
poweradd = 50
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,1
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -2
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1303
trigger1 = statetype = A
value = 1303
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1303 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1303 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "TC"
ID = 1364
stateno = 1364
pos = 25,-42
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "TC"
ID = 1364
stateno = 1364
pos = 25,-63
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1


[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 40    ;fv = 10
value = 0
;ignorehitpause =
;persistent =


[State 0, CtrlSet]
type = CtrlSet
triggerall = var(40) > 0
trigger1 = animelem = 5
value = 1
;ignorehitpause =
;persistent =

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;-----------------------
;Thunder Claw Helper
[StateDef 1364]
type = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1364
poweradd = 0
sprpriority = 2

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, statetype = A
time = -1
;facing = 0
pos = 30,-63
;ignorehitpause =
;persistent =


[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = movehit = 1
v = 40    ;fv =
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
slot = 0
stateno = 1390
time = 1
forceair = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1376
ID = 13761
pos = 0,4
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 18
supermove
pausemove
scale = .25,.25
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1376
ID = 13762
pos = 15,4
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 16
supermove
pausemove
scale = .25,.25
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 1376
ID = 13763
pos = 30,4
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 14
supermove
pausemove
scale = .25,.25
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1376
ID = 13764
pos = 45,4
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 12
supermove
pausemove
scale = .25,.25
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1376
ID = 13765
pos = 60,4
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
supermove
pausemove
scale = .25,.25
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1376
ID = 13766
pos = 75,4
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 8
supermove
pausemove
scale = .25,.25
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1376
ID = 13767
pos = 90,4
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 6
supermove
pausemove
scale = .25,.25
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 1376
ID = 13768
pos = 105,4
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 4
supermove
pausemove
scale = .25,.25
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 1364, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 45,5
animtype = heavy
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 4
guardsound = s6, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = 0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = 0,-3
air.hittime = 25
palfx.time = 10
envshake.time = 10
envshake.ampl = 3
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,3
palfx.invertall = 0
palfx.color = 0
air.fall = 1

[State 1364, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SP
damage = 45,5
animtype = heavy
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 4
guardsound = s6, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = 4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = 2,-3
air.hittime = 25
envshake.time = 10
envshake.ampl = 3
palfx.time = 10
envshake.time = 10
envshake.ampl = 3
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,3
palfx.invertall = 0
palfx.color = 0
air.fall = 1

[State 1364, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SP
damage = 45,5
animtype = heavy
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 4
guardsound = s6, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = 8
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = 4,-3
air.hittime = 25
envshake.time = 10
envshake.ampl = 3
palfx.time = 10
envshake.time = 10
envshake.ampl = 3
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,3
palfx.invertall = 0
palfx.color = 0
air.fall = 1

[State 1364, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SP
damage = 45,5
animtype = heavy
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 4
guardsound = s6, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = 12
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = 6,-3
air.hittime = 25
envshake.time = 10
envshake.ampl = 3
palfx.time = 10
envshake.time = 10
envshake.ampl = 3
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,3
palfx.invertall = 0
palfx.color = 0
air.fall = 1

[State 1364, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SP
damage = 45,5
animtype = heavy
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 4
guardsound = s6, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = 16
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = 8,-3
air.hittime = 25
envshake.time = 10
envshake.ampl = 3
palfx.time = 10
envshake.time = 10
envshake.ampl = 3
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,3
palfx.invertall = 0
palfx.color = 0
air.fall = 1

[State 1364, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SP
damage = 45,5
animtype = heavy
guardflag = MA
hitflag = MA
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 4
guardsound = s6, 0
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = 20
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = 10,-3
air.hittime = 25
air.fall = 1
envshake.time = 10
envshake.ampl = 3
palfx.time = 10
envshake.time = 10
envshake.ampl = 3
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,3
palfx.invertall = 0
palfx.color = 0

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = p2bodydist x < 10
id = 13762

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = p2bodydist x < 10
id = 13763

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = p2bodydist x < 20
id = 13764

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = p2bodydist x < 30
id = 13765

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = p2bodydist x < 40
id = 13766

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = p2bodydist x < 50
id = 13767

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = p2bodydist x < 60
id = 13768

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = p2bodydist x < 70
id = 13768

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = movehit = 1
value = 1364
elem = 7
;ignorehitpause =
;persistent =

[State 1364, end]
type = destroyself
trigger1 = animtime = 0

;---------------------------
;Black Hole Bomb
[StateDef 1355]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 1300
poweradd = -500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,11
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -4
;ignorehitpause =
;persistent =

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = 5
mul = 256, 224, 0
add = 128, 128, 128
color = 0
ignorehitpause = 0
;persistent = 1

[State 0, ExFX]
type = explod
trigger1 = !time
anim = 8210
sprpriority = 3
postype = p1
pos = 0, -45
scale = 0.5, 0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S98,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
triggerall = statetype != A
trigger1 = time = 1
x = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, StateTypeSet]
type = StateTypeSet
triggerall = pos y < 0
trigger1 = time = 0
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =


[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 1301
trigger1 = statetype = A
value = 1301
;elem = 1
;ignorehitpause =
;persistent =

[State 625, 1]
type = VelSet
trigger1 = anim = 1301 && Time = 0
x = Vel X / 2
y = Vel Y / 2

[State 625, 3]
type = VelMul
trigger1 = anim = 1301 && Time = 0
x = .1
y = .1


[State 220, 2]
type = PalFX
trigger1 = var(22) < 76 && Time = [5, 7] ;3
add = 120,120,255
time = 1

[State 220, 3]
type = PalFX
trigger1 = var(22) < 76 && Time = [8, 10] ;3
add = 80,80,256
time = 1

[State 220, 4]
type = PalFX
trigger1 = var(22) < 76 && Time = [11, 14] ;4
add = 50,50,155
time = 1

[State 220, 5]
type = PalFX
trigger1 = var(22) < 76 && Time = [15, 17] ;3
add = 20,20,95
time = 1



[State 225, 1] ;Back Dust
type = Explod
trigger1 = var(20) > 75 && Time = 3 ;AnimElem = 4
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 0, Helper]
type = Helper
triggerall = statetype != A
trigger1 = animelem = 3
helpertype = normal ;player
name = "BH"
ID = 1365
stateno = 1365
pos = 40,-49
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .5
size.yscale = .5

[State 0, Helper]
type = Helper
triggerall = statetype = A
trigger1 = animelem = 3
helpertype = normal ;player
name = "BH"
ID = 1365
stateno = 1365
pos = 40,-60
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .5
size.yscale = .5

[State 0, Explod]
type = Explod
triggerall = anim = 1300
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = anim = 1301
trigger1 = animelem = 3
anim = 222
ID = 222
pos = 35,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S18,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1301, end]
type = ChangeState
triggerall = statetype != A
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 1301, end]
type = ChangeState
triggerall = statetype = A
trigger1 = AnimTime = 0
value = 53
ctrl = 0

;----------------------------
;Black Hole Bomb
[StateDef 1365]
type = S
movetype= A
physics = N
juggle  = 7
velset = 7,0
ctrl = 0
anim = 1365
poweradd = 0
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 13655
ID = 13655
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
supermove
pausemove
scale = .05,.05
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[State 1365, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SP
damage = 15
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 1, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -1
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 18
getpower = 0
envshake.time = 10
envshake.ampl = 3

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1365, end]
type = ChangeState
trigger1 = movecontact
trigger2 = time = 15
value = 1366
ctrl = 1

;------------------------
;Black Hole Bomb Explode
[StateDef 1366]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1366
poweradd = 0
sprpriority = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 13655
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1366
ID = 1366
pos = -40,-40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = .75,.75
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = .2,.2
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1366
ID = 1366
pos = 40,40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -.75,-.75
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = .2,.2
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1366
ID = 1366
pos = -40,40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = .75,-.75
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = .2,.2
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1366
ID = 1366
pos = 40,-40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -.75,.75
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = .2,.2
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S45,11
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent = 10


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 3001, 6] ;Eat Projectiles
type = Projectile
trigger1 = Time < 26
attr = S, HP
hitflag = P
projanim = 13666
projremovetime = 1
projstagebound = 300
projedgebound = 300
velocity = Vel X, Vel Y

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 1366, 1]
type = HitDef
triggerall = var(41) <= 3
trigger1 = 1
attr = S, SP
damage = 15,3
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 2
guard.velocity = -10
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -4.4,-3
air.hittime = 18
envshake.time = 10
envshake.ampl = 3
getpower = 0
palfx..time = 20
palfx.add = 0,-200,0
palfx.mul = 256,256,256
palfx.sinadd = 40,80,40,3
palfx.invertall = 1
palfx.color = 0
persistent = 3
ground.cornerpush.veloff = 0

[State 1366, 1]
type = HitDef
triggerall = var(41) > 3
trigger1 = 1
attr = S, SP
damage = 45,3
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 2
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -7,-4
fall = 1
fall.recover = 0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -6.4,-3
air.hittime = 18
envshake.time = 10
envshake.ampl = 3
getpower = 0
palfx..time = 20
palfx.add = 0,-200,0
palfx.mul = 256,256,256
palfx.sinadd = 40,80,40,3
palfx.invertall = 1
palfx.color = 0
ground.cornerpush.veloff = 0

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
v = 41    ;fv =
value = 1
;ignorehitpause =
;persistent =

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = var(41) = 5
trigger2 = animelem = 16
movetype = I        ;I,A,H
;ignorehitpause =
;persistent =

[State 3200, pullhelper]
type=helper
trigger1= anim = 1366
helpertype=normal
stateno=1399
ID=1399
name="Vaccum"
postype=p2
pos=enemynear,const(size.ground.back)-25,-ceil(enemy,pos y)
persistent=0
size.ground.back=5
size.ground.front=5
size.height=240

[State 1366, end]
type = destroyself
trigger1 = AnimTime = 0

;------------------
;PushHelper
[Statedef 1399]
physics=N
velset=0,0
anim=1399
[State 3205, nhb]
type=nothitby
trigger1= 1
time=-1
value=SCA
[State 3205, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1399
ignorehitpause=1
[State 3205, bound]
type=screenbound
trigger1= 1
value=0
[State 3205, Turn]
type=turn
trigger1= rootdist x<5
[State 3205, push]
type=playerpush
trigger1= p2bodydist x=[-10,10]
value=1
[State 3205, Pos]
type=posset
trigger1= 1
y=0
[State 3205, Vel]
type=velset
trigger1= root,var(1)=1
x=750.0/(rootdist x+50.0)
;ifelse((rootdist x=[0,100]),2,ifelse((rootdist x=[100,200]),1.5,1))
[State 3205, Vel]
type=velset
trigger1= root,var(1)!=1
x=1000.0/(rootdist x+50.0)
;ifelse((rootdist x=[0,100]),4,ifelse((rootdist x=[100,200]),3,2))

[State 3205, Pos]
type=posadd
trigger1= p2bodydist x!=[-5,5]
x=ceil(p2dist x)-enemynear,const(size.ground.back)-5
[State 3205, End]
type=destroyself
trigger1= parent,stateno!=1366 || (parent,anim!=1366) || parent,movecontact
trigger2 = time = 40

;---------------------------
;Metal Blade Deflect
[StateDef 1395]
type = A
movetype= I
physics = N
velset = -2,-5
ctrl = 0
anim = 1395
poweradd = 0
sprpriority = 2

[State 0, Gravity]
type = Gravity
trigger1 = 1
;ignorehitpause =
;persistent =


[State 1390, end]
type = destroyself
trigger1 = time = 45
trigger2 = pos y >= 0

;----------------------------------
;Weapon Change
[StateDef 1340]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1340
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s55,0+random%3
volume = 0
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
triggerall = facing = 1
trigger1 = animelem = 1
anim = 8319
ID = 8318
pos = 0,-93
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = facing = -1
trigger1 = animelem = 1
anim = 8319
ID = 8318
pos = 0,-93
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
;ignorehitpause =
;persistent =


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 16
value = S45,15
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, PalFX]
type = PalFX
trigger1 = time = 16 || time = 19 || time = 22
time = 1
add = 255,255,255
mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause =
;persistent =


[State 0, VarSet]
type = VarSet
trigger1 = animelem = 6
v = 38    ;fv = 10
value = 1
;ignorehitpause =
;persistent =

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 25
value = 1
;ignorehitpause =
;persistent =


[State 1340, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------
;Weapon Change
[StateDef 1341]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1340
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s55,0+random%3
volume = 0
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = facing = 1
trigger1 = animelem = 1
anim = 8318
ID = 8318
pos = 0,-93
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
triggerall = facing = -1
trigger1 = animelem = 1
anim = 8318
ID = 8318
pos = 0,-93
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 16
value = S45,15
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 0, PalFX]
type = PalFX
trigger1 = time = 16 || time = 19 || time = 22
time = 1
add = 255,255,255
mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause =
;persistent =


[State 0, VarSet]
type = VarSet
trigger1 = animelem = 6
v = 38    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 25
value = 1
;ignorehitpause =
;persistent =


[State 1340, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------
;Fire Storm
[StateDef 3300]
type = S
movetype= A
physics = S
juggle  = 7
velset = 0,0
ctrl = 0
anim = 3300
poweradd = -1000
sprpriority = 0

[State -3, Lv1 Shadows]
type = afterimage
trigger1 = time = 0
time = 75
timegap = 1
framegap = 10
length = 30
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 3000, Superpause FX]
type = helper
trigger1 = Time = 3
stateno = 8500
ID = 8500
name = "Superpause FX"
postype = p1
pos = 10, -80
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3000, Superpause]
type = superpause
trigger1 = Time = 3
time = 40
movetime = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s8500,0
darken = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s54,0
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = s56,3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -3
;ignorehitpause =
;persistent =

[State 0, Helper]
type = Helper
trigger1 = animelem = 8
helpertype = normal ;player
name = "ring"
ID = 3310
stateno = 3310
pos = -5,-45
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove
size.xscale = .5
size.yscale = .5
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
;ignorehitpause =
;persistent =

[State 0, Helper]
type = Helper
trigger1 = animelem = 9
helpertype = normal ;player
name = "fireball"
ID = 3320
stateno = 3325
pos = 45,-45
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove
size.xscale = .75
size.yscale = .75
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
;ignorehitpause =
;persistent =


[State 3300, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
;Firestorm Ring
[StateDef 3310]
type = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
ctrl = 0
anim = 3310
poweradd = 0
sprpriority = 4

[State 3001, 6] ;Eat Projectiles
type = Projectile
trigger1 = 1
attr = S, HP
hitflag = P
projanim = 13666
projremovetime = 1
projstagebound = 300
projedgebound = 300
velocity = Vel X, Vel Y

[State 3310, 1]
type = HitDef
trigger1 = AnimElem = 1 
attr = S, HP
damage = 100,9
animtype = up
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
sparkno = -1 + 0 * (var(53) := 8010)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -45
guard.sparkno = -1 + 0 * (var(54) := 8001)
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -5,-5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5.4,-5
air.hittime = 18
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = -4
getpower = 0
palfx.color = 64
palfx.add = 100,40,50
palfx.mul = 90,50,40
palfx.time = 45
ground.cornerpush.veloff = 0

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 37
movetype = I        ;I,A,H
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S45,13
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 3310, end]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
; Hold Fireball: Helper
[Statedef 3320]
type    = A
movetype= A
anim = 304;227
sprpriority = 3

[State 227, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 227, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 227, 0] ;Projectile Dust
type = Helper
triggerall = parent, Pos Y = 0
triggerall = parent, Time > 5
trigger1 = Time = 0
helpertype = normal
name = "Projectile Dust"
postype = p1
pos = 0, ifelse(parent, StateType = C, 39, 51)
stateno = 9021
sprpriority = 4
ownpal = 1
persistent = 0

[state 227, 1]
type = VelSet
trigger1 = Time = 0
x = 8

[state 227, 1]
type = VelSet
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
trigger1 = MoveContact
trigger1 = HitCount <= 10
x = 1.5

[state 227, 1]
type = VelSet
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
trigger1 = MoveContact
trigger1 = HitCount > 10
x = .5

[State 227, 2]
type = HitDef
trigger1 = Time % 4 = 0 && P2BodyDist X > 80
attr = A, SP
damage = ifelse(MoveContact < 1, floor(80/(1+(root,Var(19)/5.0))), ifelse(HitCount <= 10, floor(5/(1+(root,Var(19)/5.0))), floor(2/(1+(root,Var(19)/5.0))))), 7
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 2, 10
guard.sparkno = -1
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 7
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -1
air.type = Low
air.velocity = -4, -2
air.hittime = 20
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 227, 3]
type = HitDef
trigger1 = Time % 4 = 0 && P2BodyDist X <= 80
attr = A, SP
;damage = ifelse(MoveContact > 0, floor(7/(1+(root,Var(19)/5.0))), floor(80/(1+(root,Var(19)/5.0)))), 8
damage = ifelse(MoveContact < 1, floor(80/(1+(root,Var(19)/5.0))), ifelse(HitCount <= 10, floor(7/(1+(root,Var(19)/5.0))), floor(2/(1+(root,Var(19)/5.0))))), 8
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 2, 10
guard.sparkno = -1
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 7
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -6
airguard.velocity = -5
air.type = Low
air.velocity = -5, -4
air.hittime = 20
;fall = 1
;air.fall = 1
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 227, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 227, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3322
time = -1

[State 227]
type = ParentVarSet
trigger1 = !Time
var(21) = 0

[State 227]
type = ParentVarSet
trigger1 = NumTarget > 0
trigger1 = target, IsHelper
var(21) = -80
persistent = 0

[State 227]
type = ParentVarAdd
;trigger1 = MoveContact
trigger1 = NumTarget > 0
trigger1 = !target, IsHelper
var(21) = 1

;[State 227]
;type = ParentVarAdd
;trigger1 = var(21) < 0
;var(21) = 1

[State 227, 7]
type = TargetState
trigger1 = MoveHit;NumTarget > 0 ;MoveContact
trigger1 = (parent, var(21)) = 3 + ((parent, var(22))/26)
;trigger1 = !target, IsHelper
value = 226
ignorehitpause = 1

[State 227, 8]
type = ChangeState
trigger1 = NumTarget < 1 ;!MoveContact
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105
trigger2 = NumTarget > 0 ;MoveContact
trigger2 = (parent, var(21)) = 3 + ((parent, var(22))/26)
trigger3 = var(21) < 0
value = 3322
ignorehitpause = 1

;---------------------------------------------------------------------------
; Hold Fireball: Helper (end)
[Statedef 3322]
type = A
movetype = A;I
ctrl = 0
anim = 305;228
velset = 0, 0
sprpriority = 3
movehitpersist = 1

[State 228, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 228, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 228]
type = ParentVarSet
trigger1 = !Time
var(21) = 0

[State 228] ;hold calculate - reset
type = ParentVarSet
trigger1 = !Time
var(22) = 0

[State 228, 8] ;Hit Floor Spark (front)
type = Explod
;trigger1 = Time = 3
trigger1 = NumTarget > 0
trigger1 = target, PrevStateNo = 226
trigger1 = target, StateNo = 5110
trigger1 = target, Anim = 5170 ;5120
trigger1 = target, AnimElem = 1, = 2
persistent = 0
ID = 9400
anim = 9400
postype = p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
ownpal = 1

[State 228, 9] ;Hit Floor Spark (back)
type = Explod
;trigger1 = Time = 1
trigger1 = NumTarget > 0
trigger1 = target, PrevStateNo = 226
trigger1 = target, StateNo = 5110
trigger1 = target, Anim = 5170 ;5120
trigger1 = target, AnimElem = 1, = 0
persistent = 0
ID = 9401
anim = 9401
postype = p2
pos = -4, -3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -3
ownpal = 1

;[State 228, 10]
;type = PlaySnd
;trigger1 = NumTarget > 0
;trigger1 = target, PrevStateNo = 226
trigger1 = target, StateNo = 5110
;trigger1 = target, Anim = 5170 ;5120
;trigger1 = target, AnimElem = 1, = 0
;value = 40, 2
;ignorehitpause = 1
;supermovetime = -1

[State 228, 2]
type = DestroySelf
triggerall = Time > 10 ;AnimTime = 0
trigger1 = P2MoveType != H ;NumTarget = 0

;--------------------------------
;Fireball Helper
[StateDef 3325]
type = S
movetype= A
physics = N
juggle  = 6
velset = 9,0
ctrl = 0
anim = 304
poweradd = 0
sprpriority = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S45,6
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
v = 42    ;fv =
value = 1
;ignorehitpause =
;persistent =


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NP,SP,HP
slot = 0
stateno = 3321
time = 1
forceair = 0
;ignorehitpause =
;persistent =


[State 3320, 1]
type = HitDef
triggerall = var(42) <= 3
trigger1 = 1
attr = S, HP
damage = 25,2
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 4, 4
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
guard.sparkno = -1
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -6
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -5,-3
air.hittime = 18
envshake.time = 10
envshake.ampl = -4
getpower = 0
palfx.color = 64
palfx.add = 100,40,50
palfx.mul = 90,50,40
palfx.time = 45
persistent = 4

[State 3320, 1]
type = HitDef
triggerall = var(42) >= 4
trigger1 = 1
attr = S, HP
damage = 75,7
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 4, 5
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
guard.sparkno = -1
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 18
ground.velocity = -8,-3
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -8.4,-3
air.hittime = 18
fall = 1
fall.recover = 0
envshake.time = 10
envshake.ampl = -4
getpower = 0
palfx.color = 64
palfx.add = 100,40,50
palfx.mul = 90,50,40
palfx.time = 45
persistent = 4

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3320, end]
type = ChangeState
triggerall = var(42) >= 5
trigger1 = movecontact
value = 3321
ctrl = 0

;---------------------
;Fireball End
[StateDef 3321]
type = S
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 305
poweradd = 0
sprpriority = 2

[State 3321, end]
type = destroyself
trigger1 = AnimTime = 0

;-----------------------------
;Astro Crush
[StateDef 3350]
type = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3350
poweradd = -1000
sprpriority = 2

[State -3, Lv1 Shadows]
type = afterimage
trigger1 = time = 0
time = 75
timegap = 1
framegap = 10
length = 30
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 3000, Superpause FX]
type = helper
trigger1 = Time = 3
stateno = 8500
ID = 8500
name = "Superpause FX"
postype = p1
pos = 20, -50
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3000, Superpause]
type = superpause
trigger1 = Time = 3
time = 40
movetime = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s8500,0
darken = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s54,0
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = s56,2
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = [2,20]
value = ,NA,SA,HA,NP,SP,HP
;value2 = S,NA
time = 1
;ignorehitpause =
;persistent =


[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -6
;ignorehitpause =
;persistent =

;Generated by Fighter Factory PalFX Editor
[State 0, PalFXWiz]
type = PalFX
trigger1 = time = [8,88]
time = 2
add = 50,0,50
mul = 256,256,256
sinadd = 250,0,250,3
invertall = 0
color = 256
;ignorehitpause = 0
persistent = 4


[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = time = 45
time = 60
;ignorehitpause =
;persistent =


[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 2
time = 25
TimeGap  = 2
FrameGap = 3
length = 10
PalBright = 1,1,1
PalContrast = 1, 10, 150
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1


[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
y = -10
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
y = 0
;ignorehitpause =
;persistent =

[State 0, Gravity]
type = Gravity
trigger1 = time > 97
;ignorehitpause =
;persistent =

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A       ;S,A,C,L
physics = N         ;A,C,S,N
;ignorehitpause =
;persistent =

[State 0, Helper]
type = Helper
trigger1 = time = [8,60]
helpertype = normal ;player
name = "astro"
ID = 3355
stateno = 3355
pos = -100+random%200,-250
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermove
pausemove
persistent = 15
size.xscale = .75
size.yscale = .75

[State 0, Helper]
type = Helper
trigger1 = time = 64
helpertype = normal ;player
name = "astro"
ID = 3359
stateno = 3359
pos = 200,-250
postype = p2    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove
size.xscale = .75
size.yscale = .75

[State 1000, Land]
type= changestate
trigger1= vel y > 0
trigger1= pos y > -vel y
value= 3351

;----------------------------
;Astro Helper
[StateDef 3355]
type = A
movetype= A
physics = N
juggle  = 1
velset = 7,7
ctrl = 0
anim = 3355
poweradd = 0
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S45,14
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3357
ID = 33577
pos = -5,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
supermove
pausemove
scale = .3,.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 0
;persistent =


[State 3001, 6] ;Eat Projectiles
type = Projectile
trigger1 = 1
attr = S, HP
hitflag = P
projanim = 13666
projremovetime = 1
projstagebound = 300
projedgebound = 300
velocity = Vel X, Vel Y

[State 3355, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HP
damage = 45,5
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 5, 10
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -10
guard.sparkno = -1
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -4.4,-5
air.hittime = 25
envshake.time = 25
envshake.ampl = 4
getpower = 0

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3357
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >= -5
value = 3356
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

;-------------------
;Destroyed
[StateDef 3356]
type = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3356
poweradd = 0
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S45,8
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 33577
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3359
ID = 3359
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = .6,.6
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 3357
ID = 3357
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -5,-5
accel = 0,0
random = 0,0
removetime = 2
supermove
pausemove
scale = .4,.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 70
ampl = 4
phase = 90
;ignorehitpause =
;persistent =


[State 3356, end]
type = destroyself
trigger1 = AnimTime = 0

;-------------------
;Destroyed
[StateDef 3357]
type = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3356
poweradd = 0
sprpriority = 3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 33577

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3358
ID = 3358
pos = -30,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 3357
ID = 3357
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -5,-5
accel = 0,0
random = 0,0
removetime = 2
supermove
pausemove
scale = .4,.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 70
ampl = 4
phase = 90
;ignorehitpause =
;persistent =


[State 3356, end]
type = destroyself
trigger1 = AnimTime = 0

;----------------------------
;Astro Helper
[StateDef 3359]
type = A
movetype= A
physics = N
juggle  = 1
velset = 7,7
ctrl = 0
anim = 3355
poweradd = 0
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S45,14
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 3357
ID = 33577
pos = -5,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
supermove
pausemove
scale = .3,.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 0
;persistent =


[State 3001, 6] ;Eat Projectiles
type = Projectile
trigger1 = 1
attr = S, HP
hitflag = P
projanim = 13666
projremovetime = 1
projstagebound = 300
projedgebound = 300
velocity = Vel X, Vel Y

[State 3355, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HP
damage = 55,5
animtype = heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -10
guard.sparkno = -1
hitsound = s45, 5
guardsound = s6, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -5,-4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -4.4,-5
air.hittime = 25
envshake.time = 25
envshake.ampl = 4
getpower = 0
fall = 1
fall.recover = 0

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 3357
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >= -5
value = 3356
ctrl = 0
;anim =
;ignorehitpause =
;persistent =

;---------------------
;Land
[StateDef 3351]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 47
poweradd = 0
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S40,0
volume = 0
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 3351, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------
;W Tank
[StateDef 3370]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3370
poweradd = -1000
sprpriority = 2

[State -3, Lv1 Shadows]
type = afterimage
trigger1 = time = 0
time = 75
timegap = 1
framegap = 10
length = 30
paladd=0,0,0
palmul=.75,.75,.75
palcontrast=128,128,128
palpostbright=0,0,0
trans=add1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
trigger2 = time = 65
trigger3 = time = 70
trigger4 = time = 75
trigger5 = time = 80
trigger6 = time = 85
value = S65,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 3000, Superpause FX]
type = helper
trigger1 = Time = 3
stateno = 8500
ID = 8500
name = "Superpause FX"
postype = p1
pos = 0, -60
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3000, Superpause]
type = superpause
trigger1 = Time = 3
time = 40
movetime = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s8500,0
darken = 0


[State 0, VarAdd]
type = VarAdd
triggerall = var(46) < 24
trigger1 = time = [70,95]
v = 46    ;fv =
value = 1
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 3371
ID = 3371
pos = 0,-115
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 95
pausemove
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
;ignorehitpause =
;persistent =


[State 3370, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------
;Level 3
[StateDef 3400]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3400
poweradd = -3000
sprpriority = 2


;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = animelem = 1
;value = s62,3
;volume = 255
;channel = 0
;lowpriority = -1
;freqmul = 1.0
;loop = 0
;pan = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
trigger2 = time = 10
trigger3 = time = 15
trigger4 = time = 20
trigger5 = time = 25
trigger6 = time = 30
value = S65,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 2
time = 25
TimeGap  = 2
FrameGap = 3
length = 10
PalBright = 1,1,1
PalContrast = 150, 10, 1
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 10
;ignorehitpause =
;persistent =

[State 0, VelSet]
type = VelSet
trigger1 = movehit = 1
x = 0
;ignorehitpause =
;persistent =


[State 3000, Superpause FX]
type = helper
trigger1 = Time = 3
stateno = 8520
ID = 8500
name = "Superpause FX"
postype = p1
pos = 10, -60
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3000, Superpause]
type = superpause
trigger1 = Time = 3
time = 40
movetime = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s8500,0
darken = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) < 24
trigger1 = time = [4,29]
v = 46    ;fv =
value = 1
;ignorehitpause =
;persistent =

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 3401
ID = 3401
pos = 0,-115
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermovetime = 95
pausemove
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 1
;ignorehitpause =
;persistent =


[State 3400, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, ST
damage = 75,5
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 10
sparkno = -1 + 0 * (var(53) := 8014)
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -76
hitsound = s5, 3
guardsound = s6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12
envshake.time = 10
envshake.ampl = -4
p2stateno = 3410
getpower = 0

[State 0, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 51    ;fv = 10
value = 1
;ignorehitpause =
;persistent =


[State 3400, end]
type = ChangeState
triggerall = var(51) = 0
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S0,4
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S40,0
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 3400, end]
type = ChangeState
triggerall = var(51) = 1
trigger1 = AnimTime = 0
value = 3405
ctrl = 0

;-------------------------------
;Level 3 Hit
[StateDef 3405]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 3405
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s52,12
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = s56,0
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 140
value = s56,1
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 41
value = s50,12
volume = 255
channel = 9
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) >= 0
trigger1 = AnimElem = 10 || animelem = 12 || animelem = 14 || animelem = 16
trigger2 = AnimElem = 18 || animelem = 20 || animelem = 22 || animelem = 24
trigger3 = AnimElem = 26 || animelem = 28 || animelem = 30 || animelem = 32
v = 46    ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 240
TimeGap  = 2
FrameGap = 3
length = 10
PalBright = 1,1,1
PalContrast = 150, 10, 1
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 220, 9]
type = PlaySnd
trigger1 = AnimElem = 10 || animelem = 12 || animelem = 14
value = 18, 5

[State 220, 9]
type = PlaySnd
trigger1 = animelem = 16
trigger2 = AnimElem = 18 || animelem = 20 || animelem = 22 || animelem = 24
trigger3 = AnimElem = 26 || animelem = 28 || animelem = 30 || animelem = 32
value = 18, 0

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "CV"
ID = 3406
stateno = 3406
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermove
pausemove
;size.xscale (float)
;size.yscale (float)
;size.ground.back (int)
;size.ground.front (int)
;size.air.back (int)
;size.air.front (int)
;size.height (int)
;size.proj.doscale (int)
;size.head.pos (int,int)
;size.mid.pos (int,int)
;size.shadowoffset (int)
;ignorehitpause =
;persistent =


[State 220, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && animelem = 10
persistent = 0
anim = 222
postype = p1
pos = 24, -46
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1

[State 220, 4]
type = Helper
trigger1 = AnimElem = 10 || animelem = 12
helpertype = normal
name = "Fireball"
ID = 2233
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 2233
ownpal = 1
size.xscale = .5
size.yscale = .75

[State 220, 4]
type = Helper
trigger1 = AnimElem = 14 ||AnimElem = 16
helpertype = normal
name = "MB"
ID = 2234
pos = 25, -36
postype = p1
;bindtime = -1
;facing = 1
stateno = 2234
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 220, 4]
type = Helper
trigger1 = AnimElem = 18
helpertype = normal
name = "WB"
ID = 2241
pos = 25, -47
postype = p1
;bindtime = -1
;facing = 1
stateno = 2241
ownpal = 1
size.xscale = .8
size.yscale = .8

[State 220, 4]
type = Helper
trigger1 = AnimElem = 20
helpertype = normal
name = "RC"
ID = 2235
pos = 25, -47
postype = p1
;bindtime = -1
;facing = 1
stateno = 2235
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 220, 4]
type = Helper
trigger1 = AnimElem = 22
helpertype = normal
name = "MM"
ID = 2236
pos = 25, -47
postype = p1
;bindtime = -1
;facing = 1
stateno = 2236
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 220, 4]
type = Helper
trigger1 = AnimElem = 24
helpertype = normal
name = "NB"
ID = 2237
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 2237
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 220, 4]
type = Helper
trigger1 = AnimElem = 26
helpertype = normal
name = "OS"
ID = 2242
pos = 25, -47
postype = p1
;bindtime = -1
;facing = 1
stateno = 2242
ownpal = 1
size.xscale = .8
size.yscale = .8

[State 220, 4]
type = Helper
trigger1 = AnimElem = 28
helpertype = normal
name = "ST"
ID = 2238
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 2238
ownpal = 1
size.xscale = .75
size.yscale = .5

[State 220, 4]
type = Helper
trigger1 = AnimElem = 30
helpertype = normal
name = "Bomb"
ID = 2239
pos = 29, -47
postype = p1
;bindtime = -1
;facing = 1
stateno = 2239
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 220, 4]
type = Helper
trigger1 = AnimElem = 32
helpertype = normal
name = "Wind"
ID = 2240
pos = 25, 0
postype = p1
;bindtime = -1
;facing = 1
stateno = 2240
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 225, 1] ;Back Dust
type = Explod
trigger1 = AnimElem = 10 || animelem = 12 || animelem = 14 || animelem = 16
trigger2 = AnimElem = 18 || animelem = 20 || animelem = 22 || animelem = 24
trigger3 = AnimElem = 26 || animelem = 28 || animelem = 30 || animelem = 32
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1001, 1] ;Back Dust
type = Explod
trigger1 = animelem = 39
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1001, 2]
type = HitDef
trigger1 = Time = 0
attr = S, SA
damage = 90, 6
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 20, 20
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = -10 + 0 * (var(55) := 55), var(56) := -75
hitsound = S45, 5
guardsound = S6, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 12
ground.velocity = -4.5,-7
airguard.velocity = -1.9,5
air.type = High
air.velocity = -5.5,-6
air.hittime = 12
envshake.time = 30
envshake.ampl = -5
fall = 1
fall.recover = 0

[State 1001, 3] ;Power
type = Explod
triggerall = var(33) = 0
triggerall = NumExplod(1010) < 1
trigger1 = animelem = 41
persistent = 0
anim = 11010
ID = 1010
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
removeongethit = 1
supermovetime = -1
bindtime = -1
ownpal = 1

[State 1001, 4] ;Remove Energy (1)
type = RemoveExplod
trigger1 = AnimElem = 42
ID = 1010

[State 1001, 0] ;back fire 1
type = Explod
triggerall = var(33) = 1
trigger1 = NumExplod(66142) < 1
trigger1 = AnimElem = 41
ID = 66142
anim = 6143
postype = p1
pos = -14, -60
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1001, 0.1] ;back fire 1
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 66142

[State 1001, 0.2] ;back fire 2
type = Explod
triggerall = var(33) = 1
trigger1 = NumExplod(66143) < 1
trigger1 = AnimElem = 5
ID = 66143
anim = 6144
postype = p1
pos = 22, -67
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1001, 0.3] ;back fire 2
type = RemoveExplod
trigger1 = AnimElem = 6
ID = 66143

[State 1001, 24]
type = StateTypeSet
trigger1 = animelem = 41
statetype = A
movetype = A
physics = A

[State 1001, 25]
type = HitBy
trigger1 = 1
value = SCA, SA,HA,NP,SP,HP

[State 1001, 2]
type = VelSet
trigger1 = animelem = 37
x = 16;5

[State 1001, 2]
type = VelSet
trigger1 = AnimElem = 40
x = 0

[State 1101, Vel]
type = velset
trigger1 = time = [209,214]
x = ifelse(var(33) = 1, 8, 7)
y = -8.5

[State 1101, Vel]
type = velmul
triggerall = time > 203
trigger1 = 1
x = 0.88

[State 1101, Vel]
type = velmul
trigger1 = vel y > .5
x = 0

[State 1101, 2]
type = VelAdd
trigger1 = time >= 209
y = .1

[State 1101, 2]
type = VelAdd
trigger1 = time >= 219
y = .1

[State 1000, 35]
type = PlaySnd
trigger1 = AnimElem = 41
value = s9, 1
persistent = 0

[State 1001, 35]
type = ChangeState
triggerall = time > 230
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52

;---------------------------------
;Level 3 Hit
[StateDef 3406]
type = S
movetype= A
physics = N
juggle  = 1
velset = -8,0
ctrl = 0
anim = 3406
poweradd = 0
sprpriority = 2

[State 220, 4]
type = Helper
trigger1 = AnimElem = 10 || animelem = 12 || animelem = 14 || animelem = 16
trigger2 = AnimElem = 18 || animelem = 20 || animelem = 22 || animelem = 24
trigger3 = AnimElem = 26 || animelem = 28 || animelem = 30
helpertype = normal
name = "Fireball"
ID = 2233
pos = 24, -46
postype = p1
;bindtime = -1
;facing = 1
stateno = 2233
ownpal = 1
size.xscale = .5
size.yscale = .75

;Generated by Fighter Factory PalFX Editor
[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 0,256,0
sinadd = 0,0,0,1
invertall = 0
color = 256
;ignorehitpause = 0
;persistent = 1


[State 0, VelSet]
type = VelSet
trigger1 = time = 30
x = 0
;ignorehitpause =
;persistent =


[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
;alpha =
;ignorehitpause =
;persistent =


[State 220, 3] ;Fireball efect
type = Explod
trigger1 = var(22) < 76 && animelem = 10
persistent = 0
anim = 222
postype = p1
pos = 24, -46
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1




[State 225, 1] ;Back Dust
type = Explod
trigger1 = AnimElem = 10 || animelem = 12 || animelem = 14 || animelem = 16
trigger2 = AnimElem = 18 || animelem = 20 || animelem = 22 || animelem = 24
trigger3 = AnimElem = 26 || animelem = 28 || animelem = 30
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1001, 35]
type = destroyself
trigger1 = time = 191

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2234]
type    = A
movetype= A
anim = 1310;223
sprpriority = 3

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = destroyself
trigger1 = MoveContact || time = 60

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2235]
type    = A
movetype= A
anim = 1311;223
sprpriority = 3

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = destroyself
trigger1 = MoveContact || time = 60

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2236]
type    = A
movetype= A
anim = 1312;223
sprpriority = 3

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 5
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = changestate
trigger1 = MoveContact || time = 60
value = 1392
ctrl = 0

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2237]
type    = A
movetype= A
anim = 1314;223
sprpriority = 3

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 8
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = changestate
trigger1 = MoveContact || time = 60
value = 1392
ctrl = 0

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2238]
type    = A
movetype= A
anim = 1360;223
sprpriority = 3

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = destroyself
trigger1 = MoveContact || time = 60

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2239]
type    = A
movetype= A
anim = 1322;223
sprpriority = 3

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 8
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = changestate
trigger1 = MoveContact || time = 60
value = 1392
ctrl = 0

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2240]
type    = A
movetype= A
anim = 1320;223
sprpriority = 3

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 9022
ID = 9022
pos = 0,5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
supermove
pausemove
scale = .75,.75
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;persistent =


;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 5
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = 3,-6
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = changestate
trigger1 = MoveContact || time = 60
value = 2250
ctrl = 0

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2241]
type    = A
movetype= A
anim = 1323;223
sprpriority = 3

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S18, 10
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = destroyself
trigger1 = MoveContact || time = 60

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2242]
type    = A
movetype= A
anim = 1324;223
sprpriority = 3

;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[state 223, 1]
type = VelSet
trigger1 = Time = 0
x = 5

[State 223, 2]
type = HitDef
trigger1 = Time = 0
attr = A, HP
damage = 10, 2
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2
guard.sparkno = -1 + 0 * (var(54) := 8000)					
sparkno = -1 + 0 * (var(53) := 8014) ;S8231
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S18, 10
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
fall = 0
air.fall = 1
getpower = 0
envshake.time = 10
envshake.ampl = 3 ;ifelse((parent, StateType = A), 1, 0)
;p2stateno = 225
;palfx.time = 31
;palfx.add = 160,240,140
;palfx.mul = 80,120,220
;palfx.sinadd = 80, 80, 80, 5

[State 223, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 223, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 224
time = -1

[State 223, 8]
type = destroyself
trigger1 = MoveContact || time = 60

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 2250]
type    = A
movetype= I
anim = 1321;223
sprpriority = 3
velset = 0,0
;[State 223, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 9022
;ignorehitpause =
;persistent =


[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
;ignorehitpause =
;persistent =


;-----------------------------
;Level 3 Custom Gethit
[StateDef 3410]
type = S
movetype= H
physics = S
juggle  = 1
velset = -12,0
ctrl = 0
poweradd = 0
sprpriority = 2


[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0
;ignorehitpause =
;persistent =


[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = time = 0
value = 3410
;elem = 1
;ignorehitpause =
;persistent =


[State 3410, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 3411
ctrl = 0

;----------------------------
;Dizzy from Levl 3
[StateDef 3411]
type = S
movetype= H
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 5300
poweradd = 0
sprpriority = 2

[State 3411, end]
type = SelfState
trigger1 = time = 120
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Striker Pose - Beat
[Statedef 990]
type    = S
movetype= A
physics = S
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1200
;poweradd = 75
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = s51,2
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 37    ;fv =
value = -1
;ignorehitpause =
;persistent =

[State 1200, 1] ;Back Dust
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1200, 1] ;Beat
type = Helper
trigger1 = AnimElem = 4 ;Time = 0
helpertype = normal
name = "Beat"
ID = 1201
postype = left
pos = ifelse(facing = 1, 0, 319), 0
facing = facing
stateno = 1201
ownpal = 1
ignorehitpause = 1

[State 1200, 5]
type = PlaySnd
trigger1 = Time = 0;1
value = 3, 4
channel = 0

[State 1200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Beat: Helper
[Statedef 1201]
type = A
movetype = A
ctrl = 0
anim = 1220
velset = 0, 0
sprpriority = 4

[State 1210, 1]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage = 65, 3
;getpower = 40
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8, 8
guard.sparkno = -1	
sparkno = -1
sparkxy = 2, 0
hitsound = S4, 0
guardsound = S6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1


[State 1201, 2]
type = PosAdd
trigger1 = !Time
x = -30
y = -132

[State 1201, 2]
type = VelSet
trigger1 = Time = 0
x = 2.5
y = 2.1 ;1.9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = s0,4
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 1201, 2]
type = VelAdd
trigger1 = Time >= 15 && Time < 45
x = .25
;y = .1

[State 1201, 2]
type = VelSet
trigger1 = Time = 48
;x = .1
y = .1

[State 1201, 2]
type = VelSet
trigger1 = Time = 50
x = 3.0
;y = -3.1

[State 1201, 2]
type = VelAdd
trigger1 = Time >= 50
x = .1
y = -.2

[State 1201, 2]
type = VelSet
trigger1 = Time = 70
y = -3.0

;[State 1201, 6] ;shoot
;type = PlaySnd
;trigger1 = Anim = 1202
;trigger1 = AnimElem = 1, = 2
;value = 18, 12

[State 1201, 7]
type = HitBy
trigger1 = 1
value = SCA, AA,AP,AT

[State 1201, 8]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1202
time = -1

[State 1201, 9]
type = DestroySelf
trigger1 = ScreenPos Y < 15
trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Beat: Helper GetHit
[Statedef 1202]
type = A
movetype = I
ctrl = 0
anim = 1221
velset = 0, 0
sprpriority = 5

[State 1202, 0]
type = VelSet
trigger1 = Time = 0
x = -2.2
y = -3

[State 1202, 1]
type = VelAdd
trigger1 = Time >= 0
y = .3

[State 1202, 2]
type = Explod
trigger1 = Time % 4 = 0 && Time < 300
anim = 9040
postype = p1
pos = 0, -10
velocity = 0, 0
accel = 0, 0
random = 20, 20
removetime = -2
ownpal = 1
sprpriority = 6

[State 1202, 3]
type = DestroySelf
trigger1 = ScreenPos Y < 15
trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105
trigger3 = ScreenPos Y > 255



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Striker Pose - FlipTop
[Statedef 991]
type    = S
movetype= A
physics = S
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1200
;poweradd = 75
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = s51,1
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 37    ;fv =
value = -2
;ignorehitpause =
;persistent =


[State 1210, 1] ;Back Dust
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1210, 1] ;FlipTop
type = Helper
trigger1 = AnimElem = 4 ;Time = 0
helpertype = normal
name = "FlipTop"
ID = 1211
postype = left
pos = ifelse(facing = 1, 0, 319), 0
facing = facing
stateno = 1211
ownpal = 1
ignorehitpause = 1

[State 1210, 5]
type = PlaySnd
trigger1 = Time = 0;1
value = 3, 4
channel = 0

[State 1210, 6] ;fliptop voice
type = PlaySnd
trigger1 = AnimElem = 4 ;Time = 5
value = 18, 13

[State 1210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; FlipTop: Helper
[Statedef 1211]
type = A
movetype = A
ctrl = 0
anim = 1210
velset = 0, 0
sprpriority = 4

[State 1211, 0]
type = PlayerPush
trigger1 = 1
value = 1

[State 1211, 0]
type = ChangeAnim
trigger1 = Anim = 1210
trigger1 = P2Dist X = [-55, 55]
value = 1211

[State 1211, 0]
type = ChangeAnim
trigger1 = Anim = 1211
trigger1 = AnimTime = 0
value = 1214

[State 1211, 3] ;fire
type = Explod
trigger1 = NumExplod(11212) < 1
trigger1 = !Time
ID = 11212
anim = 1212
postype = p1
pos = 0, 0
facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 1
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1211, 1]
type = Helper
trigger1 = Anim = 1211
trigger1 = AnimElem = 4
helpertype = normal
name = "Bomb"
ID = 1212
pos = 2, -25
postype = p1
;bindtime = -1
;facing = 1
stateno = 1212
ownpal = 1

[State 1211, 2]
type = PosAdd
trigger1 = !Time
x = -30
y = -132

[State 1211, 2]
type = VelSet
trigger1 = Time = 0
x = 3.5

[State 1211, 2]
type = VelAdd
trigger1 = Anim = 1211 ;1210
trigger1 = Vel X > 0
x = -.25

[State 1211, 2]
type = VelSet
trigger1 = Anim = 1214
;trigger1 = AnimTime = 0
;trigger1 = Vel X = 0
x = 3.7

;[State 1211, 2]
;type = VelAdd
;trigger1 = Time >= 50
;x = .1

[State 1211, 6] ;shoot
type = PlaySnd
trigger1 = Anim = 1211
trigger1 = AnimElem = 3
value = 18, 14

[State 1211, 2] ;Remove FlipTop striker fire
type = RemoveExplod
;trigger1 = NumHelper(1211) < 1
trigger1 = ScreenPos Y < 15
trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105
ID = 11212

[State 1211, 7]
type = HitBy
trigger1 = 1
value = SCA, AA,AP,AT

[State 1211, 8]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1215
time = -1

[State 1211, 3]
type = DestroySelf
trigger1 = ScreenPos Y < 15
trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Bomb: Helper
[Statedef 1212]
type    = A
movetype= A
anim = 1213
sprpriority = 5

[state 1212, 1.0]
type = VelSet
trigger1 = Time = 0
x = 1.5
y = -3

[state 1212, 1.1]
type = VelAdd
trigger1 = Time > 0
y = .3

[State 1212, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, SP
damage = 74, 6
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 0, 9;10, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 8
guardsound = S6, 0 ;16, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -4, -5
airguard.velocity = -1
air.type = High
air.velocity = -3, -4
air.hittime = 25
fall = 1
air.fall = 1

[State 1212, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, SP
damage = 75, 7
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 0, 10 ;9, 9
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013) 
sparkxy = -10 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 8
guardsound = S6, 0 ;16, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -5, -6
airguard.velocity = -5
air.type = High
air.velocity = -4, -5
air.hittime = 25
fall = 1
air.fall = 1

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1212, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 1212, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 1213
time = -1

[State 1212, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 || Pos Y >= 0
value = 1213
ignorehitpause = 1

;---------------------------------------------------------------------------
; Bomb: Helper (end)
[Statedef 1213]
type = A
movetype = I
ctrl = 0
anim = 9290
velset = 0, 0
sprpriority = 5

[State 1213, 0]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 1213, 1]
type = PlaySnd
trigger1 = !Time
trigger1 = Pos Y >= 0
value = s45, 8
ignorehitpause = 1
supermovetime = 99999

[State 1213, 2]
type = DestroySelf
;trigger1 = Time > 10
;trigger1 = P2MoveType != H
;trigger1 = NumTarget < 1
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; FlipTop: Helper GetHit
[Statedef 1215]
type = A
movetype = I
ctrl = 0
anim = 1215
velset = 0, 0
sprpriority = 5

[State 1215, vira]
type = Turn
trigger1 = !Time

[State 1215, 0]
type = VelSet
trigger1 = Time = 0
x = 3.2

;[State 1215, 1]
;type = VelAdd
;trigger1 = Time >= 0
;y = .1

[State 1215, 1.1] ;fire
type = Explod
trigger1 = NumExplod(11212) < 1
trigger1 = !Time
ID = 11212
anim = 1212
postype = p1
pos = 0, 0
facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 1
bindtime = -1
ownpal = 1
removeongethit = 1

[State 1215, 1.2] ;Remove FlipTop striker fire
type = RemoveExplod
trigger1 = ScreenPos Y < 15
trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105
ID = 11212

[State 1215, 2]
type = Explod
trigger1 = Time % 4 = 0 && Time < 300
anim = 9040
postype = p1
pos = 0, -10
velocity = 0, 0
accel = 0, 0
random = 20, 20
removetime = -2
ownpal = 1
sprpriority = 6

[State 1215, 3]
type = DestroySelf
trigger1 = ScreenPos Y < 15
trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105
trigger3 = ScreenPos Y > 255



;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Striker Pose - Auto
[Statedef 992]
type    = S
movetype= A
physics = S
juggle  = 3
velset = 0,0
ctrl = 0
anim = 1200
;poweradd = 75
sprpriority = 2


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = s51,3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time = 0
v = 37    ;fv =
value = -3
;ignorehitpause =
;persistent =

[State 1220, 1] ;Back Dust
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 9020
postype = p1
pos = 20, 3
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1220, 1] ;Auto
type = Helper
trigger1 = AnimElem = 4 ;Time = 0
helpertype = normal
name = "Auto"
ID = 1221
postype = left
pos = ifelse(facing = 1, 0, 319), 0
facing = facing
stateno = 1221
ownpal = 1
ignorehitpause = 1

[State 1220, 5]
type = PlaySnd
trigger1 = Time = 0;1
value = 3, 4
channel = 0

[State 1220, 6] ;auto voice
type = PlaySnd
trigger1 = AnimElem = 4 ;Time = 5
value = 18, 24 ;18, 11

[State 1220, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Auto: Helper
[Statedef 1221]
type = A
movetype = I
ctrl = 0
anim = 1201
velset = 0, 0
sprpriority = 4

[State 1221, 0]
type = PlayerPush
trigger1 = 1
value = 1

[State 1221, 2]
type = ChangeAnim
trigger1 = Anim = 1201
trigger1 = Time = 50
value = 1202

[State 1221, 2]
type = ChangeAnim
trigger1 = Anim = 1202
trigger1 = AnimTime = 0
value = 1201

[State 1221, 1]
type = Helper
trigger1 = NumHelper(1224) < 1
trigger1 = !Time
helpertype = normal
name = "Helix"
ID = 1224
pos = 0, 0 ;ifelse((Anim = 1201 && AnimElem = 1), 2, ifelse((Anim = 1201 && AnimElem = 2), 1, 0)), 0 ;0, 0
postype = p1
;bindtime = -1
;facing = facing
stateno = 1224
ownpal = 0

[State 1221, 1]
type = Helper
trigger1 = Anim = 1202
trigger1 = AnimElem = 1, = 2
helpertype = normal
name = "Missel"
ID = 1222
pos = 62, -114
postype = p1
;bindtime = -1
;facing = 1
stateno = 1222
ownpal = 1

;[State 1221, 1]
;type = PosSet
;trigger1 = !Time
;y = ceil(root, pos y) - 100

[State 1221, 2]
type = PosAdd
trigger1 = !Time
x = -60
y = -132

[State 1221, 2]
type = VelSet
trigger1 = Time = 0
x = 2.7
;y = 1.7

[State 1221, 2]
type = VelAdd
trigger1 = Time >= 0 && Time < 50
;x = .5
y = .1

[State 1221, 2]
type = VelSet
trigger1 = Time = 50 ;ScreenPos Y > 200;215
x = .1
y = .1

[State 1221, 2]
type = VelSet
;trigger1 = Anim = 1202 ;1201
trigger1 = Time = 80
x = -2.9
y = -5.1

[State 1221, 2]
type = VelAdd
trigger1 = Vel Y < -1.5
trigger1 = Time >= 80
;x = -2.5
y = .1

[State 1221, 6] ;shoot
type = PlaySnd
trigger1 = Anim = 1202
trigger1 = AnimElem = 1, = 2
value = 45, 9

[State 1221, 7]
type = HitBy
trigger1 = 1
value = SCA, AA,AP,AT

[State 1221, 8]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AP,AT
stateno = 1225
time = -1

[State 1221, 3]
type = DestroySelf
trigger1 = ScreenPos Y < 15
trigger2 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Missel: Helper
[Statedef 1222]
type    = A
movetype= A
anim = 1203
sprpriority = 5

[state 1222, 1]
type = VelSet
trigger1 = Time = 0
x = 5
y = ifelse(enemy, Pos Y < 0, ifelse(enemy, Pos Y < -100, -1, 0), 1)

[state 1222, 1.1]
type = VelAdd
trigger1 = Time >= 0
y = ifelse(enemy, Pos Y < 0, ifelse(enemy, Pos Y < -100, -.1, 0), .1)

[State 1222, 2.1]
type = Explod
trigger1 = !Time
anim = 9041
postype = p1
pos = -5, -12
velocity = 0, 0
accel = 0, 0
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1222, 2.2]
type = Explod
trigger1 = !Time
anim = 9041
postype = p1
pos = -15, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1222, 2.3]
type = Explod
trigger1 = !Time
anim = 9041
postype = p1
pos = -5, 12
velocity = 0, 0
accel = 0, 0
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1222, 2.3]
type = Explod
trigger1 = !Time
anim = 9041
postype = p1
pos = -28, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1222, 1]
type = Explod
trigger1 = Time % 4 = 0
anim = 9040
postype = p1
pos = -30, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1222, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, SP
damage = 80,9
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 0, 9;10, 10
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013)
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 5 ;S18, 4
guardsound = S6, 0 ;S16, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -4, -5
airguard.velocity = -1
air.type = High
air.velocity = -3, -4
air.hittime = 25
fall = 1
air.fall = 1

[State 1222, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, SP
damage = 85, 7
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 5, Hit
sprpriority = 3
pausetime = 0, 10 ;9, 9
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8013)
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S45, 5 ;S18, 4
guardsound = S6, 0 ;16, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -5, -6
airguard.velocity = -5
air.type = High
air.velocity = -4, -5
air.hittime = 25
fall = 1
air.fall = 1

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8013)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 1222, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 1222, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 1223
time = -1

[State 1222, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105
value = 1223
ignorehitpause = 1

;---------------------------------------------------------------------------
; Missel: Helper (end)
[Statedef 1223]
type = A
movetype = I
ctrl = 0
anim = 9292
velset = 0, 0
sprpriority = 5

[State 1223, 0]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

;[State 1223, 1]
;type = PlaySnd
;trigger1 = !Time
;value = 18, 4
;ignorehitpause = 1
;supermovetime = 99999

[State 1223, 2]
type = DestroySelf
;trigger1 = Time > 10
;trigger1 = P2MoveType != H
;trigger1 = NumTarget < 1
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Helix: Helper
[Statedef 1224]
type    = A
movetype= I
anim = 1204
sprpriority = 5

[State 1224, 0]
type = BindToParent
trigger1 = (parent, Anim = 1201) && (parent, AnimElem != 1) && (parent, AnimElem != 2)
trigger2 = parent, Anim = 1202
pos = 0, 0 ;ifelse((parent, Anim = 1201 && parent, AnimElem = 1), 2, ifelse((parent, Anim = 1201 && parent, AnimElem = 2), 1, 0)), 0 ;0, 0
time = -1;1
ignorehitpause = 1

[State 1224, 0]
type = BindToParent
trigger1 = (parent, Anim = 1201) && (parent, AnimElem = 2)
pos = 1, 0
time = -1
ignorehitpause = 1

[State 1224, 0]
type = BindToParent
trigger1 = (parent, Anim = 1201) && (parent, AnimElem = 1)
pos = 2, 0
time = -1
ignorehitpause = 1

[State 1224, 1]
type = DestroySelf
trigger1 = NumHelper(1221) < 1
trigger2 = parent, MoveType = H


;========================< PUNCH ZERO COUNTER >=============================
[Statedef 2900]
type = S
physics = N
movetype = A
anim = 2900
ctrl = 0
velset = 0, 0
sprpriority = 1
poweradd = 0

[State 2900, NHB]
type = nothitby
trigger1 = animelemtime(3) < 0
value = SCA
time = 1
ignorehitpause = 1

[State 220, Snd]
type=playsnd
trigger1= !time
value= 4, ifelse(random<500, 1, 2)
channel=0

[State 220, Snd]
type=playsnd
trigger1= !time
value=1,2
channel=1

[State 2900, Hit]
type = hitdef
trigger1 = !var(16) && var(15) < 1
trigger1 = animelem = 3
attr = S, SA
hitflag = MAF
guardflag = M
priority = 4, Hit
damage = ceil(ifelse(fvar(11) * 42 < 7, 7, fvar(11) * 42)), 7
getpower = 0, 0
givepower = 36, 36
pausetime = 12, 12
guard.pausetime = 12, 12
animtype = Diagup
air.animtype = Diagup
fall.animtype = Diagup
ground.type = Low
air.type = Low
ground.hittime = 18
ground.slidetime = 18
guard.hittime = 18
air.hittime = 120
ground.velocity = -5.54, -5.25
ground.cornerpush.veloff = 0
guard.velocity = -10.52
guard.cornerpush.veloff = 0
air.velocity = -5.54, -5.25
air.cornerpush.veloff = 0
yaccel = 0.58
fall = 1
fall.recover = 1
fall.recovertime = 120;24
forcestand = 1
hitsound = -1 + 0 * (var(31) := 2)
guardsound = -1 + 0 * (var(32) := 0)
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0*(var(35):=63), var(36):=-69
palfx.time = 12 * var(9)
palfx.add = 255, 255, 255
palfx.sinadd = -255, -255, -255, 48
envshake.time = 14
envshake.ampl = 4
envshake.freq = 120
kill = 0

[State 2900, Type]
type = statetypeset
trigger1 = animelemtime(5) >= 0
movetype = I

[State 2900, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;========================< KICK ZERO COUNTER >=============================
[Statedef 2910]
type = S
physics = N
movetype = A
anim = 2910
ctrl = 0
velset = 0, 0
sprpriority = 1
poweradd = 0

[State 2910, NHB]
type = nothitby
trigger1 = animelemtime(3) < 0
value = SCA
time = 1
ignorehitpause = 1

[State 450, Snd]
type=playsnd
trigger1= animelem=2
value= 4, ifelse(random<500, 1, 2)
channel=0

[State 450, Snd]
type=playsnd
trigger1= animelem=2
value=1,5
channel=1

[State 2910, Hit]
type = hitdef
trigger1 = !var(16) && var(15) < 1
trigger1 = animelem = 3
attr = C, SA
hitflag = MAF
guardflag = M
priority = 4, Hit
damage = ceil(ifelse(fvar(11) * 42 < 7, 7, fvar(11) * 42)), 7
getpower = 0, 0
givepower = 36, 36
pausetime = 12, 12
guard.pausetime = 12, 12
animtype = Diagup
air.animtype = Diagup
fall.animtype = Diagup
ground.type = Low
air.type = Low
ground.hittime = 18
ground.slidetime = 18
guard.hittime = 18
air.hittime = 120
ground.velocity = -5.54, -5.25
ground.cornerpush.veloff = 0
guard.velocity = -10.52
guard.cornerpush.veloff = 0
air.velocity = -5.54, -5.25
air.cornerpush.veloff = 0
yaccel = 0.58
fall = 1
fall.recover = 1
fall.recovertime = 120;24
forcestand = 1
hitsound = -1 + 0 * (var(31) := 5)
guardsound = -1 + 0 * (var(32) := 0)
sparkno = -1 + 0 * (var(33) := 8013)
guard.sparkno = -1 + 0 * (var(34) := 8001)
sparkxy = -10 + 0*(var(35):=83), var(36):=-10
palfx.time = 12 * var(9)
palfx.add = 255, 255, 255
palfx.sinadd = -255, -255, -255, 48
envshake.time = 14
envshake.ampl = 4
envshake.freq = 120
kill = 0

[State 2910, Type]
type = statetypeset
trigger1 = animelemtime(4) >= 0
movetype = I

[State 2910, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Hyper Megaman
[Statedef 3000]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 7                      
velset = 0,0                     
ctrl = 0   
poweradd = -3000                      
;anim = ifelse(Pos Y >= 0, 3000, 3001)                       
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = s5,9
volume = 255
channel = 7
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = s5,10
volume = 255
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
channel = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = s5,11
volume = 255
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
channel = 8

[State 0, VarAdd]
type = VarAdd
triggerall = var(46) > 0
trigger1 = time = 0
v = 46    ;fv =
value = -24
;ignorehitpause =
;persistent =

[State 3000, ChangeAnim] ;Super Armor - not repeat in hit
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = ifelse(Pos Y >= 0, 3000, 3001) 
ignorehitpause = 1

[State 3000, 1] ;Back Dust
type = Explod
trigger1 = PrevStateNo != 3950
trigger1 = Pos Y >= 0
trigger1 = Time = 2
persistent = 0
anim = 9020
postype = p1
pos = 11, 2
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 3
ownpal = 1
supermovetime = -1
removeongethit = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 3000, 3] ;Energy
type = Explod
trigger1 = PrevStateNo != 3950
trigger1 = AnimElem = 9, = 3
persistent = 0
anim = 3030
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 2
supermovetime = -1
bindtime = -1
ownpal = 1
removeongethit = 1

[State 3000, 10]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "FlipTop"
ID = 3050
postype = right
pos = 50, -100
facing = facing
;facing = 1
stateno = 3050  
supermovetime = 999999
ownpal = 0;1

;[State 3000, 11] ;FlipTop sound
;type = PlaySnd
;trigger1 = Time = 2
;value = 18, 13
;channel = 2
;supermovetime = 999999

[State 3000, 10]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "Beat"
ID = 3051
postype = left
pos = -50, -100
facing = facing
;facing = 1
stateno = 3051  
supermovetime = 999999
ownpal = 0;1

;[State 3000, 4.0] 
;type = SuperPause
;trigger1 = Time = 0;, 44]
;anim = -1
;movetime = 44
;darken = 0
;sprpriority = 3
;Time = 44

;[State 3000, 4.05] ;BG charging pal
;type = BGPalFX
;trigger1 = Time = [0,44]
;add = 30,33,80 ;Floor((30 + 40 * sin((2 * pi * (time))/17.0)) + 0.5),Floor((33 + 42 * sin((2 * pi * (time))/17.0))+0.5),Floor((60 + 60 *sin((2 * pi * (time))/17.0))+0.5)
;;mul = 152,178,229 
;time = 1

[State 3000, Superpause FX]
type = helper
trigger1 = Time = 3
helpertype = normal
stateno = 8520
ID = 8500
name = "Superpause FX"
postype = p1
pos = -5, -55
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3000, Superpause]
type = superpause
trigger1 = Time = 3
time = 40
movetime = 40
p2defmul = 1.3
unhittable = 1
anim = -1
sound = s8500,0
darken = 0
;persistent =

[State 3000, 1]
type = HitDef
trigger1 = Time = 0
attr = S, HA                     
damage = floor(50/(1+(Var(19)/5.0))), 4
getpower = 60
animtype = Up                 
guardflag = MA                  
hitflag = MAF                 
priority = 3, Hit               
pausetime = 11, 8          
guard.sparkno = -1     
sparkno = -1                   
sparkxy = -10, -74              
hitsound = S5, 5                  
guardsound = S6, 0                
ground.type = High               
ground.slidetime = 8            
ground.hittime  = 25             
ground.velocity = -4,-10            
airguard.velocity = -2, 1     
air.type = High                  
air.velocity = -3,-7           
air.hittime = 25
fall = 1

[State 3000, 10]
type = Helper
trigger1 = NumHelper(3010) < 1
trigger1 = AnimElem = 11, = 1 ;var(59) = 91 ;Time = 91
helpertype = normal
name = "Beam"
ID = 3010
pos = 117, -116
postype = p1
bindtime = -1
;facing = 1
stateno = 3010  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

[State 3000, 10]
type = Helper
trigger1 = AnimElem = 14
trigger2 = AnimElem = 22
helpertype = normal
name = "Missel 2"
ID = 3021
pos = -12, -134
postype = p1
bindtime = -1
;facing = 1
stateno = 3021  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

[State 3000, 10]
type = Helper
trigger1 = AnimElem = 14
trigger2 = AnimElem = 22
helpertype = normal
name = "Missel 1"
ID = 3020
pos = -24, -132
postype = p1
bindtime = -1
;facing = 1
stateno = 3020  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

[State 3000, 10]
type = Helper
trigger1 = AnimElem = 14
trigger2 = AnimElem = 22
helpertype = normal
name = "Missel 4"
ID = 3023
pos = 38, -132
postype = p1
bindtime = -1
;facing = 1
stateno = 3023  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

[State 3000, 10]
type = Helper
trigger1 = AnimElem = 14
trigger2 = AnimElem = 22
helpertype = normal
name = "Missel 3"
ID = 3022
pos = 20, -133
postype = p1
bindtime = -1
;facing = 1
stateno = 3022  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

[State 3000, 10]
type = Helper
trigger1 = Time = 115
trigger2 = Time = 136
helpertype = normal
name = "Beat Power"
ID = 3011
pos = -3, -92
postype = p1
bindtime = -1
;facing = 1
stateno = 3011  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

[State 3000, 10]
type = Helper
trigger1 = Time = 107
trigger2 = Time = 129
helpertype = normal
name = "FlipTop Power"
ID = 3013
pos = 47, -45
postype = p1
bindtime = -1
;facing = 1
stateno = 3013  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

[State 3000, 10]
type = Helper
trigger1 = Time = 121
trigger2 = Time = 143
helpertype = normal
name = "Rush Power"
ID = 3015
pos = -36, -41
postype = p1
bindtime = -1
;facing = 1
stateno = 3015  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3000, 2]
type = PalFX
trigger1 = Time = [16, 19] 
trigger2 = Time = [195, 196] 
add = 60,60,60 ;20,20,95
time = 1

[State 3000, 3]
type = PalFX
trigger1 = Time = [20, 22]
trigger2 = Time = [192, 194]  
add = 100,100,100 ;50,50,155
time = 1

[State 3000, 4]
type = PalFX
trigger1 = Time = [23, 26] 
trigger2 = Time = [190, 191] 
add = 150,150,150 ;80,80,256
time = 1

[State 3000, 5]
type = PalFX
trigger1 = Time = [27, 29] 
trigger2 = Time = [187, 189] 
add = 200,200,200 ;120,120,255
time = 1

[State 3000, 5]
type = PalFX
trigger1 = Time = [30, 58]
trigger2 = Time = [178, 186]  
add = 256,256,256
time = 1

[State 3000] 
type = PalFX 
trigger1 = Time = [59, 177] ;90
time = 1 
add = Floor((100 + (-100)* sin((2 * pi * (time))/20.0)) + 0.5),Floor((100 + (-100)* sin((2 * pi * (time))/20.0))+0.5),Floor((100 + (-100)*sin((2 * pi * (time))/20.0))+0.5)
mul = 156,156,156
ignorehitpause = 1

[State 3000, 19]
type = Width
trigger1 = Time = [20, 160]
value = 30, 40;25, 5

[State 3000, 20]
type = PlayerPush
trigger1 = var(59) = [60, 170] 
value = 1

[State 3000, 20]
type = VarSet
trigger1 = 1
v = 17
value = 0

[State 3000, 21]
type = EnvShake
trigger1 = Time = 91
time = 85
ampl = -2
freq = 70
phase = 30
supermovetime = 1000
ignorehitpause = 1

[State 3000, 0] ;turn in finish pose
type = Turn
trigger1 = Anim = 53
trigger1 = P2Dist X < -5

[State 3000, 1] 
type = StateTypeSet
trigger1 = Pos Y < 0 
statetype = A
physics = N

[State 3000, 1] 
type = VelSet
trigger1 = Anim = 53
trigger1 = AnimElem = 1, = 0
;trigger1 = Time = 235 
x = -2
y = -2.7 ;-2.5

[State 3000, 1.2] 
type = VelAdd
trigger1 = Anim = 53
;trigger1 = Time >= 235 
y = const(movement.yaccel)

[State 3000, 10]
type = ChangeAnim
trigger1 = Anim = 3001
trigger1 = AnimTime = 0 
value = 53

[State 3000, 11]
type = ChangeState
trigger1 = Anim = 53
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 
ctrl = 1

[State 3000, 26]
type = ChangeState
trigger1 = Anim = 3000
trigger1 = AnimTime = 0
value = 0 
ctrl = 1

;---------------------------------------------------------------------------
; Hyper Megaman: Helper
[Statedef 3010]
type    = A
movetype= A
anim = 33010
sprpriority = 6

;[State 3010, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3010, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3010, 1]
type = BindToRoot
trigger1 = 1
pos = 117, -116
time = -1
ignorehitpause = 1

[State 3010, 2]
type = HitDef
trigger1 = Time % 3 = 0 && Time <= 49 ;72
attr = A, HP                     
damage = 14, 5                 
animtype = Heavy                 
guardflag = MA                  
hitflag = MAFP                  
priority = 6, Hit               
sprpriority = 6
pausetime = 0, 2
guard.sparkno = -1;S8200
sparkno = -1 ;Sifelse((Random < 330),8500,ifelse((Random = [330,660]),8501,8502)) ;S8500
sparkxy = 0,0 ;ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), 0 ;(thanks GGN)
hitsound = S18, 1                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 50;57
ground.hittime  = 60             
ground.velocity = -5
airguard.velocity = -1     
air.type = Low                  
air.velocity = -5, -1           
air.hittime = 60

[State 3010, 3]
type = HitDef
trigger1 = Time > 49
attr = A, HP                     
damage = 14, 8                 
animtype = Heavy                 
guardflag = MA                  
hitflag = MAFP                  
priority = 7, Hit               
sprpriority = 6
pausetime = 0, 2 
guard.sparkno = -1;S8200  
sparkno = -1;S8500                      
sparkxy = 0, 0              
hitsound = S18, 1                  
guardsound = S6, 0                
ground.type = High               
ground.slidetime = 50
ground.hittime  = 60             
ground.velocity = -26, -7
airguard.velocity = -5
air.type = High                  
air.velocity = -28, -9           
air.hittime = 60
fall = 1
air.fall = 1

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3010, 6]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3010, 9]
type = DestroySelf
trigger1 = AnimTime = 0 ;Time = 86
trigger2 = root, MoveType = H
trigger2 = root, StateNo != 3950
trigger3 = root, StateNo = 3000
trigger3 = root, var(59) = 146 ;Time = 146

;---------------------------------------------------------------------------
; Beat Fireball: Helper
[Statedef 3011]
type    = A
movetype= A
anim = 33011
sprpriority = 3

;[State 3011, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3011, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3011, 1]
type = BindToRoot
trigger1 = Time = 0
pos = -3, -92
time = 2
ignorehitpause = 1

[state 3011, 1]
type = VelSet
trigger1 = Time > 1
x = 12

[State 3011, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP                     
damage = floor(30/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1            
sparkno = -1 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 7                 
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 55             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 55       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 3011, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP                     
damage = floor(35/(1+(root,Var(19)/5.0))), 7
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;3, 3 
guard.sparkno = -1            
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 7                 
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 20
ground.hittime  = 55             
ground.velocity = -4
airguard.velocity = -5
air.type = Low                 
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))           
air.hittime = 55   
fall = 0
air.fall = 1

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3011, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3011, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3012
time = -1

[State 3011, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 
value = 3012
ignorehitpause = 1

;---------------------------------------------------------------------------
; Beat Fireball: Helper (end)
[Statedef 3012]
type = A
movetype = I
ctrl = 0
anim = 33012
velset = 0, 0
sprpriority = 3

;[State 3012, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3012, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3012, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; FlipTop Fireball: Helper
[Statedef 3013]
type    = A
movetype= A
anim = 33013
sprpriority = 3

;[State 3013, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3013, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3013, 1]
type = BindToRoot
trigger1 = Time = 0
pos = 47, -45
time = 2
ignorehitpause = 1

[state 3013, 1]
type = VelSet
trigger1 = Time > 1
x = 12

[State 3013, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP                     
damage = floor(30/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1            
sparkno = -1 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 7                 
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 55             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 55       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 3013, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP                     
damage = floor(35/(1+(root,Var(19)/5.0))), 7
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;3, 3 
guard.sparkno = -1            
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 7                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 20
ground.hittime  = 55             
ground.velocity = -4
airguard.velocity = -5
air.type = Low                 
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))           
air.hittime = 55   
fall = 0
air.fall = 1

[State 3013, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3013, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3014
time = -1

[State 3013, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 
value = 3014
ignorehitpause = 1

;---------------------------------------------------------------------------
; FlipTop Fireball: Helper (end)
[Statedef 3014]
type = A
movetype = I
ctrl = 0
anim = 33014
velset = 0, 0
sprpriority = 3

;[State 3014, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3014, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3014, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Rush Fireball: Helper
[Statedef 3015]
type    = A
movetype= A
anim = 33015
sprpriority = 3

;[State 3015, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3015, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3015, 1]
type = BindToRoot
trigger1 = Time = 0
pos = -36, -41
time = 3
ignorehitpause = 1

[state 3015, 1]
type = VelSet
trigger1 = Time > 3
x = 12
y = 5

[state 3015, 1]
type = VelSet
trigger1 = ScreenPos Y > 220 
y = 0

[State 3015, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP                     
damage = floor(30/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1            
sparkno = -1 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 7                 
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 55             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 55       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 3015, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP                     
damage = floor(35/(1+(root,Var(19)/5.0))), 7
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;3, 3 
guard.sparkno = -1            
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 7                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 20
ground.hittime  = 55             
ground.velocity = -4
airguard.velocity = -5
air.type = Low                 
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))           
air.hittime = 55   
fall = 0
air.fall = 1

[State 3015, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3015, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3016
time = -1

[State 3015, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 
value = 3016
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rush Fireball: Helper (end)
[Statedef 3016]
type = A
movetype = I
ctrl = 0
anim = 33016
velset = 0, 0
sprpriority = 3

;[State 3016, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3016, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3016, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Missel 1: Helper
[Statedef 3020]
type    = A
movetype= A
anim = 3020
sprpriority = 4

[State 3020, 1] ;Missel Fire
type = Explod
trigger1 = NumExplod(3024) < 1
trigger1 = !Time
persistent = 0
ID = 3024
anim = 3024
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
supermovetime = -1
bindtime = -1
ownpal = 1
removeongethit = 1

[State 3020, 2] ;Remove Missel Fire
type = RemoveExplod
trigger1 = MoveContact || BackEdgeDist < -104 || FrontEdgeDist < -104  
ID = 3024

[state 3020, 1]
type = VelSet
trigger1 = AnimElem = 1
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 17
x = 6
y = 0

[state 3020, 1]
type = VelSet
trigger1 = AnimElem = 2
trigger2 = AnimElem = 8
trigger3 = AnimElem = 10
trigger4 = AnimElem = 12
trigger5 = AnimElem = 14
trigger6 = AnimElem = 16
x = 6
y = -3

[state 3020, 1]
type = VelSet
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 11
trigger4 = AnimElem = 15
x = 6
y = -6

[state 3020, 1]
type = VelSet
trigger1 = AnimElem = 4
trigger2 = AnimElem = 6
x = 3
y = -6

[state 3020, 1]
type = VelSet
trigger1 = AnimElem = 5
x = 0
y = -6

[State 3020, 2]
type = HitDef
trigger1 = Time = 0 
attr = A, HP                     
damage = floor(20/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1            
sparkno = -1
sparkxy = 0, 0              
hitsound = S45, 5                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 55             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 55       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3020, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3020, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3024
time = -1

[State 3020, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 
value = 3024
ignorehitpause = 1

;---------------------------------------------------------------------------
; Missel 2: Helper
[Statedef 3021]
type    = A
movetype= A
anim = 3021
sprpriority = 4

[State 3021, 1] ;Missel Fire
type = Explod
trigger1 = NumExplod(3025) < 1
trigger1 = !Time
persistent = 0
ID = 3025
anim = 3025
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
supermovetime = -1
bindtime = -1
ownpal = 1
removeongethit = 1

[State 3021, 2] ;Remove Missel Fire
type = RemoveExplod
trigger1 = MoveContact || BackEdgeDist < -104 || FrontEdgeDist < -104  
ID = 3025

[state 3021, 1]
type = VelSet
trigger1 = AnimElem = 1
x = -6
y = 6

[state 3021, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 0
y = 6

[state 3021, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 6
y = 6

[state 3021, 1]
type = VelSet
trigger1 = AnimElem = 4
x = 6
y = 3

[state 3021, 1]
type = VelSet
trigger1 = AnimElem = 5
x = 6
y = 0

[State 3021, 2]
type = HitDef
trigger1 = Time = 0 
attr = A, HP                     
damage = floor(20/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1            
sparkno = -1
sparkxy = 0, 0              
hitsound = S45, 5                 
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 55             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 55       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3021, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3021, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3024
time = -1

[State 3021, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 
value = 3024
ignorehitpause = 1

;---------------------------------------------------------------------------
; Missel 3: Helper
[Statedef 3022]
type    = A
movetype= A
anim = 3022
sprpriority = 4

[State 3022, 1] ;Missel Fire
type = Explod
trigger1 = NumExplod(3026) < 1
trigger1 = !Time
persistent = 0
ID = 3026
anim = 3026
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
supermovetime = -1
bindtime = -1
ownpal = 1
removeongethit = 1

[State 3022, 2] ;Remove Missel Fire
type = RemoveExplod
trigger1 = MoveContact || BackEdgeDist < -104 || FrontEdgeDist < -104  
ID = 3026

[state 3022, 1]
type = VelSet
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
x = 6
y = -3

[state 3022, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 6
y = -6

[state 3022, 1]
type = VelSet
trigger1 = AnimElem = 4
x = 6
y = 0

[State 3022, 2]
type = HitDef
trigger1 = Time = 0 
attr = A, HP                     
damage = floor(20/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1            
sparkno = -1 
sparkxy = 0, 0              
hitsound = S45, 5                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 55             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 55       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3022, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3022, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3024
time = -1

[State 3022, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 
value = 3024
ignorehitpause = 1

;---------------------------------------------------------------------------
; Missel 4: Helper
[Statedef 3023]
type    = A
movetype= A
anim = 3023
sprpriority = 4

[State 3023, 1] ;Missel Fire
type = Explod
trigger1 = NumExplod(3027) < 1
trigger1 = !Time
persistent = 0
ID = 3027
anim = 3027
postype = p1
pos = 0, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
supermovetime = -1
bindtime = -1
ownpal = 1
removeongethit = 1

[State 3023, 2] ;Remove Missel Fire
type = RemoveExplod
trigger1 = MoveContact || BackEdgeDist < -104 || FrontEdgeDist < -104  
ID = 3027

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 1
x = 6
y = 3

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 2
x = 6
y = 6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 3
x = 3
y = 6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 4
x = 0
y = 6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 5
x = -3
y = 6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 6
x = -6
y = 6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 7
x = -6
y = 0

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 8
x = -6
y = -3

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 9
x = -6
y = -6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 10
x = -3
y = -6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 11
x = 0
y = -6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 12
x = 6
y = -6

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 13
x = 6
y = -3

[state 3023, 1]
type = VelSet
trigger1 = AnimElem = 14
x = 6
y = 0

[State 3023, 2]
type = HitDef
trigger1 = Time = 0 
attr = A, HP                     
damage = floor(20/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1            
sparkno = -1
sparkxy = 0, 0              
hitsound = S45, 5                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 55             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 55       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3023, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3023, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3024
time = -1

[State 3023, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 
value = 3024
ignorehitpause = 1

;---------------------------------------------------------------------------
; Missels: Helper (end)
[Statedef 3024]
type = A
movetype = I
ctrl = 0
anim = 9290
velset = 0, 0
sprpriority = 3

[State 3024, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; FlipTop: Helper 
[Statedef 3050]
type = A
movetype = I
ctrl = 0
anim = 3050
velset = 0,0 ;-3.5, 1.5
sprpriority = 3

[State 3050, 1]
type = ChangeAnim
trigger1 = root, AnimElem = 6
value = 9930

[State 3050, 2]
type = ChangeAnim
trigger1 = (root, Anim = 3000 && root, AnimElem = 35) || (root, Anim = 53 && root, AnimElem = 1)
value = 3050

;x = 3
;para time = 14
;volta time = 41

[State 3050, 0]
type = VelSet
trigger1 = (root, var(59) >= 0) && (root, var(59) < 15) ;(root, Time >= 0) && (root, Time < 15) 
x = -4

[State 3050, 0]
type = VelSet
trigger1 = (root, var(59) >= 15) && (root, var(59) < 42) ;(root, Time >= 15) && (root, Time < 42) 
x = 0

[State 3050, 0]
type = VelSet
trigger1 = (root, var(59) = 42) ;(root, Time = 42) ;&& (root, Time < 80) 
x = RootDist X/10
y = RootDist Y/10
persistent = 0

[State 3050, 3]
type = VelSet
;trigger1 = (root, var(59) < 80) ;(root, Time < 80) ;&& (root, Time < 170)  
trigger1 = RootDist X = [-10, 10]
x = 0
;persistent = 0

[State 3050, 4]
type = VelSet
;trigger1 = (root, var(59) < 80) ;(root, Time < 80) ;&& (root, Time < 170)
trigger1 = RootDist Y = [10, 30]
y = 0
;persistent = 0

[State 3050, 5]
type = ChangeState
trigger1 = (root, Anim = 3000 && root, AnimElem = 35) || (root, Anim = 53 && root, AnimElem = 1)
trigger2 = root, MoveType = H
trigger2 = root, StateNo != 3950
value = 3052

;---------------------------------------------------------------------------
; FlipTop: Helper (end)
[Statedef 3052]
type = A
movetype = I
ctrl = 0
;anim = 3250
velset = 0,0 ;3.5, 1.5
sprpriority = 3

[State 3052, 5]
type = VelSet
trigger1 = !Time ;root, Time > 180 ;AnimElem = 35
x = -6.5
y = -2.5

[State 3052, 6]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Beat: Helper 
[Statedef 3051]
type = A
movetype = I
ctrl = 0
anim = 3250
velset = 0,0 ;3.5, 1.5
sprpriority = 3

[State 3051, 1]
type = ChangeAnim
trigger1 = root, AnimElem = 6
value = 9930

[State 3051, 2]
type = ChangeAnim
trigger1 = (root, Anim = 3000 && root, AnimElem = 35) || (root, Anim = 53 && root, AnimElem = 1)
value = 3250

[State 3051, 0]
type = VelSet
trigger1 = (root, var(59) >= 0) && (root, var(59) < 15) ;(root, Time >= 0) && (root, Time < 15) 
x = 4

[State 3051, 0]
type = VelSet
trigger1 = (root, var(59) >= 15) && (root, var(59) < 42) ;(root, Time >= 15) && (root, Time < 42) 
x = 0

[State 3051, 0]
type = VelSet
trigger1 = (root, var(59) = 42) ;(root, Time = 42) ;&& (root, Time < 150) 
x = RootDist X /10 ;7 (by P.O.T.S.)
y = RootDist Y /10 ;6.5
persistent = 0

[State 3051, 3]
type = VelSet
;;trigger1 = (root, var(59) < 80) ;(root, Time < 80) ;&& (root, Time < 170)
trigger1 = RootDist X = [-10, 10]
x = 0
;persistent = 0

[State 3051, 4]
type = VelSet
;;trigger1 = (root, var(59) < 80) ;(root, Time < 80) ;&& (root, Time < 170)
trigger1 = RootDist Y = [10, 40]
y = 0
;persistent = 0

[State 3051, 5]
type = ChangeState ;VelSet
trigger1 = (root, Anim = 3000 && root, AnimElem = 35) || (root, Anim = 53 && root, AnimElem = 1)
trigger2 = root, MoveType = H
trigger2 = root, StateNo != 3950
value = 3053

;---------------------------------------------------------------------------
; Beat: Helper (end)
[Statedef 3053]
type = A
movetype = I
ctrl = 0
;anim = 3250
velset = 0,0 ;3.5, 1.5
sprpriority = 3

[State 3053, 5]
type = VelSet
trigger1 = !Time ;root, Time > 180 ;AnimElem = 35
x = 6.5
y = -2.5

[State 3053, 6]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105

;---------------------------------------------------------------------------
; Hyper Megaman - (move end) -NOT USED-
[Statedef 3001]
type    = S
physics = S
velset = 0,0
ctrl = 0
anim = 3001
sprpriority = 2

[State 3001, 1]
type = VarSet
trigger1 = 1
v = 50
value = 1

[State 3001, 2] ;code by SodonHID, adapted 
type = ScreenBound
trigger1 = P2MoveType = H ;|| BackEdgeBodyDist < -1
;;;trigger1 = Helper(3010), MoveHit
;trigger1 = NumHelper(3010) > 0
;trigger1 = Helper(3010), MoveHit
trigger2 = NumTarget > 0
value = 0
movecamera = 0,0

[State 3001, 3] ;code by SodonHID, adapted 
type = ChangeState
triggerall = AnimTime = 0
trigger1 = P2MoveType = H
;;;trigger1 = BackEdgeBodyDist <= -1
;triggerall = NumHelper(3010) > 0
;triggerall = Helper(3010), MoveHit
trigger2 = NumTarget > 0
value = 9000
ctrl = 0

[State 3001, 4] ;code by SodonHID, adapted 
type = ChangeState
triggerall = AnimTime = 0
trigger1 = P2MoveType != H
;;;trigger1 = BackEdgeBodyDist > -1
;triggerall = NumHelper(3010) > 0
;triggerall = Helper(3010), MoveHit = 0
trigger2 = NumTarget < 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Rush Drill
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 7
velset = 0,0
ctrl = 0
anim = 3100
poweradd = -2000
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s64,1
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 45
value = s5,8
volume = 255
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
channel = 10

[State 3100, 1] ;Back Dust
type = Explod
trigger1 = Time = 2
persistent = 0
anim = 9020
postype = p1
pos = 11, 2
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
supermovetime = -1
removeongethit = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

;[State 3100, 4.05] ;BG charging pal
;type = BGPalFX
;trigger1 = Time = [0,44]
;add = 30,33,80 ;Floor((30 + 40 * sin((2 * pi * (time))/17.0)) + 0.5),Floor((33 + 42 * sin((2 * pi * (time))/17.0))+0.5),Floor((60 + 60 *sin((2 * pi * (time))/17.0))+0.5)
;;mul = 152,178,229
;time = 1

[State 3000, Superpause FX]
type = helper
trigger1 = Time = 3
stateno = 8510
ID = 8500
name = "Superpause FX"
postype = p1
pos = 0, -50
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3000, Superpause]
type = superpause
trigger1 = Time = 3
time = 40
movetime = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s8500,0
darken = 0

;[State 3100, 10] ;Rush sound
;type = PlaySnd
;trigger1 = Time = 10
;value = 18, 16
;channel = 2
;supermovetime = 999999

[State 3100, 2]
type = PalFX
trigger1 = Time = [16, 19]
add = 60,60,60 ;20,20,95
time = 1

[State 3100, 3]
type = PalFX
trigger1 = Time = [20, 22]
add = 100,100,100 ;50,50,155
time = 1

[State 3100, 4]
type = PalFX
trigger1 = Time = [23, 26]
add = 150,150,150 ;80,80,256
time = 1

[State 3100, 5]
type = PalFX
trigger1 = Time = [27, 29]
add = 200,200,200 ;120,120,255
time = 1

[State 3100, 5]
type = PalFX
trigger1 = Time = [30, 58]
add = 256,256,256
time = 1

[State 3100, 19]
type = Width
trigger1 = Time = [20, 160]
value = 25, 5

[State 3100, 20]
type = VarSet
trigger1 = 1
v = 17
value = 1

;[State 3100, 21]
;type = EnvShake
;trigger1 = Time = 91
;time = 85
;ampl = -2
;freq = 70
;phase = 30
;supermovetime = 1000
;ignorehitpause = 1

[State 3100, 26]
type = ChangeState
trigger1 = AnimTime = 0
value = 3101

;---------------------------------------------------------------------------
; Rush Drill - stand
[Statedef 3101]
type    = S
movetype= A
physics = S
juggle  = 7
velset = 0,0
ctrl = 0
;anim = 3190 ;9830 ;3102
sprpriority = 2

[State 3101, ChangeAnim] ;Super Armor - not repeat in hit
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3190
ignorehitpause = 1

;[State 3101, CtrlSet];Super Armor
;type = CtrlSet
;trigger1 = PrevStateNo = 3950
;value = 1

[State 3101, 0] ;set pos y = 5
type = VarSet
trigger1 = PrevStateNo = 3105
trigger1 = Time = 0
v = 42
value = 40

[State 3101, 0]
type = RemoveExplod
trigger1 = !Time
ID = 3150

;[State 3101, 0]
;type = PosSet
;;trigger1 = var(45) < 182
;trigger1 = PrevStateNo = 3105
;trigger1 = !Time
;y = 0

[State 3101, 1]
type = StateTypeSet
trigger1 = Pos Y < 0
statetype = A
physics = N

[State 3101, 2]
type = StateTypeSet
trigger1 = Pos Y >= 0
statetype = S
physics = S

;[State 3101, 1]
;type = ChangeAnim
;trigger1 = PrevStateNo != 3105
;trigger1 = Anim != 3102
;trigger1 = !Time
;value = 3102

;[State 3101, 1]
;type = ChangeAnim
;trigger1 = PrevStateNo = 3105
;trigger1 = !Time
;value = 3105

;[State 3101, 1]
;type = ChangeAnim
;trigger1 = Anim = 3105
;trigger1 = AnimTime = 0
;value = 3102

[State 3101, 1] ;walk fwd
type = ChangeState
trigger1 = Anim != 3101 && Anim != 53
trigger1 = Time >= 3
trigger1 = command = "holdfwd"
value = 3102
ignorehitpause = 1

[State 3101, 1] ;walk back
type = ChangeState
trigger1 = Anim != 3101 && Anim != 53
trigger1 = Time >= 3
trigger1 = command = "holdback"
value = 3103
ignorehitpause = 1

[State 3101, 1] ;jump
type = ChangeState
trigger1 = Anim != 3101 && Anim != 53
trigger1 = Time >= 3
trigger1 = command = "holdup"
value = 3104
ignorehitpause = 1

[State 3101, 1] ;turn
type = ChangeState
trigger1 = Anim != 3101 && Anim != 53
trigger1 = Time >= 3
trigger1 = P2Dist X < -5
value = 3106
ignorehitpause = 1

[State 3101, 7] ;jat fwd
type = ChangeState
trigger1 = Anim != 3101 && Anim != 53
trigger1 = Time >= 3
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
value = 3107
ignorehitpause = 1

[State 3101, 3] ;wheel 1
type = Explod
trigger1 = NumExplod(3110) < 1
trigger1 = !Time ;Anim = [3102, 3104]
ID = 3110
anim = 3110
postype = p1
pos = 0, 0
facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 2
supermovetime = 999999
bindtime = -1
ownpal = 0
ignorehitpause = 1
;removeongethit = 1

[State 3101, 3.2] ;wheel 1 (turn)
type = Explod
trigger1 = NumExplod(3101) < 1
trigger1 = !Time ;Anim = [3102, 3104]
ID = 3110
anim = 3110
postype = p1
pos = 0, 0
facing = -1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 2
supermovetime = 999999
bindtime = -1
ownpal = 0
ignorehitpause = 1
;removeongethit = 1

[State 3101, 10]
type = Helper
trigger1 = NumHelper(3111) < 1
trigger1 = !Time ;Anim = [3102, 3104]
helpertype = normal
name = "Wheel 2"
ID = 3111
pos = 0, 0
postype = p1
bindtime = -1
;facing = facing
stateno = 3110
supermovetime = 999999
ownpal = 0
ignorehitpause = 1

[State 3101, 10]
type = Helper
trigger1 = NumHelper(3120) < 1
trigger1 = !Time
helpertype = normal
name = "Tank"
ID = 3120
pos = 0, 0
postype = p1
bindtime = -1
;facing = facing
stateno = 3120
supermovetime = 999999
ownpal = 0
ignorehitpause = 1

[State 3101, 2.1]
type = HitDef
trigger1 = var(45) < 151
trigger1 = Time >= 3
trigger1 = Time % 6 = 0
attr = S, HA
damage = floor(21/(1+(Var(19)/5.0))), 5 ;9, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 2, 2;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15;10
ground.hittime  = 15;20
ground.velocity = -3.0
airguard.velocity = -1
air.type = Low
air.velocity = -3.0, -1
air.hittime = 20
;fall = 1
;air.fall = 1

[State 3101, 2.2]
type = HitDef
trigger1 = var(45) >= 151
attr = S, HA
damage = floor(22/(1+(Var(19)/5.0))), 5 ;8, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 1, 0;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 0
ground.velocity = -2, -14
airguard.velocity = -1
air.type = Hard
air.velocity = -2, -14
air.hittime = 0
p2stateno = 3150
fall = -1

;154
;157
;159
;162
;164 - 182

[State 3101, 2]
type = PalFX
trigger1 = var(45) = [14, 17]
trigger2 = var(45) = [153, 155]
trigger3 = var(45) = [200, 201]
add = 60,60,60 ;20,20,95
time = 1

[State 3101, 3]
type = PalFX
trigger1 = var(45) = [10, 13]
trigger2 = var(45) = [156, 157]
trigger3 = var(45) = [197, 199]
add = 100,100,100 ;50,50,155
time = 1

[State 3101, 4]
type = PalFX
trigger1 = var(45) = [6, 9]
trigger2 = var(45) = [158, 160]
trigger3 = var(45) = [195, 196]
add = 150,150,150 ;80,80,256
time = 1

[State 3101, 5]
type = PalFX
trigger1 = var(45) = [1, 5]
trigger2 = var(45) = [161, 162]
trigger3 = var(45) = [192, 194]
add = 200,200,200 ;120,120,255
time = 1

[State 3101, 5]
type = PalFX
trigger1 = var(45) = [163, 191]  ;182
add = 256,256,256
time = 1

[State 3101, 1];stop to finish
type = VelSet
trigger1 = var(45) = 154
x = 0
y = 0

[State 3101, 19]
type = Width
trigger1 = var(45) = [20, 160] ;Time = [20, 160]
value = 20, 20

[State 3101, 20]
type = PlayerPush
trigger1 = Anim = 3190 ;var(45) = [20, 160]
value = 1

[State 3101, 20]
type = VarSet
trigger1 = 1
v = 17
value = 1

;[State 3101, 21]
;type = EnvShake
;trigger1 = Time = 91
;time = 85
;ampl = -2
;freq = 70
;phase = 30
;supermovetime = 1000
;ignorehitpause = 1

[State 3101, 1]
type = RemoveExplod
trigger1 = var(45) = 182 ;Anim = 3101
ID = 3110

;[State 3101, 9]
;type = VarSet
;trigger1 = var(45) = 3101
;v = 45
;value = 0

[State 3101, 0] ;turn in finish pose
type = Turn
trigger1 = Anim = 3101 || Anim = 53
trigger1 = P2Dist X < -5

[State 3101, 1] ;AIR
type = VelSet
trigger1 = Pos Y < 0
trigger1 = var(45) = 182
x = -2
y = -2.7 ;-2.5

[State 3101, 1.2] ;AIR
type = VelAdd
trigger1 = Pos Y < 0
trigger1 = var(45) >= 182
y = const(movement.yaccel)

;[State 3101, 9]
;type = HitBy
;trigger1 = 1
;value = SCA, HA,HP

;[State 3101, 9.1]
;type = HitBy
;trigger1 = enemy, HitCount > 2
;value = SCA, SA,SP

[State 3101, 10]
type = ChangeAnim
trigger1 = var(45) = 182 ;Time = 300
value = ifelse(Pos Y < 0, 53, 3101)

[State 3101, 11]
type = ChangeState
trigger1 = Anim = 3101
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 3101, 11]
type = ChangeState
trigger1 = Anim = 53
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 1

;---------------------------------------------------------------------------
; Rush Drill - walking fwd
[Statedef 3102]
type    = S
movetype= A
physics = S
juggle  = 7
;velset = 2,0
ctrl = 0
;anim = 3190 ;9830 ;3102
sprpriority = 2

[State 3102, ChangeAnim] ;Super Armor - not repeat in hit
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3190

;[State 3102, CtrlSet];Super Armor
;type = CtrlSet
;trigger1 = PrevStateNo = 3950
;value = 1

;[State 3102, 1]
;type = ChangeAnim
;trigger1 = Anim != 3102
;trigger1 = !Time
;value = 3102

[State 3102, 2.1]
type = HitDef
trigger1 = var(45) < 151
trigger1 = Time % 6 = 0 ;&& Time <= 49 ;72
attr = S, HA
damage = floor(21/(1+(Var(19)/5.0))), 5 ;9, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 2, 2;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -3.0
airguard.velocity = -1
air.type = Low
air.velocity = -3.0, -1
air.hittime = 20
;fall = 1
;air.fall = 1

[State 3102, 2.2]
type = HitDef
trigger1 = var(45) >= 151
attr = S, HA
damage = floor(22/(1+(Var(19)/5.0))), 5 ;8, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 1, 0;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 0
ground.velocity = -2, -14
airguard.velocity = -1
air.type = Hard
air.velocity = -2, -14
air.hittime = 0
p2stateno = 3150
fall = -1

[State 3102, 2]
type = PalFX
trigger1 = var(45) = [14, 17]
trigger2 = var(45) = [153, 155]
trigger3 = var(45) = [200, 201]
add = 60,60,60 ;20,20,95
time = 1

[State 3102, 3]
type = PalFX
trigger1 = var(45) = [10, 13]
trigger2 = var(45) = [156, 157]
trigger3 = var(45) = [197, 199]
add = 100,100,100 ;50,50,155
time = 1

[State 3102, 4]
type = PalFX
trigger1 = var(45) = [6, 9]
trigger2 = var(45) = [158, 160]
trigger3 = var(45) = [195, 196]
add = 150,150,150 ;80,80,256
time = 1

[State 3102, 5]
type = PalFX
trigger1 = var(45) = [1, 5]
trigger2 = var(45) = [161, 162]
trigger3 = var(45) = [192, 194]
add = 200,200,200 ;120,120,255
time = 1

[State 3102, 5]
type = PalFX
trigger1 = var(45) = [163, 191]  ;182
add = 256,256,256
time = 1

[State 3102, 2]
type = VelSet
trigger1 = var(45) < 154 ;1 ;Time >= 0 ;1
x = 2

[State 3102, 1];stop to finish
type = VelSet
trigger1 = var(45) >= 154
x = 0

[State 3102, 19]
type = Width
trigger1 = 1
value = 20, 20

[State 3102, 20]
type = PlayerPush
trigger1 = 1
value = 1

[State 3102, 0] ;jat fwd
type = ChangeState
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
value = 3107
ignorehitpause = 1

[State 3102, 3] ;walk back
type = ChangeState
trigger1 = command = "holdback" && command != "holdfwd"
value = 3103
ignorehitpause = 1

[State 3102, 4] ;jump
type = ChangeState
trigger1 = command = "holdup"
value = 3104
ignorehitpause = 1

[State 3102, 5] ;turn
type = ChangeState
trigger1 = P2Dist X < -5
value = 3106
ignorehitpause = 1

[State 3102, 6]
type = ChangeState
trigger1 = command != "holdfwd"
trigger2 = var(45) = 182
value = 3101
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rush Drill - walking back
[Statedef 3103]
type    = S
movetype= A
physics = S
juggle  = 7
velset = -2,0
ctrl = 0
;anim = 3190 ;9830 ;3102
sprpriority = 2

[State 3103, ChangeAnim] ;Super Armor - not repeat in hit
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3190
ignorehitpause = 1

;[State 3103, CtrlSet];Super Armor
;type = CtrlSet
;trigger1 = PrevStateNo = 3950
;value = 1

;[State 3103, 1]
;type = ChangeAnim
;trigger1 = Anim != 3102
;trigger1 = !Time
;value = 3102

[State 3103, 2.1]
type = HitDef
trigger1 = var(45) < 151
trigger1 = Time % 6 = 0
attr = S, HA
damage = floor(21/(1+(Var(19)/5.0))), 5 ;9, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 2, 2;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -3.0
airguard.velocity = -1
air.type = Low
air.velocity = -3.0, -1
air.hittime = 20
;fall = 1
;air.fall = 1

[State 3103, 2.1]
type = HitDef
trigger1 = var(45) >= 151
attr = S, HA
damage = floor(22/(1+(Var(19)/5.0))), 5 ;8, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 1, 0;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 0
ground.velocity = -2, -14
airguard.velocity = -1
air.type = Hard
air.velocity = -2, -14
air.hittime = 0
p2stateno = 3150
fall = -1

[State 3103, 2]
type = PalFX
trigger1 = var(45) = [14, 17]
trigger2 = var(45) = [153, 155]
trigger3 = var(45) = [200, 201]
add = 60,60,60 ;20,20,95
time = 1

[State 3103, 3]
type = PalFX
trigger1 = var(45) = [10, 13]
trigger2 = var(45) = [156, 157]
trigger3 = var(45) = [197, 199]
add = 100,100,100 ;50,50,155
time = 1

[State 3103, 4]
type = PalFX
trigger1 = var(45) = [6, 9]
trigger2 = var(45) = [158, 160]
trigger3 = var(45) = [195, 196]
add = 150,150,150 ;80,80,256
time = 1

[State 3103, 5]
type = PalFX
trigger1 = var(45) = [1, 5]
trigger2 = var(45) = [161, 162]
trigger3 = var(45) = [192, 194]
add = 200,200,200 ;120,120,255
time = 1

[State 3103, 5]
type = PalFX
trigger1 = var(45) = [163, 191]  ;182
add = 256,256,256
time = 1

[State 3103, 2]
type = VelSet
trigger1 = var(45) < 145 ;1
x = -2

[State 3103, 1];stop to finish
type = VelSet
trigger1 = var(45) >= 154
x = 0

[State 3103, 19]
type = Width
trigger1 = 1
value = 20, 20

[State 3103, 20]
type = PlayerPush
trigger1 = 1
value = 1

[State 3103, 0] ;jat fwd
type = ChangeState
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
value = 3107
ignorehitpause = 1

[State 3103, 3] ;walk fwd
type = ChangeState
trigger1 = command = "holdfwd" && command != "holdback"
value = 3102
ignorehitpause = 1

[State 3103, 4] ;jump
type = ChangeState
trigger1 = command = "holdup"
value = 3104
ignorehitpause = 1

[State 3103, 5] ;turn
type = ChangeState
trigger1 = P2Dist X < -5
value = 3106
ignorehitpause = 1

[State 3103, 6]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = var(45) = 182
value = 3101
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rush Drill - jump start
[Statedef 3104]
type    = S
movetype= A
physics = S
juggle  = 7
;velset = 0,0
ctrl = 0
;anim = 3190 ;9830 ;3103
sprpriority = 2

[State 3104, ChangeAnim] ;Super Armor - not repeat in hit
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3190

;[State 3104, CtrlSet];Super Armor
;type = CtrlSet
;trigger1 = PrevStateNo = 3950
;value = 1

[State 3104, 0] ;set pos y = 5
type = VarSet
trigger1 = Time = 0
v = 42
value = 30

[State 3104, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 3104, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 3104, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 3104, 2.1]
type = HitDef
trigger1 = var(45) < 151
trigger1 = Time % 6 = 0
attr = S, HA
damage = floor(21/(1+(Var(19)/5.0))), 5 ;9, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 2, 2;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -3.0
airguard.velocity = -1
air.type = Low
air.velocity = -3.0, -1
air.hittime = 20
;fall = 1
;air.fall = 1

[State 3104, 2.2]
type = HitDef
trigger1 = var(45) >= 151
attr = S, HA
damage = floor(22/(1+(Var(19)/5.0))), 5 ;8, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 1, 0;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 0
ground.velocity = -2, -14
airguard.velocity = -1
air.type = Hard
air.velocity = -2, -14
air.hittime = 0
p2stateno = 3150
fall = -1

[State 3104, 2]
type = PalFX
trigger1 = var(45) = [14, 17]
trigger2 = var(45) = [153, 155]
trigger3 = var(45) = [200, 201]
add = 60,60,60 ;20,20,95
time = 1

[State 3104, 3]
type = PalFX
trigger1 = var(45) = [10, 13]
trigger2 = var(45) = [156, 157]
trigger3 = var(45) = [197, 199]
add = 100,100,100 ;50,50,155
time = 1

[State 3104, 4]
type = PalFX
trigger1 = var(45) = [6, 9]
trigger2 = var(45) = [158, 160]
trigger3 = var(45) = [195, 196]
add = 150,150,150 ;80,80,256
time = 1

[State 3104, 5]
type = PalFX
trigger1 = var(45) = [1, 5]
trigger2 = var(45) = [161, 162]
trigger3 = var(45) = [192, 194]
add = 200,200,200 ;120,120,255
time = 1

[State 3104, 5]
type = PalFX
trigger1 = var(45) = [163, 191]  ;182
add = 256,256,256
time = 1

[State 3104, 4]
type = VelSet
trigger1 = var(45) < 154
trigger1 = Time = 2 ;AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, 2.1, -2.15)) ;fdw=2.1,back=-2.15
y = -10.1 ;const(velocity.jump.y)

[State 3104, 1];stop to finish
type = VelSet
trigger1 = var(45) >= 154
x = 0
y = 0

[State 3104, 19]
type = Width
trigger1 = 1
value = 20, 20

[State 3104, 20]
type = PlayerPush
trigger1 = 1
value = 1

[State 3104, 5] ;turn
type = ChangeState
trigger1 = P2Dist X < -5
value = 3106
ignorehitpause = 1

[State 3104, 6]
type = ChangeState
trigger1 = Time = 2 ;AnimTime = 0
value = 3105
ctrl = 1
ignorehitpause = 1

[State 3104, 7] ;finish super
type = ChangeState
trigger1 = var(45) = 182
value = 3101

;---------------------------------------------------------------------------
; Rush Drill - jump
[Statedef 3105]
type    = A
movetype= A
physics = N
juggle  = 7
;velset = 0,0
ctrl = 0
;anim = 3190 ;9830 ;3104
sprpriority = 2

[State 3105, ChangeAnim] ;Super Armor - not repeat in hit
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3190

;[State 3105, CtrlSet];Super Armor
;type = CtrlSet
;trigger1 = PrevStateNo = 3950
;value = 1

[State 3105, 0]
type = RemoveExplod
trigger1 = !Time
ID = 3150

[State 3105, 1] ;fire
type = Explod
trigger1 = var(45) < 154
trigger1 = NumExplod(3150) < 1
trigger1 = !Time
ID = 3150
anim = ifelse(Vel X = 0, 3151, ifelse(Vel X < 0, 3153, 3152))
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 2
supermovetime = 999999
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3105, 0]
type = RemoveExplod
trigger1 = Vel Y >= 0
trigger2 = var(45) >= 154 ;182
trigger3 = MoveType = H ;has no root
trigger3 = root, StateNo != 3950 ;Super Armor state
ID = 3150

[State 3105, 2.1]
type = HitDef
trigger1 = var(45) < 151
trigger1 = Time % 6 = 0
attr = A, HA
damage = floor(21/(1+(Var(19)/5.0))), 5 ;9, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 2, 2;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -3.0
airguard.velocity = -1
air.type = Low
air.velocity = -3.0, -1
air.hittime = 20
;fall = 1
;air.fall = 1

[State 3105, 2.2]
type = HitDef
trigger1 = var(45) >= 151
attr = A, HA
damage = floor(22/(1+(Var(19)/5.0))), 5 ;8, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 1, 0;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 0
ground.velocity = -2, -14
airguard.velocity = -1
air.type = Hard
air.velocity = -2, -14
air.hittime = 0
p2stateno = 3150
fall = -1

[State 3105, 2]
type = PalFX
trigger1 = var(45) = [14, 17]
trigger2 = var(45) = [153, 155]
trigger3 = var(45) = [200, 201]
add = 60,60,60 ;20,20,95
time = 1

[State 3105, 3]
type = PalFX
trigger1 = var(45) = [10, 13]
trigger2 = var(45) = [156, 157]
trigger3 = var(45) = [197, 199]
add = 100,100,100 ;50,50,155
time = 1

[State 3105, 4]
type = PalFX
trigger1 = var(45) = [6, 9]
trigger2 = var(45) = [158, 160]
trigger3 = var(45) = [195, 196]
add = 150,150,150 ;80,80,256
time = 1

[State 3105, 5]
type = PalFX
trigger1 = var(45) = [1, 5]
trigger2 = var(45) = [161, 162]
trigger3 = var(45) = [192, 194]
add = 200,200,200 ;120,120,255
time = 1

[State 3105, 5]
type = PalFX
trigger1 = var(45) = [163, 191]  ;182
add = 256,256,256
time = 1

[State 3105, 1]
type = VelAdd;Gravity
trigger1 = var(45) < 154 ;1
y = .629 ;const(movement.yaccel)*1.8 ;GetHitVar(yaccel)*1.8

[State 3105, 1];stop to finish
type = VelSet
trigger1 = var(45) >= 154
x = 0
y = 0

[State 3105, 19]
type = Width
trigger1 = 1
value = 20, 20

[State 3105, 20]
type = PlayerPush
trigger1 = 1
value = 1

[State 3105, 5] ;turn
type = ChangeState
trigger1 = P2Dist X < -5
value = 3106
ignorehitpause = 1

;[State 3105, 2.1] ;turn
;type = ChangeAnim
;trigger1 = P2Dist X < -5
;value = 3106

;[State 3105, 2.2] ;turn
;type = ChangeAnim
;trigger1 = Anim = 3106
;trigger1 = AnimTime = 0
;value = 9830

;[State 3105, 2.3] ;turn
;type = Turn
;trigger1 = P2Dist X < -5

[State 3105, 2]
type = PosSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y) ;0 (line by Phantom.of.the.Server)
y = 0

[State 3105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger2 = var(45) = 182
value = 3101

;---------------------------------------------------------------------------
; Rush Drill - turn
[Statedef 3106]
type    = S
physics = S
;velset = 0,0
ctrl = 0
;anim = 3106 ;9830 ;3104
sprpriority = 2

[State 3106, ChangeAnim] ;Super Armor - not repeat in hit
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3190

;[State 3106, CtrlSet];Super Armor
;type = CtrlSet
;trigger1 = PrevStateNo = 3950
;value = 1

[State 3106, 1]
type = StateTypeSet
trigger1 = Pos Y < 0
statetype = A
physics = N

[State 3106, 2]
type = StateTypeSet
trigger1 = Pos Y >= 0
statetype = S
physics = S

[State 3106, 0]
type = RemoveExplod
trigger1 = !Time
ID = 3150

[State 3106, 1] ;fire turn x = 0
type = Explod
trigger1 = var(45) < 154
trigger1 = NumExplod(3150) < 1
trigger1 = Vel Y < 0
ID = 3150
anim = 3151
postype = p1
pos = 14, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 2
supermovetime = 999999
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3106, 0]
type = RemoveExplod
trigger1 = Vel Y >= 0 ;!Time
trigger2 = var(45) >= 154 ;182
trigger3 = root, MoveType = H
trigger3 = root, StateNo != 3950 ;Super Armor state
ID = 3150

[State 3106, 0]
type = Turn
trigger1 = !Time

[State 3106, 2]
type = PalFX
trigger1 = var(45) = [14, 17]
trigger2 = var(45) = [153, 155]
trigger3 = var(45) = [200, 201]
add = 60,60,60 ;20,20,95
time = 1

[State 3106, 3]
type = PalFX
trigger1 = var(45) = [10, 13]
trigger2 = var(45) = [156, 157]
trigger3 = var(45) = [197, 199]
add = 100,100,100 ;50,50,155
time = 1

[State 3106, 4]
type = PalFX
trigger1 = var(45) = [6, 9]
trigger2 = var(45) = [158, 160]
trigger3 = var(45) = [195, 196]
add = 150,150,150 ;80,80,256
time = 1

[State 3106, 5]
type = PalFX
trigger1 = var(45) = [1, 5]
trigger2 = var(45) = [161, 162]
trigger3 = var(45) = [192, 194]
add = 200,200,200 ;120,120,255
time = 1

[State 3106, 5]
type = PalFX
trigger1 = var(45) = [163, 191]  ;182
add = 256,256,256
time = 1

[State 3106, 1];stop to finish
type = VelSet
trigger1 = var(45) >= 154
x = 0
y = 0

[State 3106, 19]
type = Width
trigger1 = 1
value = 20, 20

[State 3106, 20]
type = PlayerPush
trigger1 = 1
value = 1

[State 3106, 1]
type = ChangeState
trigger1 = PrevStateNo != 3105
trigger1 = Time = 3
trigger2 = var(45) = 182
value = 3101
ignorehitpause = 1

[State 3106, 2]
type = PosSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y) ;(line by Phantom.of.the.Server)
y = 0

[State 3106, 3]
type = ChangeState
trigger1 = PrevStateNo = 3105
trigger1 = Time = 3
value = 3105

;---------------------------------------------------------------------------
; Rush Drill - jat walking fwd
[Statedef 3107]
type    = S
movetype= A
physics = S
juggle  = 7
;velset = 2,0
ctrl = 0
;anim = 3190 ;9830 ;3102
sprpriority = 2

[State 3107, ChangeAnim] ;Super Armor - not repeat in hit
type = ChangeAnim
trigger1 = (Time = 0) && (PrevStateNo != 3950)
value = 3190

;[State 3107, CtrlSet];Super Armor
;type = CtrlSet
;trigger1 = PrevStateNo = 3950
;value = 1

;[State 3107, 1]
;type = ChangeAnim
;trigger1 = Anim != 3102
;trigger1 = !Time
;value = 3102

;[State 3107, 1] ;back fire
;type = Explod
;trigger1 = NumExplod(3150) < 1
;trigger1 = Time >= 0 && Time < 29
;ID = 3150
;anim = 3150
;postype = p1
;pos = 0, 0
;;facing = 1
;velocity = 0, 0
;accel = 0, 0
;removetime = -1
;sprpriority = 2
;supermovetime = 999999
;bindtime = -1
;ownpal = 1
;removeongethit = 1

;[State 3107, 0]
;type = RemoveExplod
;trigger1 = Time = 29 ;30 ;= 40
;trigger2 = var(45) = 182
;ID = 3150

[State 3107, 2.1]
type = HitDef
trigger1 = var(45) < 151
trigger1 = Time % 6 = 0
attr = S, HA
damage = floor(21/(1+(Var(19)/5.0))), 5 ;9, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 1, 1;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -3.0
airguard.velocity = -1
air.type = Low
air.velocity = -3.0, -1
air.hittime = 20
;fall = 1
;air.fall = 1

[State 3107, 2.2]
type = HitDef
trigger1 = var(45) >= 151
attr = S, HA
damage = floor(22/(1+(Var(19)/5.0))), 5 ;8, 5
animtype = Heavy
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 6
pausetime = 1, 0;3 ;3, 3
guard.sparkno = -1 + 0 * (var(54) := 8001)
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S4, 0
guardsound = S6, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 0
ground.velocity = -2, -14
airguard.velocity = -1
air.type = Hard
air.velocity = -2, -14
air.hittime = 0
p2stateno = 3150
fall = -1

[State 3107, 2]
type = PalFX
trigger1 = var(45) = [14, 17]
trigger2 = var(45) = [153, 155]
trigger3 = var(45) = [200, 201]
add = 60,60,60 ;20,20,95
time = 1

[State 3107, 3]
type = PalFX
trigger1 = var(45) = [10, 13]
trigger2 = var(45) = [156, 157]
trigger3 = var(45) = [197, 199]
add = 100,100,100 ;50,50,155
time = 1

[State 3107, 4]
type = PalFX
trigger1 = var(45) = [6, 9]
trigger2 = var(45) = [158, 160]
trigger3 = var(45) = [195, 196]
add = 150,150,150 ;80,80,256
time = 1

[State 3107, 5]
type = PalFX
trigger1 = var(45) = [1, 5]
trigger2 = var(45) = [161, 162]
trigger3 = var(45) = [192, 194]
add = 200,200,200 ;120,120,255
time = 1

[State 3107, 5]
type = PalFX
trigger1 = var(45) = [163, 191]  ;182
add = 256,256,256
time = 1

[State 3107, 19]
type = Width
trigger1 = 1
value = 20, 20

[State 3107, 20]
type = PlayerPush
trigger1 = 1
value = 1

[State 3107, 2]
type = VelSet
trigger1 = var(45) < 154
trigger1 = Time <= 29 ;30 ;1 ;command = "x" || command = "y" || command = "z"
x = 10

[State 3107, 2]
type = VelAdd
trigger1 = var(45) < 154
trigger1 = Time > 29 ;30
x = -.5 ;-.7

[State 3107, 1];stop to finish
type = VelSet
trigger1 = var(45) >= 154
x = 0

;[State 3107, 3] ;walk back
;type = ChangeState
;trigger1 = command != "x" && command != "y" && command != "z"
;trigger1 = command = "holdback" && command != "holdfwd"
;value = 3103

;[State 3107, 4] ;jump
;type = ChangeState
;trigger1 = command = "holdup"
;value = 3104

[State 3107, 5] ;turn
type = ChangeState
trigger1 = P2Dist X < -5
trigger1 = Time >= 38
value = 3106
ignorehitpause = 1

[State 3107, 6]
type = ChangeState
trigger1 = Time >= 38 ;40 ;command != "holdfwd"
trigger2 = var(45) = 182
value = 3101
ignorehitpause = 1

;---------------------------------------------------------------------------
; Rush Drill: Wheel Helper
[Statedef 3110]
type    = A
movetype= I
anim = 3111
sprpriority = 3

[State 3110, 0.1] ;walk fwd (and Jat fwd)
type = VarAdd
trigger1 = root, StateNo != [3104, 3107]
trigger1 = root, command = "holdfwd"
trigger1 = var(44) = 2 ;Random = [1, 2]
trigger2 = root, StateNo = 3107
trigger2 = var(44) = 1
v = 43
value = 1

[State 3110, 0.2] ;walk fwd (and Jat fwd) - (reset)
type = VarSet
trigger1 = root, command = "holdfwd"
trigger1 = var(43) > 3
trigger2 = root, StateNo = 3107
trigger2 = var(43) > 3
v = 43
value = 0

[State 3110, 0.1] ;walk back
type = VarAdd
trigger1 = root, StateNo != [3104, 3107]
trigger1 = root, command = "holdback"
trigger1 = var(44) = 2
v = 43
value = -1

[State 3110, 0.2] ;walk back (reset)
type = VarSet
trigger1 = root, command = "holdback"
trigger1 = var(43) < 0
v = 43
value = 3

[State 3110, 0] ;count
type = VarAdd
trigger1 = root, command = "holdfwd"
trigger2 = root, command = "holdback"
trigger3 = root, StateNo = 3107
v = 44
value = 1

[State 3110, 0] ;reset count
type = VarSet
trigger1 = root, StateNo != 3107
trigger1 = var(44) = 3 ;Random = [2, 3]
trigger2 = root, StateNo = 3107
trigger2 = var(44) = 2
v = 44
value = 0

[State 3110, 0]
type = Turn
trigger1 = root, StateNo = 3106
;trigger1 = root, P2Dist X < -5

[State 3110, 1]
type = ChangeAnim
trigger1 = root, StateNo = 3106
;trigger1 = root, P2Dist X < -5
value = 9830

[State 3110, 1]
type = ChangeAnim
trigger1 = Anim = 9830
trigger1 = root, StateNo != 3106
value = 3111 + var(43)

[State 3110, 1]
type = ChangeAnim
trigger1 = root, StateNo != [3104, 3106]
trigger1 = var(43) = 0
value = 3111

[State 3110, 2]
type = ChangeAnim
trigger1 = root, StateNo != [3104, 3106]
trigger1 = var(43) = 1
value = 3112

[State 3110, 3]
type = ChangeAnim
trigger1 = root, StateNo != [3104, 3106]
trigger1 = var(43) = 2
value = 3113

[State 3110, 4]
type = ChangeAnim
trigger1 = root, StateNo != [3104, 3106]
trigger1 = var(43) = 3
value = 3114

[State 3110, 0]
type = BindToRoot
trigger1 = 1
pos = 0, 0
time = -1;1
ignorehitpause = 1

;[State 3110, 1]
;type = ChangeAnim
;trigger1 = Anim != 3120
;trigger1 = root, command = "holdfwd"
;value = 3120

;[State 3110, 1]
;type = ChangeAnim
;trigger1 = Anim != 3121
;trigger1 = root, command = "holdback"
;value = 3121

;[State 3110, 1]
;type = ChangeAnim
;trigger1 = root, command != "holdfwd" && root, command != "holdback"
;trigger1 = Anim = 3120
;trigger1 = AnimElem = 1
;trigger2 = root, command != "holdfwd" && root, command != "holdback"
;trigger2 = Anim = 3121
;trigger2 = AnimElem = 3
;value = 3112

;[State 3110, 1]
;type = ChangeAnim
;trigger1 = root, command != "holdfwd" && root, command != "holdback"
;trigger1 = Anim = 3120
;trigger1 = AnimElem = 2
;trigger2 = root, command != "holdfwd" && root, command != "holdback"
;trigger2 = Anim = 3121
;trigger2 = AnimElem = 2
;value = 3113

;[State 3110, 1]
;type = ChangeAnim
;trigger1 = root, command != "holdfwd" && root, command != "holdback"
;trigger1 = Anim = 3120
;trigger1 = AnimElem = 3
;trigger2 = root, command != "holdfwd" && root, command != "holdback"
;trigger2 = Anim = 3121
;trigger2 = AnimElem = 1
;value = 3114

;[State 3110, 1]
;type = ChangeAnim
;trigger1 = root, command != "holdfwd" && root, command != "holdback"
;trigger1 = Anim = 3120
;trigger1 = AnimElem = 4
;trigger2 = root, command != "holdfwd" && root, command != "holdback"
;trigger2 = Anim = 3121
;trigger2 = AnimElem = 4
;value = 3111

[State 3110, 6]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3110, 9]
type = DestroySelf
trigger1 = root, MoveType = H ;parent,
trigger1 = root, StateNo != 3950 ;Super Armor state
trigger2 = root, Anim = 3101 || parent, Anim = 53 ;parent,

[state -2, displaytoclipboard] ;thanks ixnay
type = displaytoclipboard
trigger1 = 1
text = "var(43) = %d, var(44) = %d"
params = var(43), var(44)

;---------------------------------------------------------------------------
; Rush Drill: Tank Helper
[Statedef 3120]
type    = A ;S
movetype= I ;physics = S
velset = 0,0
ctrl = 0
anim = 3102
sprpriority = 2

[State 3120, 1] ;back fire
type = Explod
trigger1 = var(45) < 154
trigger1 = NumExplod(3150) < 1
trigger1 = root, StateNo = 3107
trigger1 = root, Time >= 0 && root, Time < 29
ID = 3150
anim = 3150
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 1
supermovetime = 999999
bindtime = -1
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 3120, 0]
type = RemoveExplod
trigger1 = root, StateNo = 3107
trigger1 = root, Time = 29
trigger2 = root, var(45) >= 154 ;182
trigger3 = root, MoveType = H
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger4 = root, PrevStateNo = 3107
trigger4 = root, StateNo = 3104
;trigger4 = !(root, Time)
ID = 3150

[State 3120, 0]
type = Turn
trigger1 = root, StateNo = 3106
;trigger1 = root, P2Dist X < -5

[State 3120, 1]
type = ChangeAnim
trigger1 = root, StateNo = 3106
value = 9830

[State 3120, 1]
type = ChangeAnim
trigger1 = Anim = 9830
trigger1 = root, StateNo != 3106
value = 3102

[State 3120, 0] ;active
type = ParentVarAdd
trigger1 = 1
v = 42
value = 1

[State 3120, 0] ;reset
type = ParentVarSet
;triggerall = var(42) != 0
trigger1 = parent, var(42) = 20
trigger2 = parent, var(42) = 34
trigger3 = parent, var(42) = 51
v = 42
value = 0

[State 3120, 0]
type = BindToRoot
triggerall = Pos Y = [0, 2]
trigger1 = parent, var(42) = [0, 2]
trigger2 = parent, var(42) = 4
trigger3 = parent, var(42) = 6
trigger4 = parent, var(42) = [8, 10]
trigger5 = parent, var(42) = 12
trigger6 = parent, var(42) = [14, 16]
trigger7 = parent, Pos Y < 0
pos = 0, 0
time = -1;1
ignorehitpause = 1

[State 3120, 0]
type = BindToRoot
triggerall = Pos Y = [0, 2]
trigger1 = parent, var(42) = 5
trigger2 = parent, var(42) = 13
trigger3 = parent, var(42) = 17
trigger4 = parent, var(42) = 19
pos = 0, 1
time = -1;1
ignorehitpause = 1

[State 3120, 0]
type = BindToRoot
triggerall = Pos Y = [0, 2]
trigger1 = parent, var(42) = 3
trigger2 = parent, var(42) = 7
trigger3 = parent, var(42) = 11
trigger4 = parent, var(42) = 18
pos = 0, 2
time = -1;1
ignorehitpause = 1

[State 3120, 0]
type = BindToRoot
;triggerall = Pos Y != 5
;trigger1 = root, StateNo = 3104
trigger1 = parent, var(42) = 31
;trigger2 = root, PrevStateNo = 3105
;trigger2 = root, StateNo = 3101
trigger2 = parent, var(42) = 41
pos = 0, 5
time = -1;1
ignorehitpause = 1

[State 3120, 0]
type = BindToRoot
;triggerall = Pos Y = 5
;trigger1 = root, StateNo = 3104
trigger1 = parent, var(42) = 33
;trigger2 = root, PrevStateNo = 3105
;trigger2 = root, StateNo = 3101
trigger2 = parent, var(42) = 50
trigger3 = parent, Pos Y < 0
pos = 0, 0
time = -1;1
ignorehitpause = 1

;[State 3120, 1]
;type = ChangeAnim
;trigger1 = Anim != 3102
;trigger1 = !Time
;value = 3102

[State 3120, 2]
type = Helper
trigger1 = NumHelper(3130) < 1
trigger1 = !Time
helpertype = normal
name = "Drill"
ID = 3130
pos = 0, 0
postype = p1
bindtime = -1
;facing = root, facing
stateno = 3130
supermovetime = 999999
ownpal = 0;1
ignorehitpause = 1

;[State 3120, 1]
;type = PosSet
;triggerall = Pos Y = [0, 2] ;root, StateNo != [3104, 3105]
;trigger1 = Time = [0, 2]
;trigger2 = Time = 4
;trigger3 = Time = 6
;trigger4 = Time = [8, 10]
;trigger5 = Time = 12
;trigger6 = Time = [14, 16]
;y = 0

;[State 3120, 1]
;type = PosSet
;triggerall = Pos Y = [0, 2] ;root, StateNo != [3104, 3105]
;trigger1 = Time = 5
;trigger2 = Time = 13
;trigger3 = Time = 17
;trigger4 = Time = 19
;y = 1

;[State 3120, 1]
;type = PosSet
;triggerall = Pos Y = [0, 2] ;root, StateNo != [3104, 3105]
;trigger1 = Time = 3
;trigger2 = Time = 7
;trigger3 = Time = 11
;trigger4 = Time = 18
;y = 2

;[State 3120, 1]
;type = PosSet
;trigger1 = root, StateNo = 3104
;trigger1 = !Time  ;root, Time = [0, 1]
;trigger2 = root, PrevStateNo = 3105
;trigger2 = root, StateNo = 3101
;trigger2 = !Time  ;root, Time = [0, 8]
;y = 5

;[State 3120, 1]
;type = PosSet
;trigger1 = root, StateNo = 3104
;trigger1 = Time = 2
;trigger2 = root, PrevStateNo = 3105
;trigger2 = root, StateNo = 3101
;trigger2 = Time = 9
;y = 0

;[State 3120, 1]
;type = ChangeState
;trigger1 = Pos Y = [0, 2] ;root, StateNo != [3104, 3105]
;trigger1 = Time >= 20 ;19
;;trigger2 = Pos Y = 5
;;trigger2 = Time >= 0
;value = 3120

[State 3120, 3]
type = DestroySelf
trigger1 = root, MoveType = H
trigger1 = root, StateNo != 3950 ;Super Armor state
trigger2 = root, Anim = 3101 || root, Anim = 53

;---------------------------------------------------------------------------
; Rush Drill: Tank Helper: Drill Helper
[Statedef 3130]
type    = A
movetype= I
anim = 3130
sprpriority = 4

[State 3130, 0]
type = Turn
;trigger1 = root, StateNo != 3107
;trigger1 = root, P2Dist X < -5
;trigger2 = root, StateNo = 3107
;trigger2 = root, Time = 38
trigger1 = root, StateNo = 3106

[State 3130, 1]
type = ChangeAnim
;trigger1 = root, StateNo != 3107
;trigger1 = root, P2Dist X < -5
;trigger2 = root, StateNo = 3107
;trigger2 = root, Time = 38
trigger1 = root, StateNo = 3106
value = 9830

[State 3130, 1]
type = ChangeAnim
trigger1 = Anim = 9830
trigger1 = root, StateNo != 3106
;trigger1 = root, Time = 3
value = 3130

[State 3130, 1]
type = BindToParent
trigger1 = 1
pos = 0, 0 ;ifelse((root, Anim = 3103 || root, Anim = 3105), 5, 0) ;0
time = -1
ignorehitpause = 1
persistent = 1

[State 3130, 2]
type = PalFX
trigger1 = root, var(45) = [14, 17]
trigger2 = root, var(45) = [153, 155]
trigger3 = root, var(45) = [200, 201]
add = 60,60,60 ;20,20,95
time = 1

[State 3130, 3]
type = PalFX
trigger1 = root, var(45) = [10, 13]
trigger2 = root, var(45) = [156, 157]
trigger3 = root, var(45) = [197, 199]
add = 100,100,100 ;50,50,155
time = 1

[State 3130, 4]
type = PalFX
trigger1 = root, var(45) = [6, 9]
trigger2 = root, var(45) = [158, 160]
trigger3 = root, var(45) = [195, 196]
add = 150,150,150 ;80,80,256
time = 1

[State 3130, 5]
type = PalFX
trigger1 = root, var(45) = [1, 5]
trigger2 = root, var(45) = [161, 162]
trigger3 = root, var(45) = [192, 194]
add = 200,200,200 ;120,120,255
time = 1

[State 3130, 5]
type = PalFX
trigger1 = root, var(45) = 0
trigger2 = root, var(45) = [163, 191]  ;182
add = 256,256,256
time = 1

[State 3130, 6]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3130, 7]
type = PlaySnd
trigger1 = Time = 1
value = 30, 4
channel = 2
ignorehitpause = 1

[State 3130, 8]
type = StopSnd
trigger1 = root, MoveType = H
trigger1 = root, StateNo != 3950 ;Super Armor state
channel = 2
ignorehitpause = 1

[State 3130, 9]
type = DestroySelf
trigger1 = root, MoveType = H
trigger1 = root, StateNo != 3950 ;Super Armor state
trigger2 = root, var(45) = 182 ;Anim = 3101

;---------------------------------------------------------------------------
; HITG_SHAKE (code by Hsieh - Roll Character)
[Statedef 3150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3150, 1]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(SelfAnimExist(5250),5250,ifelse(SelfAnimExist(5051),5051,5030))

[State 3150, 2] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3150, 3] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 3150, 4]
type = ChangeState
trigger1 = HitShakeOver
value = 3160

[State 3150, FFB Hard]
type = ForceFeedback
trigger1 = 1
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up) - (code by Hsieh - Roll Character)
[Statedef 3160]
type    = A
movetype= H
physics = N
ctrl = 0

[State 3160, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 3160, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 3160, 4]
type = SelfState
triggerall = HitFall
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 3160, 5]
type = ChangeState
trigger1 = Vel Y > -1
value = 3170 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition) - (code by Hsieh - Roll Character)
[Statedef 3170]
type    = A
movetype= H
physics = N

[State 3170, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5251)
value = 5251

[State 3170, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5251) = 0
trigger1 = SelfAnimExist(5061)
value = 5061

[State 3170, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 3170, 4]
type = SelfState
triggerall = HitFall
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; Beat Plane
[Statedef 3200]
type    = A
movetype= I                      
physics = N  
juggle  = 7                      
velset = 0,0                     
ctrl = 0                         
anim = 3200 
poweradd = -2000                      
sprpriority = 2

[State 3200, 0]
type = ChangeAnim
trigger1 = Anim = 3200
trigger1 = AnimTime = 0
value = 3201
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = s64,2
volume = 255
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
channel = 9


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 55
value = s5,7
volume = 255
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
channel = 10

[State 3100, 1] ;Back Dust
type = Explod
trigger1 = Time = 2
persistent = 0
anim = 9020
postype = p1
pos = 11, 2
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 4
ownpal = 1
supermovetime = -1
removeongethit = 1
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

;[State 3100, 4.05] ;BG charging pal
;type = BGPalFX
;trigger1 = Time = [0,44]
;add = 30,33,80 ;Floor((30 + 40 * sin((2 * pi * (time))/17.0)) + 0.5),Floor((33 + 42 * sin((2 * pi * (time))/17.0))+0.5),Floor((60 + 60 *sin((2 * pi * (time))/17.0))+0.5)
;;mul = 152,178,229
;time = 1

[State 3000, Superpause FX]
type = helper
trigger1 = Time = 3
stateno = 8510
ID = 8500
name = "Superpause FX"
postype = p1
pos = 0, -50
supermovetime = 255
size.xscale = 1
size.yscale = 1
ownpal = 1

[State 3000, Superpause]
type = superpause
trigger1 = Time = 3
time = 40
movetime = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s8500,0
darken = 0

[State 3200, 3.2] ;helix
type = Explod
trigger1 = NumExplod(3202) < 1
trigger1 = Anim != 3205 || (Anim = 3205 && AnimElem = 2, = 4)
trigger1 = Anim != 53
trigger1 = Time >= 53
ID = 3202
anim = 3202
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 2
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 3200, 3.2] ;wing
type = Explod
trigger1 = NumExplod(3203) < 1
trigger1 = Anim != 3205 || (Anim = 3205 && AnimElem = 2, = 4)
trigger1 = Anim != 53
trigger1 = Time >= 53
ID = 3203
anim = 3203
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 3200, 3.2] ;Megaman scarf
type = Explod
trigger1 = NumExplod(3204) < 1
trigger1 = Anim != 3205 || (Anim = 3205 && AnimElem = 2, = 4)
trigger1 = Anim != 53
trigger1 = Time >= 53
ID = 3204
anim = 3204
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = 3
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 3200, 10] ;remove heli
type = RemoveExplod
;trigger1 = Anim = 3205
trigger1 = Time >= 54 && Time < 207
trigger1 = P2Dist X < -5
trigger2 = Time >= 235
ID = 3202
ignorehitpause = 1

[State 3200, 10] ;remove wing
type = RemoveExplod
;trigger1 = Anim = 3205
trigger1 = Time >= 54 && Time < 207
trigger1 = P2Dist X < -5
trigger2 = Time >= 235
ID = 3203
ignorehitpause = 1

[State 3200, 10] ;remove megaman scarf
type = RemoveExplod
;trigger1 = Anim = 3205
trigger1 = Time >= 54 && Time < 207
trigger1 = P2Dist X < -5
trigger2 = Time >= 235
ID = 3204
ignorehitpause = 1

;[State 3200, 4.05] ;BG charging pal
;type = BGPalFX
;trigger1 = Time = [0,44]
;add = 30,33,80 ;Floor((30 + 40 * sin((2 * pi * (time))/17.0)) + 0.5),Floor((33 + 42 * sin((2 * pi * (time))/17.0))+0.5),Floor((60 + 60 *sin((2 * pi * (time))/17.0))+0.5)
;;mul = 152,178,229 
;time = 1

[State 3200, 10]
type = Helper
trigger1 = Time = 0
helpertype = normal
name = "Beat"
ID = 3250
postype = left
pos = ifelse(facing = 1, 0, 319), -150 ;-50, -100
facing = facing
;facing = 1
stateno = 3250  
supermovetime = 999999
ownpal = 0;1
ignorehitpause = 1

;[State 3200, 11] ;Beat sound
;type = PlaySnd
;trigger1 = Time = 0
;value = 18, 10
;channel = 2
;supermovetime = 999999

;[State 3200, 12] ;Rush up
;type = PlaySnd
;trigger1 = Time = 2
;value = 18, 8
;channel = 3
;volume = -20
;supermovetime = 999999

[State 3200, 1]
type = ChangeAnim
trigger1 = Anim != 53 && Anim != 3025
trigger1 = Time >= 54 && Time < 207
trigger1 = P2Dist X < -5
value = 3205
ignorehitpause = 1

[State 3200, 0]
type = Turn
trigger1 = Anim != 53
trigger1 = Time >= 54 && Time < 207
trigger1 = P2Dist X < -5

[State 3200, 2]
type = ChangeAnim
trigger1 = Anim = 3205
trigger1 = AnimTime = 0
value = 3201
ignorehitpause = 1

[State 3200, 1] ;move fwd
type = VelSet
trigger1 = Anim != 53
trigger1 = Time >= 54 && Time < 207
trigger1 = command = "holdfwd"
x = 4

[State 3200, 1] ;move back
type = VelSet
trigger1 = Anim != 53
trigger1 = Time >= 54 && Time < 207
trigger1 = command = "holdback"
x = -4

[State 3200, 1] ;move up
type = VelSet
trigger1 = Anim != 53
trigger1 = Time >= 54 && Time < 207
trigger1 = command = "holdup"
y = -4

[State 3200, 1] ;move down
type = VelSet
trigger1 = Anim != 53
trigger1 = Time >= 54 && Time < 207
trigger1 = command = "holddown"
y = 4

[State 3200, 1] ;stop horizontal move
type = VelSet
trigger1 = Time >= 54 && Time < 207
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger2 = Time = 207
;trigger3 = command = "holdfwd"
;trigger3 = FrontEdgeDist < 0
;trigger4 = command = "holdback"
;trigger4 = BackEdgeDist < 0
x = 0

[State 3200, 1] ;stop vertical move
type = VelSet
trigger1 = Time >= 54 && Time < 207
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger2 = Time = 207
trigger3 = command = "holddown"
trigger3 = Pos Y >= 0
trigger4 = command = "holdup"
trigger4 = ScreenPos Y < 0
y = 0

[State 3200, 0] ;shoot fireball
type = ChangeAnim
trigger1 = Anim != 3207
trigger1 = Anim != 53
trigger1 = Time >= 54 && Time < 207
trigger1 = command = "x" || command = "y" || command = "z" 
value = 3207
ignorehitpause = 1

[State 3200, 0] ;shoot fireball (cancel)
type = ChangeAnim
trigger1 = Anim = 3207
trigger1 = AnimTime = 0
;trigger1 = Time >= 54 && Time < 207
trigger1 = command != "x" && command != "y" && command != "z" 
value = 3201
ignorehitpause = 1

;[State 3200, 3] ;shoot missel
;type = Explod
;trigger1 = NumExplod(3208) < 1
;trigger1 = Anim != 53 && Anim != 3025
;trigger1 = Time >= 54 && Time < 207
;trigger1 = command = "a" || command = "b" || command = "c" 
;ID = 3208
;anim = 3208
;postype = p1
;pos = 0, 0
;facing = 1
;velocity = 0, 0
;accel = 0, 0
;removetime = -2
;sprpriority = 3
;supermovetime = 999999
;bindtime = -1
;ownpal = 0
;removeongethit = 1
;ignorehitpause = 1

;[State 3200, 10] ;remove shoot missel
;type = RemoveExplod
;trigger1 = Anim = 3205
;trigger2 = Time >= 207
;ID = 3208
;ignorehitpause = 1

[State 3200, 10]
type = Helper
;trigger1 = NumHelper(3210) > 0 
;trigger1 = Helper(3210), Time = 5
;trigger1 = NumHelper(3210) < 1
trigger1 = Anim = 3207
trigger1 = AnimElem = 2, = 1
helpertype = normal
name = "Fireball"
ID = 3210
pos = 56, -21
postype = p1
bindtime = -1
;facing = 1
stateno = 3210  
supermovetime = 999999
ownpal = 1
ignorehitpause = 1

;[State 3200, 10]
;type = Helper
;trigger1 = NumHelper(3220) > 0
;trigger1 = Helper(3220), Time = 5
;trigger1 = NumHelper(3220) < 1
;trigger1 = Time >= 54 && Time < 207
;trigger1 = NumExplod(3208) > 0
;helpertype = normal
;name = "Missel"
;ID = 3220
;pos = -5, -9 ;-12,-9
;postype = p1
;bindtime = -1
;facing = 1
;stateno = 3220  
;supermovetime = 999999
;ownpal = 1
;ignorehitpause = 1

[State 3200, 2]
type = PalFX
trigger1 = Time = [12, 15] 
trigger2 = Time = [68, 70] 
trigger1 = Time = [207, 209] 
trigger1 = Time = 253 
add = 60,60,60 ;20,20,95
time = 1

[State 3200, 3]
type = PalFX
trigger1 = Time = [16, 18]
trigger2 = Time = [64, 67] 
trigger1 = Time = [210, 211] 
trigger1 = Time = [250, 252] 
add = 100,100,100 ;50,50,155
time = 1

[State 3200, 4]
type = PalFX
trigger1 = Time = [19, 22] 
trigger2 = Time = [61, 63] 
trigger1 = Time = [212, 214] 
trigger1 = Time = [248, 249] 
add = 150,150,150 ;80,80,256
time = 1

[State 3200, 5]
type = PalFX
trigger1 = Time = [23, 25] 
trigger2 = Time = [57, 60] 
trigger1 = Time = [215, 216] 
trigger1 = Time = [241, 247] 
add = 200,200,200 ;120,120,255
time = 1

[State 3200, 5]
type = PalFX
trigger1 = Time = [26, 56]
trigger2 = Time = [217, 240] 
add = 256,256,256
time = 1

;207 start finish

[State 3200, 19]
type = Width
trigger1 = Time = [20, 160]
value = 25, 5

[State 3200, 20]
type = VarSet
trigger1 = 1
v = 17
value = 2

;[State 3200, 21]
;type = EnvShake
;trigger1 = Time = 91
;time = 85
;ampl = -2
;freq = 70
;phase = 30
;supermovetime = 1000
;ignorehitpause = 1

[State 3200, 23]
type = PlaySnd
trigger1 = Anim = 3207
trigger1 = AnimElem = 2, = 1
value = 18, 5

[State 3200, 0] ;turn in finish pose
type = Turn
trigger1 = Anim = 53
trigger1 = P2Dist X < -5

[State 3200, 1] 
type = VelSet
trigger1 = Time = 235
;trigger2 = !(enemy, Alive) 
x = -2
y = -2.7 ;-2.5

[State 3200, 1.2] 
type = VelAdd
trigger1 = Time >= 235 
;trigger2 = !(enemy, Alive)
;trigger2 = Anim = 53
;trigger2 = AnimElemTime(1) >= 0
y = const(movement.yaccel)

[State 3200, 10]
type = ChangeAnim
trigger1 = Time = 235;223 
;trigger2 = !(enemy, Alive)
value = 53
ignorehitpause = 1

[State 195, 2]
type = CtrlSet
trigger1 = !(enemy, Alive)
value = 0
ignorehitpause = 1

[State 3200, 11]
type = ChangeState
trigger1 = Anim = 53
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 
ctrl = 1

;---------------------------------------------------------------------------
; Fireball: Helper
[Statedef 3210]
type    = A
movetype= A
anim = 33210
sprpriority = 3

;[State 3210, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3210, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[state 3210, 1]
type = VelSet
trigger1 = Time > 0
x = 12

[State 3210, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP                     
damage = floor(15/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1 + 0 * (var(54) := 8001)            
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 7                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 25             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 25       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 3210, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP                     
damage = floor(16/(1+(root,Var(19)/5.0))), 7
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;3, 3 
guard.sparkno = -1 + 0 * (var(54) := 8001)            
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 7                 
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -4
airguard.velocity = -5
air.type = Low                 
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))           
air.hittime = 25   
fall = 0
air.fall = 1

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3210, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3210, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3211
time = -1

[State 3210, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 
value = 3211
ignorehitpause = 1

;---------------------------------------------------------------------------
; Fireball: Helper (end)
[Statedef 3211]
type = A
movetype = I
ctrl = 0
anim = 33211
velset = 0, 0
sprpriority = 3

;[State 3211, 0]
;type = AssertSpecial
;trigger1 = 1
;flag = noshadow
;ignorehitpause = 1

[State 3211, Assert]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3211, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Missel: Helper
[Statedef 3220]
type    = A
movetype= A
anim = 3220
sprpriority = 3

;[state 3220, 1]
;type = PosAdd
;trigger1 = root, Anim != 3205
;trigger1 = Time = 0
;x = 7

[state 3220, 1]
type = VelSet
trigger1 = root, Anim != 3205
;trigger1 = Vel X = 0
;trigger1 = Vel Y = 0
;trigger1 = AnimElem = 1
trigger1 = Time = 0
x = 5
y = 0

[state 3220, 1]
type = VelSet
trigger1 = root, Anim != 3205
;trigger1 = Vel X = 5
;trigger1 = Vel Y = 0
;trigger1 = AnimElem = 3
trigger1 = Time = 2
x = 5
y = 5

[state 3220, 1]
type = VelSet
trigger1 = root, Anim = 3205
x = 0
y = 5

;[state 3220, 1]
;type = VelSet
;trigger1 = root, Anim != 3205
;trigger1 = Vel X = 0
;trigger1 = Vel Y = 5
;trigger1 = AnimElem = 1
;x = 12
;y = 0

;[state 3220, 1]
;type = VelSet
;trigger1 = root, Anim != 3205
;trigger1 = Vel X = 12
;trigger1 = Vel Y = 0
;trigger1 = AnimElem = 3
;x = 12
;y = 5

[State 3220, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP                     
damage = floor(15/(1+(root,Var(19)/5.0))), 6
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;2, 2   
guard.sparkno = -1 + 0 * (var(54) := 8001)            
sparkno = -1 + 0 * (var(53) := 8014)  
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 5                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 15
ground.hittime  = 25             
ground.velocity = -3
airguard.velocity = -1     
air.type = Low                 
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))           
air.hittime = 25       
fall = 0
air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 3220, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP                     
damage = floor(16/(1+(root,Var(19)/5.0))), 7
animtype = Medium                 
guardflag = MA                  
hitflag = MAF                  
priority = 6, Hit               
sprpriority = 3
pausetime = 0, 8 ;8, 8 ;3, 3 
guard.sparkno = -1 + 0 * (var(54) := 8001)            
sparkno = -1 + 0 * (var(53) := 8014) 
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20              
hitsound = S45, 5                  
guardsound = S6, 0                
ground.type = Low               
ground.slidetime = 20
ground.hittime  = 25             
ground.velocity = -4
airguard.velocity = -5
air.type = Low                 
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))           
air.hittime = 25   
fall = 0
air.fall = 1

[State 1006, HitSpark]
type = Helper
trigger1 = MoveContact = 1 && NumTarget
trigger1= (target,movetype=H) && !(target,time)
helperType = Normal
stateNo = ifElse(MoveGuarded, 8001, 8014)
ID = 8000
name = "Spark"
postype = p2
pos = (target, const(size.ground.front) -10), -floor(p2dist y)
facing = -1
ownPal = 1
size.xScale = 1
size.yScale = 1
pauseMoveTime = 65535
superMoveTime = 65535
ignoreHitPause = 1

[State 3220, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 3220, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 3221
time = -1

[State 3220, 8]
type = ChangeState
trigger1 = MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105 || Pos Y >= 0
value = 3221
ignorehitpause = 1

;---------------------------------------------------------------------------
; Missel: Helper (end)
[Statedef 3221]
type = A
movetype = I
ctrl = 0
anim = 9290
velset = 0, 0
sprpriority = 3

[State 3201, 0]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
ignorehitpause = 1

[State 3221, 1]
type = PlaySnd
trigger1 = !Time
value = 45, 5

[State 3221, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Beat: Helper 
[Statedef 3250]
type = A
movetype = I
ctrl = 0
anim = 3250
velset = 0,0 ;3.5, 1.5
sprpriority = 3

[State 3250, 1]
type = ChangeAnim
trigger1 = root, Time = 54
value = 9930

[State 3250, 2]
type = ChangeAnim
trigger1 = root, Time = 236
value = 3250

[State 3250, 0]
type = VelSet
trigger1 = (root, Time >= 0) && (root, Time < 15) 
x = 4

[State 3250, 0]
type = VelSet
trigger1 = (root, Time >= 15) && (root, Time < 42) 
x = 0

[State 3250, 0]
type = VelSet
trigger1 = (root, Time = 42) ;&& (root, Time < 150) 
x = RootDist X /10 ;7 (by P.O.T.S.)
y = RootDist Y /10 ;6.5
persistent = 0

[State 3250, 3]
type = VelSet
trigger1 = RootDist X = [-10, 10]
x = 0

[State 3250, 4]
type = VelSet
trigger1 = RootDist Y = [10, 40]
y = 0

[State 3250, 5]
type = ChangeState 
trigger1 = root, Time = 236 
trigger2 = root, MoveType = H
value = 3251

;---------------------------------------------------------------------------
; Beat: Helper (end)
[Statedef 3251]
type = A
movetype = I
ctrl = 0
;anim = 3250
velset = 0,0 ;3.5, 1.5
sprpriority = 3

[State 3251, 0]
type = PosSet
trigger1 = !Time 
x = root, Pos X 

[State 3251, 1] 
type = PosSet
;trigger1 = root, Pos Y < 0
trigger1 = !Time 
y = root, Pos Y

[State 3251, 2]
type = VelSet
trigger1 = !Time ;root, Time > 180 ;AnimElem = 35
x = 6.5
y = -2.5

[State 3251, 3]
type = DestroySelf
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105
;---------------------------------------------------------------------------
; Auto: Helper GetHit
[Statedef 1225]
type = A
movetype = I
ctrl = 0
anim = 1205;1201
velset = 0, 0
sprpriority = 5

[State 1225, 0]
type = VelSet
trigger1 = Time = 0
x = -.5

[State 1225, 1]
type = VelAdd
trigger1 = Time >= 0
y = .1

[State 1225, 2.1]
type = Explod
trigger1 = Time % 4 = 0 && Time < 300
anim = 9040
postype = p1
pos = 0, -10
velocity = 0, 0
accel = 0, 0
random = 40, 40
removetime = -2
ownpal = 1
sprpriority = 6

[State 1225, 2.2]
type = Explod
trigger1 = Time % 4 = 0 && Time < 300
anim = 9040
postype = p1
pos = 5, -40
velocity = 0, 0
accel = 0, 0
random = 40, 40
removetime = -2
ownpal = 1
sprpriority = 6

[State 1225, 2.2]
type = Explod
trigger1 = Time % 4 = 0 && Time < 300
anim = 9040
postype = p1
pos = 3, -70
velocity = 0, 0
accel = 0, 0
random = 40, 40
removetime = -2
ownpal = 1
sprpriority = 6

[State 1225, 3]
type = DestroySelf
trigger1 = ScreenPos Y < 15
trigger2 = BackEdgeDist < -105 || FrontEdgeDist < -105
trigger3 = ScreenPos Y > 455

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Rush (code by VIB)
[Statedef 7000]
type = S
movetype = I
physics = N
velset = 0,0
;anim = 7000
ctrl = 0
sprpriority = -4

[State 7000, 0]
type = PlayerPush
trigger1 = !Time
value = 0

[State 7000, 0]
type = PosSet
trigger1 = PrevStateNo = 7301
y = 0

[State 7000, stand anim]
type = ChangeAnim
;triggerall = RoundState != 4
trigger1 = PrevStateNo != 7021
trigger1 = Facing = Var(32)
trigger1 = !Time
value = 7000

[State 7000, back from walking back]
type = ChangeAnim
;triggerall = RoundState != 4
trigger1 = PrevStateNo = 7021
trigger1 = Facing = Var(32)
trigger1 = !Time
value = 7005

[State 7000, vira]
type = ChangeAnim
;triggerall = RoundState != 4
trigger1 = Anim = 7005
trigger1 = AnimTime = 0
value = 7000

[State 7000, 1]
type = PalFX
trigger1 = Time = 0
time = 1

[State 7000, Start Round Invisible (mega in stateb 5900)]
type = ChangeState
trigger1 = root, var(33) = 1
trigger1 = root, StateNo != 6028
value = 7900

[State 7000, walk foward]
type = ChangeState
;triggerall = RoundState != 4
triggerall = Var(31) > 70*ifelse(Var(32) = Facing,1,-1) + 15
trigger1 = Var(41) < 1
trigger2 = FrontEdgeBodyDist != [0,20]
value = 7020

[State 7000, walk back]
type = ChangeState
;triggerall = RoundState != 4
triggerall = Var(31) < 10*ifelse(Var(32) = Facing,1,-1) - 15 ;70*ifelse... -15
trigger1 = Var(41) > -1
trigger2 = BackEdgeBodyDist != [0,20]
value = 7021

[State 7000, vira]
type = ChangeState
;triggerall = RoundState != 4
trigger1 = Facing != Var(32)
value = 7005

[State 7000, mad]
type = ChangeState
;triggerall = RoundState != 4
trigger1 = parent, var(20) = 24 ;command = "hold_z"
;trigger1 = Time > 19
value = 7220

[State 7000, sad]
type = ChangeState
trigger1 = parent, MoveType = H
trigger1 = parent, GetHitVar(hitcount) > 2
;trigger2 = parent, MoveType = H
;trigger2 = RoundState = 4
value = 7500

[State 7000, Win Poses]
type = ChangeState
trigger1 = RoundState = 4
value = 7180

[State 7000, Win Pose - start]
type = ChangeState
triggerall = PrevStateNo = 7182
trigger1 = Time = 0 ;RoundState = 4
value = 7182

[State 7000, Megaman Dead]
type = ChangeState
trigerall = StateNo != 7500
trigger1 = !parent, Alive
value = 7500

[State 7000, Hyper Megaman / Rush Drill]
type = ChangeState
;triggerall = PrevStateNo != 7301
triggerall = Anim = 7000
trigger1 = root, StateNo = 3000
trigger1 = root, Time < 57 ;AnimElem = 1
trigger2 = root, StateNo = 3100
trigger2 = root, Time < 57 ;AnimElem = 1
value = 7300

[State 7000, Beat Plane]
type = ChangeState
triggerall = Anim = 7000
trigger1 = root, StateNo = 3200
trigger1 = root, Time >= 15 ;= 15
value = 7320

[State 7000, S.Adaptor]
type = ChangeState
trigger1 = parent, PrevStateNo != 6028
trigger1 = parent, StateNo = 6028
value = 7230

[State 7000, Jet Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2000
trigger1 = root, StateNo = 2000
value = 7240

[State 7000, remove rush back (facing = 1)]
type = RemoveExplod
trigger1 = !Time
ID = 7241

[State 7000, remove rush back (facing = -1)]
type = RemoveExplod
trigger1 = !Time
ID = 7242

[State 7000, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7243

[State 7000, 11] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7244

[State 7000, 12] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7245

[State 7000, 13] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7246

[State 7000, Coil Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2100
trigger1 = root, StateNo = 2100
value = 7260

;---------------------------------------------------------------------------
; Rush - Turn
[Statedef 7005]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7005
ctrl = 0
sprpriority = -4

[State 7005, 1]
type = PalFX
trigger1 = Time = 0
time = 1

[State 7005, var(41)]
type = VarSet
trigger1 = !Time
var(41) = 0

[State 7005, vira]
type = Turn
trigger1 = !Time ;!AnimTime

[State 7005, volta]
type = ChangeState
trigger1 = !AnimTime
value = 7000

[State 7005, Megaman Dead]
type = ChangeState
trigerall = StateNo != 7500
trigger1 = !parent, Alive
value = 7500

[State 7005, remove rush back (facing = 1)]
type = RemoveExplod
trigger1 = !Time
ID = 7241

[State 7005, remove rush back (facing = -1)]
type = RemoveExplod
trigger1 = !Time
ID = 7242

[State 7005, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7243

[State 7005, 11] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7244

[State 7005, 12] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7245

[State 7005, 13] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7246

;---------------------------------------------------------------------------
; Rush - Walk Foward
[Statedef 7020]
type    = S
movetype= I
physics = N
velset = 3.2,0
anim = 7020
ctrl = 0
sprpriority = -4

[State 7020, 1]
type = PalFX
trigger1 = Time = 0
time = 1

[State 7020, var(41)]
type = VarSet
trigger1 = !Time
var(41) = 0

[State 7020, var(41) add]
type = VarAdd
trigger1 = Var(40) = Floor(Pos X)
trigger1 = Var(40)
trigger1 = FrontEdgeBodyDist = [0,20]
var(41) = 1

[State 7020, Var(40)]
type = VarSet
trigger1 = 1
var(40) = Floor(Pos X)

[State 7020, corre]
type = ChangeState
trigger1 = Var(31) > ifelse(Var(32) = Facing,105,-10) ;130,-10
value = 7100

[State 7020, volta]
type = ChangeState
trigger1 = Var(31) <= 70*ifelse(Var(32) = Facing,1,1) ;1,-1
trigger2 = Var(41) > 5
value = 7000 + 5*(Var(32) != Facing)

[State 7020, mad]
type = ChangeState
trigger1 = parent, var(20) = 24 ;command = "hold_z"
value = 7220

[State 7020, sad]
type = ChangeState
trigger1 = parent, MoveType = H
trigger1 = parent, GetHitVar(hitcount) > 2
;trigger2 = parent, MoveType = H
;trigger2 = RoundState = 4
value = 7500

;[State 7020, Megaman Dead]
;type = ChangeAnim
;;triger1 = StateNo != 7500
;trigger1 = !(parent, Alive)
;trigger1 = Anim = 7005
;value = 7500

[State 7020, S.Adaptor]
type = ChangeState
trigger1 = parent, PrevStateNo != 6028
trigger1 = parent, StateNo = 6028
value = 7230

[State 7020, Jet Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2000
trigger1 = root, StateNo = 2000
value = 7240

[State 7020, remove rush back (facing = 1)]
type = RemoveExplod
trigger1 = !Time
ID = 7241

[State 7020, remove rush back (facing = -1)]
type = RemoveExplod
trigger1 = !Time
ID = 7242

[State 7020, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7243

[State 7020, 11] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7244

[State 7020, 12] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7245

[State 7020, 13] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7246

[State 7020, Coil Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2100
trigger1 = root, StateNo = 2100
value = 7260

;---------------------------------------------------------------------------
; Rush - Walk Back
[Statedef 7021]
type    = S
movetype= I
physics = N
velset = -3.0,0
anim = 7021
ctrl = 0
sprpriority = -4

[State 7021, 1]
type = PalFX
trigger1 = Time = 0
time = 1

;[State 7021, turn anim]
;type = ChangeAnim
;triggerall = var(41) = 0
;;triggerall = PrevStateNo = 7000
;trigger1 = Time = 0
;value = 7005

;[State 7021, turn anim]
;type = ChangeAnim
;;trigger1 = Anim = 7005
;trigger1 = Time = 9 ;AnimTime = 0
;value = 7021

;[State 7021, 1]
;type = VelSet
;;trigger1 = Anim = 7005
;trigger1 = Time = 9
;x = -3.0

[State 7021, var(41)]
type = VarSet
trigger1 = !Time
var(41) = 0

[State 7021, var(41) add]
type = VarAdd
trigger1 = Var(40) = Floor(Pos X)
trigger1 = Var(40)
trigger1 = BackEdgeBodyDist = [0,20]
var(41) = -1

[State 7021, Var(40)]
type = VarSet
trigger1 = 1
var(40) = Floor(Pos X)

[State 7021, corre trs]
type = ChangeState
trigger1 = var(31) < ifelse(Var(32) = Facing, -25,-190) ;-30,-190
trigger1 = time
value = 7105

[State 7021, volta]
type = ChangeState
trigger1 = Var(31) >= 10*ifelse(Var(32) = Facing,1,-1) ;70*ifelse...
trigger2 = Var(41) < -5
value = 7000 + 5*(Var(32) != Facing)

[State 7021, mad]
type = ChangeState
trigger1 = parent, var(20) = 24 ;command = "hold_z"
value = 7220

[State 7021, sad]
type = ChangeState
trigger1 = parent, MoveType = H
trigger1 = parent, GetHitVar(hitcount) > 2
;trigger2 = parent, MoveType = H
;trigger2 = RoundState = 4
value = 7500

;[State 7021, Megaman Dead]
;type = ChangeState
;;trigger1 = StateNo != 7500
;trigger1 = !(parent, Alive)
;trigger1 = Anim = 7005
;value = 7500

[State 7021, S.Adaptor]
type = ChangeState
trigger1 = parent, PrevStateNo != 6028
trigger1 = parent, StateNo = 6028
value = 7230

[State 7021, Jet Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2000
trigger1 = root, StateNo = 2000
value = 7240

[State 7021, remove rush back (facing = 1)]
type = RemoveExplod
trigger1 = !Time
ID = 7241

[State 7021, remove rush back (facing = -1)]
type = RemoveExplod
trigger1 = !Time
ID = 7242

[State 7021, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7243

[State 7021, 11] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7244

[State 7021, 12] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7245

[State 7021, 13] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7246

[State 7021, Coil Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2100
trigger1 = root, StateNo = 2100
value = 7260

;---------------------------------------------------------------------------
; Rush - Run Foward
[Statedef 7100]
type    = S
movetype= I
physics = N
velset = 6,0 ;6,0
anim = 7100
ctrl = 0
sprpriority = -4

[State 7100, 1]
type = PalFX
trigger1 = Time = 0
time = 1

[State 7100, var(41)]
type = VarSet
trigger1 = !Time
var(41) = 0

[State 7100, var(41) add]
type = VarAdd
trigger1 = Var(40) = Floor(Pos X)
trigger1 = Var(40)
trigger1 = FrontEdgeBodyDist = [0,20]
var(41) = 1

[State 7100, Var(40)]
type = VarSet
trigger1 = 1
var(40) = Floor(Pos X)

[State 7100, volta]
type = ChangeState
trigger1 = Var(31) <= ifelse(Var(32) = Facing,90,-10);-40
trigger2 = Var(41) > 5
value = 7000

[State 7100, mad]
type = ChangeState
trigger1 = parent, var(20) = 24 ;command = "hold_z"
value = 7220

[State 7100, sad]
type = ChangeState
trigger1 = parent, MoveType = H
trigger1 = parent, GetHitVar(hitcount) > 2
;trigger2 = parent, MoveType = H
;trigger2 = RoundState = 4
value = 7500

;[State 7100, Megaman Dead]
;type = ChangeState
;trigerall = StateNo != 7500
;trigger1 = !parent, Alive
;value = 7500

[State 7100, S.Adaptor]
type = ChangeState
trigger1 = parent, PrevStateNo != 6028
trigger1 = parent, StateNo = 6028
value = 7230

[State 7100, Jet Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2000
trigger1 = root, StateNo = 2000
value = 7240

[State 7100, remove rush back (facing = 1)]
type = RemoveExplod
trigger1 = !Time
ID = 7241

[State 7100, remove rush back (facing = -1)]
type = RemoveExplod
trigger1 = !Time
ID = 7242

[State 7100, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7243

[State 7100, 11] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7244

[State 7100, 12] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7245

[State 7100, 13] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7246

[State 7100, Coil Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2100
trigger1 = root, StateNo = 2100
value = 7260

;---------------------------------------------------------------------------
; Rush - Run Back
[Statedef 7105]
type    = S
movetype= I
physics = N
velset = -6.5,0 ;-7.4,0
anim = 7105
ctrl = 0
sprpriority = -4

[State 7105, 1]
type = PalFX
trigger1 = Time = 0
time = 1

[State 7105, var(41)]
type = VarSet
trigger1 = !Time
var(41) = 0

[State 7105, var(41) add]
type = VarAdd
trigger1 = Var(40) = Floor(Pos X)
trigger1 = Var(40)
trigger1 = BackEdgeBodyDist = [0,20]
var(41) = -1

[State 7105, Var(40)]
type = VarSet
trigger1 = 1
var(40) = Floor(Pos X)

[State 7105, volta]
type = ChangeState
trigger1 = Var(31) >= ifelse(Var(32) = Facing, -11,-220)
trigger2 = Var(41) < -5
value = 7000

[State 7105, mad]
type = ChangeState
trigger1 = parent, var(20) = 24 ;command = "hold_z"
value = 7220

[State 7105, sad]
type = ChangeState
trigger1 = parent, MoveType = H
trigger1 = parent, GetHitVar(hitcount) > 2
;trigger2 = parent, MoveType = H
;trigger2 = RoundState = 4
value = 7500

;[State 7105, Megaman Dead]
;type = ChangeAnim
;trigerall = StateNo != 7500
;trigger1 = !parent, Alive
;value = 7500

[State 7105, S.Adaptor]
type = ChangeState
trigger1 = parent, PrevStateNo != 6028
trigger1 = parent, StateNo = 6028
value = 7230

[State 7105, Jet Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2000
trigger1 = root, StateNo = 2000
value = 7240

[State 7105, remove rush back (facing = 1)]
type = RemoveExplod
trigger1 = !Time
ID = 7241

[State 7105, remove rush back (facing = -1)]
type = RemoveExplod
trigger1 = !Time
ID = 7242

[State 7105, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7243

[State 7105, 11] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7244

[State 7105, 12] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7245

[State 7105, 13] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7246

[State 7105, Coil Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2100
trigger1 = root, StateNo = 2100
value = 7260

;---------------------------------------------------------------------------
; Rush - Win Pose State Decider
[Statedef 7180]
type    = S
movetype= I
physics = N

[State 7180, 1]
type = ChangeState
trigger1 = parent, StateNo = [181, 184]
trigger2 = parent, StateNo = 186
value = 7181

[State 7180, 2]
type = ChangeState
trigger1 = parent, StateNo = 185
value = 7182

[State 7180, Megaman Dead]
type = ChangeState
;trigger1 = StateNo != 7500
trigger1 = !(root, Alive)
value = 7500

;---------------------------------------------------------------------------
; Rush - Win Pose (Hologram)
[Statedef 7181]
type    = S
movetype= I
physics = N
velset = 0,0
;anim = 7180
ctrl = 0
sprpriority = -4

[State 7181, 1]
type = ChangeAnim
trigger1 = parent, StateNo = [181, 184]
trigger1 = Time = 3
trigger2 = parent, StateNo = 186
trigger2 = Time = 20
value = 7180

[State 7181, 2]
type = Explod
triggerall = NumExplod(7800) < 1
trigger1 = AnimElem = 12
persistent = 1
ID = 7800
anim = 7800
postype = p1
pos = -16, 0
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -5
bindtime = -1
ownpal = 0

[State 7181, 3] ;Dr.Light "not cake" :P
type = PlaySnd
triggerall = NumExplod(7800) > 0
trigger1 = parent, StateNo = 181 || parent, StateNo = 182
trigger2 = parent, StateNo = 183
trigger3 = parent, StateNo = 184
value = 0, 9
;channel = 0
persistent = 0

[State 7181, 4] ;Dr.Light "cake"
type = PlaySnd
triggerall = NumExplod(7800) > 0
trigger1 = parent, StateNo = 186
value = 0, 10
;channel = 0
persistent = 0

[State 7181, 5] ;Rush barck
type = PlaySnd
triggerall = AnimElem = 4
trigger1 = parent, StateNo = 181 || parent, StateNo = 182
trigger2 = parent, StateNo = 183
trigger3 = parent, StateNo = 184
trigger4 = parent, StateNo = 186
value = 0, 13
;channel = 0
persistent = 0

[State 7181, 5] ;hologram start
type = PlaySnd
triggerall = AnimElem = 8
trigger1 = parent, StateNo = 181 || parent, StateNo = 182
trigger2 = parent, StateNo = 183
trigger3 = parent, StateNo = 184
trigger4 = parent, StateNo = 186
value = 0, 11
;channel = 0
persistent = 0

[State 7181, 5] ;hologram working
type = PlaySnd
triggerall = AnimElem = 11
trigger1 = parent, StateNo = 181
trigger2 = parent, StateNo = 183
trigger3 = parent, StateNo = 184
trigger4 = parent, StateNo = 186
value = 0, 12
;channel = 0
persistent = 0


;---------------------------------------------------------------------------
; Rush - Win Pose (Megaman hug)
[Statedef 7182]
type    = S
movetype= I
physics = N
;velset = 0,0
;anim = 7181
ctrl = 0
sprpriority = -4

[State 7182, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 7100

[State 7182, 0] ;mode 1
type = ParentVarSet
trigger1 = Var(31) <= 50*ifelse(Var(32) = Facing,1,-1) ;20*
trigger1 = !Time
v = 8
value = 1

[State 7182, 0] ;mode 2
type = ParentVarSet
trigger1 = Var(31) > 50*ifelse(Var(32) = Facing,1,-1)
trigger1 = !Time
v = 8
value = 2

[State 7182, volta mode 1]
type = ChangeAnim
triggerall = parent, Var(8) = 1
triggerall = Anim = 7100
trigger1 = Var(31) <= 10*ifelse(Var(32) = Facing,1,-1) ;20*
trigger1 = Time > ifelse(ParentDist X < 10, 0, 5) ;5
value = 7000 ;7181;7000

[State 7182, volta mode 2]
type = ChangeAnim
triggerall = parent, Var(8) = 2
triggerall = Anim = 7100
trigger1 = Var(31) <= 50*ifelse(Var(32) = Facing,1,-1) ;20*
trigger1 = Time > 5
value = 7000

[State 7182, 0] ;mode 1
type = ParentVarSet
triggerall = parent, Var(8) = 1
trigger1 = Anim = 7000 ;7181
v = 5
value = 1

[State 7182, 0] ;mode 2
type = ParentVarSet
triggerall = parent, Var(8) = 2
trigger1 = Anim = 7000
v = 5
value = 2

[State 7182, 0]
type = ParentVarSet
trigger1 = parent, Anim = 186
trigger2 = parent, Anim = 5
trigger2 = parent, AnimElem = 1, = 1
v = 8
value = 0

[State 7182, 0]
type = ParentVarSet
trigger1 = parent, Anim = 186
trigger2 = parent, Anim = 5
v = 5
value = 0

[State 7182, Var(40)]
type = VelSet
trigger1 = !Time
x = 3

[State 7182, Var(40)]
type = VelSet
trigger1 = Anim = 7000
x = 0

[State 7182, 1]
type = ChangeAnim
trigger1 = parent, Anim = 186
trigger1 = parent, AnimElem = 2, = 1
value = 7181

[State 7182, Var(40)] ;mode 1
type = PosAdd
triggerall = var(32) = Facing
triggerall = Anim = 7181
trigger1 = AnimElem = 2
x = 30

[State 7182, Var(40)] ;mode 2
type = PosAdd
triggerall = var(32) != Facing
triggerall = Anim = 7181
trigger1 = AnimElem = 2
x = 10

[State 7182, turn]
type = Turn
triggerall = var(32) != Facing
triggerall = Anim = 7181
trigger1 = parent, AnimElem = 3, = 2;3

;[State 7182, 4]
;type = SprPriority
;;triggerall = var(32) != Facing
;triggerall = Anim = 7181
;trigger1 = AnimElem = 2
;value = 6

;---------------------------------------------------------------------------
; Rush - Intro State Decider
[Statedef 7190]
type    = S
movetype= I
physics = N

[State 7190, gogo]
type = ChangeState
trigger1 = 1
value = ifelse((root, StateNo = 191), 7191, 7000)

;---------------------------------------------------------------------------
; Rush - Intro I
[Statedef 7191]
type    = S
movetype= I
physics = N
velset = 0,0;2.8,0
anim = 7191;7020
ctrl = 0
sprpriority = -4

[State 7191, 1]
type = PalFX
trigger1 = Time = [42, 43]
add = 255,255,255
time = 1

[State 7191, 2]
type = PalFX
trigger1 = Time = [44, 47]
add = 255,120,120
time = 1

[State 7191, 3]
type = PalFX
trigger1 = Time = [48, 50]
add = 256,80,80
time = 1

[State 7191, 4]
type = PalFX
trigger1 = Time = [51, 54]
add = 155,50,50
time = 1

[State 7191, 5]
type = PalFX
trigger1 = Time = [55, 57]
add = 95,20,20
time = 1

;[State 7191, pos ini]
;type = PosSet
;triggerall = RoundNo = 1
;trigger1 = !Time
;x = Parent, Pos X - 300*Facing

;[State 7191, vel ini]
;type = VelSet
;triggerall = RoundNo = 1
;trigger1 = !Time
;x = 2.8

[State 7191, volta]
type = ChangeState
triggerall = RoundNo = 1
;trigger1 = Var(31) <= 70*ifelse(Var(32) = Facing,1,-1)
;trigger1 = Time > 5
trigger1 = AnimTime = 0
value = 7000

[State 7191, volta 2]
type = ChangeState
triggerall = RoundNo != 1
trigger1 = !Time
value = 7000

;---------------------------------------------------------------------------
; Rush - Mad
[Statedef 7220]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7220
ctrl = 0
sprpriority = -4

[State 7220, vira]
type = Turn
;trigger1 = NumEnemy > 0
trigger1 = P2Dist X <= -5 ;enemy, ParentDist X <= -20

[State 7220, 1]
type = PalFX
trigger1 = Time = 0
time = 1

[State 7220, 2]
type = ChangeState
trigger1 = NumHelper(229) < 1 ;parent, command != "hold_z"
value = 7000

;---------------------------------------------------------------------------
; Rush - Sad
[Statedef 7500]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7500
ctrl = 0
sprpriority = -4

[State 7500, vira]
type = Turn
trigger1 = ParentDist X <= -20

[State 7500, remove rush back (facing = 1)]
type = RemoveExplod
trigger1 = !Time
;trigger1 = !Alive
;trigger2 = MoveType = H
ID = 7241

[State 7500, remove rush back (facing = -1)]
type = RemoveExplod
trigger1 = !Time
;trigger1 = !Alive
;trigger2 = MoveType = H
ID = 7242

[State 7500, remove jet fire (facing = 1)]
type = RemoveExplod
trigger1 = !Time
;trigger1 = !Alive
;trigger2 = MoveType = H
ID = 7243

[State 7500, remove jet fire (facing = 1)]
type = RemoveExplod
trigger1 = !Time
;trigger1 = !Alive
;trigger2 = MoveType = H
ID = 7244

[State 7500, remove jet fire (facing = -1)]
type = RemoveExplod
trigger1 = !Time
;trigger1 = !Alive
;trigger2 = MoveType = H
ID = 7245

[State 7500, remove jet fire (facing = -1)]
type = RemoveExplod
trigger1 = !Time
;trigger1 = !Alive
;trigger2 = MoveType = H
ID = 7246

[State 7500, 1]
type = ChangeState
trigger1 = parent, Alive
trigger1 = parent, MoveType != H
value = 7000

;---------------------------------------------------------------------------
; Rush - Hyper Megaman / Rush Drill
[Statedef 7300]
type = A
movetype = I
ctrl = 0
anim = 7000 ;3050
velset = 0,0
sprpriority = -4

[State 7300, 1]
type = ChangeAnim
trigger1 = root, StateNo = [3000, 3099]
trigger1 = root, AnimElem = 6
trigger2 = root, StateNo = [3100, 3199]
trigger2 = root, var(45) = 1
value = 9930

[State 7300, 2]
type = ChangeAnim
trigger1 = root, StateNo = [3000, 3099]
trigger1 = (root, Anim = 3000 && root, AnimElem = 35) || (root, Anim = 53 && root, AnimElem = 1)
trigger2 = root, StateNo = [3100, 3199]
trigger2 = root, var(45) = 182
trigger3 = root, MoveType = H
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger4 = root, StateNo = [5000, 5999]
value = 7000

[State 7300, 0]
type = VelSet
trigger1 = (root, Time = 19)
trigger1 = root, StateNo != 3950 ;Super Armor state
x = RootDist X/10
;y = RootDist Y/10
persistent = 0

[State 7300, 0.1] ;AIR
type = VelSet
trigger1 = root, StateNo != [3100, 3199]
trigger1 = root, StateNo != 3950 ;Super Armor state
trigger1 = root, Pos Y < 0
trigger1 = (root, Time = 19)
y = RootDist Y/10
persistent = 0

[State 7300, 3]
type = VelSet
trigger1 = RootDist X = [-10, 10]
x = 0
;persistent = 0

[State 7300, 4] ;AIR
type = VelSet
trigger1 = root, StateNo != [3100, 3199]
trigger1 = root, StateNo != 3950 ;Super Armor state
trigger1 = root, Pos Y < 0
trigger1 = RootDist Y = [10, 30]
y = 0
;persistent = 0

[State 7300, 2]
type = PalFX
trigger1 = root, Time = [17, 20]
add = 60,60,60 ;20,20,95
time = 1

[State 7300, 3]
type = PalFX
trigger1 = root, Time = [21, 23]
add = 100,100,100 ;50,50,155
time = 1

[State 7300, 4]
type = PalFX
trigger1 = root, Time = [24, 27]
add = 150,150,150 ;80,80,256
time = 1

[State 7300, 5]
type = PalFX
trigger1 = root, Time = [28, 30]
add = 200,200,200 ;120,120,255
time = 1

[State 7300, 5]
type = PalFX
trigger1 = root, Time = 31 ;[31, 59]
trigger2 = root, StateNo = [3000, 3099]
trigger2 = root, var(59) = [178, 187] ;Time = [178, 187]
trigger3 = root, StateNo = [3100, 3199]
trigger3 = root, var(45) = [173, 182]
add = 256,256,256
time = 28 ;1

[State 7300, 5]
type = ChangeState
trigger1 = root, StateNo = [3000, 3099]
trigger1 = (root, Anim = 3000 && root, AnimElem = 35) || (root, Anim = 53 && root, AnimElem = 1)
trigger2 = root, StateNo = [3100, 3199]
trigger2 = root, var(45) = 182
trigger3 = root, MoveType = H
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger4 = (root, StateNo = [5000, 5999]) && (root, PrevStateNo = 3950) ;Super Armor state
value = 7301

;---------------------------------------------------------------------------
; Rush - Hyper Megaman / Rush Drill (end)
[Statedef 7301]
type = A
movetype = I
ctrl = 0
;anim = 7021
velset = 0,0
sprpriority = -4

[State 7301, 1]
type = PosSet
trigger1 = !Time
x = root, Pos X

[State 7301, 1] ;AIR
type = PosSet
trigger1 = root, Pos Y < 0
trigger1 = !Time
y = root, Pos Y

[State 7301, 1]
type = VelSet
trigger1 = !Time
x = -3*(root,facing)*facing ;by P.O.T.S.   ;-2
;y = -1.5

[State 7301, 1] ;AIR
type = VelSet
trigger1 = root, Pos Y < 0
trigger1 = !Time
y = -1.5

[State 7301, 1.2] ;AIR
type = VelAdd
trigger1 = root, Pos Y < 0
trigger1 = Time >= 0
y = .44 ;const(movement.yaccel)

[State 7301, 1]
type = VelSet
trigger1 = Time = 20 ;ParentDist X = [60, 50] ;Var(31) = 60*ifelse(Var(32) = Facing,1,1)
x = 0

;[State 7301, 2]
;type = PalFX
;trigger1 = !Time
;add = 256,256,256
;time = 1

[State 7301, 5]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [178, 187] ;Time = [178, 187]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [183, 191]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [0, 10]
add = 256,256,256
time = 1

[State 7301, 55]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [188, 190] ;Time = [188, 190]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [192, 194]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [11, 13]
add = 200,200,200 ;120,120,255
time = 1

[State 7301, 4]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [191, 192] ;Time = [191, 192]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [195, 196]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [14, 15]
add = 150,150,150 ;80,80,256
time = 1

[State 7301, 3]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [193, 195] ;Time = [193, 195]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [197, 199]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [16, 18]
add = 100,100,100 ;50,50,155
time = 1

[State 7301, 2]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [196, 197] ;Time = [196, 197]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [200, 201]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [19, 20]
add = 60,60,60 ;20,20,95
time = 1

[State 7301, 0] ;turn in finish pose
type = Turn
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, Anim = 53
trigger1 = P2Dist X < -5
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, Anim = 3101 || root, Anim = 53
trigger2 = P2Dist X < -5
trigger3 = (root, MoveType = H) ;gethit
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = P2Dist X < -5

[State 7301, 1] ;AIR
type = PosSet
;trigger1 = root, Pos Y < 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y)
y = 0

[State 7301, 1]
type = VelSet
trigger1 = root, Pos Y = 0
trigger1 = Time = 16
x = 0

[State 7301, 2]
type = ChangeState
trigger1 = root, StateNo = [3000, 3099]
trigger1 = root, Anim = 3000
trigger1 = Time = 20
trigger2 = root, StateNo = [3100, 3199]
trigger2 = Pos Y >= 0
trigger2 = Time = 20
trigger3 = (root, MoveType = H) || (StateNo != [3000, 4999]) ;gethit
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Pos Y >= 0
trigger3 = Time = 20
value = 7000

[State 7301, 2]
type = ChangeState
trigger1 = root, StateNo = [3000, 3099] ;AIR
trigger1 = root, Anim = 53              ;AIR
trigger1 = Time >= 1                    ;AIR
trigger2 = root, StateNo = [3100, 3199] ;AIR
trigger2 = Pos Y < 0                    ;AIR
trigger2 = Time >= 1                    ;AIR
trigger3 = (root, MoveType = H) || (StateNo != [3000, 4999]) ;gethit in AIR
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Pos Y < 0
trigger3 = Time >= 1
value = 7302

;---------------------------------------------------------------------------
; Rush - Hyper Megaman / Rush Drill (In Air) (end)
[Statedef 7302]
type = A
movetype = I
ctrl = 0
;anim = 7021
;velset = 0,0
sprpriority = -4

[State 7302, 1.2] ;AIR
type = VelAdd
trigger1 = Pos Y < 0
trigger1 = Time >= 0
y = .44

[State 7302, 5]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [178, 187] ;Time = [178, 187]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [183, 191]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [0, 10]
add = 256,256,256
time = 1

[State 7302, 5]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [188, 190] ;Time = [188, 190]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [192, 194]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [11, 13]
add = 200,200,200 ;120,120,255
time = 1

[State 7302, 4]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [191, 192] ;Time = [191, 192]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [195, 196]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [14, 15]
add = 150,150,150 ;80,80,256
time = 1

[State 7302, 3]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [193, 195] ;Time = [193, 195]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [197, 199]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [16, 18]
add = 100,100,100 ;50,50,155
time = 1

[State 7302, 2]
type = PalFX
trigger1 = (root, StateNo = [3000, 3099])
trigger1 = root, var(59) = [196, 197] ;Time = [196, 197]
trigger2 = (root, StateNo = [3100, 3199])
trigger2 = root, var(45) = [200, 201]
trigger3 = (root, MoveType = H)
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = Time = [19, 20]
add = 60,60,60 ;20,20,95
time = 1

[State 7302, 0] ;turn in finish pose
type = Turn
trigger1 = root, StateNo = [3000, 3099]
trigger1 = root, Anim = 53
trigger1 = P2Dist X < -5
trigger2 = root, StateNo = [3100, 3199]
trigger2 = root, Anim = 53
trigger2 = P2Dist X < -5
trigger3 = (root, MoveType = H) ;gethit
trigger3 = root, StateNo != 3950 ;Super Armor state
trigger3 = P2Dist X < -5

[State 7302, 1] ;AIR
type = PosSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y)
y = 0

[State 7302, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 7000

;---------------------------------------------------------------------------
; Rush - Beat Plane
[Statedef 7320]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7320
ctrl = 0
sprpriority = -4

[State 7320, 1]
type = PosAdd;Set
trigger1 = AnimElem = 2
x = 48*(root,facing)*facing ;by P.O.T.S. ;floor(root, Pos X)

[State 7320, 2]
type = VelSet
trigger1 = AnimElem = 24
y = -20

[State 7320, 3]
type = ChangeState
trigger1 = root, Time = 221;241
trigger2 = root, MoveType = H
trigger3 = root, StateNo = [5000, 5999]
value = 7321

;---------------------------------------------------------------------------
; Rush - Beat Plane (end)
[Statedef 7321]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7191
ctrl = 0
sprpriority = -4

[State 7321, 0] ;Rush down
type = PlaySnd
trigger1 = Time = 6
value = 1, 0
channel = 3
supermovetime = 999999

[State 7321, 0] ;turn in finish pose
type = Turn
trigger1 = P2Dist X < -5

[State 7321, 0]
type = PosSet
trigger1 = !Time
trigger1 = root, facing
trigger1 = BackEdgeDist >= 6
x = floor(root, Pos X) -78
y = 0

[State 7321, 0]
type = PosSet
trigger1 = !Time
trigger1 = root, facing = -1
trigger1 = BackEdgeDist >= 6
x = floor(root, Pos X) +78
y = 0

[State 7321, 0]
type = PosSet
trigger1 = !Time
trigger1 = BackEdgeDist < 6
x = floor(root, Pos X)
y = 0

[State 7321, 1]
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 7190
postype = p1
pos = 48,0;*(root,facing)*facing, 0 ;floor(root, Pos X), 0
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = -2
ownpal = 0

[State 7321, 1]
type = PalFX
trigger1 = Time = [42, 43]
add = 255,255,255
time = 1

[State 7321, 2]
type = PalFX
trigger1 = Time = [44, 47]
add = 255,120,120
time = 1

[State 7321, 3]
type = PalFX
trigger1 = Time = [48, 50]
add = 256,80,80
time = 1

[State 7321, 4]
type = PalFX
trigger1 = Time = [51, 54]
add = 155,50,50
time = 1

[State 7321, 5]
type = PalFX
trigger1 = Time = [55, 57]
add = 95,20,20
time = 1

[State 7321, volta]
type = ChangeState
trigger1 = AnimTime = 0
value = 7000

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Rush - S.Adaptor MODE
[Statedef 7230]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7230
ctrl = 0
sprpriority = 9

;[State 7230, vira]
;type = Turn
;trigger1 = ParentDist X <= -20

[State 7300, 0]
type = VelSet
trigger1 = Time = 10
x = RootDist X/10

[State 7230, 1]
type = VelSet
trigger1 = RootDist X = [-5, 5]
x = 0

[State 7230, 2]
type = VelSet
trigger1 = Time = 10
y = -10

;[State 7230, 2]
;type = VelSet
;trigger1 = Time = 10
;y = -6

[State 7230, 2]
type = VelSet
trigger1 = AnimElem = 4
y = 0

[State 7230, 2]
type = VelSet
trigger1 = AnimElem = 9
y = 2

[State 7230, 2]
type = VelSet
trigger1 = AnimElem = 10
y = 0

[State 7230, 2]
type = PosSet
trigger1 = AnimElem = 10
y = 0

[State 7230, 6] ;rush voice
type = PlaySnd
trigger1 = AnimElem = 3 ;Time = 10
value = 18, 16 ;0, 13

[State 7230, 2]
type = BindToParent
trigger1 = parent, var(33) = 0
pos = 0, 0
time = 1

[State 7230, 2]
type = ChangeState
trigger1 = parent, var(33) = 0
value = 7231

;---------------------------------------------------------------------------
; Rush - Normal Mode
[Statedef 7231]
type = A
movetype = I
ctrl = 0
anim = 7000
velset = 0,0
sprpriority = -4

;[State 7231, 1]
;type = PosSet
;trigger1 = !Time
;x = root, Pos X

[State 7231, 5]
type = PalFX
trigger1 = Time = [0, 10]
add = 256,256,256
time = 10
ignorehitpause = 1
supermovetime = 999999

[State 7231, 5]
type = PalFX
trigger1 = Time = [11, 13]
add = 200,200,200 ;120,120,255
time = 1
ignorehitpause = 1
supermovetime = 999999

[State 7231, 4]
type = PalFX
trigger1 = Time = [14, 15]
add = 150,150,150 ;80,80,256
time = 1
ignorehitpause = 1
supermovetime = 999999

[State 7231, 3]
type = PalFX
trigger1 = Time = [16, 18]
add = 100,100,100 ;50,50,155
time = 1
ignorehitpause = 1
supermovetime = 999999

[State 7231, 2]
type = PalFX
trigger1 = Time = [19, 20]
add = 60,60,60 ;20,20,95
time = 1
ignorehitpause = 1
supermovetime = 999999

[State 7231, 1]
type = VelSet
trigger1 = !Time
x = -3*(root,facing)*facing ;by P.O.T.S.

[State 7231, 1]
type = VelSet
trigger1 = Time = 20
x = 0

[State 7231, 2]
type = ChangeState
trigger1 = Vel X = 0
value = 7000

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Rush - Jet MODE
[Statedef 7240]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7240
ctrl = 0
sprpriority = -2

[State 7240, 1]
type = ChangeState
trigger1 = AnimTime = 0 ;Time = 5
value = 7241

[State 7240, S.Adaptor]
type = ChangeState
trigger1 = parent, PrevStateNo != 6028
trigger1 = parent, StateNo = 6028
value = 7230

;---------------------------------------------------------------------------
; Rush - Jet MODE - jet
[Statedef 7241]
type    = A
movetype= I
velset = 0,0
anim = 7241
ctrl = 0
sprpriority = -2

;[State 7241, 0]
;type = PlayerPush
;trigger1 = 1
;value = 1

;--Super-start------

[State 7241, 0]
type = ChangeAnim
trigger1 = root, var(35) = 1
;trigger1 = root, var(35) != 0
trigger1 = root, var(36) = 15;1
value = 7244

[State 7241, 0]
type = ChangeAnim
trigger1 = Anim = 7244
trigger1 = root, var(35) = 0
value = 7241

[State 7241, 1]
type = PlaySnd
trigger1 = root, var(35) = 1
;trigger1 = root, var(35) != 0
trigger1 = root, var(36) = 15;1
value = 18, 16

[State 7241, 5]
type = PalFX
trigger1 = root, var(35) = 1
trigger1 = root, var(36) = [14, 37]
add = 256,256,256
time = 10
ignorehitpause = 1
supermovetime = 999999

[State 7241, 5]
type = PalFX
trigger1 = root, var(35) = 1
trigger1 = root, var(36) = [38, 40]
add = 200,200,200 ;120,120,255
time = 1
ignorehitpause = 1
supermovetime = 999999

[State 7241, 4]
type = PalFX
trigger1 = root, var(35) = 1
trigger1 = root, var(36) = [41, 42]
add = 150,150,150 ;80,80,256
time = 1
ignorehitpause = 1
supermovetime = 999999

[State 7241, 3]
type = PalFX
trigger1 = root, var(35) = 1
trigger1 = root, var(36) = [43, 45]
add = 100,100,100 ;50,50,155
time = 1
ignorehitpause = 1
supermovetime = 999999

[State 7241, 2]
type = PalFX
trigger1 = root, var(35) = 1
trigger1 = root, var(36) = [46, 47]
add = 60,60,60 ;20,20,95
time = 1
ignorehitpause = 1
supermovetime = 999999

[State 7241, 1]
type = Helper
trigger1 = root, var(35) = 1
trigger1 = NumHelper(77244) < 1
trigger1 = root, var(36) >= (root, var(36)%2)+58 ;45 ;>= 45 ;(root, var(36)) % 2 > 45
helpertype = normal
name = "Fireball A"
ID = 77244
postype = p1
pos = 50, -2
;facing = facing
stateno = 7244
supermovetime = 999999
ownpal = 1

;[State 7241, 1]
;type = Helper
;;trigger1 = NumHelper(77244) <= 3
;trigger1 = root, var(36) >= (root, var(36)%15)+45 ;>= 45 ;(root, var(36)) % 2 > 45
;helpertype = normal
;name = "Fireball B"
;ID = 77244
;postype = p1
;pos = 50, -5
;facing = facing
;stateno = 7245
;supermovetime = 999999
;ownpal = 1

;[State 7241, 1]
;type = Helper
;;trigger1 = NumHelper(77244) <= 3
;trigger1 = root, var(36) >= (root, var(36)%15)+45 ;>= 45 ;(root, var(36)) % 2 > 45
;helpertype = normal
;name = "Fireball C"
;ID = 77244
;postype = p1
;pos = 50, 5
;facing = facing
;stateno = 7246
;supermovetime = 999999
;ownpal = 1

[State 7241, super 2]
type = ChangeAnim
trigger1 = root, var(35) = 2
trigger1 = root, var(34) = 0
value = 7247

[State 7241, super 2]
type = PlaySnd
trigger1 = root, var(35) = 2
trigger1 = root, var(34) = 58;47
value = 18, 18

[State 7241, super 2] ;Turbo Fire
type = Explod
trigger1 = NumExplod(7250) < 1
trigger1 = root, var(35) = 2
trigger1 = root, var(34) >= 58;47
persistent = 1
ID = 7250
anim = 7250
postype = p1
pos = -54, -11
velocity = 0, 0
accel = 0, 0
removetime = -2
sprpriority = 6
bindtime = -1
ownpal = 1
supermovetime = 999999
ignorehitpause = 1

[State 7241, super 2] ;remove turbo fire
type = RemoveExplod
trigger1 = parent, PrevStateNo = 2001
trigger1 = parent, StateNo != [2001, 2002]
trigger2 = root, Anim != 7251 ;var(34) >= 90
trigger3 = root, movetype = H
ID = 7250

[State 7241, super 2]
type = ChangeAnim
trigger1 = root, var(35) != 2
trigger1 = Anim = 7247
value = 7241

[State 7241, super 3] ;state time add
type = ParentVarAdd
trigger1 = root, StateNo = 2001
trigger1 = root, var(35) = 3
trigger1 = root, Vel X = 0
trigger1 = root, Vel Y = 0
trigger2 = root, StateNo != 2001
trigger2 = root, var(35) = 3
var(36) = 1

[State 7241, super 3]
type = ChangeAnim
trigger1 = root, var(35) = 3
trigger1 = Anim = 7241
trigger1 = root, var(36) = 44;50;60;65
value = 7260

[State 7241, 3.2] ;back fire
type = Explod
trigger1 = NumExplod(7261) < 1
trigger1 = root, var(35) = 3
trigger1 = Anim = 7260
trigger1 = root, var(36) >= 46;55;65
ID = 7261
anim = 7261
postype = p1
pos = -5, -45
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 1
;removeongethit = 1

[State 7241, super 3]
type = PlaySnd
trigger1 = root, var(35) = 3
trigger1 = Anim = 7260
trigger1 = root, var(36) >= 46
value = 18, 18
persistent = 0

[State 7241, super 3]
type = VelSet
trigger1 = root, var(35) = 3
trigger1 = Anim = 7260
trigger1 = root, var(36) >= 48;60;70;75
x = 9
y = 11

;[State 7241, super 3]
;type = VelSet
;trigger1 = root, var(35) = 3
;trigger1 = Anim = 7260
;trigger1 = root, var(36) > 60;75
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= 0
;x = 0
;y = 0

[State 7241, super 3] ;AIR
type = PosSet
trigger1 = root, var(35) = 3
trigger1 = Anim = 7260
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y)
y = 0

[State 7241, super 3]
type = EnvShake
trigger1 = root, var(35) = 3
trigger1 = Anim = 7260
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y)
time = 46
ampl = 3;-2
freq = 70
phase = 30
supermovetime = 1000
ignorehitpause = 1

[State 7241, 2]
type = PlaySnd
trigger1 = root, var(35) = 3
trigger1 = Anim = 7260
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y)
value = 30, 5;40, 2
;channel = 2
persistent = 0

[State 7241, super 3]
type = Helper
trigger1 = NumHelper(7263) < 1
trigger1 = root, var(35) = 3
trigger1 = Anim = 7260
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y)
helpertype = normal
name = "Kamikaze Explosion"
ID = 7263
postype = p1
pos = 0, -3
stateno = 7251
ownpal = 1

[State 7241, super 3]
type = ChangeState
trigger1 = root, var(35) = 3
trigger1 = Anim = 7260
trigger1 = Pos Y >= 0
value = 7250

[State 7241, super 3]
type = ScreenBound
trigger1 = root, var(35) = 3
;trigger1 = root, var(36) = 0 ;&& root, var(36) < 3
trigger1 = root, Anim = 7264
value = 1
movecamera = 0, 0

[State 7241, super 3]
type = ScreenBound
trigger1 = root, var(35) = 3
;trigger1 = root, var(36) != 0
trigger1 = Anim = 7260
value = 1
movecamera = 1, 1

[State 7241, super 3]
type = Helper
trigger1 = NumHelper(7255) < 1
trigger1 = root, var(35) = 3
trigger1 = root, var(36) = 0
helpertype = normal
name = "Kamikaze Explosion"
ID = 7255
postype = p1
pos = 0, 0
stateno = 7255
ownpal = 1

;---Super-end--------

[State 7241, 0]
type = SprPriority
trigger1 = parent, StateNo = 2001
value = 9

[State 7241, 1]
type = SprPriority
trigger1 = parent, StateNo != 2001
value = -2

[State 7241, 1]
type = BindToParent
trigger1 = root, var(35) != 3
trigger1 = parent, StateNo = 2001
trigger2 = root, var(35) = 3
;trigger2 = root, Vel X != 0
;trigger2 = root, Vel Y != 0
trigger2 = parent, StateNo = 2001
trigger2 = root, var(36) < 43;58
pos = 1, 20
time = 1
;facing = 1

[State 7241, 2]
type = PlaySnd
trigger1 = parent, StateNo = 2001
value = 18, 18
persistent = 0

[State 7241, 0]
type = Turn
trigger1 = root, var(35) != 2 && root, var(35) != 3
;trigger1 = root, P2Dist X < -3;-5
trigger1 = root, facing = 1 && facing = -1
trigger2 = root, var(35) != 2 && root, var(35) != 3
trigger2 = root, facing = -1 && facing = 1

[State 7241, 3.2] ;Rush back (facing = 1)
type = Explod
trigger1 = facing = 1
trigger1 = NumExplod(7241) < 1
ID = 7241
anim = 7242
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3;ifelse((root, StateNo != 2001), 3, -3)
supermovetime = 999999
bindtime = -1
ownpal = 0
;removeongethit = 1

[State 7241, 10] ;remove rush back (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = parent, PrevStateNo != 6028
trigger4 = parent, StateNo = 6028
trigger5 = Anim = 7244
trigger6 = Anim = 7260
ID = 7241

[State 7241, 3.2] ;Rush back (facing = -1)
type = Explod
trigger1 = facing = -1
trigger1 = NumExplod(7242) < 1
ID = 7242
anim = 7242
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3;ifelse((root, StateNo != 2001), 3, -3)
supermovetime = 999999
bindtime = -1
ownpal = 0
;removeongethit = 1

[State 7241, 10] ;remove rush back (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = parent, PrevStateNo != 6028
trigger4 = parent, StateNo = 6028
trigger5 = Anim = 7244
trigger6 = Anim = 7260
ID = 7242


[State 7241, 3.2] ;Super Rush back (facing = 1)
type = Explod
trigger1 = facing = 1
trigger1 = NumExplod(7247) < 1
ID = 7247
anim = 7245
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3;ifelse((root, StateNo != 2001), 3, -3)
supermovetime = 999999
bindtime = -1
ownpal = 0
;removeongethit = 1

[State 7241, 10] ;remove super rush back (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = parent, PrevStateNo != 6028
trigger4 = parent, StateNo = 6028
trigger5 = Anim = 7241
trigger6 = parent, MoveType = H
trigger7 = Anim = 7260
ID = 7247

[State 7241, 3.2] ;Super Rush back (facing = -1)
type = Explod
trigger1 = facing = -1
trigger1 = NumExplod(7248) < 1
ID = 7248
anim = 7245
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3;ifelse((root, StateNo != 2001), 3, -3)
supermovetime = 999999
bindtime = -1
ownpal = 0
;removeongethit = 1

[State 7241, 10] ;remove super rush back (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = parent, PrevStateNo != 6028
trigger4 = parent, StateNo = 6028
trigger5 = Anim = 7241
trigger6 = parent, MoveType = H
trigger7 = Anim = 7260
ID = 7248


[State 7241, 3.2] ;jet fire (facing = 1)
type = Explod
trigger1 = root, var(35) != 2
trigger1 = facing = 1
trigger1 = NumExplod(7243) < 1
ID = 7243
anim = 7243
postype = p1
pos = -30, -6
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
;removeongethit = 1

[State 7241, 3.2] ;jet fire (facing = 1)
type = Explod
trigger1 = root, var(35) != 2
trigger1 = facing = 1
trigger1 = NumExplod(7244) < 1
ID = 7244
anim = 7243
postype = p1
pos = -29, -20
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
;removeongethit = 1

[State 7241, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = Anim = 7241
trigger4 = (parent, StateNo != 2001)
;trigger5 = parent, MoveType = H
trigger5 = root, var(35) = 2
trigger6 = Anim = 7260
ID = 7243

[State 7241, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = Anim = 7241
trigger4 = (parent, StateNo != 2001)
;trigger5 = parent, MoveType = H
trigger5 = root, var(35) = 2
trigger6 = Anim = 7260
ID = 7244

[State 7241, 3.2] ;jet fire (facing = -1)
type = Explod
trigger1 = root, var(35) != 2
trigger1 = facing = -1
trigger1 = NumExplod(7245) < 1
ID = 7245
anim = 7243
postype = p1
pos = -30, -6
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
;removeongethit = 1

[State 7241, 3.2] ;jet fire (facing = -1)
type = Explod
trigger1 = root, var(35) != 2
trigger1 = facing = -1
trigger1 = NumExplod(7246) < 1
ID = 7246
anim = 7243
postype = p1
pos = -29, -20
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
;removeongethit = 1

[State 7241, 10] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = Anim = 7241
trigger4 = (parent, StateNo != 2001)
;trigger5 = parent, MoveType = H
trigger5 = root, var(35) = 2
trigger6 = Anim = 7260
ID = 7245

[State 7241, 10] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = Anim = 7241
trigger4 = (parent, StateNo != 2001)
;trigger5 = parent, MoveType = H
trigger5 = root, var(35) = 2
trigger6 = Anim = 7260
ID = 7246

[State 7241, 6]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 7241, 2]
type = ChangeAnim
triggerall = Pos Y >= 0
trigger1 = parent, StateNo != 2001
trigger1 = Time = 500
trigger2 = parent, StateNo != [2001, 2004]
;trigger2 = command = "normal_mode"
trigger3 = RoundState != 2
trigger3 = Anim != 7240
value = 7240

[State 7241, 6] ;rush voice
type = PlaySnd
trigger1 = Time = 7
value = 0, 13

[State 7241, S.Adaptor]
type = ChangeState
trigger1 = parent, PrevStateNo != 6028
trigger1 = parent, StateNo = 6028
value = 7230

[State 7241, 2]
type = ChangeState
trigger1 = root, var(35) != 3
trigger1 = parent, PrevStateNo = 2001
trigger1 = parent, StateNo != 2001
trigger2 = root, MoveType = H
trigger2 = root, PrevStateNo = 2001 || root, StateNo != [5000, 5999]
trigger2 = root, StateNo != [120, 155] ;in Guard bug fix
trigger3 = numenemy < 1 || RoundState = 4
value = 7242;7301

[State 7241, 2]
type = ChangeState
trigger1 = Anim = 7240
trigger1 = AnimTime = 0
value = 7000

;---------------------------------------------------------------------------
; Rush - Jet Rush MODE (end)
[Statedef 7242]
type = A
movetype = I
ctrl = 0
;anim = 7021
velset = 0,0
sprpriority = -4

[State 7242, 0]
type = PlayerPush
trigger1 = !Time
value = 0

[State 7242, 6]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 7242, 10] ;remove super rush back (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7247

[State 7242, 10] ;remove super rush back (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7248

[State 7242, 3.2] ;Rush back (facing = 1)
type = Explod
trigger1 = facing = 1
trigger1 = NumExplod(7241) < 1
ID = 7241
anim = 7242
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3;ifelse((root, StateNo != 2001), 3, -3)
supermovetime = 999999
bindtime = -1
ownpal = 0
ignorehitpause = 1
;removeongethit = 1

[State 7242, 10] ;remove rush back (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = parent, PrevStateNo != 6028
trigger4 = parent, StateNo = 6028
ID = 7241

[State 7242, 3.2] ;Rush back (facing = -1)
type = Explod
trigger1 = facing = -1
trigger1 = NumExplod(7242) < 1
ID = 7242
anim = 7242
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3;ifelse((root, StateNo != 2001), 3, -3)
supermovetime = 999999
bindtime = -1
ownpal = 0
ignorehitpause = 1
;removeongethit = 1

[State 7242, 10] ;remove rush back (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = parent, PrevStateNo != 6028
trigger4 = parent, StateNo = 6028
ID = 7242

[State 7242, 3.2] ;jet fire (facing = 1)
type = Explod
trigger1 = facing = 1
trigger1 = NumExplod(7243) < 1
ID = 7243
anim = 7243
postype = p1
pos = -30, -6
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
ignorehitpause = 1
;removeongethit = 1

[State 7242, 3.2] ;jet fire (facing = 1)
type = Explod
trigger1 = facing = 1
trigger1 = NumExplod(7244) < 1
ID = 7244
anim = 7243
postype = p1
pos = -29, -20
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
ignorehitpause = 1
;removeongethit = 1

[State 7242, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
;trigger4 = Anim = 7241
;trigger4 = (parent, StateNo != 2001)
;trigger4 = parent, MoveType = H
ID = 7243

[State 7242, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
;trigger4 = Anim = 7241
;trigger4 = (parent, StateNo != 2001)
;trigger4 = parent, MoveType = H
ID = 7244

[State 7242, 3.2] ;jet fire (facing = -1)
type = Explod
trigger1 = facing = -1
trigger1 = NumExplod(7245) < 1
ID = 7245
anim = 7243
postype = p1
pos = -30, -6
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
ignorehitpause = 1
;removeongethit = 1

[State 7242, 3.2] ;jet fire (facing = -1)
type = Explod
trigger1 = facing = -1
trigger1 = NumExplod(7246) < 1
ID = 7246
anim = 7243
postype = p1
pos = -29, -20
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
ignorehitpause = 1
;removeongethit = 1

[State 7242, 10] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
;trigger4 = Anim = 7241
;trigger4 = (parent, StateNo != 2001)
;trigger4 = parent, MoveType = H
ID = 7245

[State 7242, 10] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
;trigger4 = Anim = 7241
;trigger4 = (parent, StateNo != 2001)
;trigger4 = parent, MoveType = H
ID = 7246

[State 7242, 1]
type = PosSet
trigger1 = !Time
x = root, Pos X

[State 7242, 1] ;AIR
type = PosSet
trigger1 = root, Pos Y < 0
trigger1 = !Time
y = root, Pos Y

[State 7242, 1]
type = VelSet
trigger1 = !Time
x = -3*(root,facing)*facing ;by P.O.T.S.   ;-2
;y = -1.5

[State 7242, 1] ;AIR
type = VelSet
trigger1 = root, Pos Y < 0
trigger1 = !Time
y = -1.5

[State 7242, 1.2] ;AIR
type = VelAdd
trigger1 = root, Pos Y < 0
trigger1 = Time >= 0
y = .44 ;const(movement.yaccel)

[State 7242, 1]
type = VelSet
trigger1 = Time = 20 ;ParentDist X = [60, 50] ;Var(31) = 60*ifelse(Var(32) = Facing,1,1)
x = 0

[State 7242, 0] ;turn in finish pose
type = Turn
trigger1 = P2Dist X < -5

[State 7242, 1] ;AIR
type = PosSet
;trigger1 = root, Pos Y < 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y)
y = 0

[State 7242, 1]
type = VelSet
trigger1 = root, Pos Y = 0
trigger1 = Time = 16
x = 0

[State 7242, 2]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Time = 20
value = 7000

[State 7242, 2]
type = ChangeState
trigger1 = Pos Y < 0
trigger1 = Time >= 1
value = 7243

;---------------------------------------------------------------------------
; Rush - Jet Rush Mode (In Air) (end)
[Statedef 7243]
type = A
movetype = I
ctrl = 0
;anim = 7021
;velset = 0,0
sprpriority = -4

[State 7243, 0]
type = PlayerPush
trigger1 = !Time
value = 0

[State 7243, 6]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 7243, 10] ;remove super rush back (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7247

[State 7243, 10] ;remove super rush back (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7248

[State 7243, 3.2] ;Rush back (facing = 1)
type = Explod
trigger1 = facing = 1
trigger1 = NumExplod(7241) < 1
ID = 7241
anim = 7242
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3;ifelse((root, StateNo != 2001), 3, -3)
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 7243, 10] ;remove rush back (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = parent, PrevStateNo != 6028
trigger4 = parent, StateNo = 6028
;trigger5 = !Alive
ID = 7241

[State 7243, 3.2] ;Rush back (facing = -1)
type = Explod
trigger1 = facing = -1
trigger1 = NumExplod(7242) < 1
ID = 7242
anim = 7242
postype = p1
pos = 0, 0
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3;ifelse((root, StateNo != 2001), 3, -3)
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 7243, 10] ;remove rush back (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
trigger4 = parent, PrevStateNo != 6028
trigger4 = parent, StateNo = 6028
;trigger5 = !Alive
ID = 7242

[State 7243, 3.2] ;jet fire (facing = 1)
type = Explod
trigger1 = facing = 1
trigger1 = NumExplod(7243) < 1
ID = 7243
anim = 7243
postype = p1
pos = -30, -6
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 7243, 3.2] ;jet fire (facing = 1)
type = Explod
trigger1 = facing = 1
trigger1 = NumExplod(7244) < 1
ID = 7244
anim = 7243
postype = p1
pos = -29, -20
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 7243, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
;;trigger4 = Anim = 7241
;;trigger4 = (parent, StateNo != 2001)
;;trigger4 = parent, MoveType = H
;trigger4 = !Alive
ID = 7243

[State 7243, 10] ;remove jet fire (facing = 1)
type = RemoveExplod
trigger1 = facing = -1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
;;trigger4 = Anim = 7241
;;trigger4 = (parent, StateNo != 2001)
;;trigger4 = parent, MoveType = H
;trigger4 = !Alive
ID = 7244

[State 7243, 3.2] ;jet fire (facing = -1)
type = Explod
trigger1 = facing = -1
trigger1 = NumExplod(7245) < 1
ID = 7245
anim = 7243
postype = p1
pos = -30, -6
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 7243, 3.2] ;jet fire (facing = -1)
type = Explod
trigger1 = facing = -1
trigger1 = NumExplod(7246) < 1
ID = 7246
anim = 7243
postype = p1
pos = -29, -20
;facing = 1
velocity = 0, 0
accel = 0, 0
removetime = -1
sprpriority = -3
supermovetime = 999999
bindtime = -1
ownpal = 0
removeongethit = 1

[State 7243, 10] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
;;trigger4 = Anim = 7241
;;trigger4 = (parent, StateNo != 2001)
;;trigger4 = parent, MoveType = H
;trigger4 = !Alive
ID = 7245

[State 7243, 10] ;remove jet fire (facing = -1)
type = RemoveExplod
trigger1 = facing = 1
trigger2 = parent, PrevStateNo = 2001
trigger2 = parent, StateNo != [2001, 2002]
trigger3 = Anim = 7240
;;trigger4 = Anim = 7241
;;trigger4 = (parent, StateNo != 2001)
;;trigger4 = parent, MoveType = H
;trigger4 = !Alive
ID = 7246

[State 7243, 1.2] ;AIR
type = VelAdd
trigger1 = Pos Y < 0
trigger1 = Time >= 0
y = .44

[State 7243, 0] ;turn in finish pose
type = Turn
trigger1 = P2Dist X < -5

[State 7243, 1] ;AIR
type = PosSet
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -ceil(vel y)
y = 0

[State 7243, 2]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 7000

;---------------------------------------------------------------------------
; Jet Rush Super Fireball A: Helper
[Statedef 7244]
type    = A
movetype= A
anim = 7246
sprpriority = 10

[State 7244, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7244, 1]
type = Helper
trigger1 = !Time
helpertype = normal
name = "Fireball B"
ID = 77245
postype = p1
pos = 0, -5
;facing = facing
stateno = 7245
supermovetime = 999999
ownpal = 1

[State 7244, 1]
type = Helper
trigger1 = !Time
helpertype = normal
name = "Fireball C"
ID = 77246
postype = p1
pos = 0, 5
;facing = facing
stateno = 7246
supermovetime = 999999
ownpal = 1

[State 7244, 23]
type = PlaySnd
trigger1 = !Time
value = 20, 3

[state 7244, 1]
type = VelSet
trigger1 = Time > 0
x = 10

[State 7244, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP
damage = floor(12/(1+(root,Var(19)/5.0))), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 3
pausetime = 0, 0;5 ;8 ;8, 8 ;2, 2
guard.sparkno = s8301 ;S8200
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S15, 1
guardsound = S16, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
;fall = 0
;air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 7244, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP
damage = floor(13/(1+(root,Var(19)/5.0))), 5
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 3
pausetime = 0, 0;5 ;8 ;8, 8 ;3, 3
guard.sparkno = s8301 ;S8200
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S15, 1
guardsound = S16, 0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -4
airguard.velocity = -5
air.type = Low
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))
air.hittime = 25
;fall = 0
;air.fall = 1

[State 7244, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 7244, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 7247
time = -1

[State 7244, 8]
type = ChangeState
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105
value = 7247
ignorehitpause = 1

[State 7244, 8]
type = ChangeState
trigger1 = MoveContact
value = 7248
ignorehitpause = 1

;---------------------------------------------------------------------------
; Jet Rush Super Fireball B: Helper
[Statedef 7245]
type    = A
movetype= A
anim = 7246
sprpriority = 10

[State 7245, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[state 7245, 1]
type = VelSet
trigger1 = Time > 0
x = 10
y = -5

[State 7245, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP
damage = floor(12/(1+(root,Var(19)/5.0))), 4 ;15,6
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 3
pausetime = 0, 0;5;8 ;8, 8 ;2, 2
guard.sparkno = s8301 ;S8200
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S15, 1
guardsound = S16, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
;fall = 0
;air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 7245, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP
damage = floor(13/(1+(root,Var(19)/5.0))), 5 ;16,7
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 3
pausetime = 0, 0;5;8 ;8, 8 ;3, 3
guard.sparkno = s8301 ;S8200
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S15, 1
guardsound = S16, 0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -4
airguard.velocity = -5
air.type = Low
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))
air.hittime = 25
;fall = 0
;air.fall = 1

[State 7245, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 7245, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 7247
time = -1

[State 7245, 8]
type = ChangeState
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105
value = 7247
ignorehitpause = 1

[State 7245, 8]
type = ChangeState
trigger1 = MoveContact
value = 7248
ignorehitpause = 1

;---------------------------------------------------------------------------
; Jet Rush Super Fireball C: Helper
[Statedef 7246]
type    = A
movetype= A
anim = 7246
sprpriority = 10

[State 7246, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[state 7246, 1]
type = VelSet
trigger1 = Time > 0
x = 10
y = 5

[State 7246, 2]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X > 80
attr = A, HP
damage = floor(12/(1+(root,Var(19)/5.0))), 4
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 3
pausetime = 0, 0;5;8 ;8, 8 ;2, 2
guard.sparkno = s8301 ;S8200
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S15, 1
guardsound = S16, 0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3
airguard.velocity = -1
air.type = Low
air.velocity = -2, 0 ;ifelse((parent, StateType = A), (-7, 8), (-2, -2))
air.hittime = 25
;fall = 0
;air.fall = 1 ;ifelse((parent, StateType = A), 1, 0)

[State 7246, 3]
type = HitDef
trigger1 = Time = 0 && P2BodyDist X <= 80
attr = A, HP
damage = floor(13/(1+(root,Var(19)/5.0))), 5
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 6, Hit
sprpriority = 3
pausetime = 0, 0;5;8 ;8, 8 ;3, 3
guard.sparkno = s8301 ;S8200
sparkno = -1
sparkxy = 0 + 0 * (var(55) := 55), var(56) := -20
hitsound = S15, 1
guardsound = S16, 0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 25
ground.velocity = -4
airguard.velocity = -5
air.type = Low
air.velocity = -3, 0 ;ifelse((parent, StateType = A), (-8, 8), (-3, -4))
air.hittime = 25
;fall = 0
;air.fall = 1

[State 7246, 6]
type = HitBy
trigger1 = 1
value = SCA, NP,SP,HP

[State 7246, 7]
type = HitOverride
trigger1 = 1
attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
stateno = 7247
time = -1

[State 7246, 8]
type = ChangeState
trigger1 = BackEdgeDist < -105 || FrontEdgeDist < -105
value = 7247
ignorehitpause = 1

[State 7246, 8]
type = ChangeState
trigger1 = MoveContact
value = 7248
ignorehitpause = 1


;---------------------------------------------------------------------------
; Jet Rush Super Fireball: Helper (end)
[Statedef 7247]
type = A
movetype = I
ctrl = 0
anim = 7280
velset = 0, 0
sprpriority = 3

[State 7247, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7247, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Jet Rush Super Fireball: Helper (end)
[Statedef 7248]
type = A
movetype = I
ctrl = 0
anim = 7281
velset = 0, 0
sprpriority = 3

[State 7248, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7248, 1]
type = DestroySelf
trigger1 = AnimTime = 0


;---------------------------------------------------------------------------
; Rush - Broken
[Statedef 7250]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7262
ctrl = 0
sprpriority = -4

[State 1617, 2]
type = Explod
trigger1 = Time % 4 = 0 && Time < 300
anim = 9040
postype = p1
pos = 0, 0
velocity = 0, -.5
accel = 0, 0
random = 80, 20
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1617, 2]
type = Explod
trigger1 = Time % 4 = 0 && Time < 110
anim = 9041
postype = p1
pos = 0, 0
velocity = 0, -1.6
accel = 0, -.1
random = 90, 15
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1617, 2]
type = Explod
trigger1 = Time = 350
trigger2 = Time = 400
trigger3 = Time = 450
trigger4 = Time = 500
trigger5 = Time = 550
trigger6 = Time = 600
trigger7 = Time = 650
trigger8 = Time = 700
trigger9 = Time = 800
trigger10 = Time = 970
trigger11 = Time = 1300
anim = 9040
postype = p1
pos = 0, -5
velocity = 0, -.3
accel = 0, 0
random = 80, 20
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 1617, 2]
type = Explod
trigger1 = Time = 300
trigger2 = Time = 450
trigger3 = Time = 610
anim = 9041
postype = p1
pos = 0, -10
velocity = 0, -.6
accel = 0, 0
random = 80, 10
removetime = -2
ownpal = 1
sprpriority = 6
shadow = -1,0,0
trans = addalpha
alpha = 256, 256

[State 7250, 0.0]
type = ScreenBound
trigger1 = !Time
value = 1

[State 7250, 0] ;remove explods
type = RemoveExplod
trigger1 = !Time
ID = 7241

[State 7250, 1] ;remove explods
type = RemoveExplod
trigger1 = !Time
ID = 7242

[State 7250, 2] ;remove explods
type = RemoveExplod
trigger1 = !Time
ID = 7243

[State 7250, 3] ;remove explods
type = RemoveExplod
trigger1 = !Time
ID = 7244

[State 7250, 4] ;remove explods
type = RemoveExplod
trigger1 = !Time
ID = 7245

[State 7250, 5] ;remove explods
type = RemoveExplod
trigger1 = !Time
ID = 7246

[State 7250, 10] ;remove super rush back (facing = 1)
type = RemoveExplod
trigger1 = !Time
ID = 7247

[State 7250, 10] ;remove super rush back (facing = -1)
type = RemoveExplod
trigger1 = !Time
ID = 7248

[State 7250, 5] ;back fire explod
type = RemoveExplod
trigger1 = !Time
ID = 7261

;---------------------------------------------------------------------------
; Kamikaze Explosion: Helper
[Statedef 7251]
type    = A
movetype= A
anim = 7263
sprpriority = 10

[State 7251, 0]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

;[State 7251, 2]
;type = HitDef
;trigger1 = Time % 2 = 0 && Time <= 21
;attr = A, HP
;damage = 25, 5
;animtype = Heavy
;guardflag = MA
;hitflag = MAFP
;priority = 6, Hit
;sprpriority = 6
;pausetime = 0, 2
;guard.sparkno = S8200
;sparkno = S8271
;sparkxy = 0,0
;hitsound = S20, 0;15, 5
;guardsound = S16, 0
;ground.type = Low
;ground.slidetime = 50;57
;ground.hittime  = 60
;ground.velocity = -5
;airguard.velocity = -1
;air.type = Low
;air.velocity = -5, -1
;air.hittime = 60
;fall = 1
;air.fall = 1

[State 7251, 3]
type = HitDef
trigger1 = !Time ;> 21
attr = A, HP
damage = 450, 40
animtype = Up;Heavy
guardflag = MA
hitflag = MAFPD
priority = 7, Hit
sprpriority = 6
pausetime = 0, 12
guard.sparkno = s8301 ;S8200
sparkno = s8330+(random%8) ;S8271
sparkxy = 0 + 0 * (var(55) := 55), var(56) := 0
hitsound = S15, 5 ;S20, 0
guardsound = S16, 0
ground.type = High
ground.slidetime = 50
ground.hittime  = 60
ground.velocity = -28, -27
airguard.velocity = -5
air.type = High
air.velocity = -27, -28
air.hittime = 60
fall = 1
air.fall = 1
yaccel = .7

[State 7251, 6]
type = NotHitBy
trigger1 = 1
value = SCA;, NP,SP,HP

;[State 7251, 7]
;type = HitOverride
;trigger1 = 1
;attr = SCA, AA,AT,AP,NA,NP,SP,HP,NT,HT
;stateno = 7252
;time = -1

;[State 7251, 8]
;type = ChangeState
;trigger1 = AnimTime = 0 ;MoveContact || BackEdgeDist < -105 || FrontEdgeDist < -105
;value = 7252
;ignorehitpause = 1

[State 7251, 1]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Rush Camera Manipulation: Helper
[Statedef 7255]
type = A
movetype = I
ctrl = 0
anim = 9830;7260
velset = 0, 0
sprpriority = 3

[State 7255, super 3]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1, 1

[State 7255, 1]
type = DestroySelf
;trigger1 = var(35) != 3
trigger1 = parent, Anim = 7260
trigger2 = root, StateNo != 2001

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Rush - Coil MODE - stand
[Statedef 7260]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7270
ctrl = 0
sprpriority = -2

[State 7260, Jet Rush]
type = ChangeState
trigger1 = root, PrevStateNo != 2000
trigger1 = root, StateNo = 2000
value = 7240

[State 7260, S.Adaptor]
type = ChangeState
trigger1 = parent, PrevStateNo != 6028
trigger1 = parent, StateNo = 6028
value = 7230

[State 7260, normal]
type = ChangeState
;trigger1 = command = "normal_mode"
trigger1 = root, PrevStateNo != 2105
trigger1 = root, StateNo = 2105
trigger2 = RoundState != 2
value = 7000

[State 7260, 0]
type = ChangeState
trigger1 = root, StateNo != [3000, 3999] ;Supers
trigger1 = Helper(7000), RootDist X = [-30, 28] ;[-30, 40]
trigger1 = Helper(7000), RootDist Y = [-35, 55] ;[-10, 55]
trigger1 = root, Vel Y > 0
value = 7261

;---------------------------------------------------------------------------
; Rush - Coil MODE - coil active
[Statedef 7261]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 7271
ctrl = 0
sprpriority = -2

;[State 7261, 0] ;closing back
;type = PlaySnd
;trigger1 = AnimTime = 0
;value = 18, 15

[State 7261, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 7260

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Rush - S.Adaptor MODE (start of the round)
[Statedef 7900]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 9830
ctrl = 0
sprpriority = 9

[State 7900, 2]
type = BindToParent
trigger1 = parent, var(33) = 0
pos = 0, 0
time = 1

[State 7900, 2]
type = ChangeState
trigger1 = parent, var(33) = 0
value = 7231

;-------------------------------------------------------------------------
; Super Armor HitOverRide (by Soldats)

[Statedef 3950]
type    = U ;Unchanged
movetype= I;H
physics = U

[State 3950, AnimElem VarSet]
type = VarSet
trigger1 = Time <= 0
v = 56
value = AnimElemNo(0)
ignorehitpause = 1;

[State 3950, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 3950, VelSet]
type = VelSet
trigger1 = 1
trigger1 = Life > 0
x = FVar(30)
y = FVar(31)

[State 3950, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = Anim
elem = Var(56)
ignorehitpause = 1;

[State 3950, ChangeState];Dead
type = ChangeState
trigger1 = Life <= 0
;value = 5000
value = 3951
ignorehitpause = 1;

[State 3950, ChangeState];Still alive
type = ChangeState
trigger1 = (Time >= floor(GetHitVar(HitTime)/3)) && (Life > 0)
trigger2 = (Time >= floor(GetHitVar(HitTime)/4)) && (Life > 0)
trigger3 = (Time >= floor(GetHitVar(HitTime)/5)) && (Life > 0)
value = Var(57)
ignorehitpause = 1;

[State 3950, 1.1]
type = PalFX
trigger1 = GetHitVar(hitcount) =1
trigger2 = GetHitVar(hitcount) =2
time = 1
add = 255,50,0
color = 0
ignorehitpause = 1

[State 3950, 1.2]
type = PalFX
trigger1 = GetHitVar(hitcount) =3
trigger2 = GetHitVar(hitcount) =4
time = 1
add = 255,0,0
color = 0
ignorehitpause = 1

[State 3950, 1.3]
type = PalFX
trigger1 = GetHitVar(hitcount) =5
time = 1
add = 200,0,20
color = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; HITG_SHAKE (Die during super armor) (by Soldats)
[Statedef 3951]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3951, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 3951, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 3951, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 3952

[State 3951, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 3951, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3951, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up) (by Soldats)
[Statedef 3952]
type    = A
movetype= H
physics = N
ctrl = 0

[State 3952, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 3952, VelSet]
type = VelSet
trigger1 = Time = 0
y = ifelse(GetHitVar(YVel) >= 0, -5, GetHitVar(YVel))

[State 3950, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 3952, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Jump Fall (after a move)
[Statedef 53]
type    = A
physics = A
anim = ifelse(var(33) = 1, 6015, 53)

[state 53, 1]
type = VelAdd
triggerall = PrevStateno != 60
trigger1 = Time = 0
y = -0.08;-0.05

;------------------------------------
;AirDash
[Statedef 110]
type = A
physics = N
anim = 110
ctrl = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S9,1
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 1220, Afterimage]
type = AfterImage
trigger1 = animelem = 1
length = 13
PalBright   =  30, 30, 30
PalContrast =  70, 70, 70
PalAdd      = -10,-10,-10
PalMul      = .55,.55,.55
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 11

[State 100, 1]
type = VelSet
trigger1 = 1
x = 7
y = 0.4

[State 100, 2]
type = ChangeState
trigger1 = time = 15
value = 111

;------------------------------------
;AirDash
[Statedef 111]
type = A
physics = A
anim = 111
ctrl = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 2
;ignorehitpause =
;persistent =


[State 1000, Land]
type= changestate
trigger1= vel y > 0
trigger1= pos y > -vel y
value= 52

;---------------------------------------------------------------------------
; LauncherFollow
[Statedef 40000]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S9,1
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 1220, Afterimage]
type = AfterImage
trigger1 = animelem = 1
length = 13
PalBright   =  30, 30, 30
PalContrast =  70, 70, 70
PalAdd      = -10,-10,-10
PalMul      = .55,.55,.55
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 21


[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50000
ctrl = 1

;AI jump check
[State 40, 6]
type = ChangeState
trigger1 = var(59) = 1 && var(30) = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;LauncherFollowUp
[Statedef 50000]
type    = A
physics = A

[State 0, MakeDust]
type = MakeDust
trigger1 = time = 1
trigger2 = time = 4
trigger3 = time = 7
pos = 0,5
;pos2 =
spacing = 1
;ignorehitpause =
;persistent =

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3


;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, Dust]
type = explod
trigger1 = !time
anim = 8102
sprpriority = -3
postype = p1
scale = 0.5, 0.5
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 52, Guard]
type= changestate
trigger1= inguarddist
trigger1= ctrl && command="holdback"
value= 120

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 2
value = 1
;ignorehitpause =
;persistent =


[State 52, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Run forward
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
ctrl = 0

[State 105, Dust]
type = helper
trigger1 = animelem = 1
helpertype = normal
stateno = 8103
ID = 8100
name = "Dash Dust"
postype = p1
facing = 1
pausemovetime = 255
supermovetime = 255
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S9,3
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S9,4
volume = 255
channel = 0
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, Jump]
type= changestate
trigger1= command="holdfwd" && command="holdup"
value= 40

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
trigger2 = time = 15
value = 101

;---------------------------
;Runstop
[StateDef 101]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 101
poweradd = 0
sprpriority = 2

[State 0, MakeDust]
type = MakeDust
trigger1 = time = [1,5]
pos = 20,0
;pos2 =
spacing = 2
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9,2
volume = 0
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =


[State 101, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hop backwards
[Statedef 105]
type    = A
physics =A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, Dust]
type = helper
trigger1 = animelem = 1
helpertype = normal
stateno = 8103
ID = 8100
name = "Dash Dust"
postype = p1
facing = -1
pausemovetime = 255
supermovetime = 255
ownpal = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,0
volume = 0
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S9,4
volume = 255
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan =
;ignorehitpause =
;persistent =

[State 1000, Land]
type= changestate
trigger1= vel y > 0
trigger1= pos y > -vel y
value= 106
;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]


[State -2, Finish]
type = ScreenBound
triggerall = (Life <= 0) || (!Alive) || (Lose)
trigger1 = (StateNo = 5150) && (RoundState = 4)
value = 0
MoveCamera = 0,0
IgnoreHitPause = 1

[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAirGuard 

[State 0, DisplayToClipboard]
type = DisplayToClipboard
trigger1 =  1
text = "frontedge = %d fvar1= %f  pos x = %f "
params = var(31), fvar(2) , p2bodydist x

[State -2, Damage Dampener]; Scaling in action
type= attackmulset
triggerall=stateno = [3000,3999]
trigger1= numenemy
value= ifelse(enemynear, gethitvar(hitcount) = 0, 1, ifelse(enemynear, gethitvar(hitcount) = 1, 0.95, 0.90**enemynear, gethitvar(hitcount)))
ignorehitpause= 1


[State -2, Damage Dampener]; Scaling in action
type= attackmulset
triggerall=stateno != [3000,3999]
trigger1= numenemy
value= ifelse(enemynear, gethitvar(hitcount) = 0, 1, ifelse(enemynear, gethitvar(hitcount) = 1, 0.93, 0.85**enemynear, gethitvar(hitcount)))
ignorehitpause= 1

[State -2, Damage Dampener]; Full damage
type= attackmulset
trigger1= numenemy
trigger1= enemynear,movetype!=H || (enemynear,stateno=[120,155])
value= 1.0
ignorehitpause= 1

[State -2, VarSet]
type = VarSet
triggerall = statetype = A
trigger1 = (p2bodydist x < 50) || (p2bodydist x >90)
v = 30   ;fv = 10
value = 0

[State -2, VarSet]
type = VarSet
triggerall = statetype = A
trigger1 = p2bodydist x = [50,90]
v = 30   ;fv = 10
value = 1

[State -2, Rush] ;code by VIB
type = Helper
trigger1 = !NumHelper(7000)
stateno = 7000 + 190*(RoundState != 2)
id = 7000
name = "Rush"
pos = -48, 0 ;-70, 6
ownpal = 1
keyctrl = 1
ignorehitpause = 1
supermovetime = 999999

;[State -2, Hold Fireball efect]
;type = Explod
;triggerall = NumExplod(229) < 1
;triggerall = var(20) = 1
;trigger1 = Time > 29
;persistent = 1
;ID = 229
;anim = 229
;postype = p1
;pos = 5, ifelse(StateType = C, -20, ifelse(StateType = A, -60, -40))
;velocity = 0, 0
;accel = 0, 0
;removetime = -1
;sprpriority = 6
;bindtime = -1
;ownpal = 0

;[State -2, Remove Fireball efect]
;type = RemoveExplod
;trigger1 = var(20) != 1
;ID = 229

[State -2] ;by Ribeiro
type = VarAdd
triggerall = var(59) = 0
trigger1 = command = "hold_y"
var(20) = 1
ignorehitpause = 1

[State -2] ;by Ribeiro
type = changestate
;triggerall = var(22) = var(20)
trigger1 = command != "hold_y" && var(20) > 75 && stateno != 220 && ctrl && statetype = S
value = 220
ignorehitpause = 1

[State -2] ;by Ribeiro
type = changestate
;triggerall = var(22) = var(20)
trigger1 = command != "hold_y" && var(20) > 75 && stateno != 420 && ctrl && statetype = C
value = 420
ignorehitpause = 1

[State -2] ;by Ribeiro
type = changestate
;triggerall = var(22) = var(20)
trigger1 = command != "hold_y" && var(20) > 75 && stateno != 620 && ctrl && statetype = A
value = 620
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = stateno = [220,222]
trigger1 = time = 20
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, VarSet]
type = VarSet
triggerall = stateno = [420,422]
trigger1 = time = 20
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, VarSet]
type = VarSet
triggerall = stateno = [620,622]
trigger1 = time = 14
v = 20    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

;[State -2, 1] ;by Ribeiro
;type = VarSet
;trigger1 = var(20) != 0 && stateno != 220 && stateno != 420 && stateno != 620 && command != "hold_z"
;v = 20
;value = 0
;ignorehitpause = 1

[State -2, 2]
type = VarSet
trigger1 = var(20) < 76 && command != "hold_y"
trigger2 = RoundState = 0 || RoundState = 1 || RoundState = 4
trigger3 = StateNo = [3000, 4999] ;cancel with supers
trigger4 = StateNo = 6028 ;cancel with S.Adapt transform
v = 20
value = 0
ignorehitpause = 1

[State -2, Hold Fireball efect]
type = Helper
trigger1 = (var(20) > 23 && NumHelper(229) = 0) ;by Ribeiro ;var>23
helpertype = normal
name = "Hold Fireball efect"
ID = 229
pos = 5, -40
postype = p1
;facing = 1
stateno = 229
ownpal = 1
ignorehitpause = 1

[State -2] ;by Ribeiro
type = PalFX
trigger1 = var(20) > 19 && var(20) < 76 ;&& (gametime%10) = 0 ;var>19 - 51
time = 1 ;10
;add = 80,80,256
add = Floor((80 + 40 * sin((2 * pi * (time))/30.0)) + 0.5),Floor((80 + 40 * sin((2 * pi * (time))/30.0))+0.5),Floor((256 + 40 *sin((2 * pi * (time))/30.0))+0.5)
mul = 156,256,256
;sinadd = 40,40,40,10
ignorehitpause = 1

[State -2] ;by Ribeiro
type = PalFX
trigger1 = var(20) > 75 ;&& (gametime%10) = 0 ;50
time = 1 ;10
;add = 255,70,-100
add = Floor((255 + 40 * sin((2 * pi * (time))/30.0)) + 0.5),Floor((70 + 40 * sin((2 * pi * (time))/30.0))+0.5),Floor((-100 + 40 *sin((2 * pi * (time))/30.0))+0.5)
mul = 256,256,186
;sinadd = 40,40,40,10
ignorehitpause = 1

[State -2, Heavy Burst Hand]
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(20) = [349, 359] ;[0, 10]
add = 256,256,256
time = 1
ignorehitpause = 1

[State -2, Heavy Burst Hand]
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(20) = [360, 362] ;[11, 13]
add = 200,200,200 ;120,120,255
time = 1
ignorehitpause = 1

[State -2, Heavy Burst Hand]
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(20) = [363, 364] ;[14, 15]
add = 150,150,150 ;80,80,256
time = 1
ignorehitpause = 1

[State -2, Heavy Burst Hand]
type = PalFX
trigger1 = var(33) = 1
trigger1 = var(20) = [365, 367] ;[16, 18]
add = 100,100,100 ;50,50,155
time = 1
ignorehitpause = 1

;[State -2, Heavy Burst Hand]
;type = PalFX
;trigger1 = var(33) = 1
;trigger1 = var(20) = [368, 369] ;[19, 20]
;add = 60,60,60 ;20,20,95
;time = 1
;ignorehitpause = 1

[State -2, Heavy Burst Hand]
type = PlaySnd
trigger1 = var(33) = 1
trigger1 = var(20) = 350
value = 18, 22

;[State -2] ;by Ribeiro
;type = PalFX
;trigger1 = var(20) > 19 && var(20) < 76
;time = 1
;add = Floor((155 + (-155)* sin((2 * pi * (time))/40.0)) + 0.5),Floor((155 + (-155)* sin((2 * pi * (time))/40.0))+0.5),Floor((155 + (-155)*sin((2 * pi * (time))/40.0))+0.5)
;mul = 156,156,156
;ignorehitpause = 1

;[State -2] ;by Ribeiro
;type = PalFX
;trigger1 = var(20) > 75
;time = 1
;add = Floor((255 + (-175)* sin((2 * pi * (time))/40.0)) + 0.5),Floor((70 + (-70)* sin((2 * pi * (time))/40.0))+0.5),Floor((-100 + (-175)*sin((2 * pi * (time))/40.0))+0.5)
;mul = 912,256,186
;ignorehitpause = 1

[State -2] ;hold calculate
type = VarSet;Add
trigger1 = command != "hold_y"
trigger1 = var(20) != 0
var(22) = var(20)
ignorehitpause = 1

[State -2, hold sound]
type = PlaySnd
trigger1 = var(20) = 68;76  ;66
value = 20, 1
channel = 1
ignorehitpause = 1

[State -2, end Hold Burst Sound]
type = StopSnd
trigger1 = NumHelper(229) < 1
channel = 1
ignorehitpause = 1

[State -2, Rush] ;code by VIB
type = Helper
trigger1 = !NumHelper(7000)
stateno = 7000 + 190*(RoundState != 2)
id = 7000
name = "Rush"
pos = -48, 0 ;-70, 6
ownpal = 1
keyctrl = 1
ignorehitpause = 1
supermovetime = 999999

[State -2, Rush Drill - Time]
type = VarAdd
trigger1 = StateNo = 3101 ;[3100, 3106]
trigger2 = StateNo = 3102
trigger3 = StateNo = 3103
trigger4 = StateNo = 3104
trigger5 = StateNo = 3105
trigger6 = StateNo = 3106
trigger7 = StateNo = 3107
;trigger8 = StateNo = 3950 ;Super Armor state
;trigger9 = StateNo = 3951 ;Super Armor state
;trigger10 = StateNo = 3952 ;Super Armor state
v = 45
value = 1

[State -2, Rush Drill - Time (reset)]
type = VarSet
trigger1 = StateNo != [3100, 3107] ;Anim = 3101 ;var(45) >= 183
trigger1 = StateNo != 3950 ;Super Armor state
v = 45
value = 0

[State -2, Remove Wheel Explods - State 3101]
type = RemoveExplod
trigger1 = var(45) = 182 ;Anim = 3101
trigger2 = StateNo != [3100, 3107]
trigger2 = StateNo != 3950 ;Super Armor state
trigger2 = MoveType = H
ID = 3110

;----------------------
;GetHit in Super

[State -2, gethit in super]
type = VarSet
trigger1 = StateNo = [3000, 3299]
v = 48
value = 1
ignorehitpause = 1
supermovetime = 999999

[State -2, gethit in super]
type = VarSet
trigger1 = var(47) >= 1 ;FIX
trigger2 = StateNo != [3000, 3299]
trigger2 = MoveType != H ;FIX
trigger3 = MoveType = H
trigger3 = StateNo != [5000, 5999] ;Custom States
;trigger2 = StateNo != 3950 ;Super Armor state
v = 48
value = 0
ignorehitpause = 1
supermovetime = 999999

[State -2, gethit in super]
type = VarSet
;trigger1 = PrevStateNo = [3000, 3299]
;trigger1 = StateNo != [3000, 3299]
trigger1 = var(48) = 1
trigger1 = var(47) = 0
trigger1 = MoveType = H
trigger1 = StateNo != 3950 ;Super Armor state
trigger1 = !(StateNo != [5000, 5999]) ;Custom States
v = 47
value = 1
ignorehitpause = 1
supermovetime = 999999

[State -2, gethit in super]
type = VarAdd
trigger1 = var(47) != 0 && var(47) < 22
v = 47
value = 1
ignorehitpause = 1
supermovetime = 999999

[State -2, gethit in super]
type = VarSet
trigger1 = var(48) = 0
trigger1 = var(47) >= 22
v = 47
value = 0
ignorehitpause = 1
supermovetime = 999999

[State -2, 1]
type = PalFX
;trigger1 = var(48) = 1
;trigger1 = var(47) = 0
;trigger1 = MoveType = H
trigger1 = var(47) = [1, 11]
add = 256,256,256
time = 10
ignorehitpause = 1
supermovetime = 999999

[State -2, 2]
type = PalFX
trigger1 = var(47) = [12, 14]
add = 200,200,200 ;120,120,255
time = 1
ignorehitpause = 1
supermovetime = 999999

[State -2, 3]
type = PalFX
trigger1 = var(47) = [15, 16]
add = 150,150,150 ;80,80,256
time = 1
ignorehitpause = 1
supermovetime = 999999

[State -2, 4]
type = PalFX
trigger1 = var(47) = [17, 19]
add = 100,100,100 ;50,50,155
time = 1
ignorehitpause = 1
supermovetime = 999999

[State -2, 5]
type = PalFX
trigger1 = var(47) = [20, 21]
add = 60,60,60 ;20,20,95
time = 1
ignorehitpause = 1
supermovetime = 999999

;-----|Super Armor|----- (by Soldats)

[State -2, VarSet]
type = VarSet
trigger1 = (MoveType != H) && (StateNo != 3950)
v = 57
value = ifelse(Anim = 60, 53, ifelse((Anim = 44 && Time > 16) || (Anim = 45 && Time > 16) || (Anim = 46 && Time > 16), 54, StateNo)) ;ifelse for "super jump" and "normal - jump down" compatibility
ignorehitpause = 1

;[State -2, DefenceMulSet]
;type = DefenceMulSet
;trigger1 = 1;Var(40) = 15
;value = 0.70

[State -2, VarAdd 1];Limits HitOverRide
type = VarAdd
trigger1 = StateNo = 3950
v = 58
value = 5

[State -2, VarAdd 2];Limits HitOverRide
type = VarAdd
trigger1 = (StateNo != 3950) && (Var(58) > 0) && (MoveType != H)
v = 58
value = -1

[State -2, VarSet X]
type = VarSet
trigger1 = StateNo != 3950
fv = 30
value = Vel X

[State -2, VarSet Y]
type = VarSet
trigger1 = StateNo != 3950
fv = 31
value = Vel Y
;------------------

[State 0, VarSet]
type = VarSet
trigger1 = numhelper(1145) = 0
v = 35    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State 0, VarSet]
type = VarSet
trigger1 = numhelper(1645) = 0
v = 36    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Ryu"
value = 1

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Ken"
value = 2

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Chun Li"
value = 3

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Haggar"
value = 4

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Charlie"
value = 5

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Jin Saotome"
value = 6

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Mr. X"
value = 7

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Alex"
value = 8

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Jin Kazama"
value = 9

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Squall"
value = 10

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Solid Snake"
value = 11

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Superman"
value = 12

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Sub-Zero"
value = 13

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Garret"
value = 14

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Lynn"
value = 15

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Blaze"
value = 16

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Rorschach"
value = 17

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="SubBoss"
value = 18

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Arthur"
value = 19

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="CM Punk"
value = 20

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="K'"
value = 21

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Skullomania"
value = 22

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Jill"
value = 23

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Sonic"
value = 24

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Megaman"
value = 25

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Tizoc"
value = 26

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Terry"
value = 27

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Wesker"
value = 28

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Axel"
value = 29

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Scorpion"
value = 30

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Viper"
value = 31

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Jedah"
value = 32

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Leo"
value = 33

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Koopa Troopa"
value = 34

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Morrigan"
value = 35

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Captain America"
value = 36

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Goku"
value = 37

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Dr. Doom"
value = 38

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Hinata"
value = 39

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="M. Bison"
value = 40

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Final Boss"
value = 41

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Mario"
value = 42

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Birdie"
value = 43

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Strider"
value = 44

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Sol Badguy"
value = 45

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Snow"
value = 46

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Sabotage"
value = 47

[State -2, VictoryQuote]
type = VictoryQuote
trigger1 = Enemy, Name ="Ermac"
value = 48

[State 0, VarSet]
type = VarSet
trigger1 = stateno != [3400,3405]
v = 51    ;fv = 10
value = 0
;ignorehitpause =
;persistent =

[State -1, AI ON]  ; Turn the AI on when
Type = VarSet
TriggerAll = Var(59) < 1 ; it is not on yet and
TriggerAll = RoundState=2 ; the fight has started and is not over yet and
Trigger1 = AILevel>0 ; the computer is playing the character
v = 59
value= 1 ; value of 1 will mean the AI is on
Ignorehitpause=1

[State -1, AI OFF] ; Turn the AI off when
Type=VarSet
Trigger1=var(59)>0  ; it is on and
Trigger1=RoundState!=2  ; the round is not started yet or is already over
Trigger2=!IsHelper  ; OR if we are a player, but
Trigger2=AILevel=0  ; the computer is not in control
v=59
value=0 ; value of 0 will mean the AI is off. values other than 0 and 1 are not used in this example, we have only one AI mode, the normal one.
Ignorehitpause=1

[State -1]
Type=VarSet
Trigger1=1
var(50)=(AILevel=1)*3+(AILevel=2)*7+(AILevel=3)*16+(AILevel=4)*30+(AILevel=5)*58+(AILevel=6)*90+ (AILevel=7)*150+(AILevel=8)*300

[State -2, P2 Facing]
type= targetfacing
trigger1= movecontact=1 && numtarget=1
trigger1= !(target,hitshakeover) && !(target,hitfall) && (target,time<=1)
value= ifelse(p2dist x>=0, -1, 1)
ignorehitpause= 1

[State -2, Hit Detection]
type = varset
trigger1 = movecontact = 1 && var(52) < 0
var(52) = hitpausetime
ignorehitpause = 1

[State -2, Sparks]
type = helper
triggerall = StateNo != 1301 && StateNo != 1331
triggerall = movecontact = 1 && var(52) = hitpausetime
trigger1 = movehit = 1 && numenemy
trigger1 = var(53) = 8010 || var(53) = 8011 || var(53) = 8012 || var(53) = 8013 || var(53) = 8014 || var(53) = 8001
trigger2 = moveguarded = 1 && numenemy
trigger2 = var(54) = 8000 || var(54) = 8001
trigger3 = MoveHit = 1 && NumEnemy
trigger3 = var(53) = 8015 || var(53) = 8016 || var(53) = 8017
stateno = ifelse(moveguarded, var(54), var(53))
ID = 8000
name = "Spark"
postype = p1
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < var(55), ceil(P2Dist x), var(55))), var(56)
facing = -1
ownpal = 1
pausemovetime = 65535
supermovetime = 65535
ignorehitpause = 1

[State -2, Counter FX]
type = helper
triggerAll = movehit = 1 && var(52) = hitpausetime
triggerAll = numenemy && var(6)
trigger1 = !(hitdefattr = SCA, AT) && (enemynear, movereversed != 1)
trigger2 = (EnemyNear, MoveReversed != 1) && StateNo = [1100,1299]
stateno = 8290
ID = 8290
name = "Counter FX"
postype = p1
pos = ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < var(55), ceil(P2Dist x), var(55))), var(56)
facing = -1
ownpal = 1
pausemovetime = 255
supermovetime = 255
ignorehitpause = 1

[State -2, Counter Flag]
type = varset
trigger1 = numenemy
var(6) = (enemynear, movetype = A)
ignorehitpause = 1

[State -2, Hit Detection]
type = varset
trigger1 = 1
var(52) = -1

[State -2, Hit Detection]
type = varrangeset
trigger1 = movetype = I
trigger2 = movetype = H && time
first = 52
last = 56
value = -1
ignorehitpause = 1

[State -2, Hyper Megaman - Time]
type = VarAdd
trigger1 = StateNo = 3000
;trigger2 = StateNo = 3950 ;Super Armor state
;trigger3 = StateNo = 3951 ;Super Armor state
;trigger4 = StateNo = 3952 ;Super Armor state
v = 59
value = 1

[State -2, Hyper Megaman - Time (reset)]
type = VarSet
trigger1 = StateNo != 3000 
trigger1 = StateNo != 3950 ;Super Armor state
v = 59
value = 0

;Light
[State -2]
type = Helper
triggerall = !NumHelper(23680) 
trigger1 = StageVar(info.author) = "light"
pos = 0,0
stateno = 23680
id = 23680
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = p1

[State -2]
type = Helper
triggerall = !NumHelper(23681) 
trigger1 = StageVar(info.author) = "light"
pos = 134,0
stateno = 23681
id = 23681
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = left

[State -2]
type = Helper
triggerall = !NumHelper(23682)
trigger1 = StageVar(info.author) = "light"
pos = -134,0
stateno = 23682
id = 23682
ownpal = 1
persistent = 0
ignorehitpause = 1
postype = right
;--------------------------------------------------------------
;1aD3oE?I?OA
;--------------------------------------------------------------
[Statedef 23680]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = -10

[State 3680, 4]
type = changeanim
trigger1 = time%2 = 0
value = 9741

[State 3680, 4]
type = ChangeAnim
triggerall = time%2 = 1
trigger1 = ((root,anim = [0,9741]) && root,movetype != H) 
trigger2 = (root,anim = [5000,9999])
value = root,anim
elem = root,animelemno(0)
ignorehitpause = 1
persistent = 1

[State 3680, 0]
type = PalFX
trigger1 = time = 0
time = -1
add = 224,88,0
sinadd = 48,50,32,16
;add = 248,232,192

[State 3680,0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3680, 4]
type=BindToParent
trigger1 = 1
time = -1
facing = 1
pos = (1+ifelse(Parent,fvar(36) = 1,-1,0)+ifelse(Parent,fvar(36) = 2,-2,0))*ifelse(Facing = -1,-1,1),0
;--------------------------------------------------------------
;1aDo
;--------------------------------------------------------------
[Statedef 23681]
type    = S
movetype= H
physics = N
velset = 0,0
anim = 9741
sprpriority = -10

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X > 0 && RootDist X < 52
fvar(40) = 1

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X < 0
fvar(40) = 0

[State 3680,1]
type = NotHitBy
trigger1 = 1
value = SCA
;--------------------------------------------------------------
;1aDOO
;--------------------------------------------------------------
[Statedef 23682]
type    = S
movetype= H
physics = N
velset = 0,0
anim = 9741
sprpriority = -10

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X < 0 && RootDist X > 52
fvar(40) = 1

[State 3680,1]
type = ParentVarSet
trigger1 = RootDist X > 0
fvar(40) = 2

[State 3680,1]
type = NotHitBy
trigger1 = 1
value = SCA
;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

;-----------------------------------------------
[State -3, HitOverRide] ;Super Armor by Soldats
type = HitOverRide
triggerall = StateNo != [120,155]
triggerall = Anim != [5000,5999] ;prevent for enemy's custom state
;triggerall = (Var(58) < 15) ;HitOverRide limits
trigger1 = (StateNo = 3000) || (StateNo = 3950) ;only with Hyper Megaman super
trigger1 = (var(59) > 16) && (var(59) < 181) ;((StateNo = 3000) && (var(59) > 16) && (var(59) < 181))
trigger2 = (StateNo = [3101,3107]) || (StateNo = 3950) ;only with Rush Drill super
trigger2 = Anim = 3190 ;var(45) < 154 ;((StateNo = [3101,3107]) && (var(45) < 154))
trigger2 = Anim != 3101 && Anim != 53 ;Rush Drill final anims - state 3101
attr = SCA, AA, AP, AT ;NA, NP, SA, SP, HA, HP
slot = 1
stateno = 3950
time = 1
ignorehitpause = 1

[State -3, Helper]
type = Helper
triggerall = roundstate >= 0
triggerall = teamside = 1
trigger1 = 1 && !numhelper(90000)
helpertype = normal ;player
name = "Power/Guard Meters p1"
ID = 90000
stateno = 90000
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 99999999
pausemovetime = 99999999
ignorehitpause = 1


[State -3, Helper]
type = Helper
triggerall = roundstate >= 0
triggerall = teamside = 2
trigger1 = 1 && !numhelper(90001)
helpertype = normal ;player
name = "Power/Guard Meters p2"
ID = 90001
stateno = 90001
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 99999999
pausemovetime = 99999999
ignorehitpause = 1

[State -3, Helper]
type = Helper
triggerall = roundstate >= 0
triggerall = teamside = 1
trigger1 = 1 && !numhelper(90005)
helpertype = normal ;player
name = "Mega Meter p1"
ID = 90005
stateno = 90005
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 99999999
ignorehitpause = 1


[State -3, Helper]
type = Helper
triggerall = roundstate >= 0
triggerall = teamside = 2
trigger1 = 1 && !numhelper(90006)
helpertype = normal ;player
name = "Mega Meter p2"
ID = 90006
stateno = 90006
pos = 0,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 99999999
ignorehitpause = 1

;This controller plays a sound everytime the player lands from a jump, or
;from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = s40, 0

[State -3, Parry Detection]
type = helper
triggerall = roundstate = 2 && !numhelper(765) && !var(20)
triggerall = (movetype = I && ctrl) || (stateno = [760, 762]) || stateno = 5120
triggerall = (command != "rlsfwd" && command != "rlsback" && command != "rlsup" && command != "rlsdown") || AIlevel
trigger1 = !AIlevel && (statetype = S || statetype = C || stateno = 5120) && (command = "fwd" || command = "down")
trigger2 = !AIlevel && statetype = A && (var(3) != 1 && var(3) != 2) && command = "fwd"
trigger3 = AIlevel && (stateno != [760, 762]) && inguarddist && random < 50
trigger4 = AIlevel && (stateno = [760, 762]) && time = 14 && random < 667
helpertype = normal
stateno = 765
ID = 765
name = "Parry Detection"
postype = p1
pausemovetime = 65535
supermovetime = 65535

[State -3, Parry Attacks]
type = changestate
trigger1 = (stateno != [760, 762]) && numhelper(765)
trigger1 = helper(765), stateno = 766
value = ifelse((helper(765), anim = 767), 762, ifelse((helper(765), anim = 766), 761, 760))
ignorehitpause = 1

[State -3, Parry Projectiles]
type = hitoverride
trigger1 = (stateno != [760, 762]) && numhelper(765)
trigger1 = !(helper(765), var(0)) && (helper(765), anim = 765)
attr = SA, AP
stateno = 760
slot = 0
time = 1
ignorehitpause = 1

[State -3, Parry Projectiles]
type = hitoverride
trigger1 = (stateno != [760, 762]) && numhelper(765)
trigger1 = !(helper(765), var(0)) && (helper(765), anim = 766)
attr = C, AP
stateno = 761
slot = 0
time = 1
ignorehitpause = 1

[State -3, Parry Projectiles]
type = hitoverride
trigger1 = (stateno != [760, 762]) && numhelper(765)
trigger1 = !(helper(765), var(0)) && (helper(765), anim = 767)
attr = SCA, AP
stateno = 762
slot = 0
time = 1
ignorehitpause = 1

[State -3, NoWalk after Parry]
type = assertspecial
trigger1 = var(26) > 0
trigger1 = var(26) := (var(26) -1)
flag = nowalk
ignoreHitPause = 1

[State -3, Movement Afterimage]
type = afterimage
triggerall = time = 1 && !var(20)
trigger1 = stateno = 50 && (var(3) = 2 || var(3) = 3)
trigger2 = (stateno = [700,715])
time = 2
timegap = 1
framegap = 4
length = 9
palbright = 0, 0, 0
palcontrast = 128, 128, 128
palpostbright = 0, 0, 0
paladd = 0, 0, 0
palmul = 0.9, 0.9, 0.9
trans = add1

[State -3, supershadowtime]
type = AfterImageTime
trigger1 = (stateno=[700,715]) && AnimElemTime(1) >= 0
time = 2

[State -3, Prevent Crossup]
type=width
trigger1= 1
edge=8,0
ignorehitpause=1

[State -3, Get Hit Sound]
type=PlaySnd
triggerAll=Alive && Time=1
triggerAll=StateNo=5000 || StateNo=5010
trigger1=GetHitVar(AnimType) >= 2 && Random < 500
trigger2=GetHitVar(AnimType)=1 && Random < 375
trigger3=GetHitVar(AnimType)=0 && Random < 250
value=15,(Random % 2)
channel=0
ignoreHitPause=1
[State -3, Get Hit Sound]
type =PlaySnd
triggerAll=Alive && Time=1
trigger1=(StateNo=5000 || StateNo=5010) && NumEnemy
trigger1=GetHitVar(fall) || (EnemyNear, HitDefAttr=SCA,SA,HA)
trigger2=(StateNo=5020 || StateNo=5070 || StateNo=5080)
trigger3=(StateNo=5050 || StateNo=5100) && (PrevStateNo != [5000,5199])
value=15,2
channel=0
ignoreHitPause=1

[State -3, Super Finish]
type = helper
triggerall = winKO
triggerall = roundstate = 3 && !numhelper(8600)
trigger1 = MoveHit = 1 && (StateNo = [2000,4999])
trigger1 = var(23) := stateno
trigger2 = (StateNo = [3300,3321])
trigger2 = var(23) := 3300
trigger3 = (StateNo = [3350,3359])
trigger3 = var(23) := 3350
trigger4 = (StateNo = [3100,3199])
trigger4 = var(23) := 3100
trigger5 = StateNo = 3400
trigger5 = var(23) := 3400
trigger6 = (StateNo = [3200,3299])
trigger6 = var(23) := 3200
trigger7 = (StateNo = [3000,3099])
trigger7 = var(23) := 3000
stateno = 8600
ID = 8600
name = "Super Finish"
postype = left
pos = 160, -120
ownpal = 1
pausemovetime = 255
supermovetime = 255
ignorehitpause = 1

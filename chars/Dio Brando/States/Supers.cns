;------------------------------------------------------------------
;Checkmate
[Statedef 3000]
type=S
movetype=A
physics=N
anim=3000
poweradd=cond(var(0)=1,0,-1000)
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3000, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3000, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=59
[State 3000, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3000, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3000, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3000, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3000, CtrlSet]
type=CtrlSet
trigger1=var(0) 
value=0 

[State 3000, NotHitBy]
type=NotHitBy
trigger1=animelemtime(12)<0
time=1
value=SCA
[State 3000, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3000, SuperPause FX]
type=Helper
trigger1=animelem=5
helperType=Normal
stateNo=8500
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(-25*const(size.xscale)),ceil(-55*const(size.yscale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3000, SuperPause]
type=SuperPause
trigger1=!time
time=59
movetime=59
p2DefMul=1
unHittable=1
anim=-1
sound=s-1,0
darken=0
poweradd=0

[State 3000, Snd]
type=PlaySnd
trigger1=animelem=5
value=s8500,0
channel=3

[State 3000, Lv]
type=VarSet
trigger1=!time
var(24)=0

[State 3000, Voice]
type=PlaySnd
trigger1=animelem=7
value=s3000,0
volumescale=255
channel=0

[State 3000, Snd]
type=PlaySnd
trigger1=animelem=5
value=s3000,1
channel=1
[State 3000, Snd]
type=PlaySnd
trigger1=animelem=11
value=s3000,2
channel=1

[State 3000, width]
type=width
trigger1=!time
player=50,0
edge=60,0

[State 3000, Knife FX]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3015
ID=3015
name="KnifeFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ownpal=0
supermovetime=255
pausemovetime=255

[State 3000, Knife 1]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(29 *const(size.xscale)), ceil(-1 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 2]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(38 *const(size.xscale)), ceil(-11 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 3]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(-15 *const(size.xscale)), ceil(-17 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3000, Knife 4]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(67 *const(size.xscale)), ceil(-19 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 5]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(40 *const(size.xscale)), ceil(-30 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 6]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(85 *const(size.xscale)), ceil(-36 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 7]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(61 *const(size.xscale)), ceil(-51 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 8]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(40 *const(size.xscale)), ceil(-52 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 9]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(46 *const(size.xscale)), ceil(-66 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 10]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(72 *const(size.xscale)), ceil(-72 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 11]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(76 *const(size.xscale)), ceil(-86 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 12]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(69 *const(size.xscale)), ceil(-93 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 13]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(44 *const(size.xscale)), ceil(-102 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 14]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(12 *const(size.xscale)), ceil(-121 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3000, Knife 15]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(6 *const(size.xscale)), ceil(-128 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2

[State 3000, StateTypeSet]
type=StateTypeSet
trigger1=animelemtime(14)>=0
movetype=I

[State 3000, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Air Checkmate
[Statedef 3025]
type=A
movetype=A
physics=N
anim=3025
poweradd=cond(var(0)=1,0,-1000)
ctrl=0
sprpriority=1

[State 3025, VarSet]
type=VarSet
trigger1=!AILevel && !time
var(10)=Ifelse(command="x"||command="rlsx",0,Ifelse(command="y"||command="rlsy",1,2))
ignorehitpause=1
[State 3025, VarSet]
type=VarSet
trigger1=AILevel && !time && Numenemy
var(10)=Ifelse(p2bodydist x>125,2,Ifelse(p2bodydist x<75,0,1))
ignorehitpause=1
[State 3025, CtrlSet]
type=CtrlSet
trigger1=var(0) && anim=3025
value=0 

[State 3025, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3025, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=59
[State 3025, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3025, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3025, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3025, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3025, NotHitBy]
type=NotHitBy
trigger1=animelemtime(5)<0
time=1
value=SCA
[State 3025, PosFreeze]
type=PosFreeze
trigger1=animelemtime(11)<0
[State 3025, Gravity]
type=veladd
trigger1=animelemtime(11)>=0
y=0.4725
[State 3025, VelMul]
type=VelMul
trigger1=animelemtime(10)>1 
x=0.925

[State 3025, SuperPause FX]
type=Helper
trigger1=animelem=3
helperType=Normal
stateNo=8500
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(-12*const(size.xscale)),ceil(-135*const(size.yscale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3025, SuperPause]
type=SuperPause
trigger1=!time
time=59
movetime=59
p2DefMul=1
unHittable=1
anim=-1
sound=s-1,0
darken=0
poweradd=0

[State 3025, Snd]
type=PlaySnd
trigger1=animelem=3
value=s8500,0
channel=3

[State 3025, Lv]
type=VarSet
trigger1=!time
var(24)=0

[State 3025, Voice]
type=PlaySnd
trigger1=animelem=3
value=s3000,0
volumescale=255
channel=0

[State 3025, Snd]
type=PlaySnd
trigger1=animelem=4
value=s3000,1
channel=1
[State 3025, Snd]
type=PlaySnd
trigger1=animelem=5
value=s3000,2
channel=1

[State 3025, width]
type=width
trigger1=animelem=5
player=42, 0
edge=55,0

[State 3025, Knife FX]
type=helper
trigger1=animelem=4
helpertype=normal
stateno=3015
ID=3015
name="KnifeFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ownpal=0
supermovetime=255
pausemovetime=255

[State 3025, Knife 1]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(-16 *const(size.xscale)), ceil(-3 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 2]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(-42 *const(size.xscale)), ceil(-18 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 3]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(-52 *const(size.xscale)), ceil(-18 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 4]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(64 *const(size.xscale)), ceil(-29 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 5]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(37 *const(size.xscale)), ceil(-40 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 6]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(61 *const(size.xscale)), ceil(-45 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 7]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(81 *const(size.xscale)), ceil(-47 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 8]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(-4 *const(size.xscale)), ceil(-49 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 9]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(6 *const(size.xscale)), ceil(-51 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 10]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(90 *const(size.xscale)), ceil(-70 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 11]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(32 *const(size.xscale)), ceil(-74 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3025, Knife 12]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(109 *const(size.xscale)), ceil(-90 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2

[State 3025, StateTypeSet]
type=StateTypeSet
trigger1=animelemtime(8)>=0
movetype=I

[State 3025, End]
type=ChangeState
trigger1=pos y > -vel y
value=3035
;----------------------------------------------------------------------
;Air Checkmate Land
[Statedef 3035]
type=S
movetype=I
physics=S
anim=3035
ctrl=0
velset=0,0

[State 3035, PosSet]
type=PosSet
trigger1=1
y=0
[State 3035, Landing Sound]
type=PlaySnd
trigger1=!Time
value=52,0
channel=1
[State 3035, Landing Dust Explod]
type=Explod
trigger1=!Time
anim=8102
sprPriority=-3
posType=P1
pos=0,2
scale=0.5,0.5
ownPal=1

[State 3035, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Max Checkmate
[Statedef 3050]
type=S
movetype=A
physics=N
anim=3000
poweradd=-2000
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3050, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3050, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=59
[State 3050, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3050, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3050, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3050, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3050, NotHitBy]
type=NotHitBy
trigger1=animelemtime(12)<0
time=1
value=SCA

[State 3050, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3050, SuperPause FX]
type=Helper
trigger1=animelem=5
helperType=Normal
stateNo=8510
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(-25*const(size.xscale)),ceil(-55*const(size.yscale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3050, SuperPause]
type=SuperPause
trigger1=!time
time=59
movetime=59
p2DefMul=1
unHittable=1
anim=-1
sound=s-1,1
darken=0
poweradd=0

[State 3050, Snd]
type=PlaySnd
trigger1=animelem=5
value=s8500,1
channel=3

[State 3050, Lv]
type=VarSet
trigger1=!time
var(24)=1
[State 3050, Reset]
type=VarSet
trigger1=!time
var(11)=0
ignoreHitPause=1

[State 3050, Touchdown]
type=VarSet
triggerall=animelemtime(2)>=1 && animelemtime(14)<0 
trigger1=Numhelper(1005)
trigger1=Helper(1005),stateno=3055
trigger1=Helper(1005),var(38)=1
trigger2=Numhelper(3055)
trigger2=Helper(3055),stateno=3055
trigger2=Helper(3055),var(38)=1
var(11)=1
ignoreHitPause=1

[State 3050, Voice]
type=PlaySnd
trigger1=animelem=7
value=s3000,0
volumescale=255
channel=0

[State 3050, Snd]
type=PlaySnd
trigger1=animelem=5
value=s3000,1
channel=1
[State 3050, Snd]
type=PlaySnd
trigger1=animelem=11
value=s3000,2
channel=1

[State 3050, width]
type=width
trigger1=animelem=11
player=42, 0
edge=55,0

[State 3050, Knife FX]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3015
ID=3015
name="KnifeFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ownpal=0
supermovetime=255
pausemovetime=255

[State 3050, World Knife]
type=helper
trigger1=animelemtime(2)>=0 && animelemtime(14)<0 
trigger1=!Numhelper(1005) && !Numhelper(3055)
trigger1=var(11)=0
helpertype=normal
stateno=3055
ID=3055
name="World"
postype=p1
pos=ceil(-40 *const(size.xscale)), ceil(0 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
supermovetime=60
pausemovetime=255

[State 3050, Knife 1]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(29 *const(size.xscale)), ceil(-1 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 2]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(38 *const(size.xscale)), ceil(-11 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 3]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(-15 *const(size.xscale)), ceil(-17 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 4]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(67 *const(size.xscale)), ceil(-19 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 5]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(40 *const(size.xscale)), ceil(-30 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 6]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(85 *const(size.xscale)), ceil(-36 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 7]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(61 *const(size.xscale)), ceil(-51 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 8]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(40 *const(size.xscale)), ceil(-52 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=1
pausemovetime=2
[State 3050, Knife 9]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(46 *const(size.xscale)), ceil(-66 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 10]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(72 *const(size.xscale)), ceil(-72 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 11]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(76 *const(size.xscale)), ceil(-86 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 12]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(69 *const(size.xscale)), ceil(-93 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 13]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(44 *const(size.xscale)), ceil(-102 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 14]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(12 *const(size.xscale)), ceil(-121 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3050, Knife 15]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(6 *const(size.xscale)), ceil(-128 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2

[State 3050, StateTypeSet]
type=StateTypeSet
trigger1=animelemtime(14)>=0
movetype=I

[State 3050, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Max Air Checkmate
[Statedef 3075]
type=A
movetype=A
physics=N
anim=3025
poweradd=-2000
ctrl=0
sprpriority=1

[State 3075, VarSet]
type=VarSet
trigger1=!AILevel && !time
var(10)=Ifelse(command="x+y",0,Ifelse(command="y+z",1,2))
ignorehitpause=1
[State 3075, VarSet]
type=VarSet
trigger1=AILevel && !time && Numenemy
var(10)=Ifelse(p2bodydist x>125,2,Ifelse(p2bodydist x<75,0,1))
ignorehitpause=1

[State 3075, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3075, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=59
[State 3075, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3075, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3075, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3075, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3075, NotHitBy]
type=NotHitBy
trigger1=animelemtime(5)<2
time=1
value=SCA
[State 3075, PosFreeze]
type=PosFreeze
trigger1=animelemtime(11)<0
[State 3075, Gravity]
type=veladd
trigger1=animelemtime(11)>=0
y=0.4725
[State 3075, VelMul]
type=VelMul
trigger1=animelemtime(10)>1 
x=0.925

[State 3075, SuperPause FX]
type=Helper
trigger1=animelem=3
helperType=Normal
stateNo=8510
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(-12*const(size.xscale)),ceil(-135*const(size.yscale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3075, SuperPause]
type=SuperPause
trigger1=!time
time=59
movetime=59
p2DefMul=1
unHittable=1
anim=-1
sound=s-1,1
darken=0
poweradd=0

[State 3075, Snd]
type=PlaySnd
trigger1=animelem=3
value=s8500,0
channel=3

[State 3075, Reset]
type=VarSet
trigger1=!time
var(11)=0
ignoreHitPause=1

[State 3075, Touchdown]
type=VarSet
triggerall=animelemtime(2)>=0 && animelemtime(10)<0 
trigger1=Numhelper(1005)
trigger1=Helper(1005),stateno=3065
trigger1=Helper(1005),var(38)=1
trigger2=Numhelper(3055)
trigger2=Helper(3055),stateno=3065
trigger2=Helper(3055),var(38)=1
var(11)=1
ignoreHitPause=1

[State 3075, World Knife]
type=helper
trigger1=animelemtime(2)>=0 && animelemtime(10)<0 
trigger1=!Numhelper(1005) && !Numhelper(3055)
trigger1=var(11)=0
helpertype=normal
stateno=3065
ID=3055
name="World"
postype=p1
pos=ceil(-40 *const(size.xscale)), ceil(0 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
supermovetime=60
pausemovetime=255

[State 3075, Lv]
type=VarSet
trigger1=!time
var(24)=1

[State 3075, Voice]
type=PlaySnd
trigger1=animelem=3
value=s3000,0
volumescale=255
channel=0

[State 3075, Snd]
type=PlaySnd
trigger1=animelem=4
value=s3000,1
channel=1
[State 3025, Snd]
type=PlaySnd
trigger1=animelem=5
value=s3000,2
channel=1

[State 3075, width]
type=width
trigger1=animelem=5
player=42, 0
edge=55,0

[State 3075, Knife FX]
type=helper
trigger1=animelem=4
helpertype=normal
stateno=3015
ID=3015
name="KnifeFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ownpal=0
supermovetime=255
pausemovetime=255

[State 3075, Knife 1]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(-16 *const(size.xscale)), ceil(-3 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 2]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(-42 *const(size.xscale)), ceil(-18 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 3]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(-52 *const(size.xscale)), ceil(-18 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 4]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(64 *const(size.xscale)), ceil(-29 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 5]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(37 *const(size.xscale)), ceil(-40 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 6]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(61 *const(size.xscale)), ceil(-45 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 7]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(81 *const(size.xscale)), ceil(-47 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 8]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(-4 *const(size.xscale)), ceil(-49 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 9]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(6 *const(size.xscale)), ceil(-51 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 10]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(90 *const(size.xscale)), ceil(-70 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 11]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(32 *const(size.xscale)), ceil(-74 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2
[State 3075, Knife 12]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3005
ID=3006+var(10)
name="Knife"
postype=p1
pos=ceil(109 *const(size.xscale)), ceil(-90 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
pausemovetime=2

[State 3075, StateTypeSet]
type=StateTypeSet
trigger1=animelemtime(8)>=0
movetype=I

[State 3075, End]
type=ChangeState
trigger1=pos y > -vel y
value=3035
;------------------------------------------------------------------
;Road Roller
[Statedef 3100]
type=S
movetype=A
physics=N
anim=3100
ctrl=0
velset=0,0
sprpriority=0
facep2=1

[State 3100, Reset]
type=varset
trigger1=!time
var(11)=0
[State 3100, Lv]
type=varset
trigger1=!time
var(24)=0
[State 3100, CtrlSet]
type=CtrlSet
trigger1=var(0) 
value=0 

[State 3100, Reset]
type=varset
trigger1=numenemy && animelem=32
var(10)=Ifelse(enemynear,movetype=H,1,0)

[State 3100, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3100, Unguardable]
type=VarSet
trigger1=animelem=29 && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=60
[State 3100, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3100, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3100, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3100, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3100, Pause]
type=SuperPause
trigger1=animelemtime(1)>0 && animelemtime(29)<0
trigger1=numenemy
trigger1=enemynear,movetype=H
time=2
movetime=2
p2DefMul=0
unHittable=0
anim=-1
sound=s-1,0
darken=0

[State 3100, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3100, SuperPause FX]
type=Helper
trigger1=animelem=29
helperType=Normal
stateNo=8500
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(9 *const(size.xscale)),ceil(-65 *const(size.yscale))
pausemovetime=255
supermovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3100, SuperPause]
type=SuperPause
trigger1=animelem=29
time=60
movetime=60
poweradd=cond(var(0)=1,0,-1000)
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,0
darken=0

[State 3100, Voice]
type=PlaySnd
trigger1=animelem=30
value=3100,1
volumescale=255
channel=0

[State 3100, Helper]
type=Helper
trigger1=animelem=32
helpertype=normal ;player
name="Road-Roller"
ID=3105
stateno=3105
postype=p1
pos=0,0
ownpal=1
pausemovetime=80
supermovetime=80
size.xscale=1.0
size.yscale=1.0

[State 3100, PosSet]
type=PosSet
trigger1=animelem=32 && numenemy
x=enemynear,pos x +80*(enemynear,facing)
y=enemynear,pos y -300
[State 3100, VelSet]
type=VelSet
trigger1=animelem=33
x=3
y=32

[State 3100, ScreenBound]
type=ScreenBound
trigger1=animelemtime(3)>0 && animelemtime(32)<0
value=0
movecamera=1,0
[State 3100, ScreenBound]
type=ScreenBound
trigger1=animelemtime(32)>0
value=0
movecamera=0,1

[State 3100, Width]
type=Width
trigger1=1 
edge=5,0 

[State 3100, Voice]
type=PlaySnd
trigger1=!time
value=3100,0
volumescale=255
channel=0
[State 3100, movehitvar]
type=varset
trigger1=movehit && numtarget 
trigger1=!(target, time) && (target, movetype=H)
var(11)=1
ignorehitpause=1

[State 3100, NotHitBy]
type=NotHitBy
trigger1=AnimElemTime(32)>=0
time=1
value=SCA

[State 3100, Jump Sound]
type=PlaySnd
trigger1=animelem=3
value=41, 0
[State 3100, Dust Helper]
type=Helper
trigger1=animelem=3
helperType=Normal
stateNo=8100
ID=8100
name="Jump Dust"
pausemovetime=255
supermovetime=255
posType=P1
ownPal=1
[State 3100, PlayerPush]
type=PlayerPush
trigger1=animelemtime(3)>=0
value=0
ignorehitpause=1

[State 3100, StateTypeSet]
type=StateTypeSet
trigger1=animelem=3
statetype=A
[State 3100, VelSet]
type=VelSet
trigger1=animelem=3
y=-14

[State 3100, Hit]
type=HitDef
triggerall=!numtarget(3100) && !var(0)
trigger1=animelem=33
id=3100
attr=A,HA
damage=28,21
priority=4, hit
animtype=Hard
getpower=0,0
givepower=20,20
hitflag=MAF
guardflag=HA
hitsound=S2,2
guardsound=S130,0
pauseTime=1,1
sparkNo=-1 + 0 * (var(33) :=8014)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=140), var(36) :=Ifelse(p2statetype=L,20,115)
ground.type=High
ground.slidetime=12
ground.hittime=12
guard.hittime=12
ground.velocity=0,-2
air.velocity=0,-2
down.velocity=0,0
guard.velocity=0
airguard.velocity=-1,-1
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.5
fall.recover=0
forcestand=1
kill=0
guard.kill=0
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=4
envShake.freq=120
p2facing=1
p2stateno=3130
sprpriority=0

[State 3100, Hit]
type=HitDef
triggerall=!numtarget(3100) && var(0)
trigger1=animelem=33
id=3100
attr=A,HA
damage=28,21
priority=4, hit
animtype=Hard
getpower=0,0
givepower=20,20
hitflag=MAFD
guardflag=HA
hitsound=S2,2
guardsound=S130,0
pauseTime=1,1
sparkNo=-1 + 0 * (var(33) :=8014)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=140), var(36) :=Ifelse(p2statetype=L,20,115)
ground.type=High
ground.slidetime=12
ground.hittime=12
guard.hittime=12
ground.velocity=0,-2
air.velocity=0,-2
down.velocity=0,0
guard.velocity=0
airguard.velocity=-1,-1
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.5
fall.recover=0
forcestand=1
kill=0
guard.kill=0
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=4
envShake.freq=120
p2facing=1
p2stateno=3130
sprpriority=0

[State 3100, End]
type=ChangeState
trigger1=animelemtime(32)>0
trigger1=pos y>-65
value=Ifelse(var(11),3110,3101)
ctrl=0
;----------------------------------------------------------------------
;Road Roller Miss
[Statedef 3101]
type=A
movetype=I
physics=N
anim=3101
ctrl=0
velset=0,0
sprpriority=-3

[State 3101, SprPriority]
type=SprPriority
trigger1=animelem=2
value=1
[State 3101, PlayerPush]
type=PlayerPush
trigger1=1
value=0
ignorehitpause=1
[State 3101, Snd]
type=PlaySnd
trigger1=!time
value=s3100,3
channel=1
[State 3101, Snd]
type=PlaySnd
trigger1=!time
value=s2,7
volumescale=255
channel=3
[State 3101, EnvShake]
type=EnvShake
trigger1=!time
time=32
ampl=Ifelse(random<500,6,-6)

[State 3101, PosAdd]
type=PosSet
trigger1=animelemtime(2)<0 
y=-115
[State 3101, PosAdd]
type=PosAdd
trigger1=!time
x=10

[State 3101, ScreenBound]
type=ScreenBound
trigger1=1
value=1
movecamera=1,0

[State 3101, VelSet]
type=VelSet
trigger1=animelem=2
x=-4.5
y=-7.5
[State 3101, Gravity] 
type=VelAdd
trigger1=animelemtime(2)>0
y=0.4125

[State 3101, Dust]
type=Explod
trigger1=!time
anim=8105
sprPriority=-3
posType=P1
pos=0, -ceil(pos y-10)
scale=1.0,1.0
ownPal=1

[State 3101, Jump Sound]
type=PlaySnd
trigger1=animelem=2
value=41, 0
channel=2
[State 3101, Dust Helper]
type=Helper
trigger1=animelem=2
helperType=Normal
stateNo=8100
ID=8100
name="Jump Dust"
posType=P1
ownPal=1
pausemovetime=255
supermovetime=255
[State 3101, PlayerPush]
type=PlayerPush
trigger1=animelemtime(2)>=0
value=0
ignorehitpause=1

[State 3101, End]
type=ChangeState
trigger1=animelemtime(9)>0
trigger1=pos y>-vel y
value=3035
;----------------------------------------------------------------------
;Road Roller Win
[Statedef 3102]
type=S
movetype=I
physics=N
velset=0,0
sprpriority=-3

[State 3102, ChangeAnim]
type=ChangeAnim
trigger1=prevstateno=3110 && !time
value=3102

[State 3102, Voice]
type=PlaySnd
trigger1=prevstateno=3110 && animelem=7
value=s183,random%2
channel=0

[State 3102, PosFreeze]
type=PosFreeze
trigger1=1 
[State 3102, ScreenBound]
type=ScreenBound
trigger1=time<40 && prevstateno=3110
value=0
movecamera=1,0

[State 3102, End]
type=ChangeState
trigger1=Time >=72 && RoundState=3
value=180
ctrl=1
;----------------------------------------------------------------------
;Road Roller Connect
[Statedef 3110]
type=A
movetype=A
physics=N
anim=3110
ctrl=0
velset=0,0
sprpriority=-77

[State 3110, SprPriority]
type=SprPriority
trigger1=animelem=71
value=3
[State 3110, CtrlSet]
type=CtrlSet
trigger1=var(0) 
value=0 
[State 3110, ChangeAnim]
type=ChangeAnim
triggerall=animelem=47
trigger1=var(24)
value=3110
elem=15
persistent=0
[State 3110, ChangeAnim]
type=ChangeAnim
triggerall=animelemtime(2)>2 && animelemtime(5)<0
trigger1=!var(24)
value=3110
elem=13
persistent=0

[State 3110, Safety]
type=ChangeState
trigger1=!Time && !NumTarget
trigger1=!var(0)
value=50

[State 3110, More Safety]
type=NotHitBy
trigger1=1
value=SCA
[State 3110, PlayerPush]
type=PlayerPush
trigger1=1
value=0
ignorehitpause=1
[State 3110, Snd]
type=PlaySnd
trigger1=!time
value=s3100,3
volumescale=255
channel=1
[State 3110, Snd]
type=PlaySnd
trigger1=!time
value=s2,7
volumescale=255
channel=3
[State 3110, Voice]
type=PlaySnd
trigger1=animelem=5 && var(24)=1
value=s3100,2
volumescale=255
channel=0
[State 3110, Voice]
type=PlaySnd
trigger1=animelem=18
value=s1000,2
volumescale=255
persistent=0
channel=0
[State 3110, Voice]
type=PlaySnd
trigger1=animelem=64
value=s1000,3
volumescale=255
persistent=0
channel=0
[State 3110, EnvShake]
type=EnvShake
trigger1=!time
time=32
ampl=Ifelse(random<500,6,-6)

[State 3110, PosAdd]
type=PosSet
trigger1=animelemtime(70)<0 
y=-115
[State 3110, PosAdd]
type=PosAdd
trigger1=!time
x=28

[State 3110, ScreenBound]
type=ScreenBound
trigger1=animelemtime(4)<0
value=0
movecamera=1,0
[State 3110, ScreenBound]
type=ScreenBound
trigger1=animelemtime(71)>=0 && !var(0)
value=0
[State 3110, ScreenBound]
type=ScreenBound
trigger1=animelemtime(71)>=0 && var(0)
value=1
movecamera=0,1

[State 3110, VelSet]
type=VelSet
trigger1=animelem=70
x=-4.5
y=-7.5
[State 3110, Gravity] 
type=VelAdd
trigger1=animelemtime(71)>0
y=0.4125

[State 3110, Dust]
type=Explod
trigger1=!time
anim=8105
sprPriority=-3
posType=P1
pos=0, -ceil(pos y-10)
scale=1.0,1.0
ownPal=1

[State 3110, Jump Sound]
type=PlaySnd
trigger1=animelem=70
value=41, 0
channel=2
[State 3110, Dust Helper]
type=Helper
trigger1=animelem=70
helperType=Normal
stateNo=8100
ID=8100
name="Jump Dust"
posType=P1
ownPal=1

[State 3110, woosh]
type=PlaySnd
trigger1=animelem=13||animelem=15||animelem=17||animelem=19||animelem=21
trigger2=animelem=23||animelem=25||animelem=27||animelem=29||animelem=31
trigger3=animelem=33||animelem=35||animelem=37||animelem=39||animelem=41
trigger4=animelem=43||animelem=45||animelem=47||animelem=49||animelem=51
trigger5=animelem=53||animelem=55||animelem=57||animelem=63
value=s1,2
channel=6+random%4

[State 3110, hitsound]
type=PlaySnd
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58
value=s2,2
channel=2+random%4
[State 3110, hitsound]
type=PlaySnd
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58
value=s3110,0
volumescale=50
channel=14+random%4
[State 3301, hitsound]
type=PlaySnd
trigger1=animelem=64
value=s3110,1
channel=14

[State 3110, EnvShake]
type=EnvShake
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58
time=6
ampl=Ifelse(random<500,5,-5)
[State 3110, EnvShake]
type=EnvShake
trigger1=animelem=64
time=124
ampl=Ifelse(random<500,7,-7)

[State 3110, HitSpark]
type=Helper
triggerall=Numtarget
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58
helperType=Normal
stateNo=8014
ID=8000
name="Spark"
posType=P1
pos=ceil(-15+(5*random%50)*const(size.xscale)),ceil(15*random%25*const(size.yscale))
facing=-1
ownPal=1
size.xScale=1.0
size.yScale=1.0
ignoreHitPause=1
pausemovetime=65535
supermovetime=65535
[State 3110, HitSpark]
type=Helper
triggerall=Numtarget
trigger1=animelem=64
helperType=Normal
stateNo=8014
ID=8000
name="Spark"
posType=P1
pos=ceil(65*const(size.xscale)),ceil(18*const(size.yscale))
facing=-1
ownPal=1
size.xScale=1.0
size.yScale=1.0
ignoreHitPause=1
pausemovetime=65535
supermovetime=65535

[State 3110, Bind]
type=TargetBind
trigger1=NumTarget && AnimElemtime(64)<0
pos=ceil(-25 * const(size.xScale)),-ceil(Pos Y)
[State 3110, Bind]
type=TargetBind
trigger1=NumTarget && AnimElemtime(64)>0
trigger1=Win
pos=ceil(-25 * const(size.xScale)),100

[State 3110, p2state]
type=targetstate
triggerall=NumTarget && !Win
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58||animelem=64
value=3131
[State 3110, p2state]
type=targetstate
trigger1=NumTarget && Numhelper(3105)
trigger1=Helper(3105),anim=9999
value=Ifelse(var(0),3134,3132)
persistent=0
[State 3110, p2state]
type=targetstate
trigger1=NumTarget && win
trigger1=animelemtime(64)>=0
value=3133

[State 3110, flames]
type=helper
trigger1=numtarget && !numhelper(7180)
trigger1=target,stateno=3132 && target,time=1
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
ownpal=1
facing=-1
ignorehitpause=1

[State 3110, Damage]
type=TargetLifeAdd
triggerall=NumTarget 
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58
value=ceil(Ifelse(var(0),0,Ifelse(var(10)=1 && var(13)<50,-5,Ifelse(var(10)=1 && var(13)>=50,-3,-7))))
absolute=1
kill=0
[State 3110, Damage]
type=TargetLifeAdd
triggerall=NumTarget 
trigger1=animelem=64
value=ceil(Ifelse(var(0),0,Ifelse(var(10)=1 && var(13)<50,-21,Ifelse(var(10)=1 && var(13)>=50,-14,-28))))
absolute=1

[State 3110, TargetPowerAdd]
type=TargetPowerAdd
triggerall=NumTarget 
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58||animelem=64
value=9

[State 3110, HitAdd]
type=HitAdd
triggerall=NumTarget 
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58||animelem=64
value=1
[State 3110, VarAdd]
type=VarAdd
triggerall=NumTarget 
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58||animelem=64
var(13)=1
[State 3110, Juggle]
type=VarAdd
triggerall=NumTarget 
trigger1=animelem=14||animelem=16||animelem=18||animelem=20||animelem=22
trigger2=animelem=24||animelem=26||animelem=28||animelem=30||animelem=32
trigger3=animelem=34||animelem=36||animelem=38||animelem=40||animelem=42
trigger4=animelem=44||animelem=46||animelem=48||animelem=50||animelem=52
trigger5=animelem=54||animelem=56||animelem=58||animelem=64
var(15)=1
ignoreHitPause=1
[State 3110, Juggle]
type=VarSet
triggerall=NumTarget 
trigger1=animelem=65 && !var(24)
var(16)=1
ignoreHitPause=1

[State 3110, ChangeState]
type=ChangeState
trigger1=animelemtime(76)>=0 && !var(0)
trigger1=backedgebodydist<0
value=7826

[State 3110, StateTypeSet: Idle]
type=StateTypeSet
trigger1=AnimElemTime(70)>=0 
moveType=I

[State 3110, Change]
type=ChangeState
trigger1=Win && animelem=13
trigger2=Win && animelem=65
value=3102
[State 3110, End]
type=ChangeState
trigger1=animelemtime(70)>0
trigger1=pos y>-vel y
value=3035
;------------------------------------------------------------------
;Max Road Roller
[Statedef 3150]
type=S
movetype=A
physics=N
anim=3150
poweradd=-2000
ctrl=0
velset=0,0
sprpriority=0
facep2=1

[State 3150, Reset]
type=varset
trigger1=!time
var(11)=0
[State 3150, Lv]
type=varset
trigger1=!time
var(24)=1

[State 3150, Reset]
type=varset
trigger1=numenemy && animelem=32
var(10)=Ifelse(enemynear,movetype=H,1,0)

[State 3150, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3150, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=119
[State 3100, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3150, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3150, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3150, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3150, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3150, SuperPause FX]
type=Helper
trigger1=animelem=1
helperType=Normal
stateNo=8510
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(9 *const(size.xscale)),ceil(-65 *const(size.yscale))
pausemovetime=255
supermovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3150, SuperPause]
type=SuperPause
trigger1=!time
time=119
movetime=119
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,1
darken=0

[State 3150, Voice]
type=PlaySnd
trigger1=animelem=24
value=3100,1
volumescale=255
channel=0

[State 3150, Helper]
type=Helper
trigger1=animelem=32
helpertype=normal ;player
name="Road-Roller"
ID=3105
stateno=3105
postype=p1
pos=0,0
ownpal=1
pausemovetime=80
supermovetime=80
size.xscale=1.0
size.yscale=1.0

[State 3150, PosSet]
type=PosSet
trigger1=animelem=32
x=enemynear,pos x +80*(enemy,facing)
y=enemynear,pos y -320
[State 3150, VelSet]
type=VelSet
trigger1=animelem=33
x=2
y=30

[State 3150, ScreenBound]
type=ScreenBound
trigger1=animelemtime(3)>0 && animelemtime(32)<0
value=0
movecamera=1,0
[State 3100, ScreenBound]
type=ScreenBound
trigger1=animelemtime(32)>0
value=0
movecamera=0,1

[State 3150, Width]
type=Width
trigger1=1 
edge=5,0 

[State 3150, Voice]
type=PlaySnd
trigger1=!time
value=3100,0
volumescale=255
channel=0
[State 3150, movehitvar]
type=varset
trigger1=movehit && numtarget 
trigger1=!(target, time) && (target, movetype=H)
var(11)=1
ignorehitpause=1

[State 3150, NotHitBy]
type=NotHitBy
trigger1=AnimElemTime(32)>=0
time=1
value=SCA

[State 3150, Jump Sound]
type=PlaySnd
trigger1=animelem=3
value=41, 0
[State 3150, Dust Helper]
type=Helper
trigger1=animelem=3
helperType=Normal
stateNo=8100
ID=8100
name="Jump Dust"
posType=P1
ownPal=1
[State 3150, PlayerPush]
type=PlayerPush
trigger1=animelemtime(3)>=0
value=0
ignorehitpause=1

[State 3150, StateTypeSet]
type=StateTypeSet
trigger1=animelem=3
statetype=A
[State 3150, VelSet]
type=VelSet
trigger1=animelem=3
y=-16

[State 3150, Hit]
type=HitDef
triggerall=!numtarget(3150)
trigger1=animelem=33
id=3150
attr=A,HA
damage=28,35
priority=4, hit
animtype=Hard
getpower=0,0
givepower=20,20
hitflag=MAFD
guardflag=HA
hitsound=S2,2
guardsound=S130,0
pauseTime=1,1
sparkNo=-1 + 0 * (var(33) :=8014)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=140), var(36) :=Ifelse(p2statetype=L,20,115)
ground.type=High
ground.slidetime=12
ground.hittime=12
guard.hittime=12
ground.velocity=0,-2
air.velocity=0,-2
down.velocity=0,0
guard.velocity=0
airguard.velocity=-1,-1
airguard.ctrlTime=10
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=1
yaccel=.5
fall.recover=0
forcestand=1
kill=0
guard.kill=0
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=4
envShake.freq=120
p2facing=1
p2stateno=3130
sprpriority=0

[State 3150, End]
type=ChangeState
trigger1=animelemtime(32)>0
trigger1=pos y>-65
value=Ifelse(var(11),3110,3101)
ctrl=0
;------------------------------------------------------------------
;The World-Time Stop
[Statedef 3200]
type=U
movetype=I
physics=N
anim=abs(Ifelse(statetype=A,3202,3200))
ctrl=0
velset=0,0
sprpriority=0
facep2=1

[State 3200, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3200, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=120
[State 3200, Super Cancel Flag]
type=VarSet
trigger1=!time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3200, Hyper Cancel Flag]
type=VarSet
trigger1=!time
var(22)=((prevstateno=[3000,4999]) && var(7)) || var(20)
[State 3200, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(time % 2) && time <=12
time=1
add=255,255,255
ignoreHitPause=1

[State 3200, PosSet]
type=PosFreeze
trigger1=1
ignorehitpause=1

[State 3200, SuperPause FX]
type=Helper
trigger1=animelem=6
helperType=Normal
stateNo=8520
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(Ifelse(anim=3200,-32,12)*const(size.xscale)),ceil(Ifelse(anim=3200,-75,-90)*const(size.yscale))
supermovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3200, SuperPause]
type=SuperPause
trigger1=!time
time=120
movetime=120
p2DefMul=1
unHittable=1
anim=-1
sound=s-1,0
darken=0
poweradd=0

[State 3200, Snd]
type=PlaySnd
trigger1=animelem=6
value=s8500,2
channel=3

[State 3200, NotHitBy]
type=NotHitBy
trigger1=1
time=1
value=SCA

[State 3200, Voice]
type=PlaySnd
trigger1=!time
value=s3200,0
channel=0

[State 3200, TheWorld]
type=Helper
trigger1=time=80
helpertype=normal
name="WorldFX"
stateno=3210
ID=3210
pos=ceil(0*const(size.xscale)),ceil(-100*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ignorehitpause=1
pausemovetime=65535
supermovetime=120
[State 3000, TheWorld]
type=Helper
trigger1=animelemtime(2)>=1 && animelemtime(9)<0 
trigger1=!Numhelper(1005) && !Numhelper(3205)
helpertype=normal
name="TheWorld"
stateno=3205
ID=3205
pos=ceil(30*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=1
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ignorehitpause=1
supermovetime=120
pausemovetime=65535
persistent=0

[State 3200, VarSet]
type=VarSet
triggerall=time>=120 && Numenemy
trigger1=enemynear,stateno!=[5100,5120]
trigger1=enemynear,time>2
var(0)=1
ignorehitpause=1

[State 3200, Change]
type=ChangeState
triggerall=var(0)
trigger1=Numhelper(1005)
trigger1=Helper(1005),stateno=3205
trigger1=Helper(1005),animtime=0
trigger2=Numhelper(3205)
trigger2=Helper(3205),animtime=0
trigger3=time>200
value=3201
;----------------------------------------------------------------------
;The World-Time Stopped
[Statedef 3201]
type=U
movetype=I
physics=N
anim=abs(Ifelse(statetype=A,3203,3201))
ctrl=0
velset=0,0

[State 3201, Stop Bitch]
type=VarSet
trigger1=!time
var(8)=300

[State 3201, PS Might Spam this]
type=VarSet
trigger1=!time && var(32)
var(28)=0

[State 3201, End]
type=ChangeState
trigger1=statetype=A && !animtime
value=51
ctrl=1
[State 3201, End]
type=ChangeState
trigger1=statetype!=A && !animtime
value=0
ctrl=1
;----------------------------------------------------------------------
;The World Comes to an End...
[Statedef 3202]
type=U
movetype=I
physics=N
ctrl=0
velset=0,0
sprpriority=3

[State 3502, Projectile]
type=Projectile
trigger1=!time && var(12) && !numtarget
ProjID=3560
projanim=3560
projscale=5,5
projremovetime=20
projhits=1
projpriority=7
projsprpriority=-99
postype=p1      
supermovetime=99999
pausemovetime=99999
; HitDef
attr=S,HP
id=3560
damage=0,0
animtype=Hard
hitflag=MAF
guardflag=
pausetime=1,1
sparkNo=-1
guard.sparkNo=-1
sparkXY=-1,-1
guardsound=s-1,0
ground.slidetime=16
ground.hittime=32
forcestand=1

[State 3202, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA

[State 3202, Damage]
type=VarSet
trigger1=!time 
fvar(13)=fvar(13)
ignorehitpause=1

[State 3202, Pos]
type=posset
trigger1=!time
y=0
[State 3202, ChangeAnim]
type=changeanim
trigger1=!time && statetype=C
value=12

[State 3202, ChangeAnim]
type=changeanim
triggerall=anim !=0
trigger1=anim=5 && !animtime
trigger2=anim=6 && !animtime
trigger3=anim=12 && !animtime
trigger4=anim!=0 && anim!=5 && anim!=6&& anim!=12 
value=0
persistent=0

[State 3202, StateTypeSet]
type=StateTypeSet
trigger1=anim=12 && !animtime
statetype=S
ignorehitpause=1

[State 3202, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA

[State 3202, Target]
type=TargetState
trigger1=Numtarget && !time
trigger1=target,stateno !=3215
value=3215

[State 3202, Change]
type=ChangeState
trigger1=!NumHelper(1005) && !Numhelper(3205)
trigger1=!animtime
value=3203
;----------------------------------------------------------------------
;End of The World
[Statedef 3203]
type=S
movetype=I
physics=N
anim=3204
ctrl=0
velset=0,0

[State 3203, NotHitBy]
type=NotHitBy
trigger1=1
value=SCA
[State 3203, Pos]
type=posset
trigger1=!time
y=0

[State 3203, VarSet]
type=VarSet
trigger1=time=150
var(0)=0
ignorehitpause=1

[State 3203, FX]
type=PlaySnd
trigger1=time=40
value=Ifelse(fvar(13)>100,3200,1310),Ifelse(fvar(13)>100,3,1)
channel=0
[State 3203, FX]
type=PlaySnd
trigger1=time=145
value=1300,2

[State 3203, Target]
type=TargetState
trigger1=Numtarget
trigger1=(target,stateno !=[4020,4021])
trigger1=time=150 && fvar(13)>100
value=4020
[State 3203, Target]
type=TargetState
trigger1=Numtarget && (fvar(13)=[50,99])
trigger1=target,stateno !=3220 
trigger1=time=150
value=3220
[State 3203, Target]
type=TargetState
trigger1=Numtarget && fvar(13)<50
trigger1=(target,stateno !=[4060,4062])
trigger1=time=150
value=4060

[State 3203, flames]
type=helper
trigger1=numtarget && numhelper(7180)<3
trigger1=Numhelper(3105)||Numhelper(3106)
helpertype=normal
stateno=7180
ID=7180
name="flames"
postype=p2
ownpal=1
facing=-1
ignorehitpause=1

[State 3203, Damage]
type=TargetLifeAdd
trigger1=time=20 && numtarget 
value=ceil(Ifelse((fvar(13)>150),-600,Ifelse((fvar(13)=[120,149]),-500,Ifelse((fvar(13)=[81,119]),-400,Ifelse((fvar(13)=[50,80]),-350,Ifelse((fvar(13)=[25,49]),-300,-10*fvar(13)))))))
absolute=1

[State 3203, Change]
type=ChangeState
triggerall=numtarget 
trigger1=target,stateno=3220 && target,time>2
trigger2=target,stateno=4020 && target,time>2
trigger3=target,stateno=4060 && target,time>2
value=7827

[State 3203, End]
type=ChangeState
trigger1=!numtarget && time=150
trigger2=time>180
value=0
ctrl=1
;------------------------------------------------------------------
;Punishment
[Statedef 3300]
type=S
movetype=A
physics=N
anim=3300
poweradd=cond(var(0)=1,0,-1000)
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3300, Reset]
type=VarSet
trigger1=animelemtime(3)<0
var(10)=0
[State 3300, Reset]
type=VarSet
trigger1=!time
var(11)=0
[State 3300, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3300, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=60
[State 3300, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3300, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=((prevstateno=[3000,4999]) && var(7)) || var(20)
[State 3300, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3300, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3300, CtrlSet]
type=CtrlSet
trigger1=var(0) 
value=0 

[State 3300, SuperPause FX]
type=Helper
trigger1=animelem=2
helperType=Normal
stateNo=8500
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(-18 * const(size.xScale)), ceil(-60 * const(size.yScale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3300, SuperPause]
type=SuperPause
trigger1=!time
time=60
movetime=60
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,0
darken=0
poweradd=0

[State 3300, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3300, Offset]
type=Offset
trigger1=animelemtime(2) >= 60 && animelemtime(3) < 0
x=1
persistent=3
[State 3300, Offset]
type=Offset
trigger1=animelemtime(2) >= 62 && animelemtime(3) < 0
x=-1
persistent=3

[State 3300, VarSet]
type=VarSet
trigger1=animelem=3 
var(11)=Ifelse(time>=155,4,Ifelse((time=[130,154]),3,Ifelse((time=[100,129]),2,Ifelse((time=[59,99]),1,0))))
ignorehitpause=1 
[State 3300, VarSet]
type=VarSet
triggerall=animelemtime(6)>=0 && animelemtime(10)<0 
trigger1=!AILevel && (command="Teleport1"||command="Teleport2"|| command="Teleport3")
trigger2=AILevel && p2movetype=H
var(10)=1
ignorehitpause=1 

[State 3300, Voice]
type=PlaySnd
trigger1=animelemtime(2)=34
value=s183,1
volumescale=50
channel=0
[State 3300, FX]
type=PlaySnd
trigger1 =animelem=5
value=s3301,0
channel=2

[State 3300, URRRRRY! FX]
type=helper
trigger1=animelem=6
helpertype=normal
stateno=3305
ID=3305
name="URRRRRYFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=0.5
size.yscale=0.5
ownpal=1
supermovetime=255
pausemovetime=255

[State 3300, ChangeAnim]
type=ChangeAnim
triggerall=animelemtime(2)>40 && animelemtime(3)<0 && numenemy 
trigger1=!AILevel && (command!="holda" && command!="holdb" && command!="holdc")
trigger2=AILevel && ((enemy,movetype=A)||(enemy,vel x> 0)||(p2bodydist x<100)||(enemynear,hitdefattr=SCA,AA,AT,AP))
trigger3=var(0)=1
value=3300
elem=3

[State 3300, NotHitBy]
type=NotHitBy
trigger1=time<=60
time=1
value=SCA

[State 3300, Dust Helper]
type=Helper
trigger1=AnimElem=4
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pos=ceil(-15*const(size.xscale)),ceil(0*const(size.yscale))
pausemovetime=255
supermovetime=255
ownPal=1

[State 3300, Width]
type=Width
trigger1=animelemtime(8)<1
edge=50,0
[State 3300, Width]
type=Width
trigger1=animelemtime(4)>0 && animelemtime(8)<1
player=45,0

[State 3300, VelSet]
type=VelSet
trigger1=animelem=4
x=10+(4*var(11))
[State 3300, VelMul]
type=VelMul
trigger1=animelemtime(6)>=0 && animelemtime(9)<0
x=0.9275
[State 3300, VelSet]
type=VelSet
trigger1=animelem=9
x=0

[State 3300, Skid Snd]
type=PlaySnd
trigger1=animelem=9
value=101,0
channel=1
[State 3300, Skid Dust]
type=Explod
trigger1=animelem=9
anim=8104
sprPriority=3
posType=P1
pos=ceil(95*const(size.xscale)),ceil(4*const(size.yscale))
vel=0,0
scale=0.5,0.5
supermovetime=-1
ownpal=1

[State 3300, Punch]
type=HitDef
trigger1=var(11)!=4
trigger2=var(11)=4 && Numenemy 
trigger2=(enemynear,stateno!=[120,155])
id=3300
attr=S, HA
damage=126+7*var(11),14+7*var(11)
priority=4, hit
animtype=Hard
getpower=0,0
givepower=72,36
hitflag=MAF
guardflag=H
hitsound=S2,8
guardsound=S130,0
pauseTime=20,20
sparkNo=-1 + 0 * (var(33) :=8014)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=105), var(36) :=Ifelse((animelemtime(7)<0),-60,-15)
ground.type=High
ground.slidetime=16
ground.hittime=64
guard.hittime=16
air.hittime=120
ground.velocity=-12,-5
air.velocity=-12,-3.49
guard.velocity=-10.52
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.42
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=4
envShake.freq=120
persistent=0

[State 3300, p2state]
type=targetstate
trigger1=movehit && numtarget(3300) && !var(0)
trigger1=target(3300),Movetype=H
ID=3300
value=270
ignorehitpause=1
persistent=0

[State 3300, Punch]
type=HitDef
trigger1=var(11)=4 && Numenemy 
trigger1=(enemynear,stateno=[120,155])
id=3301
attr=S, HA
damage=28,28
priority=4, hit
animtype=Hard
getpower=0,0
givepower=36,36
hitflag=MAF
guardflag=
hitsound=S130,0
guardsound=S130,0
pauseTime=20,20
sparkNo=-1 + 0 * (var(33) :=8001)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=105), var(36) :=Ifelse((animelemtime(7)<0),-60,-15)
ground.type=High
ground.slidetime=12
ground.hittime=32
guard.hittime=12
air.hittime=32
ground.velocity=0
air.velocity=0,-5
fall.yvelocity=-3
guard.velocity=-3
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
fall=0
forcestand=1
numhits=0
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=4
envShake.freq=120
p2stateno=3011
persistent=0

[State 3300, StateTypeSet: Idle]
type=StateTypeSet
trigger1=animelemTime(8)>=0
moveType=I

[State 3300, ScreenBound]
type=ScreenBound
triggerall=animelemtime(6)>0 && animelemtime(9)<6 
triggerall=roundstate=2 && var(10)=1 && !var(0)
trigger1=Numtarget(3300) && movehit
trigger1=!(target,IsHelper)
value=0
movecamera=0,1

[State 3300, Change]
type=changestate
triggerall=animelemtime(7)>0 && animelemtime(9)<6 
triggerall=roundstate=2 && var(10)=1 && !var(0)
trigger1=Numtarget(3300) && movehit
trigger1=!(target,IsHelper)
value=3301
ignorehitpause=1
[State 3300, CtrlSet]
type=CtrlSet
triggerall=animelemtime(7)>0 && roundstate=2 
trigger1=var(11)=4 && p2stateno=3011
trigger2=var(0)=1 
value=1

[State 3300, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;--------------------------------------------------------------------------
;Punishment Follow Up
[StateDef 3301]
type=S
moveType=A
physics=N
anim=3301
ctrl=0
velSet=0,0
sprPriority=-4
faceP2=1

[State 3301, SprPriority]
type=SprPriority
trigger1=animelem=10
value=2
[State 3301, NotHitBy]
type=NotHitBy
trigger1=animelemtime(12)<0
time=1
value=SCA
[State 3301, Reset]
type=VarSet
trigger1=!time
var(11)=0

[State 3301, Offset]
type=Offset
trigger1=animelemtime(9) >= 20 && animelemtime(10) < 0
x=1
persistent=3
[State 3301, Offset]
type=Offset
trigger1=animelemtime(9) >= 22 && animelemtime(10) < 0
x=-1
persistent=3

[State 3301, ChangeAnim]
type=ChangeAnim
triggerall=animelemtime(9)>8 && animelemtime(9)<179 
trigger1=!AILevel && (command!="holda" && command!="holdb" && command!="holdc")
trigger2=AILevel && (p2bodydist x=[10,90]) && (p2bodydist y=[-95,-35])
value=3301
elem=10

[State 3301, VarSet]
type=VarSet
trigger1=animelem=10
var(11)=Ifelse(time>=170,4,Ifelse((time=[120,169]),3,Ifelse((time=[80,119]),2,Ifelse((time=[49,79]),1,0))))
ignorehitpause=1

[State 3301, Snd]
type=PlaySnd
trigger1=animelem=1
value=S3301, 1
channel=2

[State 3301, Voice]
type=PlaySnd
trigger1=!time
value=s183,0
channel=0
[State 3301, Voice]
type=PlaySnd
trigger1=animelem=10
value=s0,4
channel=0

[State 3301, Follow FX]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3306
ID=3306
name="FollowFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=0.5
size.yscale=0.5
ownpal=1
supermovetime=255
pausemovetime=255

[State 3301, Snd]
type=PlaySnd
trigger1=animelem=10
value=s1,5
channel=1
[State 3301, Snd]
type=PlaySnd
trigger1=animelem=8
value=101,0
channel=4

[State 3301, Dust Helper]
type=Helper
trigger1=AnimElem=1||AnimElem=10
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pos=-15,0
pausemovetime=255
supermovetime=255
ownPal=1

[State 3301, Turn]
type=Turn
trigger1=animelem=7

[State 3301, Position]
type=PosAdd
trigger1=!time
x=24

[State 3301, VelSet]
type=VelSet
trigger1=animelem=2
x=20
[State 3301, VelSet]
type=VelSet
trigger1=animelem=12
x=0

[State 3301, width]
type=width
trigger1=animelemtime(2)>=0 && animelemtime(9)<0
edge=-30,-30
[State 3301, width]
type=width
trigger1=animelemtime(10)>=0 && animelemtime(11)<1
player=5,-40
edge=15,-5

[State 3301, ScreenBound]
type=ScreenBound
trigger1=animelemtime(8)<0
value=0
movecamera=0,1

[State 3301, VelMul]
type=VelMul
trigger1=animelemtime(6)>0 && animelemtime(12)<0
x=0.9725
[State 3301, pause]
type=pause
triggerall=time%3=0 && !var(0)
trigger1=animelemtime(2)>0 && animelemtime(10)<0
time=2
movetime=2

[State 3301, PlayerPush]
type=PlayerPush
trigger1=animelemtime(2)>=0 && animelemtime(8)<0
value=0

[State 3301, Kick]
type=HitDef
trigger1=animelem=11||animelem=12
id=3301
attr=S,HA
damage=56+7*var(11),14
priority=4, hit
animtype=Hard
getpower=0,0
givepower=36,36
hitflag=MAF
guardflag=M
hitsound=S2,9
guardsound=S130,0
pauseTime=12,12
sparkNo=-1 + 0 * (var(33) :=8014)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=105), var(36) :=-75
ground.type=High
ground.slidetime=12
ground.hittime=32
guard.hittime=16
air.hittime=120
ground.velocity=-24,-3
air.velocity=-24,-2.49
guard.velocity=-10.52
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=0.35
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
envShake.freq=120
p2facing=1
p2stateno=1325
persistent=0

[State 3301, StateTypeSet: Idle]
type=StateTypeSet
trigger1=animelemTime(13)>=0
moveType=I

[State 3301, ChangeState]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;------------------------------------------------------------------
;Max Punishment
[Statedef 3350]
type=S
movetype=A
physics=N
anim=3300
poweradd=-2000
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3350, Reset]
type=VarSet
trigger1=animelemtime(3)<0
var(10)=0
[State 3350, Reset]
type=VarSet
trigger1=!time
var(11)=0
[State 3350, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3350, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=60
[State 3350, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3350, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=((prevstateno=[3000,4999]) && var(7)) || var(20)
[State 3350, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3350, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3350, SuperPause FX]
type=Helper
trigger1=animelem=2
helperType=Normal
stateNo=8510
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(-18 * const(size.xScale)), ceil(-60 * const(size.yScale))
supermovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3350, SuperPause]
type=SuperPause
trigger1=!time
time=60
movetime=60
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,1
darken=0
poweradd=0

[State 3350, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3350, VarSet]
type=VarSet
trigger1=animelem=3 
var(11)=Ifelse(time>=155,4,Ifelse((time=[130,154]),3,Ifelse((time=[100,129]),2,Ifelse((time=[59,99]),1,0))))
ignorehitpause=1

[State 3350, Voice]
type=PlaySnd
trigger1=animelemtime(2)=34
value=s183,1
volumescale=70
channel=0
[State 3350, FX]
type=PlaySnd
trigger1 =animelem=5
value=s3301,0
channel=2

[State 3350, URRRRRY! FX]
type=helper
trigger1=animelem=6
helpertype=normal
stateno=3305
ID=3305
name="URRRRRYFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=0.5
size.yscale=0.5
ownpal=1
supermovetime=255
pausemovetime=255

[State 3350, ChangeAnim]
type=ChangeAnim
triggerall=animelemtime(2)>40 && animelemtime(3)<0 && numenemy
trigger1=!AILevel && (command!="holda" && command!="holdb" && command!="holdc")
trigger2=AILevel && ((enemy,movetype=A)||(enemy,vel x> 0)||(p2bodydist x<100)||(enemynear,hitdefattr=SCA,AA,AT,AP))
value=3300
elem=3

[State 3350, Offset]
type=Offset
trigger1=animelemtime(2) >= 60 && animelemtime(3) < 0
x=1
persistent=3
[State 3350, Offset]
type=Offset
trigger1=animelemtime(2) >= 62 && animelemtime(3) < 0
x=-1
persistent=3

[State 3350, NotHitBy]
type=NotHitBy
trigger1=time<=60
time=1
value=SCA

[State 3350, Dust Helper]
type=Helper
trigger1=AnimElem=4
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pos=ceil(-15*const(size.xscale)),ceil(0*const(size.yscale))
pausemovetime=255
supermovetime=255
ownPal=1

[State 3300, Width]
type=Width
trigger1=animelemtime(8)<1
edge=50,0
[State 3300, Width]
type=Width
trigger1=animelemtime(4)>0 && animelemtime(8)<1
player=45,0

[State 3350, VelSet]
type=VelSet
trigger1=animelem=4
x=14+(3*var(11))
[State 3350, VelMul]
type=VelMul
trigger1=animelemtime(6)>=0 && animelemtime(9)<0
x=0.9275
[State 3350, VelSet]
type=VelSet
trigger1=animelem=9
x=0

[State 3350, Skid Snd]
type=PlaySnd
trigger1=animelem=9
value=101,0
channel=1
[State 3350, Skid Dust]
type=Explod
trigger1=animelem=9
anim=8104
sprPriority=3
posType=P1
pos=ceil(95*const(size.xscale)),ceil(4*const(size.yscale))
vel=0,0
scale=0.5,0.5
supermovetime=-1
ownpal=1

[State 3350, Punch]
type=HitDef
trigger1=var(11)!=4
trigger2=var(11)=4 && Numenemy 
trigger2=(enemynear,stateno!=[120,155])
id=3350
attr=S, HA
damage=84+7*var(11),21+7*var(11)
priority=4, hit
animtype=Hard
getpower=0,0
givepower=72,36
hitflag=MAF
guardflag=H
hitsound=S2,8
guardsound=S130,0
pauseTime=20,20
sparkNo=-1 + 0 * (var(33) :=8014)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=105), var(36) :=Ifelse((animelemtime(7)<0),-60,-15)
ground.type=High
ground.slidetime=16
ground.hittime=64
guard.hittime=16
air.hittime=120
ground.velocity=-12,-5
air.velocity=-12,-3.49
guard.velocity=-10.52
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.42
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=4
envShake.freq=120
p2facing=1
p2stateno=270
persistent=0

[State 3350, Punch]
type=HitDef
trigger1=var(11)=4 && Numenemy 
trigger1=(enemynear,stateno=[120,155])
id=3350
attr=S, HA
damage=70,14
priority=4, hit
animtype=Hard
getpower=0,0
givepower=72,36
hitflag=MAF
guardflag=
hitsound=S2,8
guardsound=S130,0
pauseTime=20,20
sparkNo=-1 + 0 * (var(33) :=8014)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=105), var(36) :=Ifelse((animelemtime(7)<0),-60,-15)
ground.type=High
ground.slidetime=16
ground.hittime=64
guard.hittime=16
air.hittime=120
ground.velocity=-12,-5
air.velocity=-12,-3.49
guard.velocity=-10.52
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.42
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=4
envShake.freq=120
p2facing=1
p2stateno=270
persistent=0

[State 3350, StateTypeSet: Idle]
type=StateTypeSet
trigger1=animelemTime(8)>=0
moveType=I

[State 3350, Time]
type=Helper
triggerall=animelemtime(7)>1 && animelemtime(9)<6 
triggerall=roundstate=2 && !Numhelper(3355)
trigger1=Numtarget(3350) && movehit
trigger1=!(target,IsHelper)
helpertype=normal
name="TimeStop"
stateno=3355
ID=3355
pos=ceil(0*const(size.xscale)),ceil(-80*const(size.yscale))
postype=p1
ownpal=0
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ignorehitpause=1
pausemovetime=65535
supermovetime=65535

[State 3350, Change]
type=changestate
triggerall=animelemtime(7)>1 && animelemtime(9)<6 
triggerall=roundstate=2 
trigger1=Numtarget(3350) && movehit
trigger1=!(target,IsHelper)
value=3351
ignorehitpause=1

[State 3350, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;--------------------------------------------------------------------------
;Max Punishment Follow Up
[StateDef 3351]
type=S
moveType=A
physics=N
anim=3301
ctrl=0
velSet=0,0
sprPriority=-4
faceP2=1

[State 3351, SprPriority]
type=SprPriority
trigger1=animelem=10
value=2
[State 3351, NotHitBy]
type=NotHitBy
trigger1=animelemtime(12)<0
time=1
value=SCA

[State 3351, ChangeAnim]
type=ChangeAnim
trigger1=animelemtime(9)=100
value=3301
elem=10

[State 3351, Snd]
type=PlaySnd
trigger1=animelem=1
value=S3301, 1
channel=2

[State 3351, Voice]
type=PlaySnd
trigger1=!time
value=s183,0
channel=0
[State 3351, Voice]
type=PlaySnd
trigger1=animelem=10
value=s0,4
channel=0

[State 3351, Snd]
type=PlaySnd
trigger1=animelem=10
value=s1,5
channel=1
[State 3351, Snd]
type=PlaySnd
trigger1=animelem=8
value=101,0
channel=4

[State 3351, Dust Helper]
type=Helper
trigger1=AnimElem=1||AnimElem=10
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pos=-15,0
pausemovetime=255
supermovetime=255
ownPal=1

[State 3351, Turn]
type=Turn
trigger1=animelem=7

[State 3351, Position]
type=PosAdd
trigger1=!time
x=24

[State 3351, VelSet]
type=VelSet
trigger1=animelem=2
x=24
[State 3351, VelSet]
type=VelSet
trigger1=animelem=8
x=0

[State 3351, width]
type=width
trigger1=animelemtime(2)>=0 && animelemtime(9)<0
edge=-30,-30
[State 3351, width]
type=width
trigger1=animelemtime(9)>=0 && animelemtime(11)<1
player=5,-40
edge=15,-5

[State 3351, Follow FX]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3306
ID=3306
name="FollowFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=0.5
size.yscale=0.5
ownpal=1
supermovetime=255
pausemovetime=255

[State 3351, ScreenBound]
type=ScreenBound
trigger1=animelemtime(8)<0
value=0
movecamera=0,1

[State 3351, VelMul]
type=VelMul
trigger1=animelemtime(6)>0 && animelemtime(12)<0
x=0.9725
[State 3351, pause]
type=pause
triggerall=time%3=0  && !var(0)
trigger1=animelemtime(2)>0 && animelemtime(18)<0
time=5
movetime=5
ignorehitpause=1

[State 3351, PlayerPush]
type=PlayerPush
trigger1=animelemtime(2)>=0 && animelemtime(8)<0
value=0

[State 3351, Kick]
type=HitDef
trigger1=animelem=11||animelem=12
id=3350
attr=S,HA
damage=49,14
priority=4, hit
animtype=Hard
getpower=0,0
givepower=36,36
hitflag=MAF
guardflag=M
hitsound=S2,9
guardsound=S130,0
pauseTime=12,12
sparkNo=-1 + 0 * (var(33) :=8014)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=105), var(36) :=-75
ground.type=High
ground.slidetime=12
ground.hittime=64
guard.hittime=16
air.hittime=120
ground.velocity=-16,-5
air.velocity=-16,-4.49
guard.velocity=-10.52
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=0.35
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=12
envshake.ampl=5
envShake.freq=120
p2facing=-1
snap=50,-30
p2stateno=272
persistent=0

[State 3351, ChangeState]
type=ChangeState
trigger1=roundstate=2
trigger1=Numtarget(3350) && animelem=17
value=3352
[State 3352, End]
type=ChangeState
trigger1=!animtime 
value=0
ctrl=1
;------------------------------------------------------------------
; Punishment Checkmate
[Statedef 3352]
type=S
movetype=A
physics=N
anim=3000
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3352, NotHitBy]
type=NotHitBy
trigger1=animelemtime(12)<0
time=1
value=SCA
[State 3352, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3352, SuperPause]
type=SuperPause
trigger1=!time
time=49
movetime=49
p2DefMul=1
unHittable=1
anim=-1
sound=s-1,0
darken=0
poweradd=0

[State 3352, Lv]
type=VarSet
trigger1=!time
var(24)=0

[State 3352, Voice]
type=PlaySnd
trigger1=animelem=1
value=s190,5
volumescale=255
channel=0

[State 3352, Snd]
type=PlaySnd
trigger1=animelem=5
value=s3000,1
channel=1
[State 3352, Snd]
type=PlaySnd
trigger1=animelem=11
value=s3000,2
channel=1

[State 3352, width]
type=width
trigger1=animelem=11
player=42, 0
edge=55,0

[State 3352, Knife FX]
type=helper
trigger1=animelem=5
helpertype=normal
stateno=3015
ID=3015
name="KnifeFX"
postype=p1
pos=ceil(0 *const(size.xscale)),ceil(0 *const(size.yscale))
size.xscale=(0.5 * const(size.xscale))
size.yscale=(0.5 * const(size.yscale))
ownpal=0
supermovetime=255
pausemovetime=255

[State 3352, Knife 1]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(29 *const(size.xscale)), ceil(-1 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 2]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(38 *const(size.xscale)), ceil(-11 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 3]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(-15 *const(size.xscale)), ceil(-17 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 4]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(67 *const(size.xscale)), ceil(-19 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 5]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(40 *const(size.xscale)), ceil(-30 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 6]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(85 *const(size.xscale)), ceil(-36 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 7]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(61 *const(size.xscale)), ceil(-51 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 8]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(40 *const(size.xscale)), ceil(-52 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 9]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(46 *const(size.xscale)), ceil(-66 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 10]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(72 *const(size.xscale)), ceil(-72 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 11]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(76 *const(size.xscale)), ceil(-86 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 12]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(69 *const(size.xscale)), ceil(-93 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 13]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(44 *const(size.xscale)), ceil(-102 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 14]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(12 *const(size.xscale)), ceil(-121 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0
[State 3352, Knife 15]
type=helper
trigger1=animelem=11
helpertype=normal
stateno=3005
ID=3005
name="Knife"
postype=p1
pos=ceil(6 *const(size.xscale)), ceil(-128 *const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=0

[State 3352, StateTypeSet]
type=StateTypeSet
trigger1=animelemtime(14)>=0
movetype=I

[State 3352, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Checkmate Crush
[Statedef 3400]
type=S
movetype=A
physics=N
anim=3400
poweradd=cond(var(0)=1,0,-1000)
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3400, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3400, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=60
[State 3400, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3400, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3400, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3400, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3400, CtrlSet]
type=CtrlSet
trigger1=var(0) 
value=0 

[State 3400, NotHitBy]
type=NotHitBy
trigger1=anim=3400 && animelemtime(2)<0
trigger2=anim=3401
time=1
value=SCA

[State 3400, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3400, SuperPause FX]
type=Helper
trigger1=!time
helperType=Normal
stateNo=8500
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(0*const(size.xscale)),ceil(-80*const(size.yscale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3400, SuperPause]
type=SuperPause
trigger1=!time
time=60
movetime=60
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,0
darken=0
poweradd=0

[State 3400, Lv]
type=VarSet
trigger1=!time
var(24)=0

[State 3400, Voice]
type=PlaySnd
trigger1=time=45
value=s0,10004
channel=0
[State 3400, Voice]
type=PlaySnd
trigger1=anim=3401 && animelem=7
value=s190,3
channel=0
[State 3400, Snd]
type=PlaySnd
trigger1=anim=3401 && animelem=3
value=s3000,1
channel=1

[State 3400, Checkmate Crush]
type=helper
trigger1=anim=3400 && !Numhelper(1005)
trigger1=animelemtime(1)=4
helpertype=normal
stateno=3405
ID=3405
name="CheckmateCrush"
postype=p1
pos=ceil(0*const(size.xscale)), ceil(0*const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=1
supermovetime=60
pausemovetime=255

[State 3400, Turn]
type=turn
trigger1=anim=3401 && animelem=7
trigger1=Numhelper(3405)
trigger1=Helper(3405),facing!=facing
trigger2=anim=3401 && animelem=7
trigger2=Numhelper(1005)
trigger2=Helper(1005),anim=3405
trigger2=Helper(1005),facing!=facing
[State 3400, PosSet]
type=Posadd
trigger1=anim=3401 && animelem=7
trigger1=Numhelper(3405)
x=-80
[State 3400, PosSet]
type=Posadd
trigger1=anim=3401 && animelem=7
trigger1=Numhelper(1005)
trigger1=Helper(1005),anim=3405
x=-80

[State 3400, width]
type=width
trigger1=anim=3400 
trigger1=animelemtime(2)>=0 && animelemtime(5)<0
player=90,0

[State 3400, ScreenBound]
type=ScreenBound
trigger1=anim=3401
trigger1=animelemtime(6)>=0 && animelemtime(13)<1
value=1
movecamera=0,1
[State 3400, Width]
type=Width
trigger1=anim=3401
trigger1=animelemtime(6)>=0 && animelemtime(13)<1
edge=0,20

[State 3400, Bgpalfx]
type=Bgpalfx
trigger1=anim=3401 && Numhelper(3405) && !var(0)
trigger1=animelemtime(5)>=9 && animelemtime(6)<11
trigger2=anim=3401 && Numhelper(1005) && !var(0)
trigger2=animelemtime(5)>=9 && animelemtime(6)<11
time=1
invertall=1
color=0
ignorehitpause=1

[State 3400, AS]
type=AssertSpecial
trigger1=anim=3401 && Numhelper(3405) && !var(0)
trigger1=animelemtime(6)>=0 && animelemtime(7)<0
trigger2=anim=3401 && Numhelper(1005) && !var(0)
trigger2=animelemtime(6)>=0 && animelemtime(7)<0
flag=nomusic
flag2=timerfreeze
ignorehitpause=1
ignorehitpause=1

[State 3400, Pause]
type=Pause
trigger1=anim=3401 && Numhelper(3405) && !var(0)
trigger1=animelemtime(6)>=0 && animelemtime(6)<12
trigger2=anim=3401 && Numhelper(1005) && !var(0)
trigger2=animelemtime(6)>=0 && animelemtime(6)<12
time=2
movetime=2

[State 3400, StateTypeSet]
type=StateTypeSet
trigger1 =anim=3400 && animelemtime(8)>=0
movetype=I

[State 3400, Change]
type=ChangeAnim
trigger1=anim=3400 && animelemtime(2)>=1 && animelemtime(8)<0
trigger1=Numhelper(3405)
trigger1=Helper(3405),stateno=3406
trigger1=Helper(3405),var(3)
trigger2=anim=3400 && animelemtime(2)>=1 && animelemtime(8)<0
trigger2=Numhelper(1005)
trigger2=Helper(1005),stateno=3406
trigger2=Helper(1005),var(3)
value=3401
[State 3400, Change]
type=ChangeAnim
trigger1=anim=3400 && animelemtime(7)>=1 && animelemtime(8)<0
trigger1=time>120
trigger1=!Numhelper(3405)||!Numhelper(1005)
value=3400
elem=8

[State 3400, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Max Checkmate Crush
[Statedef 3450]
type=S
movetype=A
physics=N
anim=3400
poweradd=-2000
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 3450, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3450, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=60
[State 3450, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3450, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3450, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3450, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3450, NotHitBy]
type=NotHitBy
trigger1=anim=3400 && animelemtime(2)<0
trigger2=anim=3401
time=1
value=SCA

[State 3450, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3450, SuperPause FX]
type=Helper
trigger1=!time
helperType=Normal
stateNo=8510
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(0*const(size.xscale)),ceil(-80*const(size.yscale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3450, SuperPause]
type=SuperPause
trigger1=!time
time=60
movetime=60
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,1
darken=0
poweradd=0

[State 3450, Lv]
type=VarSet
trigger1=!time
var(24)=1

[State 3450, Voice]
type=PlaySnd
trigger1=time=45
value=s0,10004
channel=0
[State 3450, Voice]
type=PlaySnd
trigger1=anim=3401 && animelem=7
value=s186,0
channel=0
[State 3450, Snd]
type=PlaySnd
trigger1=anim=3401 && animelem=3
value=s3000,1
channel=1

[State 3450, Checkmate Crush]
type=helper
trigger1=anim=3400 && !Numhelper(1005)
trigger1=animelemtime(1)=4
helpertype=normal
stateno=3405
ID=3405
name="CheckmateCrush"
postype=p1
pos=ceil(0*const(size.xscale)), ceil(0*const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=1
supermovetime=60
pausemovetime=255
[State 3450, Max Checkmate Crush]
type=helper
trigger1=anim=3401 && animelemtime(1)=20 
helpertype=normal
stateno=3410
ID=3410
name="MaxWorld"
postype=p1
pos=ceil(0*const(size.xscale)), ceil(0*const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=1
pausemovetime=255

[State 3450, Turn]
type=turn
trigger1=anim=3401 && animelem=7
trigger1=Numhelper(3405)
trigger1=Helper(3405),facing!=facing
trigger2=anim=3401 && animelem=7
trigger2=Numhelper(1005)
trigger2=Helper(1005),anim=3405
trigger2=Helper(1005),facing!=facing
[State 3450, PosSet]
type=Posadd
trigger1=anim=3401 && animelem=7
trigger1=Numhelper(3405)
x=-100
[State 3450, PosSet]
type=Posadd
trigger1=anim=3401 && animelem=7
trigger1=Numhelper(1005)
trigger1=Helper(1005),anim=3405
x=-100

[State 3450, width]
type=width
trigger1=anim=3400 
trigger1=animelemtime(2)>=0 && animelemtime(5)<0
player=90,0

[State 3450, ScreenBound]
type=ScreenBound
trigger1=anim=3401
trigger1=animelemtime(6)>=0 && animelemtime(13)<1
value=1
movecamera=0,1
[State 3450, Width]
type=Width
trigger1=anim=3401
trigger1=animelemtime(6)>=0 && animelemtime(13)<1
edge=0,20

[State 3450, Bgpalfx]
type=Bgpalfx
trigger1=anim=3401 && Numhelper(3405) && !var(0)
trigger1=animelemtime(5)>=9 && animelemtime(6)<11
trigger2=anim=3401 && Numhelper(1005) && !var(0)
trigger2=animelemtime(5)>=9 && animelemtime(6)<11
time=1
invertall=1
color=0
ignorehitpause=1

[State 3450, AS]
type=AssertSpecial
trigger1=anim=3401 && Numhelper(3405) && !var(0)
trigger1=animelemtime(6)>=0 && animelemtime(7)<0
trigger2=anim=3401 && Numhelper(1005) && !var(0)
trigger2=animelemtime(6)>=0 && animelemtime(7)<0
flag=nomusic
flag2=timerfreeze
ignorehitpause=1
ignorehitpause=1

[State 3450, Pause]
type=Pause
trigger1=anim=3401 && Numhelper(3405) && !var(0)
trigger1=animelemtime(6)>=0 && animelemtime(6)<12
trigger2=anim=3401 && Numhelper(1005) && !var(0)
trigger2=animelemtime(6)>=0 && animelemtime(6)<12
time=2
movetime=2

[State 3450, StateTypeSet]
type=StateTypeSet
trigger1 =anim=3400 && animelemtime(8)>=0
movetype=I

[State 3450, Change]
type=ChangeAnim
trigger1=anim=3400 && animelemtime(2)>=1 && animelemtime(8)<0
trigger1=Numhelper(3405)
trigger1=Helper(3405),stateno=3406
trigger1=Helper(3405),var(3)
trigger2=anim=3400 && animelemtime(2)>=1 && animelemtime(8)<0
trigger2=Numhelper(1005)
trigger2=Helper(1005),stateno=3406
trigger2=Helper(1005),var(3)
value=3401
[State 3450, Change]
type=ChangeAnim
trigger1=anim=3400 && animelemtime(7)>=1 && animelemtime(8)<0
trigger1=time>120
trigger1=!Numhelper(3405)||!Numhelper(1005)
value=3400
elem=8

[State 3450, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Dio's Judgment
[Statedef 3500]
type=S
movetype=A
physics=N
anim=3500
poweradd=-3000
ctrl=0
velset=0,0
sprpriority=2
facep2=1

[State 3500, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3500, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=60
[State 3500, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3500, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3500, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3500, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3500, NotHitBy]
type=NotHitBy
trigger1=anim=3500 && animelemtime(2)<0
trigger2=anim=3501
time=1
value=SCA

[State 3500, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3500, SuperPause FX]
type=Helper
trigger1=!time
helperType=Normal
stateNo=8520
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(0*const(size.xscale)),ceil(-76*const(size.yscale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3500, SuperPause]
type=SuperPause
trigger1=!time
time=60
movetime=60
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,2
darken=0
poweradd=0

[State 3500, Max Checkmate Crush]
type=helper
trigger1=anim=3501 && animelemtime(36)=20 
helpertype=normal
stateno=3510
ID=3510
name="MaxWorld"
postype=p1
pos=ceil(0*const(size.xscale)), ceil(0*const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=1
pausemovetime=255

[State 3500, Lv]
type=VarSet
trigger1=!time
var(24)=1

[State 3500, Voice]
type=PlaySnd
trigger1=time=50
value=s3500,0
volumescale=255
channel=0
[State 3500, Voice]
type=PlaySnd
trigger1=anim=3501 && animelem=37
value=s3500,1
volumescale=255
channel=0
[State 3500, Voice]
type=PlaySnd
trigger1=anim=3501 && animelem=15
value=s0,2
volumescale=255
channel=0
[State 3500, Voice]
type=PlaySnd
trigger1=anim=3501 && animelem=18
value=s0,3
volumescale=255
channel=0
[State 3500, Voice]
type=PlaySnd
trigger1=anim=3501 && animelem=24
value=s0,4
volumescale=255
channel=0

[State 3500, Snd]
type=PlaySnd
trigger1=anim=3501 && animelem=39
value=s3000,3
channel=1

[State 3500, Judgment]
type=helper
trigger1=anim=3500 && animelemtime(1)=2 
helpertype=normal
stateno=3505
ID=3405
name="Judgment"
postype=p1
pos=ceil(0*const(size.xscale)), ceil(0*const(size.yscale))
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ownpal=1
supermovetime=60
pausemovetime=255

[State 3500, PosSet]
type=Posadd
triggerall=anim=3501 && Numhelper(3405)
trigger1=Numhelper(3405) && animelem=36
x=-40
[State 3500, PosSet]
type=Posadd
triggerall=anim=3501 && Numhelper(3405)
trigger1=Numhelper(3405) && animelem=43
x=-100

[State 3506, Dust Helper]
type=Helper
triggerall=anim=3501
trigger1=animelem=2||animelem=18||animelem=25
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pos=ceil(-20*const(size.xscale)), ceil(0*const(size.yscale))
ownPal=0

[State 3506, Vel]
type=VelSet
trigger1=anim=3501 && animelem=3
x=22
[State 3506, Vel]
type=VelSet
trigger1=anim=3501 && animelem=18
x=12
[State 3506, Vel]
type=VelSet
trigger1=anim=3501 && animelem=24
x=4
[State 3506, Vel]
type=VelSet
trigger1=anim=3501 && animelem=30
x=3

[State 3506, PosAdd]
type=PosAdd
trigger1=anim=3501 && animelem=10
x=40

[State 3506, Vel]
type=VelMul
triggerall=anim=3501
trigger1=animelemtime(3)>1 && animelemtime(6)<0
trigger2=animelemtime(18)>1 && animelemtime(20)<0
trigger3=animelemtime(24)>1 && animelemtime(27)<0
trigger4=animelemtime(30)>1 && animelemtime(33)<0
x=0.9275
[State 3506, Vel]
type=VelSet
triggerall=anim=3501
trigger1=animelem=6||animelem=17||animelem=20||animelem=27||animelem=33
x=0

[State 3500, Turn]
type=turn
triggerall=anim=3501 && Numhelper(3405)
triggerall=Helper(3405),facing!=facing
trigger1=animelem=36||animelem=43
[State 3500, width]
type=width
trigger1=anim=3501
edge=60,0

[State 3500, ScreenBound]
type=ScreenBound
trigger1=anim=3501 && Numhelper(3405) 
trigger1=animelemtime(36)>=0 && animelemtime(44)<0
value=1
movecamera=0,1
[State 3500, Width]
type=Width
triggerall=anim=3501 && Numhelper(3405) 
trigger1=animelemtime(36)>=0 && animelemtime(37)<0
trigger2=animelemtime(43)>=0 && animelemtime(44)<0
edge=0,5

[State 3500, Bgpalfx]
type=Bgpalfx
triggerall=anim=3501 && Numhelper(3405) 
trigger1=animelemtime(35)>1 && animelemtime(37)<0
trigger2=animelemtime(42)>19 && animelemtime(44)<0
time=1
invertall=1
color=0
ignorehitpause=1

[State 3500, AS]
type=AssertSpecial
triggerall=anim=3501 && Numhelper(3405) 
trigger1=animelemtime(36)>=0 && animelemtime(37)<0
trigger2=animelemtime(43)>=0 && animelemtime(44)<0
flag=nomusic
flag2=timerfreeze
ignorehitpause=1
ignorehitpause=1

[State 3500, Pause]
type=Pause
triggerall=anim=3501 && Numhelper(3405) 
trigger1=animelemtime(36)>=0 && animelemtime(36)<19
trigger2=animelemtime(43)>=0 && animelemtime(43)<11
time=2
movetime=2

[State 3500, StateTypeSet]
type=StateTypeSet
trigger1 =anim=3500 && animelemtime(8)>=0
movetype=I

[State 3500, Change]
type=ChangeAnim
trigger1=anim=3500 && animelemtime(3)>=1 && animelemtime(8)<0
trigger1=Numhelper(3405)
trigger1=Helper(3405),stateno=3506
trigger1=Helper(3405),animelemtime(29)>=1
value=3501
[State 3500, Change]
type=ChangeAnim
trigger1=anim=3500 && animelemtime(7)>=1 && animelemtime(8)<0
trigger1=!Numhelper(3405)
value=3500
elem=8

[State 3500, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;---------------------------------------------------------------------
;Bloody Summoning
[Statedef 3600]
type=S
movetype=A
physics=N
anim=3600
poweradd=-3000
velset=0,0
ctrl=0
sprpriority=2
facep2=1

[State 3600, No Corner Push]
type=VarSet
trigger1=!time
fvar(5)=0
[State 3600, Unguardable]
type=VarSet
trigger1=!time && NumEnemy
trigger1=(EnemyNear, StateNo !=[120,155])
var(17)=60
[State 3600, Super Cancel Flag]
type=VarSet
trigger1=!Time
var(21)=(PrevStateNo=[1000,2999]) && var(6)
[State 3600, Hyper Cancel Flag]
type=VarSet
trigger1=!Time
var(22)=(PrevStateNo=[3000,4999]) && var(7)
[State 3600, Super Cancel Flash]
type=PalFX
trigger1=var(21) || var(22)
trigger1=!(Time % 2) && Time <=12
time=1
add=255,255,255
ignoreHitPause=1
[State 3600, Super Cancel Juggle Reset]
type=VarSet
trigger1=!Time
trigger1=var(21) || var(22)
var(15)=0
ignoreHitPause=1

[State 3500, NotHitBy]
type=NotHitBy
trigger1=animelemtime(5)<1
time=1
value=SCA

[State 3600, SuperPause FX]
type=Helper
trigger1=animelem=2
helperType=Normal
stateNo=8520
ID=8500
name="Superpause FX"
posType=P1
pos=ceil(0*const(size.xscale)),ceil(-90*const(size.yscale))
supermovetime=255
pausemovetime=255
size.xScale=1
size.yScale=1
ownPal=1
[State 3600, SuperPause]
type=SuperPause
trigger1=!time
time=60
movetime=60
p2DefMul=1
unHittable=1
anim=-1
sound=s8500,2
darken=0
poweradd=0

[State 3600, PosSet]
type=PosSet
trigger1=!time
y=0

[State 3600, reset]
type=varset
trigger1=!time
var(29)=1
ignorehitpause=1
[State 3600, reset]
type=varadd
trigger1=animelemtime(4)<0
var(29)=1
ignorehitpause=1

[State 3600, FadeIn]
type=Trans
trigger1=var(29)
trans=addalpha
alpha=0+(32*var(29)),256-(32*var(29))
ignorehitpause=1

[State 3600, Width]
type=Width
trigger1=1
edge=15,0
ignorehitpause=1

[State 3600, reset]
type=varset
trigger1=animelemtime(4)<0
var(3)=0
ignorehitpause=1
[State 3600, VarSet]
type=VarSet
trigger1=animelemtime(3)>=0 
var(2)=0
ignorehitpause=1
[State 3600, FadeIn]
type=VarAdd
trigger1=animelemtime(3)<0 
var(2)=1

[State 3600, Counter Flag]
type=VarSet
trigger1=NumEnemy && !movecontact
var(11)=Ifelse(EnemyNear, MoveType=A,1,0)
ignoreHitPause=1

[State 3600, Switch]
type=Helper
trigger1=!time
helpertype=normal
name="DIO"
stateno=3610
ID=3405
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
ownpal=0
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))
ignorehitpause=1
supermovetime=65535
pausemovetime=65535

[State 3600,Woosh]
type=PlaySnd
trigger1=animelem=5 
value=s1,2
channel=4

[State 3600, reset]
type=varset
trigger1=animelemtime(4)<0
var(3)=0
ignorehitpause=1

[State 3600, Dust Helper]
type=Helper
trigger1=AnimElem=5
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pos=ceil(-10*const(size.xscale)),ceil(0*const(size.yscale))
ownPal=1

[State 3600, movehitvar]
type=varset
trigger1=movecontact && numtarget
trigger1=!(target, ishelper)
var(3)=1
ignorehitpause=1

[State 3600, Voice]
type=PlaySnd
trigger1=AnimElem=4
value=s3500,1
channel=0

[State 3600, Skid Dust]
type=Explod
trigger1=animelem=6
anim=8104
sprPriority=3
posType=P1
pos=5,1
scale=0.5,0.5
ownpal=1
[State 3600, Skid Snd]
type=PlaySnd
trigger1=animelem=6
value=101,0
channel=5

[State 3600, Vel]
type=VelSet
trigger1=AnimElem=5 
x=8
[State 3600, Position]
type=Posfreeze
trigger1=var(3)
value=1
ignorehitpause=1
[State 3600, Vel]
type=VelSet
trigger1=animelem=6
x=0
[State 3600, Vel]
type=VelMul
trigger1=animelemtime(5)>0 && animelemtime(6)<0
x=0.98275

[State 3600, hit]
type=hitdef
trigger1=animelem=5 && numenemy
trigger1=(enemynear,stateno!=[150,155])
id=3600
priority=1,Hit
attr=S,HT
hitflag=M-
pausetime=0,0
sparkNo=-1
guard.sparkNo=-1
sparkXY=-10 + 0 * (var(35) :=70), var(36) :=-60
hitsound=s2,2
guardsound=s130,0
fall=0
getpower=0,0
givepower=36,36
forcestand=1
p2facing=1
p1stateno=3601
p2stateno=3620
envshake.time=32
envshake.ampl=Ifelse(random<500,7,-7)
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48

[State 3600, StateTypeSet: Idle]
type=StateTypeSet
trigger1=animelemtime(6)>=0
moveType=I

[State 3600, Change]
type=changestate
trigger1=!animtime
value=0
ctrl=1
;------------------------------------------------------------------
;Bloody Summoning(Success)
[Statedef 3601]
type=S
movetype=A
physics=N
ctrl=0
velset=0,0
facep2=1

[State 3601, Counter FX]
type=Helper
trigger1=!time && var(11)
trigger1=!Numhelper(8290)
helperType=Normal
stateNo=8290
ID=8290
name="Counter FX"
posType=P2
pos=ifElse(P2Dist x < 0, 0, ifElse(P2Dist x < 20, ceil(P2Dist x), 20)), -50
ownpal=0
pauseMoveTime=65535
superMoveTime=65535
ignoreHitPause=1

[State 3601, HitSpark]
type=Helper
trigger1=Numtarget && !time
helperType=Normal
stateNo=8014
ID=8000
name="Spark"
posType=P1
pos=ceil(70*const(size.xscale)),ceil(-60*const(size.yscale))
facing=-1
ownPal=0
size.xScale=1.0
size.yScale=1.0
ignoreHitPause=1
pausemovetime=65535
supermovetime=65535

[State 3601, PosSet]
type=PosSet
trigger1=1
y=0

[State 3601,BlackBG]
type=helper
trigger1=!time||time=140
helpertype=normal
stateno=3550
ID=3550
name="BlackFG"
postype=Back
supermovetime=99999
pausemovetime=99999
ownpal=0
ignorehitpause=1
size.xScale=5
size.yScale=5
[State 3601, Summon]
type=helper
trigger1=time=32
helpertype=normal
stateno=3605
ID=3605
name="World"
postype=Back
supermovetime=99999
pausemovetime=99999
ownpal=0
ignorehitpause=1
size.xScale=1.0
size.yScale=1.0

[State 3601, Anim]
type=changeanim
trigger1=anim=9999 && time>=160
value=3601

[State 3601,BlackBG]
type=helper
trigger1=anim=9999 && !Numhelper(3630)
helpertype=normal
stateno=3630
ID=3630
name="Hand"
postype=back
pos=ceil(100*const(size.xscale)),ceil(-160*const(size.yscale))
supermovetime=99999
pausemovetime=99999
ownpal=1
ignorehitpause=1
size.xscale=(1.0 * const(size.xscale))
size.yscale=(1.0 * const(size.yscale))

[State 3601, Safety]
type=ChangeState
trigger1=!Time && !NumTarget
value=0
ctrl=1
[State 3601, Anim]
type=changeanim
trigger1=anim=3600 && !animtime
value=9999

[State 3601, NotHitBy]
type=NotHitBy
trigger1=1
time=1
value=SCA

[State 3601, P2Facing]
type=targetfacing
trigger1=!Time && NumTarget
value=-1
[State 3601, TargetBind]
type=Bindtotarget
trigger1=NumTarget && time=60
pos=60,0,foot
ignorehitpause =1

[State 3601, Voice]
type=PlaySnd
trigger1=anim=3601 && animelemtime(3)=45
value=s190,7
channel=0
[State 3601, Voice]
type=PlaySnd
trigger1=anim=3601 && animelemtime(3)=240
value=s3100,2
channel=0

[State 3601, hitsound]
type=PlaySnd
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
value=s192,0
channel=3

[State 3601, hitsound]
type=PlaySnd
triggerall=NumTarget && anim =3601 
trigger1=animelem=5
value=s1,2
channel=5

[State 3601, EnvShake]
type=EnvShake
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
time=18
ampl=Ifelse(random<500,-5,5)
[State 3601, EnvShake]
type=EnvShake
trigger1=NumTarget && anim =3601  
trigger1=animelemtime(3)=275
trigger2=Numtarget && Numhelper(3630)
trigger2=Helper(3630),animelemtime(3)=1
time=48
ampl=Ifelse(random<500,-6,6)

[State 3601, TargetBind]
type=TargetBind
trigger1=NumTarget && anim=3601
trigger1=animelemtime(2)>=0 && animelemtime(3)<0
pos=ceil(44*const(size.xscale)),ceil(-120*const(size.yscale))
[State 3601, TargetBind]
type=TargetBind
trigger1=NumTarget && anim=3601
trigger1=animelemtime(3)>=0 && animelemtime(4)<0
pos=ceil(44*const(size.xscale)),ceil(-112*const(size.yscale))
[State 3601, TargetBind]
type=TargetBind
trigger1=NumTarget && anim=3601
trigger1=animelemtime(4)>=0 && animelemtime(5)<0
pos=ceil(25*const(size.xscale)),ceil(-100*const(size.yscale))
[State 3601, TargetBind]
type=TargetBind
trigger1=NumTarget && anim=3601
trigger1=animelem=5
pos=ceil(100*const(size.xscale)),ceil(-72*const(size.yscale))

[State 3601, p2state]
type=targetstate
trigger1=NumTarget && anim=9999
trigger1=target,stateno!=3621
value=3621
[State 3601, p2state]
type=targetstate
trigger1=NumTarget && anim=3601
trigger1=animelem=1
value=3622
[State 3601, p2state]
type=targetstate
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
value=3623
[State 3601, p2state]
type=targetstate
trigger1=NumTarget && anim=3601
trigger1=animelem=5
value=3421

[State 3601, Damage]
type=LifeAdd
triggerall=NumTarget && anim =3601 
triggerall=var(46)
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
value=Ifelse(var(46)=2,42,21)
absolute=1

[State 3601, Damage]
type=TargetLifeAdd
trigger1=Numtarget && Numhelper(3630)
trigger1=Helper(3630),animelemtime(3)=1
value=Floor(-42*fvar(10))
absolute=1
kill=0
[State 3601, Damage]
type=TargetLifeAdd
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
value=Floor(-28*fvar(10))
absolute=1
kill=0
[State 3601, Damage]
type=TargetLifeAdd
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=275
value=Floor(-77*fvar(10))
absolute=1

[State 3601, Blood (Additive)]
type=Explod
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=95
trigger3=animelemtime(3)=155
trigger4=animelemtime(3)=215
trigger5=animelemtime(3)=275
anim=8051
id=8051
sprPriority=5
postype=p1
pos=ceil(50*const(size.xscale)),ceil(-110*const(size.yscale))
facing=-1
scale=0.5,0.5
ownPal=0
[State 3601, Blood (Subtractive)]
type=Explod
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=95
trigger3=animelemtime(3)=155
trigger4=animelemtime(3)=215
trigger5=animelemtime(3)=275
anim=8061
id=8061
sprPriority=3
postype=p1
pos=ceil(50*const(size.xscale)),ceil(-110*const(size.yscale))
facing=-1
scale=0.5,0.5
ownPal=0

[State 3601, Blood (Additive)]
type=Explod
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
anim=8052
id=8052
sprPriority=5
postype=p1
pos=ceil(50*const(size.xscale)),ceil(-110*const(size.yscale))
scale=0.5,0.5
ownPal=0
[State 3601, Blood (Subtractive)]
type=Explod
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
anim=8062
id=8062
sprPriority=3
postype=p1
pos=ceil(50*const(size.xscale)),ceil(-110*const(size.yscale))
scale=0.5,0.5
ownPal=0

[State 3601, Blood (Additive)]
type=Explod
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=65
trigger2=animelemtime(3)=125
trigger3=animelemtime(3)=185
trigger4=animelemtime(3)=245
anim=8051
id=8051
sprPriority=5
postype=p1
pos=ceil(50*const(size.xscale)),ceil(-110*const(size.yscale))
scale=0.5,0.5
ownPal=0
[State 3601, Blood (Subtractive)]
type=Explod
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=65
trigger2=animelemtime(3)=125
trigger3=animelemtime(3)=185
trigger4=animelemtime(3)=245
anim=8061
id=8061
sprPriority=3
postype=p1
pos=ceil(50*const(size.xscale)),ceil(-110*const(size.yscale))
scale=0.5,0.5
ownPal=0

[State 3601, TargetPowerAdd]
type=TargetPowerAdd
trigger1=Numtarget && Numhelper(3630)
trigger1=Helper(3630),animelemtime(3)=1
value=36
[State 3601, TargetPowerAdd]
type=TargetPowerAdd
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
value=36
[State 3601, HitAdd]
type=HitAdd
trigger1=Numtarget && Numhelper(3630)
trigger1=Helper(3630),animelemtime(3)=1
value=1
[State 3601, HitAdd]
type=HitAdd
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
value=1
[State 3601, VarAdd]
type=VarAdd
trigger1=Numtarget && Numhelper(3630)
trigger1=Helper(3630),animelemtime(3)=1
var(13)=1
[State 3601, VarAdd]
type=VarAdd
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
var(13)=1
[State 3601, Juggle]
type=VarAdd
triggerall=NumTarget && anim =3601 
trigger1=animelemtime(3)=9
trigger2=animelemtime(3)=65
trigger3=animelemtime(3)=95
trigger4=animelemtime(3)=125
trigger5=animelemtime(3)=155
trigger6=animelemtime(3)=185
trigger7=animelemtime(3)=215
trigger8=animelemtime(3)=245
trigger9=animelemtime(3)=275
var(15)=1
ignoreHitPause=1
[State 3601, Juggle]
type=VarSet
trigger1=NumTarget 
trigger1=anim=3601 && (animelem=5)
var(16)=1
ignoreHitPause=1

[State 3601, End]
type=ChangeState
trigger1=anim=3601 && !animtime
value=0
ctrl=1